const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CsZy2wOR.js","./9S2XGRg9.js","./entry.Cz7mG32V.css"])))=>i.map(i=>d[i]);
import{g as Or,C as Et,m as ht,ai as xr,l as Mt,q as oe,c as It,a8 as Jn,a_ as ti,Q as Qn,u as Ls,s as Gr,b as Fs,A as Ps,e as ot,w as $r,L as ke,p as Ce,W as Rt,aE as ni,M as st,n as Ge,N as Ut,a1 as es,aa as Cr,ad as Sr,$ as vi,aq as zs,ao as Us,ac as ts,aD as Ms,cH as qs,eS as Zr,eT as Ws,eU as js,cf as Xr,eV as Vs,b7 as Hs,eW as Gs,eX as $s,y as Zs,ab as Xs,a0 as Ys,eY as Oi,cv as Bi,eZ as Li,e_ as Ks,e$ as Js,_ as Qs}from"./9S2XGRg9.js";import{_ as ea}from"./Bu69eulW.js";import{_ as ta}from"./D3om2a5D.js";import{_ as ia}from"./D2HD6JMx.js";import{c as qt}from"./BxkXgiy8.js";import{B as Fi}from"./dJIpU6wD.js";import{a as ra,b as na,e as sa,c as Yr,p as Kr}from"./2HupUEEh.js";import{u as aa}from"./CFNaZjOu.js";import{g as oa}from"./BFNvVrx5.js";(function(){try{var E=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};E.SENTRY_RELEASE={id:"cd189bad150b481aa5ecb2e95de26ec677010e55"}}catch{}})();try{(function(){var E=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new E.Error().stack;e&&(E._sentryDebugIds=E._sentryDebugIds||{},E._sentryDebugIds[e]="12464b53-4794-42b5-9d66-9de114a348c3",E._sentryDebugIdIdentifier="sentry-dbid-12464b53-4794-42b5-9d66-9de114a348c3")})()}catch{}const ua=["src"],la=Or({__name:"ImgPreviewer",props:{fileType:{type:String,default:void 0},fileData:{type:String,default:void 0},size:{type:String,default:"large"}},setup(E){const e=E,t=It(()=>e.fileType?e.fileType:(e.fileData||"").split(";")[0]?.split(":")[1]||"");return(i,r)=>{const n=Jn;return ht(),Et("div",{class:xr(["flex","justify-center",{"w-[138px]":e.size==="large"},{"w-[80px]":e.size==="small"},"mr-[16px]","overflow-hidden"])},[oe(t).startsWith("image/")?(ht(),Et("img",{key:0,alt:"File preview",class:xr(["w-full","h-auto","object-contain","rounded-[8px]"]),src:e.fileData},null,8,ua)):oe(t)==="application/epub+zip"||oe(t)==="application/pdf"?(ht(),Mt(n,{key:1,name:"i-heroicons-book-open",class:"text-dark-gray w-[40px] h-[40px]"})):(ht(),Mt(n,{key:2,name:"i-heroicons-document",class:"text-dark-gray w-[40px] h-[40px]"}))],2)}}}),ha=Object.assign(la,{__name:"ImgPreviewer"});var ci={exports:{}},Pi={exports:{}},zi,Jr;function is(){if(Jr)return zi;Jr=1;var E=void 0;return zi=function(e){return e!==E&&e!==null},zi}var Ui,Qr;function fa(){if(Qr)return Ui;Qr=1;var E=is(),e={object:!0,function:!0,undefined:!0};return Ui=function(t){return E(t)?hasOwnProperty.call(e,typeof t):!1},Ui}var Mi,en;function ca(){if(en)return Mi;en=1;var E=fa();return Mi=function(e){if(!E(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},Mi}var qi,tn;function da(){if(tn)return qi;tn=1;var E=ca();return qi=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!E(e)},qi}var Wi,rn;function pa(){if(rn)return Wi;rn=1;var E=da(),e=/^\s*class[\s{/}]/,t=Function.prototype.toString;return Wi=function(i){return!(!E(i)||e.test(t.call(i)))},Wi}var ji,nn;function va(){return nn||(nn=1,ji=function(){var E=Object.assign,e;return typeof E!="function"?!1:(e={foo:"raz"},E(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}),ji}var Vi,sn;function ga(){return sn||(sn=1,Vi=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Vi}var Hi,an;function ma(){return an||(an=1,Hi=function(){}),Hi}var Gi,on;function Br(){if(on)return Gi;on=1;var E=ma()();return Gi=function(e){return e!==E&&e!==null},Gi}var $i,un;function ya(){if(un)return $i;un=1;var E=Br(),e=Object.keys;return $i=function(t){return e(E(t)?Object(t):t)},$i}var Zi,ln;function ba(){return ln||(ln=1,Zi=ga()()?Object.keys:ya()),Zi}var Xi,hn;function _a(){if(hn)return Xi;hn=1;var E=Br();return Xi=function(e){if(!E(e))throw new TypeError("Cannot use null or undefined");return e},Xi}var Yi,fn;function wa(){if(fn)return Yi;fn=1;var E=ba(),e=_a(),t=Math.max;return Yi=function(i,r){var n,s,a=t(arguments.length,2),l;for(i=Object(e(i)),l=function(h){try{i[h]=r[h]}catch(p){n||(n=p)}},s=1;s<a;++s)r=arguments[s],E(r).forEach(l);if(n!==void 0)throw n;return i},Yi}var Ki,cn;function Ea(){return cn||(cn=1,Ki=va()()?Object.assign:wa()),Ki}var Ji,dn;function Aa(){if(dn)return Ji;dn=1;var E=Br(),e=Array.prototype.forEach,t=Object.create,i=function(r,n){var s;for(s in r)n[s]=r[s]};return Ji=function(r){var n=t(null);return e.call(arguments,function(s){E(s)&&i(Object(s),n)}),n},Ji}var Qi,pn;function Da(){if(pn)return Qi;pn=1;var E="razdwatrzy";return Qi=function(){return typeof E.contains!="function"?!1:E.contains("dwa")===!0&&E.contains("foo")===!1},Qi}var er,vn;function xa(){if(vn)return er;vn=1;var E=String.prototype.indexOf;return er=function(e){return E.call(this,e,arguments[1])>-1},er}var tr,gn;function Ca(){return gn||(gn=1,tr=Da()()?String.prototype.contains:xa()),tr}var mn;function Sa(){if(mn)return Pi.exports;mn=1;var E=is(),e=pa(),t=Ea(),i=Aa(),r=Ca(),n=Pi.exports=function(s,a){var l,h,p,c,b;return arguments.length<2||typeof s!="string"?(c=a,a=s,s=null):c=arguments[2],E(s)?(l=r.call(s,"c"),h=r.call(s,"e"),p=r.call(s,"w")):(l=p=!0,h=!1),b={value:a,configurable:l,enumerable:h,writable:p},c?t(i(c),b):b};return n.gs=function(s,a,l){var h,p,c,b;return typeof s!="string"?(c=l,l=a,a=s,s=null):c=arguments[3],E(a)?e(a)?E(l)?e(l)||(c=l,l=void 0):l=void 0:(c=a,a=l=void 0):a=void 0,E(s)?(h=r.call(s,"c"),p=r.call(s,"e")):(h=!0,p=!1),b={get:a,set:l,configurable:h,enumerable:p},c?t(i(c),b):b},Pi.exports}var ir,yn;function Ta(){return yn||(yn=1,ir=function(E){if(typeof E!="function")throw new TypeError(E+" is not a function");return E}),ir}var bn;function ka(){return bn||(bn=1,(function(E,e){var t=Sa(),i=Ta(),r=Function.prototype.apply,n=Function.prototype.call,s=Object.create,a=Object.defineProperty,l=Object.defineProperties,h=Object.prototype.hasOwnProperty,p={configurable:!0,enumerable:!1,writable:!0},c,b,m,O,w,f,v;c=function(g,x){var B;return i(x),h.call(this,"__ee__")?B=this.__ee__:(B=p.value=s(null),a(this,"__ee__",p),p.value=null),B[g]?typeof B[g]=="object"?B[g].push(x):B[g]=[B[g],x]:B[g]=x,this},b=function(g,x){var B,y;return i(x),y=this,c.call(this,g,B=function(){m.call(y,g,B),r.call(x,this,arguments)}),B.__eeOnceListener__=x,this},m=function(g,x){var B,y,T,N;if(i(x),!h.call(this,"__ee__"))return this;if(B=this.__ee__,!B[g])return this;if(y=B[g],typeof y=="object")for(N=0;T=y[N];++N)(T===x||T.__eeOnceListener__===x)&&(y.length===2?B[g]=y[N?0:1]:y.splice(N,1));else(y===x||y.__eeOnceListener__===x)&&delete B[g];return this},O=function(g){var x,B,y,T,N;if(h.call(this,"__ee__")&&(T=this.__ee__[g],!!T))if(typeof T=="object"){for(B=arguments.length,N=new Array(B-1),x=1;x<B;++x)N[x-1]=arguments[x];for(T=T.slice(),x=0;y=T[x];++x)r.call(y,this,N)}else switch(arguments.length){case 1:n.call(T,this);break;case 2:n.call(T,this,arguments[1]);break;case 3:n.call(T,this,arguments[1],arguments[2]);break;default:for(B=arguments.length,N=new Array(B-1),x=1;x<B;++x)N[x-1]=arguments[x];r.call(T,this,N)}},w={on:c,once:b,off:m,emit:O},f={on:t(c),once:t(b),off:t(m),emit:t(O)},v=l({},f),E.exports=e=function(g){return g==null?s(v):l(Object(g),f)},e.methods=w})(ci,ci.exports)),ci.exports}var Na=ka();const Bt=ti(Na);var si={},Ft={},Gt={},_n;function Ci(){if(_n)return Gt;_n=1;function E(r,n,s){if(s===void 0&&(s=Array.prototype),r&&typeof s.find=="function")return s.find.call(r,n);for(var a=0;a<r.length;a++)if(Object.prototype.hasOwnProperty.call(r,a)){var l=r[a];if(n.call(void 0,l,a,r))return l}}function e(r,n){return n===void 0&&(n=Object),n&&typeof n.freeze=="function"?n.freeze(r):r}var t=e({HTML:"text/html",isHTML:function(r){return r===t.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Gt.find=E,Gt.freeze=e,Gt.MIME_TYPE=t,Gt.NAMESPACE=i,Gt}var wn;function rs(){if(wn)return Ft;wn=1;var E=Ci(),e=E.find,t=E.NAMESPACE;function i(d){return d!==""}function r(d){return d?d.split(/[\t\n\f\r ]+/).filter(i):[]}function n(d,o){return d.hasOwnProperty(o)||(d[o]=!0),d}function s(d){if(!d)return[];var o=r(d);return Object.keys(o.reduce(n,{}))}function a(d){return function(o){return d&&d.indexOf(o)!==-1}}function l(d,o){for(var A in d)Object.prototype.hasOwnProperty.call(d,A)&&(o[A]=d[A])}function h(d,o){var A=d.prototype;if(!(A instanceof o)){let U=function(){};U.prototype=o.prototype,U=new U,l(A,U),d.prototype=A=U}A.constructor!=d&&(typeof d!="function"&&console.error("unknown Class:"+d),A.constructor=d)}var p={},c=p.ELEMENT_NODE=1,b=p.ATTRIBUTE_NODE=2,m=p.TEXT_NODE=3,O=p.CDATA_SECTION_NODE=4,w=p.ENTITY_REFERENCE_NODE=5,f=p.ENTITY_NODE=6,v=p.PROCESSING_INSTRUCTION_NODE=7,g=p.COMMENT_NODE=8,x=p.DOCUMENT_NODE=9,B=p.DOCUMENT_TYPE_NODE=10,y=p.DOCUMENT_FRAGMENT_NODE=11,T=p.NOTATION_NODE=12,N={},R={};N.INDEX_SIZE_ERR=(R[1]="Index size error",1),N.DOMSTRING_SIZE_ERR=(R[2]="DOMString size error",2);var k=N.HIERARCHY_REQUEST_ERR=(R[3]="Hierarchy request error",3);N.WRONG_DOCUMENT_ERR=(R[4]="Wrong document",4),N.INVALID_CHARACTER_ERR=(R[5]="Invalid character",5),N.NO_DATA_ALLOWED_ERR=(R[6]="No data allowed",6),N.NO_MODIFICATION_ALLOWED_ERR=(R[7]="No modification allowed",7);var I=N.NOT_FOUND_ERR=(R[8]="Not found",8);N.NOT_SUPPORTED_ERR=(R[9]="Not supported",9);var j=N.INUSE_ATTRIBUTE_ERR=(R[10]="Attribute in use",10);N.INVALID_STATE_ERR=(R[11]="Invalid state",11),N.SYNTAX_ERR=(R[12]="Syntax error",12),N.INVALID_MODIFICATION_ERR=(R[13]="Invalid modification",13),N.NAMESPACE_ERR=(R[14]="Invalid namespace",14),N.INVALID_ACCESS_ERR=(R[15]="Invalid access",15);function L(d,o){if(o instanceof Error)var A=o;else A=this,Error.call(this,R[d]),this.message=R[d],Error.captureStackTrace&&Error.captureStackTrace(this,L);return A.code=d,o&&(this.message=this.message+": "+o),A}L.prototype=Error.prototype,l(N,L);function H(){}H.prototype={length:0,item:function(d){return d>=0&&d<this.length?this[d]:null},toString:function(d,o){for(var A=[],U=0;U<this.length;U++)J(this[U],A,d,o);return A.join("")},filter:function(d){return Array.prototype.filter.call(this,d)},indexOf:function(d){return Array.prototype.indexOf.call(this,d)}};function X(d,o){this._node=d,this._refresh=o,te(this)}function te(d){var o=d._node._inc||d._node.ownerDocument._inc;if(d._inc!==o){var A=d._refresh(d._node);if(z(d,"length",A.length),!d.$$length||A.length<d.$$length)for(var U=A.length;U in d;U++)Object.prototype.hasOwnProperty.call(d,U)&&delete d[U];l(A,d),d._inc=o}}X.prototype.item=function(d){return te(this),this[d]||null},h(X,H);function re(){}function Q(d,o){for(var A=d.length;A--;)if(d[A]===o)return A}function ie(d,o,A,U){if(U?o[Q(o,U)]=A:o[o.length++]=A,d){A.ownerElement=d;var u=d.ownerDocument;u&&(U&&Je(u,d,U),Fe(u,d,A))}}function de(d,o,A){var U=Q(o,A);if(U>=0){for(var u=o.length-1;U<u;)o[U]=o[++U];if(o.length=u,d){var M=d.ownerDocument;M&&(Je(M,d,A),A.ownerElement=null)}}else throw new L(I,new Error(d.tagName+"@"+A))}re.prototype={length:0,item:H.prototype.item,getNamedItem:function(d){for(var o=this.length;o--;){var A=this[o];if(A.nodeName==d)return A}},setNamedItem:function(d){var o=d.ownerElement;if(o&&o!=this._ownerElement)throw new L(j);var A=this.getNamedItem(d.nodeName);return ie(this._ownerElement,this,d,A),A},setNamedItemNS:function(d){var o=d.ownerElement,A;if(o&&o!=this._ownerElement)throw new L(j);return A=this.getNamedItemNS(d.namespaceURI,d.localName),ie(this._ownerElement,this,d,A),A},removeNamedItem:function(d){var o=this.getNamedItem(d);return de(this._ownerElement,this,o),o},removeNamedItemNS:function(d,o){var A=this.getNamedItemNS(d,o);return de(this._ownerElement,this,A),A},getNamedItemNS:function(d,o){for(var A=this.length;A--;){var U=this[A];if(U.localName==o&&U.namespaceURI==d)return U}return null}};function ne(){}ne.prototype={hasFeature:function(d,o){return!0},createDocument:function(d,o,A){var U=new Te;if(U.implementation=this,U.childNodes=new H,U.doctype=A||null,A&&U.appendChild(A),o){var u=U.createElementNS(d,o);U.appendChild(u)}return U},createDocumentType:function(d,o,A){var U=new We;return U.name=d,U.nodeName=d,U.publicId=o||"",U.systemId=A||"",U}};function ue(){}ue.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(d,o){return be(this,d,o)},replaceChild:function(d,o){be(this,d,o,me),o&&this.removeChild(o)},removeChild:function(d){return Se(this,d)},appendChild:function(d){return this.insertBefore(d,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(d){return we(this.ownerDocument||this,this,d)},normalize:function(){for(var d=this.firstChild;d;){var o=d.nextSibling;o&&o.nodeType==m&&d.nodeType==m?(this.removeChild(o),d.appendData(o.data)):(d.normalize(),d=o)}},isSupported:function(d,o){return this.ownerDocument.implementation.hasFeature(d,o)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(d){for(var o=this;o;){var A=o._nsMap;if(A){for(var U in A)if(Object.prototype.hasOwnProperty.call(A,U)&&A[U]===d)return U}o=o.nodeType==b?o.ownerDocument:o.parentNode}return null},lookupNamespaceURI:function(d){for(var o=this;o;){var A=o._nsMap;if(A&&d in A&&Object.prototype.hasOwnProperty.call(A,d))return A[d];o=o.nodeType==b?o.ownerDocument:o.parentNode}return null},isDefaultNamespace:function(d){var o=this.lookupPrefix(d);return o==null}};function ve(d){return d=="<"&&"&lt;"||d==">"&&"&gt;"||d=="&"&&"&amp;"||d=='"'&&"&quot;"||"&#"+d.charCodeAt()+";"}l(p,ue),l(p,ue.prototype);function Re(d,o){if(o(d))return!0;if(d=d.firstChild)do if(Re(d,o))return!0;while(d=d.nextSibling)}function Te(){this.ownerDocument=this}function Fe(d,o,A){d&&d._inc++;var U=A.namespaceURI;U===t.XMLNS&&(o._nsMap[A.prefix?A.localName:""]=A.value)}function Je(d,o,A,U){d&&d._inc++;var u=A.namespaceURI;u===t.XMLNS&&delete o._nsMap[A.prefix?A.localName:""]}function $e(d,o,A){if(d&&d._inc){d._inc++;var U=o.childNodes;if(A)U[U.length++]=A;else{for(var u=o.firstChild,M=0;u;)U[M++]=u,u=u.nextSibling;U.length=M,delete U[U.length]}}}function Se(d,o){var A=o.previousSibling,U=o.nextSibling;return A?A.nextSibling=U:d.firstChild=U,U?U.previousSibling=A:d.lastChild=A,o.parentNode=null,o.previousSibling=null,o.nextSibling=null,$e(d.ownerDocument,d),o}function He(d){return d&&(d.nodeType===ue.DOCUMENT_NODE||d.nodeType===ue.DOCUMENT_FRAGMENT_NODE||d.nodeType===ue.ELEMENT_NODE)}function Xe(d){return d&&(Le(d)||Oe(d)||Ne(d)||d.nodeType===ue.DOCUMENT_FRAGMENT_NODE||d.nodeType===ue.COMMENT_NODE||d.nodeType===ue.PROCESSING_INSTRUCTION_NODE)}function Ne(d){return d&&d.nodeType===ue.DOCUMENT_TYPE_NODE}function Le(d){return d&&d.nodeType===ue.ELEMENT_NODE}function Oe(d){return d&&d.nodeType===ue.TEXT_NODE}function Me(d,o){var A=d.childNodes||[];if(e(A,Le)||Ne(o))return!1;var U=e(A,Ne);return!(o&&U&&A.indexOf(U)>A.indexOf(o))}function ee(d,o){var A=d.childNodes||[];function U(M){return Le(M)&&M!==o}if(e(A,U))return!1;var u=e(A,Ne);return!(o&&u&&A.indexOf(u)>A.indexOf(o))}function Z(d,o,A){if(!He(d))throw new L(k,"Unexpected parent node type "+d.nodeType);if(A&&A.parentNode!==d)throw new L(I,"child not in parent");if(!Xe(o)||Ne(o)&&d.nodeType!==ue.DOCUMENT_NODE)throw new L(k,"Unexpected node type "+o.nodeType+" for parent node type "+d.nodeType)}function K(d,o,A){var U=d.childNodes||[],u=o.childNodes||[];if(o.nodeType===ue.DOCUMENT_FRAGMENT_NODE){var M=u.filter(Le);if(M.length>1||e(u,Oe))throw new L(k,"More than one element or text in fragment");if(M.length===1&&!Me(d,A))throw new L(k,"Element in fragment can not be inserted before doctype")}if(Le(o)&&!Me(d,A))throw new L(k,"Only one element can be added and only after doctype");if(Ne(o)){if(e(U,Ne))throw new L(k,"Only one doctype is allowed");var G=e(U,Le);if(A&&U.indexOf(G)<U.indexOf(A))throw new L(k,"Doctype can only be inserted before an element");if(!A&&G)throw new L(k,"Doctype can not be appended since element is present")}}function me(d,o,A){var U=d.childNodes||[],u=o.childNodes||[];if(o.nodeType===ue.DOCUMENT_FRAGMENT_NODE){var M=u.filter(Le);if(M.length>1||e(u,Oe))throw new L(k,"More than one element or text in fragment");if(M.length===1&&!ee(d,A))throw new L(k,"Element in fragment can not be inserted before doctype")}if(Le(o)&&!ee(d,A))throw new L(k,"Only one element can be added and only after doctype");if(Ne(o)){if(e(U,function(F){return Ne(F)&&F!==A}))throw new L(k,"Only one doctype is allowed");var G=e(U,Le);if(A&&U.indexOf(G)<U.indexOf(A))throw new L(k,"Doctype can only be inserted before an element")}}function be(d,o,A,U){Z(d,o,A),d.nodeType===ue.DOCUMENT_NODE&&(U||K)(d,o,A);var u=o.parentNode;if(u&&u.removeChild(o),o.nodeType===y){var M=o.firstChild;if(M==null)return o;var G=o.lastChild}else M=G=o;var _=A?A.previousSibling:d.lastChild;M.previousSibling=_,G.nextSibling=A,_?_.nextSibling=M:d.firstChild=M,A==null?d.lastChild=G:A.previousSibling=G;do M.parentNode=d;while(M!==G&&(M=M.nextSibling));return $e(d.ownerDocument||d,d),o.nodeType==y&&(o.firstChild=o.lastChild=null),o}function ce(d,o){return o.parentNode&&o.parentNode.removeChild(o),o.parentNode=d,o.previousSibling=d.lastChild,o.nextSibling=null,o.previousSibling?o.previousSibling.nextSibling=o:d.firstChild=o,d.lastChild=o,$e(d.ownerDocument,d,o),o}Te.prototype={nodeName:"#document",nodeType:x,doctype:null,documentElement:null,_inc:1,insertBefore:function(d,o){if(d.nodeType==y){for(var A=d.firstChild;A;){var U=A.nextSibling;this.insertBefore(A,o),A=U}return d}return be(this,d,o),d.ownerDocument=this,this.documentElement===null&&d.nodeType===c&&(this.documentElement=d),d},removeChild:function(d){return this.documentElement==d&&(this.documentElement=null),Se(this,d)},replaceChild:function(d,o){be(this,d,o,me),d.ownerDocument=this,o&&this.removeChild(o),Le(d)&&(this.documentElement=d)},importNode:function(d,o){return ae(this,d,o)},getElementById:function(d){var o=null;return Re(this.documentElement,function(A){if(A.nodeType==c&&A.getAttribute("id")==d)return o=A,!0}),o},getElementsByClassName:function(d){var o=s(d);return new X(this,function(A){var U=[];return o.length>0&&Re(A.documentElement,function(u){if(u!==A&&u.nodeType===c){var M=u.getAttribute("class");if(M){var G=d===M;if(!G){var _=s(M);G=o.every(a(_))}G&&U.push(u)}}}),U})},createElement:function(d){var o=new ge;o.ownerDocument=this,o.nodeName=d,o.tagName=d,o.localName=d,o.childNodes=new H;var A=o.attributes=new re;return A._ownerElement=o,o},createDocumentFragment:function(){var d=new yt;return d.ownerDocument=this,d.childNodes=new H,d},createTextNode:function(d){var o=new Pe;return o.ownerDocument=this,o.appendData(d),o},createComment:function(d){var o=new qe;return o.ownerDocument=this,o.appendData(d),o},createCDATASection:function(d){var o=new nt;return o.ownerDocument=this,o.appendData(d),o},createProcessingInstruction:function(d,o){var A=new ct;return A.ownerDocument=this,A.tagName=A.nodeName=A.target=d,A.nodeValue=A.data=o,A},createAttribute:function(d){var o=new Ae;return o.ownerDocument=this,o.name=d,o.nodeName=d,o.localName=d,o.specified=!0,o},createEntityReference:function(d){var o=new et;return o.ownerDocument=this,o.nodeName=d,o},createElementNS:function(d,o){var A=new ge,U=o.split(":"),u=A.attributes=new re;return A.childNodes=new H,A.ownerDocument=this,A.nodeName=o,A.tagName=o,A.namespaceURI=d,U.length==2?(A.prefix=U[0],A.localName=U[1]):A.localName=o,u._ownerElement=A,A},createAttributeNS:function(d,o){var A=new Ae,U=o.split(":");return A.ownerDocument=this,A.nodeName=o,A.name=o,A.namespaceURI=d,A.specified=!0,U.length==2?(A.prefix=U[0],A.localName=U[1]):A.localName=o,A}},h(Te,ue);function ge(){this._nsMap={}}ge.prototype={nodeType:c,hasAttribute:function(d){return this.getAttributeNode(d)!=null},getAttribute:function(d){var o=this.getAttributeNode(d);return o&&o.value||""},getAttributeNode:function(d){return this.attributes.getNamedItem(d)},setAttribute:function(d,o){var A=this.ownerDocument.createAttribute(d);A.value=A.nodeValue=""+o,this.setAttributeNode(A)},removeAttribute:function(d){var o=this.getAttributeNode(d);o&&this.removeAttributeNode(o)},appendChild:function(d){return d.nodeType===y?this.insertBefore(d,null):ce(this,d)},setAttributeNode:function(d){return this.attributes.setNamedItem(d)},setAttributeNodeNS:function(d){return this.attributes.setNamedItemNS(d)},removeAttributeNode:function(d){return this.attributes.removeNamedItem(d.nodeName)},removeAttributeNS:function(d,o){var A=this.getAttributeNodeNS(d,o);A&&this.removeAttributeNode(A)},hasAttributeNS:function(d,o){return this.getAttributeNodeNS(d,o)!=null},getAttributeNS:function(d,o){var A=this.getAttributeNodeNS(d,o);return A&&A.value||""},setAttributeNS:function(d,o,A){var U=this.ownerDocument.createAttributeNS(d,o);U.value=U.nodeValue=""+A,this.setAttributeNode(U)},getAttributeNodeNS:function(d,o){return this.attributes.getNamedItemNS(d,o)},getElementsByTagName:function(d){return new X(this,function(o){var A=[];return Re(o,function(U){U!==o&&U.nodeType==c&&(d==="*"||U.tagName==d)&&A.push(U)}),A})},getElementsByTagNameNS:function(d,o){return new X(this,function(A){var U=[];return Re(A,function(u){u!==A&&u.nodeType===c&&(d==="*"||u.namespaceURI===d)&&(o==="*"||u.localName==o)&&U.push(u)}),U})}},Te.prototype.getElementsByTagName=ge.prototype.getElementsByTagName,Te.prototype.getElementsByTagNameNS=ge.prototype.getElementsByTagNameNS,h(ge,ue);function Ae(){}Ae.prototype.nodeType=b,h(Ae,ue);function De(){}De.prototype={data:"",substringData:function(d,o){return this.data.substring(d,d+o)},appendData:function(d){d=this.data+d,this.nodeValue=this.data=d,this.length=d.length},insertData:function(d,o){this.replaceData(d,0,o)},appendChild:function(d){throw new Error(R[k])},deleteData:function(d,o){this.replaceData(d,o,"")},replaceData:function(d,o,A){var U=this.data.substring(0,d),u=this.data.substring(d+o);A=U+A+u,this.nodeValue=this.data=A,this.length=A.length}},h(De,ue);function Pe(){}Pe.prototype={nodeName:"#text",nodeType:m,splitText:function(d){var o=this.data,A=o.substring(d);o=o.substring(0,d),this.data=this.nodeValue=o,this.length=o.length;var U=this.ownerDocument.createTextNode(A);return this.parentNode&&this.parentNode.insertBefore(U,this.nextSibling),U}},h(Pe,De);function qe(){}qe.prototype={nodeName:"#comment",nodeType:g},h(qe,De);function nt(){}nt.prototype={nodeName:"#cdata-section",nodeType:O},h(nt,De);function We(){}We.prototype.nodeType=B,h(We,ue);function Qe(){}Qe.prototype.nodeType=T,h(Qe,ue);function Ye(){}Ye.prototype.nodeType=f,h(Ye,ue);function et(){}et.prototype.nodeType=w,h(et,ue);function yt(){}yt.prototype.nodeName="#document-fragment",yt.prototype.nodeType=y,h(yt,ue);function ct(){}ct.prototype.nodeType=v,h(ct,ue);function it(){}it.prototype.serializeToString=function(d,o,A){return vt.call(d,o,A)},ue.prototype.toString=vt;function vt(d,o){var A=[],U=this.nodeType==9&&this.documentElement||this,u=U.prefix,M=U.namespaceURI;if(M&&u==null){var u=U.lookupPrefix(M);if(u==null)var G=[{namespace:M,prefix:null}]}return J(this,A,d,o,G),A.join("")}function _t(d,o,A){var U=d.prefix||"",u=d.namespaceURI;if(!u||U==="xml"&&u===t.XML||u===t.XMLNS)return!1;for(var M=A.length;M--;){var G=A[M];if(G.prefix===U)return G.namespace!==u}return!0}function C(d,o,A){d.push(" ",o,'="',A.replace(/[<&"]/g,ve),'"')}function J(d,o,A,U,u){if(u||(u=[]),U)if(d=U(d),d){if(typeof d=="string"){o.push(d);return}}else return;switch(d.nodeType){case c:var M=d.attributes,G=M.length,ze=d.firstChild,_=d.tagName;A=t.isHTML(d.namespaceURI)||A;var F=_;if(!A&&!d.prefix&&d.namespaceURI){for(var $,Ee=0;Ee<M.length;Ee++)if(M.item(Ee).name==="xmlns"){$=M.item(Ee).value;break}if(!$)for(var pe=u.length-1;pe>=0;pe--){var ye=u[pe];if(ye.prefix===""&&ye.namespace===d.namespaceURI){$=ye.namespace;break}}if($!==d.namespaceURI)for(var pe=u.length-1;pe>=0;pe--){var ye=u[pe];if(ye.namespace===d.namespaceURI){ye.prefix&&(F=ye.prefix+":"+_);break}}}o.push("<",F);for(var Ie=0;Ie<G;Ie++){var ut=M.item(Ie);ut.prefix=="xmlns"?u.push({prefix:ut.localName,namespace:ut.value}):ut.nodeName=="xmlns"&&u.push({prefix:"",namespace:ut.value})}for(var Ie=0;Ie<G;Ie++){var ut=M.item(Ie);if(_t(ut,A,u)){var Ze=ut.prefix||"",Be=ut.namespaceURI;C(o,Ze?"xmlns:"+Ze:"xmlns",Be),u.push({prefix:Ze,namespace:Be})}J(ut,o,A,U,u)}if(_===F&&_t(d,A,u)){var Ze=d.prefix||"",Be=d.namespaceURI;C(o,Ze?"xmlns:"+Ze:"xmlns",Be),u.push({prefix:Ze,namespace:Be})}if(ze||A&&!/^(?:meta|link|img|br|hr|input)$/i.test(_)){if(o.push(">"),A&&/^script$/i.test(_))for(;ze;)ze.data?o.push(ze.data):J(ze,o,A,U,u.slice()),ze=ze.nextSibling;else for(;ze;)J(ze,o,A,U,u.slice()),ze=ze.nextSibling;o.push("</",F,">")}else o.push("/>");return;case x:case y:for(var ze=d.firstChild;ze;)J(ze,o,A,U,u.slice()),ze=ze.nextSibling;return;case b:return C(o,d.name,d.value);case m:return o.push(d.data.replace(/[<&]/g,ve).replace(/]]>/g,"]]&gt;"));case O:return o.push("<![CDATA[",d.data,"]]>");case g:return o.push("<!--",d.data,"-->");case B:var dt=d.publicId,at=d.systemId;if(o.push("<!DOCTYPE ",d.name),dt)o.push(" PUBLIC ",dt),at&&at!="."&&o.push(" ",at),o.push(">");else if(at&&at!=".")o.push(" SYSTEM ",at,">");else{var Lt=d.internalSubset;Lt&&o.push(" [",Lt,"]"),o.push(">")}return;case v:return o.push("<?",d.target," ",d.data,"?>");case w:return o.push("&",d.nodeName,";");default:o.push("??",d.nodeName)}}function ae(d,o,A){var U;switch(o.nodeType){case c:U=o.cloneNode(!1),U.ownerDocument=d;case y:break;case b:A=!0;break}if(U||(U=o.cloneNode(!1)),U.ownerDocument=d,U.parentNode=null,A)for(var u=o.firstChild;u;)U.appendChild(ae(d,u,A)),u=u.nextSibling;return U}function we(d,o,A){var U=new o.constructor;for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)){var M=o[u];typeof M!="object"&&M!=U[u]&&(U[u]=M)}switch(o.childNodes&&(U.childNodes=new H),U.ownerDocument=d,U.nodeType){case c:var G=o.attributes,_=U.attributes=new re,F=G.length;_._ownerElement=U;for(var $=0;$<F;$++)U.setAttributeNode(we(d,G.item($),!0));break;case b:A=!0}if(A)for(var Ee=o.firstChild;Ee;)U.appendChild(we(d,Ee,A)),Ee=Ee.nextSibling;return U}function z(d,o,A){d[o]=A}try{if(Object.defineProperty){let d=function(o){switch(o.nodeType){case c:case y:var A=[];for(o=o.firstChild;o;)o.nodeType!==7&&o.nodeType!==8&&A.push(d(o)),o=o.nextSibling;return A.join("");default:return o.nodeValue}};Object.defineProperty(X.prototype,"length",{get:function(){return te(this),this.$$length}}),Object.defineProperty(ue.prototype,"textContent",{get:function(){return d(this)},set:function(o){switch(this.nodeType){case c:case y:for(;this.firstChild;)this.removeChild(this.firstChild);(o||String(o))&&this.appendChild(this.ownerDocument.createTextNode(o));break;default:this.data=o,this.value=o,this.nodeValue=o}}}),z=function(o,A,U){o["$$"+A]=U}}}catch{}return Ft.DocumentType=We,Ft.DOMException=L,Ft.DOMImplementation=ne,Ft.Element=ge,Ft.Node=ue,Ft.NodeList=H,Ft.XMLSerializer=it,Ft}var $t={},rr={},En;function Ia(){return En||(En=1,(function(E){var e=Ci().freeze;E.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),E.HTML_ENTITIES=e({Aacute:"Ã",aacute:"Ã¡",Abreve:"Ä‚",abreve:"Äƒ",ac:"âˆ¾",acd:"âˆ¿",acE:"âˆ¾Ì³",Acirc:"Ã‚",acirc:"Ã¢",acute:"Â´",Acy:"Ğ",acy:"Ğ°",AElig:"Ã†",aelig:"Ã¦",af:"â¡",Afr:"ğ”„",afr:"ğ”",Agrave:"Ã€",agrave:"Ã ",alefsym:"â„µ",aleph:"â„µ",Alpha:"Î‘",alpha:"Î±",Amacr:"Ä€",amacr:"Ä",amalg:"â¨¿",AMP:"&",amp:"&",And:"â©“",and:"âˆ§",andand:"â©•",andd:"â©œ",andslope:"â©˜",andv:"â©š",ang:"âˆ ",ange:"â¦¤",angle:"âˆ ",angmsd:"âˆ¡",angmsdaa:"â¦¨",angmsdab:"â¦©",angmsdac:"â¦ª",angmsdad:"â¦«",angmsdae:"â¦¬",angmsdaf:"â¦­",angmsdag:"â¦®",angmsdah:"â¦¯",angrt:"âˆŸ",angrtvb:"âŠ¾",angrtvbd:"â¦",angsph:"âˆ¢",angst:"Ã…",angzarr:"â¼",Aogon:"Ä„",aogon:"Ä…",Aopf:"ğ”¸",aopf:"ğ•’",ap:"â‰ˆ",apacir:"â©¯",apE:"â©°",ape:"â‰Š",apid:"â‰‹",apos:"'",ApplyFunction:"â¡",approx:"â‰ˆ",approxeq:"â‰Š",Aring:"Ã…",aring:"Ã¥",Ascr:"ğ’œ",ascr:"ğ’¶",Assign:"â‰”",ast:"*",asymp:"â‰ˆ",asympeq:"â‰",Atilde:"Ãƒ",atilde:"Ã£",Auml:"Ã„",auml:"Ã¤",awconint:"âˆ³",awint:"â¨‘",backcong:"â‰Œ",backepsilon:"Ï¶",backprime:"â€µ",backsim:"âˆ½",backsimeq:"â‹",Backslash:"âˆ–",Barv:"â«§",barvee:"âŠ½",Barwed:"âŒ†",barwed:"âŒ…",barwedge:"âŒ…",bbrk:"âµ",bbrktbrk:"â¶",bcong:"â‰Œ",Bcy:"Ğ‘",bcy:"Ğ±",bdquo:"â€",becaus:"âˆµ",Because:"âˆµ",because:"âˆµ",bemptyv:"â¦°",bepsi:"Ï¶",bernou:"â„¬",Bernoullis:"â„¬",Beta:"Î’",beta:"Î²",beth:"â„¶",between:"â‰¬",Bfr:"ğ”…",bfr:"ğ”Ÿ",bigcap:"â‹‚",bigcirc:"â—¯",bigcup:"â‹ƒ",bigodot:"â¨€",bigoplus:"â¨",bigotimes:"â¨‚",bigsqcup:"â¨†",bigstar:"â˜…",bigtriangledown:"â–½",bigtriangleup:"â–³",biguplus:"â¨„",bigvee:"â‹",bigwedge:"â‹€",bkarow:"â¤",blacklozenge:"â§«",blacksquare:"â–ª",blacktriangle:"â–´",blacktriangledown:"â–¾",blacktriangleleft:"â—‚",blacktriangleright:"â–¸",blank:"â£",blk12:"â–’",blk14:"â–‘",blk34:"â–“",block:"â–ˆ",bne:"=âƒ¥",bnequiv:"â‰¡âƒ¥",bNot:"â«­",bnot:"âŒ",Bopf:"ğ”¹",bopf:"ğ•“",bot:"âŠ¥",bottom:"âŠ¥",bowtie:"â‹ˆ",boxbox:"â§‰",boxDL:"â•—",boxDl:"â•–",boxdL:"â••",boxdl:"â”",boxDR:"â•”",boxDr:"â•“",boxdR:"â•’",boxdr:"â”Œ",boxH:"â•",boxh:"â”€",boxHD:"â•¦",boxHd:"â•¤",boxhD:"â•¥",boxhd:"â”¬",boxHU:"â•©",boxHu:"â•§",boxhU:"â•¨",boxhu:"â”´",boxminus:"âŠŸ",boxplus:"âŠ",boxtimes:"âŠ ",boxUL:"â•",boxUl:"â•œ",boxuL:"â•›",boxul:"â”˜",boxUR:"â•š",boxUr:"â•™",boxuR:"â•˜",boxur:"â””",boxV:"â•‘",boxv:"â”‚",boxVH:"â•¬",boxVh:"â•«",boxvH:"â•ª",boxvh:"â”¼",boxVL:"â•£",boxVl:"â•¢",boxvL:"â•¡",boxvl:"â”¤",boxVR:"â• ",boxVr:"â•Ÿ",boxvR:"â•",boxvr:"â”œ",bprime:"â€µ",Breve:"Ë˜",breve:"Ë˜",brvbar:"Â¦",Bscr:"â„¬",bscr:"ğ’·",bsemi:"â",bsim:"âˆ½",bsime:"â‹",bsol:"\\",bsolb:"â§…",bsolhsub:"âŸˆ",bull:"â€¢",bullet:"â€¢",bump:"â‰",bumpE:"âª®",bumpe:"â‰",Bumpeq:"â‰",bumpeq:"â‰",Cacute:"Ä†",cacute:"Ä‡",Cap:"â‹’",cap:"âˆ©",capand:"â©„",capbrcup:"â©‰",capcap:"â©‹",capcup:"â©‡",capdot:"â©€",CapitalDifferentialD:"â……",caps:"âˆ©ï¸€",caret:"â",caron:"Ë‡",Cayleys:"â„­",ccaps:"â©",Ccaron:"ÄŒ",ccaron:"Ä",Ccedil:"Ã‡",ccedil:"Ã§",Ccirc:"Äˆ",ccirc:"Ä‰",Cconint:"âˆ°",ccups:"â©Œ",ccupssm:"â©",Cdot:"ÄŠ",cdot:"Ä‹",cedil:"Â¸",Cedilla:"Â¸",cemptyv:"â¦²",cent:"Â¢",CenterDot:"Â·",centerdot:"Â·",Cfr:"â„­",cfr:"ğ” ",CHcy:"Ğ§",chcy:"Ñ‡",check:"âœ“",checkmark:"âœ“",Chi:"Î§",chi:"Ï‡",cir:"â—‹",circ:"Ë†",circeq:"â‰—",circlearrowleft:"â†º",circlearrowright:"â†»",circledast:"âŠ›",circledcirc:"âŠš",circleddash:"âŠ",CircleDot:"âŠ™",circledR:"Â®",circledS:"â“ˆ",CircleMinus:"âŠ–",CirclePlus:"âŠ•",CircleTimes:"âŠ—",cirE:"â§ƒ",cire:"â‰—",cirfnint:"â¨",cirmid:"â«¯",cirscir:"â§‚",ClockwiseContourIntegral:"âˆ²",CloseCurlyDoubleQuote:"â€",CloseCurlyQuote:"â€™",clubs:"â™£",clubsuit:"â™£",Colon:"âˆ·",colon:":",Colone:"â©´",colone:"â‰”",coloneq:"â‰”",comma:",",commat:"@",comp:"âˆ",compfn:"âˆ˜",complement:"âˆ",complexes:"â„‚",cong:"â‰…",congdot:"â©­",Congruent:"â‰¡",Conint:"âˆ¯",conint:"âˆ®",ContourIntegral:"âˆ®",Copf:"â„‚",copf:"ğ•”",coprod:"âˆ",Coproduct:"âˆ",COPY:"Â©",copy:"Â©",copysr:"â„—",CounterClockwiseContourIntegral:"âˆ³",crarr:"â†µ",Cross:"â¨¯",cross:"âœ—",Cscr:"ğ’",cscr:"ğ’¸",csub:"â«",csube:"â«‘",csup:"â«",csupe:"â«’",ctdot:"â‹¯",cudarrl:"â¤¸",cudarrr:"â¤µ",cuepr:"â‹",cuesc:"â‹Ÿ",cularr:"â†¶",cularrp:"â¤½",Cup:"â‹“",cup:"âˆª",cupbrcap:"â©ˆ",CupCap:"â‰",cupcap:"â©†",cupcup:"â©Š",cupdot:"âŠ",cupor:"â©…",cups:"âˆªï¸€",curarr:"â†·",curarrm:"â¤¼",curlyeqprec:"â‹",curlyeqsucc:"â‹Ÿ",curlyvee:"â‹",curlywedge:"â‹",curren:"Â¤",curvearrowleft:"â†¶",curvearrowright:"â†·",cuvee:"â‹",cuwed:"â‹",cwconint:"âˆ²",cwint:"âˆ±",cylcty:"âŒ­",Dagger:"â€¡",dagger:"â€ ",daleth:"â„¸",Darr:"â†¡",dArr:"â‡“",darr:"â†“",dash:"â€",Dashv:"â«¤",dashv:"âŠ£",dbkarow:"â¤",dblac:"Ë",Dcaron:"Ä",dcaron:"Ä",Dcy:"Ğ”",dcy:"Ğ´",DD:"â……",dd:"â…†",ddagger:"â€¡",ddarr:"â‡Š",DDotrahd:"â¤‘",ddotseq:"â©·",deg:"Â°",Del:"âˆ‡",Delta:"Î”",delta:"Î´",demptyv:"â¦±",dfisht:"â¥¿",Dfr:"ğ”‡",dfr:"ğ”¡",dHar:"â¥¥",dharl:"â‡ƒ",dharr:"â‡‚",DiacriticalAcute:"Â´",DiacriticalDot:"Ë™",DiacriticalDoubleAcute:"Ë",DiacriticalGrave:"`",DiacriticalTilde:"Ëœ",diam:"â‹„",Diamond:"â‹„",diamond:"â‹„",diamondsuit:"â™¦",diams:"â™¦",die:"Â¨",DifferentialD:"â…†",digamma:"Ï",disin:"â‹²",div:"Ã·",divide:"Ã·",divideontimes:"â‹‡",divonx:"â‹‡",DJcy:"Ğ‚",djcy:"Ñ’",dlcorn:"âŒ",dlcrop:"âŒ",dollar:"$",Dopf:"ğ”»",dopf:"ğ••",Dot:"Â¨",dot:"Ë™",DotDot:"âƒœ",doteq:"â‰",doteqdot:"â‰‘",DotEqual:"â‰",dotminus:"âˆ¸",dotplus:"âˆ”",dotsquare:"âŠ¡",doublebarwedge:"âŒ†",DoubleContourIntegral:"âˆ¯",DoubleDot:"Â¨",DoubleDownArrow:"â‡“",DoubleLeftArrow:"â‡",DoubleLeftRightArrow:"â‡”",DoubleLeftTee:"â«¤",DoubleLongLeftArrow:"âŸ¸",DoubleLongLeftRightArrow:"âŸº",DoubleLongRightArrow:"âŸ¹",DoubleRightArrow:"â‡’",DoubleRightTee:"âŠ¨",DoubleUpArrow:"â‡‘",DoubleUpDownArrow:"â‡•",DoubleVerticalBar:"âˆ¥",DownArrow:"â†“",Downarrow:"â‡“",downarrow:"â†“",DownArrowBar:"â¤“",DownArrowUpArrow:"â‡µ",DownBreve:"Ì‘",downdownarrows:"â‡Š",downharpoonleft:"â‡ƒ",downharpoonright:"â‡‚",DownLeftRightVector:"â¥",DownLeftTeeVector:"â¥",DownLeftVector:"â†½",DownLeftVectorBar:"â¥–",DownRightTeeVector:"â¥Ÿ",DownRightVector:"â‡",DownRightVectorBar:"â¥—",DownTee:"âŠ¤",DownTeeArrow:"â†§",drbkarow:"â¤",drcorn:"âŒŸ",drcrop:"âŒŒ",Dscr:"ğ’Ÿ",dscr:"ğ’¹",DScy:"Ğ…",dscy:"Ñ•",dsol:"â§¶",Dstrok:"Ä",dstrok:"Ä‘",dtdot:"â‹±",dtri:"â–¿",dtrif:"â–¾",duarr:"â‡µ",duhar:"â¥¯",dwangle:"â¦¦",DZcy:"Ğ",dzcy:"ÑŸ",dzigrarr:"âŸ¿",Eacute:"Ã‰",eacute:"Ã©",easter:"â©®",Ecaron:"Äš",ecaron:"Ä›",ecir:"â‰–",Ecirc:"ÃŠ",ecirc:"Ãª",ecolon:"â‰•",Ecy:"Ğ­",ecy:"Ñ",eDDot:"â©·",Edot:"Ä–",eDot:"â‰‘",edot:"Ä—",ee:"â…‡",efDot:"â‰’",Efr:"ğ”ˆ",efr:"ğ”¢",eg:"âªš",Egrave:"Ãˆ",egrave:"Ã¨",egs:"âª–",egsdot:"âª˜",el:"âª™",Element:"âˆˆ",elinters:"â§",ell:"â„“",els:"âª•",elsdot:"âª—",Emacr:"Ä’",emacr:"Ä“",empty:"âˆ…",emptyset:"âˆ…",EmptySmallSquare:"â—»",emptyv:"âˆ…",EmptyVerySmallSquare:"â–«",emsp:"â€ƒ",emsp13:"â€„",emsp14:"â€…",ENG:"ÅŠ",eng:"Å‹",ensp:"â€‚",Eogon:"Ä˜",eogon:"Ä™",Eopf:"ğ”¼",eopf:"ğ•–",epar:"â‹•",eparsl:"â§£",eplus:"â©±",epsi:"Îµ",Epsilon:"Î•",epsilon:"Îµ",epsiv:"Ïµ",eqcirc:"â‰–",eqcolon:"â‰•",eqsim:"â‰‚",eqslantgtr:"âª–",eqslantless:"âª•",Equal:"â©µ",equals:"=",EqualTilde:"â‰‚",equest:"â‰Ÿ",Equilibrium:"â‡Œ",equiv:"â‰¡",equivDD:"â©¸",eqvparsl:"â§¥",erarr:"â¥±",erDot:"â‰“",Escr:"â„°",escr:"â„¯",esdot:"â‰",Esim:"â©³",esim:"â‰‚",Eta:"Î—",eta:"Î·",ETH:"Ã",eth:"Ã°",Euml:"Ã‹",euml:"Ã«",euro:"â‚¬",excl:"!",exist:"âˆƒ",Exists:"âˆƒ",expectation:"â„°",ExponentialE:"â…‡",exponentiale:"â…‡",fallingdotseq:"â‰’",Fcy:"Ğ¤",fcy:"Ñ„",female:"â™€",ffilig:"ï¬ƒ",fflig:"ï¬€",ffllig:"ï¬„",Ffr:"ğ”‰",ffr:"ğ”£",filig:"ï¬",FilledSmallSquare:"â—¼",FilledVerySmallSquare:"â–ª",fjlig:"fj",flat:"â™­",fllig:"ï¬‚",fltns:"â–±",fnof:"Æ’",Fopf:"ğ”½",fopf:"ğ•—",ForAll:"âˆ€",forall:"âˆ€",fork:"â‹”",forkv:"â«™",Fouriertrf:"â„±",fpartint:"â¨",frac12:"Â½",frac13:"â…“",frac14:"Â¼",frac15:"â…•",frac16:"â…™",frac18:"â…›",frac23:"â…”",frac25:"â…–",frac34:"Â¾",frac35:"â…—",frac38:"â…œ",frac45:"â…˜",frac56:"â…š",frac58:"â…",frac78:"â…",frasl:"â„",frown:"âŒ¢",Fscr:"â„±",fscr:"ğ’»",gacute:"Çµ",Gamma:"Î“",gamma:"Î³",Gammad:"Ïœ",gammad:"Ï",gap:"âª†",Gbreve:"Ä",gbreve:"ÄŸ",Gcedil:"Ä¢",Gcirc:"Äœ",gcirc:"Ä",Gcy:"Ğ“",gcy:"Ğ³",Gdot:"Ä ",gdot:"Ä¡",gE:"â‰§",ge:"â‰¥",gEl:"âªŒ",gel:"â‹›",geq:"â‰¥",geqq:"â‰§",geqslant:"â©¾",ges:"â©¾",gescc:"âª©",gesdot:"âª€",gesdoto:"âª‚",gesdotol:"âª„",gesl:"â‹›ï¸€",gesles:"âª”",Gfr:"ğ”Š",gfr:"ğ”¤",Gg:"â‹™",gg:"â‰«",ggg:"â‹™",gimel:"â„·",GJcy:"Ğƒ",gjcy:"Ñ“",gl:"â‰·",gla:"âª¥",glE:"âª’",glj:"âª¤",gnap:"âªŠ",gnapprox:"âªŠ",gnE:"â‰©",gne:"âªˆ",gneq:"âªˆ",gneqq:"â‰©",gnsim:"â‹§",Gopf:"ğ”¾",gopf:"ğ•˜",grave:"`",GreaterEqual:"â‰¥",GreaterEqualLess:"â‹›",GreaterFullEqual:"â‰§",GreaterGreater:"âª¢",GreaterLess:"â‰·",GreaterSlantEqual:"â©¾",GreaterTilde:"â‰³",Gscr:"ğ’¢",gscr:"â„Š",gsim:"â‰³",gsime:"âª",gsiml:"âª",Gt:"â‰«",GT:">",gt:">",gtcc:"âª§",gtcir:"â©º",gtdot:"â‹—",gtlPar:"â¦•",gtquest:"â©¼",gtrapprox:"âª†",gtrarr:"â¥¸",gtrdot:"â‹—",gtreqless:"â‹›",gtreqqless:"âªŒ",gtrless:"â‰·",gtrsim:"â‰³",gvertneqq:"â‰©ï¸€",gvnE:"â‰©ï¸€",Hacek:"Ë‡",hairsp:"â€Š",half:"Â½",hamilt:"â„‹",HARDcy:"Ğª",hardcy:"ÑŠ",hArr:"â‡”",harr:"â†”",harrcir:"â¥ˆ",harrw:"â†­",Hat:"^",hbar:"â„",Hcirc:"Ä¤",hcirc:"Ä¥",hearts:"â™¥",heartsuit:"â™¥",hellip:"â€¦",hercon:"âŠ¹",Hfr:"â„Œ",hfr:"ğ”¥",HilbertSpace:"â„‹",hksearow:"â¤¥",hkswarow:"â¤¦",hoarr:"â‡¿",homtht:"âˆ»",hookleftarrow:"â†©",hookrightarrow:"â†ª",Hopf:"â„",hopf:"ğ•™",horbar:"â€•",HorizontalLine:"â”€",Hscr:"â„‹",hscr:"ğ’½",hslash:"â„",Hstrok:"Ä¦",hstrok:"Ä§",HumpDownHump:"â‰",HumpEqual:"â‰",hybull:"âƒ",hyphen:"â€",Iacute:"Ã",iacute:"Ã­",ic:"â£",Icirc:"Ã",icirc:"Ã®",Icy:"Ğ˜",icy:"Ğ¸",Idot:"Ä°",IEcy:"Ğ•",iecy:"Ğµ",iexcl:"Â¡",iff:"â‡”",Ifr:"â„‘",ifr:"ğ”¦",Igrave:"ÃŒ",igrave:"Ã¬",ii:"â…ˆ",iiiint:"â¨Œ",iiint:"âˆ­",iinfin:"â§œ",iiota:"â„©",IJlig:"Ä²",ijlig:"Ä³",Im:"â„‘",Imacr:"Äª",imacr:"Ä«",image:"â„‘",ImaginaryI:"â…ˆ",imagline:"â„",imagpart:"â„‘",imath:"Ä±",imof:"âŠ·",imped:"Æµ",Implies:"â‡’",in:"âˆˆ",incare:"â„…",infin:"âˆ",infintie:"â§",inodot:"Ä±",Int:"âˆ¬",int:"âˆ«",intcal:"âŠº",integers:"â„¤",Integral:"âˆ«",intercal:"âŠº",Intersection:"â‹‚",intlarhk:"â¨—",intprod:"â¨¼",InvisibleComma:"â£",InvisibleTimes:"â¢",IOcy:"Ğ",iocy:"Ñ‘",Iogon:"Ä®",iogon:"Ä¯",Iopf:"ğ•€",iopf:"ğ•š",Iota:"Î™",iota:"Î¹",iprod:"â¨¼",iquest:"Â¿",Iscr:"â„",iscr:"ğ’¾",isin:"âˆˆ",isindot:"â‹µ",isinE:"â‹¹",isins:"â‹´",isinsv:"â‹³",isinv:"âˆˆ",it:"â¢",Itilde:"Ä¨",itilde:"Ä©",Iukcy:"Ğ†",iukcy:"Ñ–",Iuml:"Ã",iuml:"Ã¯",Jcirc:"Ä´",jcirc:"Äµ",Jcy:"Ğ™",jcy:"Ğ¹",Jfr:"ğ”",jfr:"ğ”§",jmath:"È·",Jopf:"ğ•",jopf:"ğ•›",Jscr:"ğ’¥",jscr:"ğ’¿",Jsercy:"Ğˆ",jsercy:"Ñ˜",Jukcy:"Ğ„",jukcy:"Ñ”",Kappa:"Îš",kappa:"Îº",kappav:"Ï°",Kcedil:"Ä¶",kcedil:"Ä·",Kcy:"Ğš",kcy:"Ğº",Kfr:"ğ”",kfr:"ğ”¨",kgreen:"Ä¸",KHcy:"Ğ¥",khcy:"Ñ…",KJcy:"ĞŒ",kjcy:"Ñœ",Kopf:"ğ•‚",kopf:"ğ•œ",Kscr:"ğ’¦",kscr:"ğ“€",lAarr:"â‡š",Lacute:"Ä¹",lacute:"Äº",laemptyv:"â¦´",lagran:"â„’",Lambda:"Î›",lambda:"Î»",Lang:"âŸª",lang:"âŸ¨",langd:"â¦‘",langle:"âŸ¨",lap:"âª…",Laplacetrf:"â„’",laquo:"Â«",Larr:"â†",lArr:"â‡",larr:"â†",larrb:"â‡¤",larrbfs:"â¤Ÿ",larrfs:"â¤",larrhk:"â†©",larrlp:"â†«",larrpl:"â¤¹",larrsim:"â¥³",larrtl:"â†¢",lat:"âª«",lAtail:"â¤›",latail:"â¤™",late:"âª­",lates:"âª­ï¸€",lBarr:"â¤",lbarr:"â¤Œ",lbbrk:"â²",lbrace:"{",lbrack:"[",lbrke:"â¦‹",lbrksld:"â¦",lbrkslu:"â¦",Lcaron:"Ä½",lcaron:"Ä¾",Lcedil:"Ä»",lcedil:"Ä¼",lceil:"âŒˆ",lcub:"{",Lcy:"Ğ›",lcy:"Ğ»",ldca:"â¤¶",ldquo:"â€œ",ldquor:"â€",ldrdhar:"â¥§",ldrushar:"â¥‹",ldsh:"â†²",lE:"â‰¦",le:"â‰¤",LeftAngleBracket:"âŸ¨",LeftArrow:"â†",Leftarrow:"â‡",leftarrow:"â†",LeftArrowBar:"â‡¤",LeftArrowRightArrow:"â‡†",leftarrowtail:"â†¢",LeftCeiling:"âŒˆ",LeftDoubleBracket:"âŸ¦",LeftDownTeeVector:"â¥¡",LeftDownVector:"â‡ƒ",LeftDownVectorBar:"â¥™",LeftFloor:"âŒŠ",leftharpoondown:"â†½",leftharpoonup:"â†¼",leftleftarrows:"â‡‡",LeftRightArrow:"â†”",Leftrightarrow:"â‡”",leftrightarrow:"â†”",leftrightarrows:"â‡†",leftrightharpoons:"â‡‹",leftrightsquigarrow:"â†­",LeftRightVector:"â¥",LeftTee:"âŠ£",LeftTeeArrow:"â†¤",LeftTeeVector:"â¥š",leftthreetimes:"â‹‹",LeftTriangle:"âŠ²",LeftTriangleBar:"â§",LeftTriangleEqual:"âŠ´",LeftUpDownVector:"â¥‘",LeftUpTeeVector:"â¥ ",LeftUpVector:"â†¿",LeftUpVectorBar:"â¥˜",LeftVector:"â†¼",LeftVectorBar:"â¥’",lEg:"âª‹",leg:"â‹š",leq:"â‰¤",leqq:"â‰¦",leqslant:"â©½",les:"â©½",lescc:"âª¨",lesdot:"â©¿",lesdoto:"âª",lesdotor:"âªƒ",lesg:"â‹šï¸€",lesges:"âª“",lessapprox:"âª…",lessdot:"â‹–",lesseqgtr:"â‹š",lesseqqgtr:"âª‹",LessEqualGreater:"â‹š",LessFullEqual:"â‰¦",LessGreater:"â‰¶",lessgtr:"â‰¶",LessLess:"âª¡",lesssim:"â‰²",LessSlantEqual:"â©½",LessTilde:"â‰²",lfisht:"â¥¼",lfloor:"âŒŠ",Lfr:"ğ”",lfr:"ğ”©",lg:"â‰¶",lgE:"âª‘",lHar:"â¥¢",lhard:"â†½",lharu:"â†¼",lharul:"â¥ª",lhblk:"â–„",LJcy:"Ğ‰",ljcy:"Ñ™",Ll:"â‹˜",ll:"â‰ª",llarr:"â‡‡",llcorner:"âŒ",Lleftarrow:"â‡š",llhard:"â¥«",lltri:"â—º",Lmidot:"Ä¿",lmidot:"Å€",lmoust:"â°",lmoustache:"â°",lnap:"âª‰",lnapprox:"âª‰",lnE:"â‰¨",lne:"âª‡",lneq:"âª‡",lneqq:"â‰¨",lnsim:"â‹¦",loang:"âŸ¬",loarr:"â‡½",lobrk:"âŸ¦",LongLeftArrow:"âŸµ",Longleftarrow:"âŸ¸",longleftarrow:"âŸµ",LongLeftRightArrow:"âŸ·",Longleftrightarrow:"âŸº",longleftrightarrow:"âŸ·",longmapsto:"âŸ¼",LongRightArrow:"âŸ¶",Longrightarrow:"âŸ¹",longrightarrow:"âŸ¶",looparrowleft:"â†«",looparrowright:"â†¬",lopar:"â¦…",Lopf:"ğ•ƒ",lopf:"ğ•",loplus:"â¨­",lotimes:"â¨´",lowast:"âˆ—",lowbar:"_",LowerLeftArrow:"â†™",LowerRightArrow:"â†˜",loz:"â—Š",lozenge:"â—Š",lozf:"â§«",lpar:"(",lparlt:"â¦“",lrarr:"â‡†",lrcorner:"âŒŸ",lrhar:"â‡‹",lrhard:"â¥­",lrm:"â€",lrtri:"âŠ¿",lsaquo:"â€¹",Lscr:"â„’",lscr:"ğ“",Lsh:"â†°",lsh:"â†°",lsim:"â‰²",lsime:"âª",lsimg:"âª",lsqb:"[",lsquo:"â€˜",lsquor:"â€š",Lstrok:"Å",lstrok:"Å‚",Lt:"â‰ª",LT:"<",lt:"<",ltcc:"âª¦",ltcir:"â©¹",ltdot:"â‹–",lthree:"â‹‹",ltimes:"â‹‰",ltlarr:"â¥¶",ltquest:"â©»",ltri:"â—ƒ",ltrie:"âŠ´",ltrif:"â—‚",ltrPar:"â¦–",lurdshar:"â¥Š",luruhar:"â¥¦",lvertneqq:"â‰¨ï¸€",lvnE:"â‰¨ï¸€",macr:"Â¯",male:"â™‚",malt:"âœ ",maltese:"âœ ",Map:"â¤…",map:"â†¦",mapsto:"â†¦",mapstodown:"â†§",mapstoleft:"â†¤",mapstoup:"â†¥",marker:"â–®",mcomma:"â¨©",Mcy:"Ğœ",mcy:"Ğ¼",mdash:"â€”",mDDot:"âˆº",measuredangle:"âˆ¡",MediumSpace:"âŸ",Mellintrf:"â„³",Mfr:"ğ”",mfr:"ğ”ª",mho:"â„§",micro:"Âµ",mid:"âˆ£",midast:"*",midcir:"â«°",middot:"Â·",minus:"âˆ’",minusb:"âŠŸ",minusd:"âˆ¸",minusdu:"â¨ª",MinusPlus:"âˆ“",mlcp:"â«›",mldr:"â€¦",mnplus:"âˆ“",models:"âŠ§",Mopf:"ğ•„",mopf:"ğ•",mp:"âˆ“",Mscr:"â„³",mscr:"ğ“‚",mstpos:"âˆ¾",Mu:"Îœ",mu:"Î¼",multimap:"âŠ¸",mumap:"âŠ¸",nabla:"âˆ‡",Nacute:"Åƒ",nacute:"Å„",nang:"âˆ âƒ’",nap:"â‰‰",napE:"â©°Ì¸",napid:"â‰‹Ì¸",napos:"Å‰",napprox:"â‰‰",natur:"â™®",natural:"â™®",naturals:"â„•",nbsp:"Â ",nbump:"â‰Ì¸",nbumpe:"â‰Ì¸",ncap:"â©ƒ",Ncaron:"Å‡",ncaron:"Åˆ",Ncedil:"Å…",ncedil:"Å†",ncong:"â‰‡",ncongdot:"â©­Ì¸",ncup:"â©‚",Ncy:"Ğ",ncy:"Ğ½",ndash:"â€“",ne:"â‰ ",nearhk:"â¤¤",neArr:"â‡—",nearr:"â†—",nearrow:"â†—",nedot:"â‰Ì¸",NegativeMediumSpace:"â€‹",NegativeThickSpace:"â€‹",NegativeThinSpace:"â€‹",NegativeVeryThinSpace:"â€‹",nequiv:"â‰¢",nesear:"â¤¨",nesim:"â‰‚Ì¸",NestedGreaterGreater:"â‰«",NestedLessLess:"â‰ª",NewLine:`
`,nexist:"âˆ„",nexists:"âˆ„",Nfr:"ğ”‘",nfr:"ğ”«",ngE:"â‰§Ì¸",nge:"â‰±",ngeq:"â‰±",ngeqq:"â‰§Ì¸",ngeqslant:"â©¾Ì¸",nges:"â©¾Ì¸",nGg:"â‹™Ì¸",ngsim:"â‰µ",nGt:"â‰«âƒ’",ngt:"â‰¯",ngtr:"â‰¯",nGtv:"â‰«Ì¸",nhArr:"â‡",nharr:"â†®",nhpar:"â«²",ni:"âˆ‹",nis:"â‹¼",nisd:"â‹º",niv:"âˆ‹",NJcy:"ĞŠ",njcy:"Ñš",nlArr:"â‡",nlarr:"â†š",nldr:"â€¥",nlE:"â‰¦Ì¸",nle:"â‰°",nLeftarrow:"â‡",nleftarrow:"â†š",nLeftrightarrow:"â‡",nleftrightarrow:"â†®",nleq:"â‰°",nleqq:"â‰¦Ì¸",nleqslant:"â©½Ì¸",nles:"â©½Ì¸",nless:"â‰®",nLl:"â‹˜Ì¸",nlsim:"â‰´",nLt:"â‰ªâƒ’",nlt:"â‰®",nltri:"â‹ª",nltrie:"â‹¬",nLtv:"â‰ªÌ¸",nmid:"âˆ¤",NoBreak:"â ",NonBreakingSpace:"Â ",Nopf:"â„•",nopf:"ğ•Ÿ",Not:"â«¬",not:"Â¬",NotCongruent:"â‰¢",NotCupCap:"â‰­",NotDoubleVerticalBar:"âˆ¦",NotElement:"âˆ‰",NotEqual:"â‰ ",NotEqualTilde:"â‰‚Ì¸",NotExists:"âˆ„",NotGreater:"â‰¯",NotGreaterEqual:"â‰±",NotGreaterFullEqual:"â‰§Ì¸",NotGreaterGreater:"â‰«Ì¸",NotGreaterLess:"â‰¹",NotGreaterSlantEqual:"â©¾Ì¸",NotGreaterTilde:"â‰µ",NotHumpDownHump:"â‰Ì¸",NotHumpEqual:"â‰Ì¸",notin:"âˆ‰",notindot:"â‹µÌ¸",notinE:"â‹¹Ì¸",notinva:"âˆ‰",notinvb:"â‹·",notinvc:"â‹¶",NotLeftTriangle:"â‹ª",NotLeftTriangleBar:"â§Ì¸",NotLeftTriangleEqual:"â‹¬",NotLess:"â‰®",NotLessEqual:"â‰°",NotLessGreater:"â‰¸",NotLessLess:"â‰ªÌ¸",NotLessSlantEqual:"â©½Ì¸",NotLessTilde:"â‰´",NotNestedGreaterGreater:"âª¢Ì¸",NotNestedLessLess:"âª¡Ì¸",notni:"âˆŒ",notniva:"âˆŒ",notnivb:"â‹¾",notnivc:"â‹½",NotPrecedes:"âŠ€",NotPrecedesEqual:"âª¯Ì¸",NotPrecedesSlantEqual:"â‹ ",NotReverseElement:"âˆŒ",NotRightTriangle:"â‹«",NotRightTriangleBar:"â§Ì¸",NotRightTriangleEqual:"â‹­",NotSquareSubset:"âŠÌ¸",NotSquareSubsetEqual:"â‹¢",NotSquareSuperset:"âŠÌ¸",NotSquareSupersetEqual:"â‹£",NotSubset:"âŠ‚âƒ’",NotSubsetEqual:"âŠˆ",NotSucceeds:"âŠ",NotSucceedsEqual:"âª°Ì¸",NotSucceedsSlantEqual:"â‹¡",NotSucceedsTilde:"â‰¿Ì¸",NotSuperset:"âŠƒâƒ’",NotSupersetEqual:"âŠ‰",NotTilde:"â‰",NotTildeEqual:"â‰„",NotTildeFullEqual:"â‰‡",NotTildeTilde:"â‰‰",NotVerticalBar:"âˆ¤",npar:"âˆ¦",nparallel:"âˆ¦",nparsl:"â«½âƒ¥",npart:"âˆ‚Ì¸",npolint:"â¨”",npr:"âŠ€",nprcue:"â‹ ",npre:"âª¯Ì¸",nprec:"âŠ€",npreceq:"âª¯Ì¸",nrArr:"â‡",nrarr:"â†›",nrarrc:"â¤³Ì¸",nrarrw:"â†Ì¸",nRightarrow:"â‡",nrightarrow:"â†›",nrtri:"â‹«",nrtrie:"â‹­",nsc:"âŠ",nsccue:"â‹¡",nsce:"âª°Ì¸",Nscr:"ğ’©",nscr:"ğ“ƒ",nshortmid:"âˆ¤",nshortparallel:"âˆ¦",nsim:"â‰",nsime:"â‰„",nsimeq:"â‰„",nsmid:"âˆ¤",nspar:"âˆ¦",nsqsube:"â‹¢",nsqsupe:"â‹£",nsub:"âŠ„",nsubE:"â«…Ì¸",nsube:"âŠˆ",nsubset:"âŠ‚âƒ’",nsubseteq:"âŠˆ",nsubseteqq:"â«…Ì¸",nsucc:"âŠ",nsucceq:"âª°Ì¸",nsup:"âŠ…",nsupE:"â«†Ì¸",nsupe:"âŠ‰",nsupset:"âŠƒâƒ’",nsupseteq:"âŠ‰",nsupseteqq:"â«†Ì¸",ntgl:"â‰¹",Ntilde:"Ã‘",ntilde:"Ã±",ntlg:"â‰¸",ntriangleleft:"â‹ª",ntrianglelefteq:"â‹¬",ntriangleright:"â‹«",ntrianglerighteq:"â‹­",Nu:"Î",nu:"Î½",num:"#",numero:"â„–",numsp:"â€‡",nvap:"â‰âƒ’",nVDash:"âŠ¯",nVdash:"âŠ®",nvDash:"âŠ­",nvdash:"âŠ¬",nvge:"â‰¥âƒ’",nvgt:">âƒ’",nvHarr:"â¤„",nvinfin:"â§",nvlArr:"â¤‚",nvle:"â‰¤âƒ’",nvlt:"<âƒ’",nvltrie:"âŠ´âƒ’",nvrArr:"â¤ƒ",nvrtrie:"âŠµâƒ’",nvsim:"âˆ¼âƒ’",nwarhk:"â¤£",nwArr:"â‡–",nwarr:"â†–",nwarrow:"â†–",nwnear:"â¤§",Oacute:"Ã“",oacute:"Ã³",oast:"âŠ›",ocir:"âŠš",Ocirc:"Ã”",ocirc:"Ã´",Ocy:"Ğ",ocy:"Ğ¾",odash:"âŠ",Odblac:"Å",odblac:"Å‘",odiv:"â¨¸",odot:"âŠ™",odsold:"â¦¼",OElig:"Å’",oelig:"Å“",ofcir:"â¦¿",Ofr:"ğ”’",ofr:"ğ”¬",ogon:"Ë›",Ograve:"Ã’",ograve:"Ã²",ogt:"â§",ohbar:"â¦µ",ohm:"Î©",oint:"âˆ®",olarr:"â†º",olcir:"â¦¾",olcross:"â¦»",oline:"â€¾",olt:"â§€",Omacr:"ÅŒ",omacr:"Å",Omega:"Î©",omega:"Ï‰",Omicron:"ÎŸ",omicron:"Î¿",omid:"â¦¶",ominus:"âŠ–",Oopf:"ğ•†",oopf:"ğ• ",opar:"â¦·",OpenCurlyDoubleQuote:"â€œ",OpenCurlyQuote:"â€˜",operp:"â¦¹",oplus:"âŠ•",Or:"â©”",or:"âˆ¨",orarr:"â†»",ord:"â©",order:"â„´",orderof:"â„´",ordf:"Âª",ordm:"Âº",origof:"âŠ¶",oror:"â©–",orslope:"â©—",orv:"â©›",oS:"â“ˆ",Oscr:"ğ’ª",oscr:"â„´",Oslash:"Ã˜",oslash:"Ã¸",osol:"âŠ˜",Otilde:"Ã•",otilde:"Ãµ",Otimes:"â¨·",otimes:"âŠ—",otimesas:"â¨¶",Ouml:"Ã–",ouml:"Ã¶",ovbar:"âŒ½",OverBar:"â€¾",OverBrace:"â",OverBracket:"â´",OverParenthesis:"âœ",par:"âˆ¥",para:"Â¶",parallel:"âˆ¥",parsim:"â«³",parsl:"â«½",part:"âˆ‚",PartialD:"âˆ‚",Pcy:"ĞŸ",pcy:"Ğ¿",percnt:"%",period:".",permil:"â€°",perp:"âŠ¥",pertenk:"â€±",Pfr:"ğ”“",pfr:"ğ”­",Phi:"Î¦",phi:"Ï†",phiv:"Ï•",phmmat:"â„³",phone:"â˜",Pi:"Î ",pi:"Ï€",pitchfork:"â‹”",piv:"Ï–",planck:"â„",planckh:"â„",plankv:"â„",plus:"+",plusacir:"â¨£",plusb:"âŠ",pluscir:"â¨¢",plusdo:"âˆ”",plusdu:"â¨¥",pluse:"â©²",PlusMinus:"Â±",plusmn:"Â±",plussim:"â¨¦",plustwo:"â¨§",pm:"Â±",Poincareplane:"â„Œ",pointint:"â¨•",Popf:"â„™",popf:"ğ•¡",pound:"Â£",Pr:"âª»",pr:"â‰º",prap:"âª·",prcue:"â‰¼",prE:"âª³",pre:"âª¯",prec:"â‰º",precapprox:"âª·",preccurlyeq:"â‰¼",Precedes:"â‰º",PrecedesEqual:"âª¯",PrecedesSlantEqual:"â‰¼",PrecedesTilde:"â‰¾",preceq:"âª¯",precnapprox:"âª¹",precneqq:"âªµ",precnsim:"â‹¨",precsim:"â‰¾",Prime:"â€³",prime:"â€²",primes:"â„™",prnap:"âª¹",prnE:"âªµ",prnsim:"â‹¨",prod:"âˆ",Product:"âˆ",profalar:"âŒ®",profline:"âŒ’",profsurf:"âŒ“",prop:"âˆ",Proportion:"âˆ·",Proportional:"âˆ",propto:"âˆ",prsim:"â‰¾",prurel:"âŠ°",Pscr:"ğ’«",pscr:"ğ“…",Psi:"Î¨",psi:"Ïˆ",puncsp:"â€ˆ",Qfr:"ğ””",qfr:"ğ”®",qint:"â¨Œ",Qopf:"â„š",qopf:"ğ•¢",qprime:"â—",Qscr:"ğ’¬",qscr:"ğ“†",quaternions:"â„",quatint:"â¨–",quest:"?",questeq:"â‰Ÿ",QUOT:'"',quot:'"',rAarr:"â‡›",race:"âˆ½Ì±",Racute:"Å”",racute:"Å•",radic:"âˆš",raemptyv:"â¦³",Rang:"âŸ«",rang:"âŸ©",rangd:"â¦’",range:"â¦¥",rangle:"âŸ©",raquo:"Â»",Rarr:"â† ",rArr:"â‡’",rarr:"â†’",rarrap:"â¥µ",rarrb:"â‡¥",rarrbfs:"â¤ ",rarrc:"â¤³",rarrfs:"â¤",rarrhk:"â†ª",rarrlp:"â†¬",rarrpl:"â¥…",rarrsim:"â¥´",Rarrtl:"â¤–",rarrtl:"â†£",rarrw:"â†",rAtail:"â¤œ",ratail:"â¤š",ratio:"âˆ¶",rationals:"â„š",RBarr:"â¤",rBarr:"â¤",rbarr:"â¤",rbbrk:"â³",rbrace:"}",rbrack:"]",rbrke:"â¦Œ",rbrksld:"â¦",rbrkslu:"â¦",Rcaron:"Å˜",rcaron:"Å™",Rcedil:"Å–",rcedil:"Å—",rceil:"âŒ‰",rcub:"}",Rcy:"Ğ ",rcy:"Ñ€",rdca:"â¤·",rdldhar:"â¥©",rdquo:"â€",rdquor:"â€",rdsh:"â†³",Re:"â„œ",real:"â„œ",realine:"â„›",realpart:"â„œ",reals:"â„",rect:"â–­",REG:"Â®",reg:"Â®",ReverseElement:"âˆ‹",ReverseEquilibrium:"â‡‹",ReverseUpEquilibrium:"â¥¯",rfisht:"â¥½",rfloor:"âŒ‹",Rfr:"â„œ",rfr:"ğ”¯",rHar:"â¥¤",rhard:"â‡",rharu:"â‡€",rharul:"â¥¬",Rho:"Î¡",rho:"Ï",rhov:"Ï±",RightAngleBracket:"âŸ©",RightArrow:"â†’",Rightarrow:"â‡’",rightarrow:"â†’",RightArrowBar:"â‡¥",RightArrowLeftArrow:"â‡„",rightarrowtail:"â†£",RightCeiling:"âŒ‰",RightDoubleBracket:"âŸ§",RightDownTeeVector:"â¥",RightDownVector:"â‡‚",RightDownVectorBar:"â¥•",RightFloor:"âŒ‹",rightharpoondown:"â‡",rightharpoonup:"â‡€",rightleftarrows:"â‡„",rightleftharpoons:"â‡Œ",rightrightarrows:"â‡‰",rightsquigarrow:"â†",RightTee:"âŠ¢",RightTeeArrow:"â†¦",RightTeeVector:"â¥›",rightthreetimes:"â‹Œ",RightTriangle:"âŠ³",RightTriangleBar:"â§",RightTriangleEqual:"âŠµ",RightUpDownVector:"â¥",RightUpTeeVector:"â¥œ",RightUpVector:"â†¾",RightUpVectorBar:"â¥”",RightVector:"â‡€",RightVectorBar:"â¥“",ring:"Ëš",risingdotseq:"â‰“",rlarr:"â‡„",rlhar:"â‡Œ",rlm:"â€",rmoust:"â±",rmoustache:"â±",rnmid:"â«®",roang:"âŸ­",roarr:"â‡¾",robrk:"âŸ§",ropar:"â¦†",Ropf:"â„",ropf:"ğ•£",roplus:"â¨®",rotimes:"â¨µ",RoundImplies:"â¥°",rpar:")",rpargt:"â¦”",rppolint:"â¨’",rrarr:"â‡‰",Rrightarrow:"â‡›",rsaquo:"â€º",Rscr:"â„›",rscr:"ğ“‡",Rsh:"â†±",rsh:"â†±",rsqb:"]",rsquo:"â€™",rsquor:"â€™",rthree:"â‹Œ",rtimes:"â‹Š",rtri:"â–¹",rtrie:"âŠµ",rtrif:"â–¸",rtriltri:"â§",RuleDelayed:"â§´",ruluhar:"â¥¨",rx:"â„",Sacute:"Åš",sacute:"Å›",sbquo:"â€š",Sc:"âª¼",sc:"â‰»",scap:"âª¸",Scaron:"Å ",scaron:"Å¡",sccue:"â‰½",scE:"âª´",sce:"âª°",Scedil:"Å",scedil:"ÅŸ",Scirc:"Åœ",scirc:"Å",scnap:"âªº",scnE:"âª¶",scnsim:"â‹©",scpolint:"â¨“",scsim:"â‰¿",Scy:"Ğ¡",scy:"Ñ",sdot:"â‹…",sdotb:"âŠ¡",sdote:"â©¦",searhk:"â¤¥",seArr:"â‡˜",searr:"â†˜",searrow:"â†˜",sect:"Â§",semi:";",seswar:"â¤©",setminus:"âˆ–",setmn:"âˆ–",sext:"âœ¶",Sfr:"ğ”–",sfr:"ğ”°",sfrown:"âŒ¢",sharp:"â™¯",SHCHcy:"Ğ©",shchcy:"Ñ‰",SHcy:"Ğ¨",shcy:"Ñˆ",ShortDownArrow:"â†“",ShortLeftArrow:"â†",shortmid:"âˆ£",shortparallel:"âˆ¥",ShortRightArrow:"â†’",ShortUpArrow:"â†‘",shy:"Â­",Sigma:"Î£",sigma:"Ïƒ",sigmaf:"Ï‚",sigmav:"Ï‚",sim:"âˆ¼",simdot:"â©ª",sime:"â‰ƒ",simeq:"â‰ƒ",simg:"âª",simgE:"âª ",siml:"âª",simlE:"âªŸ",simne:"â‰†",simplus:"â¨¤",simrarr:"â¥²",slarr:"â†",SmallCircle:"âˆ˜",smallsetminus:"âˆ–",smashp:"â¨³",smeparsl:"â§¤",smid:"âˆ£",smile:"âŒ£",smt:"âªª",smte:"âª¬",smtes:"âª¬ï¸€",SOFTcy:"Ğ¬",softcy:"ÑŒ",sol:"/",solb:"â§„",solbar:"âŒ¿",Sopf:"ğ•Š",sopf:"ğ•¤",spades:"â™ ",spadesuit:"â™ ",spar:"âˆ¥",sqcap:"âŠ“",sqcaps:"âŠ“ï¸€",sqcup:"âŠ”",sqcups:"âŠ”ï¸€",Sqrt:"âˆš",sqsub:"âŠ",sqsube:"âŠ‘",sqsubset:"âŠ",sqsubseteq:"âŠ‘",sqsup:"âŠ",sqsupe:"âŠ’",sqsupset:"âŠ",sqsupseteq:"âŠ’",squ:"â–¡",Square:"â–¡",square:"â–¡",SquareIntersection:"âŠ“",SquareSubset:"âŠ",SquareSubsetEqual:"âŠ‘",SquareSuperset:"âŠ",SquareSupersetEqual:"âŠ’",SquareUnion:"âŠ”",squarf:"â–ª",squf:"â–ª",srarr:"â†’",Sscr:"ğ’®",sscr:"ğ“ˆ",ssetmn:"âˆ–",ssmile:"âŒ£",sstarf:"â‹†",Star:"â‹†",star:"â˜†",starf:"â˜…",straightepsilon:"Ïµ",straightphi:"Ï•",strns:"Â¯",Sub:"â‹",sub:"âŠ‚",subdot:"âª½",subE:"â«…",sube:"âŠ†",subedot:"â«ƒ",submult:"â«",subnE:"â«‹",subne:"âŠŠ",subplus:"âª¿",subrarr:"â¥¹",Subset:"â‹",subset:"âŠ‚",subseteq:"âŠ†",subseteqq:"â«…",SubsetEqual:"âŠ†",subsetneq:"âŠŠ",subsetneqq:"â«‹",subsim:"â«‡",subsub:"â«•",subsup:"â«“",succ:"â‰»",succapprox:"âª¸",succcurlyeq:"â‰½",Succeeds:"â‰»",SucceedsEqual:"âª°",SucceedsSlantEqual:"â‰½",SucceedsTilde:"â‰¿",succeq:"âª°",succnapprox:"âªº",succneqq:"âª¶",succnsim:"â‹©",succsim:"â‰¿",SuchThat:"âˆ‹",Sum:"âˆ‘",sum:"âˆ‘",sung:"â™ª",Sup:"â‹‘",sup:"âŠƒ",sup1:"Â¹",sup2:"Â²",sup3:"Â³",supdot:"âª¾",supdsub:"â«˜",supE:"â«†",supe:"âŠ‡",supedot:"â«„",Superset:"âŠƒ",SupersetEqual:"âŠ‡",suphsol:"âŸ‰",suphsub:"â«—",suplarr:"â¥»",supmult:"â«‚",supnE:"â«Œ",supne:"âŠ‹",supplus:"â«€",Supset:"â‹‘",supset:"âŠƒ",supseteq:"âŠ‡",supseteqq:"â«†",supsetneq:"âŠ‹",supsetneqq:"â«Œ",supsim:"â«ˆ",supsub:"â«”",supsup:"â«–",swarhk:"â¤¦",swArr:"â‡™",swarr:"â†™",swarrow:"â†™",swnwar:"â¤ª",szlig:"ÃŸ",Tab:"	",target:"âŒ–",Tau:"Î¤",tau:"Ï„",tbrk:"â´",Tcaron:"Å¤",tcaron:"Å¥",Tcedil:"Å¢",tcedil:"Å£",Tcy:"Ğ¢",tcy:"Ñ‚",tdot:"âƒ›",telrec:"âŒ•",Tfr:"ğ”—",tfr:"ğ”±",there4:"âˆ´",Therefore:"âˆ´",therefore:"âˆ´",Theta:"Î˜",theta:"Î¸",thetasym:"Ï‘",thetav:"Ï‘",thickapprox:"â‰ˆ",thicksim:"âˆ¼",ThickSpace:"âŸâ€Š",thinsp:"â€‰",ThinSpace:"â€‰",thkap:"â‰ˆ",thksim:"âˆ¼",THORN:"Ã",thorn:"Ã¾",Tilde:"âˆ¼",tilde:"Ëœ",TildeEqual:"â‰ƒ",TildeFullEqual:"â‰…",TildeTilde:"â‰ˆ",times:"Ã—",timesb:"âŠ ",timesbar:"â¨±",timesd:"â¨°",tint:"âˆ­",toea:"â¤¨",top:"âŠ¤",topbot:"âŒ¶",topcir:"â«±",Topf:"ğ•‹",topf:"ğ•¥",topfork:"â«š",tosa:"â¤©",tprime:"â€´",TRADE:"â„¢",trade:"â„¢",triangle:"â–µ",triangledown:"â–¿",triangleleft:"â—ƒ",trianglelefteq:"âŠ´",triangleq:"â‰œ",triangleright:"â–¹",trianglerighteq:"âŠµ",tridot:"â—¬",trie:"â‰œ",triminus:"â¨º",TripleDot:"âƒ›",triplus:"â¨¹",trisb:"â§",tritime:"â¨»",trpezium:"â¢",Tscr:"ğ’¯",tscr:"ğ“‰",TScy:"Ğ¦",tscy:"Ñ†",TSHcy:"Ğ‹",tshcy:"Ñ›",Tstrok:"Å¦",tstrok:"Å§",twixt:"â‰¬",twoheadleftarrow:"â†",twoheadrightarrow:"â† ",Uacute:"Ãš",uacute:"Ãº",Uarr:"â†Ÿ",uArr:"â‡‘",uarr:"â†‘",Uarrocir:"â¥‰",Ubrcy:"Ğ",ubrcy:"Ñ",Ubreve:"Å¬",ubreve:"Å­",Ucirc:"Ã›",ucirc:"Ã»",Ucy:"Ğ£",ucy:"Ñƒ",udarr:"â‡…",Udblac:"Å°",udblac:"Å±",udhar:"â¥®",ufisht:"â¥¾",Ufr:"ğ”˜",ufr:"ğ”²",Ugrave:"Ã™",ugrave:"Ã¹",uHar:"â¥£",uharl:"â†¿",uharr:"â†¾",uhblk:"â–€",ulcorn:"âŒœ",ulcorner:"âŒœ",ulcrop:"âŒ",ultri:"â—¸",Umacr:"Åª",umacr:"Å«",uml:"Â¨",UnderBar:"_",UnderBrace:"âŸ",UnderBracket:"âµ",UnderParenthesis:"â",Union:"â‹ƒ",UnionPlus:"âŠ",Uogon:"Å²",uogon:"Å³",Uopf:"ğ•Œ",uopf:"ğ•¦",UpArrow:"â†‘",Uparrow:"â‡‘",uparrow:"â†‘",UpArrowBar:"â¤’",UpArrowDownArrow:"â‡…",UpDownArrow:"â†•",Updownarrow:"â‡•",updownarrow:"â†•",UpEquilibrium:"â¥®",upharpoonleft:"â†¿",upharpoonright:"â†¾",uplus:"âŠ",UpperLeftArrow:"â†–",UpperRightArrow:"â†—",Upsi:"Ï’",upsi:"Ï…",upsih:"Ï’",Upsilon:"Î¥",upsilon:"Ï…",UpTee:"âŠ¥",UpTeeArrow:"â†¥",upuparrows:"â‡ˆ",urcorn:"âŒ",urcorner:"âŒ",urcrop:"âŒ",Uring:"Å®",uring:"Å¯",urtri:"â—¹",Uscr:"ğ’°",uscr:"ğ“Š",utdot:"â‹°",Utilde:"Å¨",utilde:"Å©",utri:"â–µ",utrif:"â–´",uuarr:"â‡ˆ",Uuml:"Ãœ",uuml:"Ã¼",uwangle:"â¦§",vangrt:"â¦œ",varepsilon:"Ïµ",varkappa:"Ï°",varnothing:"âˆ…",varphi:"Ï•",varpi:"Ï–",varpropto:"âˆ",vArr:"â‡•",varr:"â†•",varrho:"Ï±",varsigma:"Ï‚",varsubsetneq:"âŠŠï¸€",varsubsetneqq:"â«‹ï¸€",varsupsetneq:"âŠ‹ï¸€",varsupsetneqq:"â«Œï¸€",vartheta:"Ï‘",vartriangleleft:"âŠ²",vartriangleright:"âŠ³",Vbar:"â««",vBar:"â«¨",vBarv:"â«©",Vcy:"Ğ’",vcy:"Ğ²",VDash:"âŠ«",Vdash:"âŠ©",vDash:"âŠ¨",vdash:"âŠ¢",Vdashl:"â«¦",Vee:"â‹",vee:"âˆ¨",veebar:"âŠ»",veeeq:"â‰š",vellip:"â‹®",Verbar:"â€–",verbar:"|",Vert:"â€–",vert:"|",VerticalBar:"âˆ£",VerticalLine:"|",VerticalSeparator:"â˜",VerticalTilde:"â‰€",VeryThinSpace:"â€Š",Vfr:"ğ”™",vfr:"ğ”³",vltri:"âŠ²",vnsub:"âŠ‚âƒ’",vnsup:"âŠƒâƒ’",Vopf:"ğ•",vopf:"ğ•§",vprop:"âˆ",vrtri:"âŠ³",Vscr:"ğ’±",vscr:"ğ“‹",vsubnE:"â«‹ï¸€",vsubne:"âŠŠï¸€",vsupnE:"â«Œï¸€",vsupne:"âŠ‹ï¸€",Vvdash:"âŠª",vzigzag:"â¦š",Wcirc:"Å´",wcirc:"Åµ",wedbar:"â©Ÿ",Wedge:"â‹€",wedge:"âˆ§",wedgeq:"â‰™",weierp:"â„˜",Wfr:"ğ”š",wfr:"ğ”´",Wopf:"ğ•",wopf:"ğ•¨",wp:"â„˜",wr:"â‰€",wreath:"â‰€",Wscr:"ğ’²",wscr:"ğ“Œ",xcap:"â‹‚",xcirc:"â—¯",xcup:"â‹ƒ",xdtri:"â–½",Xfr:"ğ”›",xfr:"ğ”µ",xhArr:"âŸº",xharr:"âŸ·",Xi:"Î",xi:"Î¾",xlArr:"âŸ¸",xlarr:"âŸµ",xmap:"âŸ¼",xnis:"â‹»",xodot:"â¨€",Xopf:"ğ•",xopf:"ğ•©",xoplus:"â¨",xotime:"â¨‚",xrArr:"âŸ¹",xrarr:"âŸ¶",Xscr:"ğ’³",xscr:"ğ“",xsqcup:"â¨†",xuplus:"â¨„",xutri:"â–³",xvee:"â‹",xwedge:"â‹€",Yacute:"Ã",yacute:"Ã½",YAcy:"Ğ¯",yacy:"Ñ",Ycirc:"Å¶",ycirc:"Å·",Ycy:"Ğ«",ycy:"Ñ‹",yen:"Â¥",Yfr:"ğ”œ",yfr:"ğ”¶",YIcy:"Ğ‡",yicy:"Ñ—",Yopf:"ğ•",yopf:"ğ•ª",Yscr:"ğ’´",yscr:"ğ“",YUcy:"Ğ®",yucy:"Ñ",Yuml:"Å¸",yuml:"Ã¿",Zacute:"Å¹",zacute:"Åº",Zcaron:"Å½",zcaron:"Å¾",Zcy:"Ğ—",zcy:"Ğ·",Zdot:"Å»",zdot:"Å¼",zeetrf:"â„¨",ZeroWidthSpace:"â€‹",Zeta:"Î–",zeta:"Î¶",Zfr:"â„¨",zfr:"ğ”·",ZHcy:"Ğ–",zhcy:"Ğ¶",zigrarr:"â‡",Zopf:"â„¤",zopf:"ğ•«",Zscr:"ğ’µ",zscr:"ğ“",zwj:"â€",zwnj:"â€Œ"}),E.entityMap=E.HTML_ENTITIES})(rr)),rr}var di={},An;function Ra(){if(An)return di;An=1;var E=Ci().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),r=0,n=1,s=2,a=3,l=4,h=5,p=6,c=7;function b(k,I){this.message=k,this.locator=I,Error.captureStackTrace&&Error.captureStackTrace(this,b)}b.prototype=new Error,b.prototype.name=b.name;function m(){}m.prototype={parse:function(k,I,j){var L=this.domBuilder;L.startDocument(),B(I,I={}),O(k,I,j,L,this.errorHandler),L.endDocument()}};function O(k,I,j,L,H){function X(ge){if(ge>65535){ge-=65536;var Ae=55296+(ge>>10),De=56320+(ge&1023);return String.fromCharCode(Ae,De)}else return String.fromCharCode(ge)}function te(ge){var Ae=ge.slice(1,-1);return Ae in j?j[Ae]:Ae.charAt(0)==="#"?X(parseInt(Ae.substr(1).replace("x","0x"))):(H.error("entity not found:"+ge),ge)}function re(ge){if(ge>Te){var Ae=k.substring(Te,ge).replace(/&#?\w+;/g,te);ue&&Q(Te),L.characters(Ae,0,ge-Te),Te=ge}}function Q(ge,Ae){for(;ge>=de&&(Ae=ne.exec(k));)ie=Ae.index,de=ie+Ae[0].length,ue.lineNumber++;ue.columnNumber=ge-ie+1}for(var ie=0,de=0,ne=/.*(?:\r\n?|\n)|.*$/g,ue=L.locator,ve=[{currentNSMap:I}],Re={},Te=0;;){try{var Fe=k.indexOf("<",Te);if(Fe<0){if(!k.substr(Te).match(/^\s*$/)){var Je=L.doc,$e=Je.createTextNode(k.substr(Te));Je.appendChild($e),L.currentElement=$e}return}switch(Fe>Te&&re(Fe),k.charAt(Fe+1)){case"/":var Z=k.indexOf(">",Fe+3),Se=k.substring(Fe+2,Z).replace(/[ \t\n\r]+$/g,""),He=ve.pop();Z<0?(Se=k.substring(Fe+2).replace(/[\s<].*/,""),H.error("end tag name: "+Se+" is not complete:"+He.tagName),Z=Fe+1+Se.length):Se.match(/\s</)&&(Se=Se.replace(/[\s<].*/,""),H.error("end tag name: "+Se+" maybe not complete"),Z=Fe+1+Se.length);var Xe=He.localNSMap,Ne=He.tagName==Se,Le=Ne||He.tagName&&He.tagName.toLowerCase()==Se.toLowerCase();if(Le){if(L.endElement(He.uri,He.localName,Se),Xe)for(var Oe in Xe)Object.prototype.hasOwnProperty.call(Xe,Oe)&&L.endPrefixMapping(Oe);Ne||H.fatalError("end tag name: "+Se+" is not match the current start tagName:"+He.tagName)}else ve.push(He);Z++;break;case"?":ue&&Q(Fe),Z=T(k,Fe,L);break;case"!":ue&&Q(Fe),Z=y(k,Fe,L,H);break;default:ue&&Q(Fe);var Me=new N,ee=ve[ve.length-1].currentNSMap,Z=f(k,Fe,Me,ee,te,H),K=Me.length;if(!Me.closed&&x(k,Z,Me.tagName,Re)&&(Me.closed=!0,j.nbsp||H.warning("unclosed xml attribute")),ue&&K){for(var me=w(ue,{}),be=0;be<K;be++){var ce=Me[be];Q(ce.offset),ce.locator=w(ue,{})}L.locator=me,v(Me,L,ee)&&ve.push(Me),L.locator=ue}else v(Me,L,ee)&&ve.push(Me);E.isHTML(Me.uri)&&!Me.closed?Z=g(k,Z,Me.tagName,te,L):Z++}}catch(ge){if(ge instanceof b)throw ge;H.error("element parse error: "+ge),Z=-1}Z>Te?Te=Z:re(Math.max(Fe,Te)+1)}}function w(k,I){return I.lineNumber=k.lineNumber,I.columnNumber=k.columnNumber,I}function f(k,I,j,L,H,X){function te(ue,ve,Re){j.attributeNames.hasOwnProperty(ue)&&X.fatalError("Attribute "+ue+" redefined"),j.addValue(ue,ve,Re)}for(var re,Q,ie=++I,de=r;;){var ne=k.charAt(ie);switch(ne){case"=":if(de===n)re=k.slice(I,ie),de=a;else if(de===s)de=a;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(de===a||de===n)if(de===n&&(X.warning('attribute value must after "="'),re=k.slice(I,ie)),I=ie+1,ie=k.indexOf(ne,I),ie>0)Q=k.slice(I,ie).replace(/&#?\w+;/g,H),te(re,Q,I-1),de=h;else throw new Error("attribute value no end '"+ne+"' match");else if(de==l)Q=k.slice(I,ie).replace(/&#?\w+;/g,H),te(re,Q,I),X.warning('attribute "'+re+'" missed start quot('+ne+")!!"),I=ie+1,de=h;else throw new Error('attribute value must after "="');break;case"/":switch(de){case r:j.setTagName(k.slice(I,ie));case h:case p:case c:de=c,j.closed=!0;case l:case n:break;case s:j.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return X.error("unexpected end of input"),de==r&&j.setTagName(k.slice(I,ie)),ie;case">":switch(de){case r:j.setTagName(k.slice(I,ie));case h:case p:case c:break;case l:case n:Q=k.slice(I,ie),Q.slice(-1)==="/"&&(j.closed=!0,Q=Q.slice(0,-1));case s:de===s&&(Q=re),de==l?(X.warning('attribute "'+Q+'" missed quot(")!'),te(re,Q.replace(/&#?\w+;/g,H),I)):((!E.isHTML(L[""])||!Q.match(/^(?:disabled|checked|selected)$/i))&&X.warning('attribute "'+Q+'" missed value!! "'+Q+'" instead!!'),te(Q,Q,I));break;case a:throw new Error("attribute value missed!!")}return ie;case"Â€":ne=" ";default:if(ne<=" ")switch(de){case r:j.setTagName(k.slice(I,ie)),de=p;break;case n:re=k.slice(I,ie),de=s;break;case l:var Q=k.slice(I,ie).replace(/&#?\w+;/g,H);X.warning('attribute "'+Q+'" missed quot(")!!'),te(re,Q,I);case h:de=p;break}else switch(de){case s:j.tagName,(!E.isHTML(L[""])||!re.match(/^(?:disabled|checked|selected)$/i))&&X.warning('attribute "'+re+'" missed value!! "'+re+'" instead2!!'),te(re,re,I),I=ie,de=n;break;case h:X.warning('attribute space is required"'+re+'"!!');case p:de=n,I=ie;break;case a:de=l,I=ie;break;case c:throw new Error("elements closed character '/' and '>' must be connected to")}}ie++}}function v(k,I,j){for(var L=k.tagName,H=null,ne=k.length;ne--;){var X=k[ne],te=X.qName,re=X.value,ue=te.indexOf(":");if(ue>0)var Q=X.prefix=te.slice(0,ue),ie=te.slice(ue+1),de=Q==="xmlns"&&ie;else ie=te,Q=null,de=te==="xmlns"&&"";X.localName=ie,de!==!1&&(H==null&&(H={},B(j,j={})),j[de]=H[de]=re,X.uri=E.XMLNS,I.startPrefixMapping(de,re))}for(var ne=k.length;ne--;){X=k[ne];var Q=X.prefix;Q&&(Q==="xml"&&(X.uri=E.XML),Q!=="xmlns"&&(X.uri=j[Q||""]))}var ue=L.indexOf(":");ue>0?(Q=k.prefix=L.slice(0,ue),ie=k.localName=L.slice(ue+1)):(Q=null,ie=k.localName=L);var ve=k.uri=j[Q||""];if(I.startElement(ve,ie,L,k),k.closed){if(I.endElement(ve,ie,L),H)for(Q in H)Object.prototype.hasOwnProperty.call(H,Q)&&I.endPrefixMapping(Q)}else return k.currentNSMap=j,k.localNSMap=H,!0}function g(k,I,j,L,H){if(/^(?:script|textarea)$/i.test(j)){var X=k.indexOf("</"+j+">",I),te=k.substring(I+1,X);if(/[&<]/.test(te))return/^script$/i.test(j)?(H.characters(te,0,te.length),X):(te=te.replace(/&#?\w+;/g,L),H.characters(te,0,te.length),X)}return I+1}function x(k,I,j,L){var H=L[j];return H==null&&(H=k.lastIndexOf("</"+j+">"),H<I&&(H=k.lastIndexOf("</"+j)),L[j]=H),H<I}function B(k,I){for(var j in k)Object.prototype.hasOwnProperty.call(k,j)&&(I[j]=k[j])}function y(k,I,j,L){var H=k.charAt(I+2);switch(H){case"-":if(k.charAt(I+3)==="-"){var X=k.indexOf("-->",I+4);return X>I?(j.comment(k,I+4,X-I-4),X+3):(L.error("Unclosed comment"),-1)}else return-1;default:if(k.substr(I+3,6)=="CDATA["){var X=k.indexOf("]]>",I+9);return j.startCDATA(),j.characters(k,I+9,X-I-9),j.endCDATA(),X+3}var te=R(k,I),re=te.length;if(re>1&&/!doctype/i.test(te[0][0])){var Q=te[1][0],ie=!1,de=!1;re>3&&(/^public$/i.test(te[2][0])?(ie=te[3][0],de=re>4&&te[4][0]):/^system$/i.test(te[2][0])&&(de=te[3][0]));var ne=te[re-1];return j.startDTD(Q,ie,de),j.endDTD(),ne.index+ne[0].length}}return-1}function T(k,I,j){var L=k.indexOf("?>",I);if(L){var H=k.substring(I,L).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return H?(H[0].length,j.processingInstruction(H[1],H[2]),L+2):-1}return-1}function N(){this.attributeNames={}}N.prototype={setTagName:function(k){if(!i.test(k))throw new Error("invalid tagName:"+k);this.tagName=k},addValue:function(k,I,j){if(!i.test(k))throw new Error("invalid attribute:"+k);this.attributeNames[k]=this.length,this[this.length++]={qName:k,value:I,offset:j}},length:0,getLocalName:function(k){return this[k].localName},getLocator:function(k){return this[k].locator},getQName:function(k){return this[k].qName},getURI:function(k){return this[k].uri},getValue:function(k){return this[k].value}};function R(k,I){var j,L=[],H=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(H.lastIndex=I,H.exec(k);j=H.exec(k);)if(L.push(j),j[1])return L}return di.XMLReader=m,di.ParseError=b,di}var Dn;function Oa(){if(Dn)return $t;Dn=1;var E=Ci(),e=rs(),t=Ia(),i=Ra(),r=e.DOMImplementation,n=E.NAMESPACE,s=i.ParseError,a=i.XMLReader;function l(w){this.options=w||{locator:{}}}l.prototype.parseFromString=function(w,f){var v=this.options,g=new a,x=v.domBuilder||new p,B=v.errorHandler,y=v.locator,T=v.xmlns||{},N=/\/x?html?$/.test(f),R=N?t.HTML_ENTITIES:t.XML_ENTITIES;return y&&x.setDocumentLocator(y),g.errorHandler=h(B,x,y),g.domBuilder=v.domBuilder||x,N&&(T[""]=n.HTML),T.xml=T.xml||n.XML,w&&typeof w=="string"?g.parse(w,T,R):g.errorHandler.error("invalid doc source"),x.doc};function h(w,f,v){if(!w){if(f instanceof p)return f;w=f}var g={},x=w instanceof Function;v=v||{};function B(y){var T=w[y];!T&&x&&(T=w.length==2?function(N){w(y,N)}:w),g[y]=T&&function(N){T("[xmldom "+y+"]	"+N+b(v))}||function(){}}return B("warning"),B("error"),B("fatalError"),g}function p(){this.cdata=!1}function c(w,f){f.lineNumber=w.lineNumber,f.columnNumber=w.columnNumber}p.prototype={startDocument:function(){this.doc=new r().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(w,f,v,g){var x=this.doc,B=x.createElementNS(w,v||f),y=g.length;O(this,B),this.currentElement=B,this.locator&&c(this.locator,B);for(var T=0;T<y;T++){var w=g.getURI(T),N=g.getValue(T),v=g.getQName(T),R=x.createAttributeNS(w,v);this.locator&&c(g.getLocator(T),R),R.value=R.nodeValue=N,B.setAttributeNode(R)}},endElement:function(w,f,v){var g=this.currentElement;g.tagName,this.currentElement=g.parentNode},startPrefixMapping:function(w,f){},endPrefixMapping:function(w){},processingInstruction:function(w,f){var v=this.doc.createProcessingInstruction(w,f);this.locator&&c(this.locator,v),O(this,v)},ignorableWhitespace:function(w,f,v){},characters:function(w,f,v){if(w=m.apply(this,arguments),w){if(this.cdata)var g=this.doc.createCDATASection(w);else var g=this.doc.createTextNode(w);this.currentElement?this.currentElement.appendChild(g):/^\s*$/.test(w)&&this.doc.appendChild(g),this.locator&&c(this.locator,g)}},skippedEntity:function(w){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(w){(this.locator=w)&&(w.lineNumber=0)},comment:function(w,f,v){w=m.apply(this,arguments);var g=this.doc.createComment(w);this.locator&&c(this.locator,g),O(this,g)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(w,f,v){var g=this.doc.implementation;if(g&&g.createDocumentType){var x=g.createDocumentType(w,f,v);this.locator&&c(this.locator,x),O(this,x),this.doc.doctype=x}},warning:function(w){console.warn("[xmldom warning]	"+w,b(this.locator))},error:function(w){console.error("[xmldom error]	"+w,b(this.locator))},fatalError:function(w){throw new s(w,this.locator)}};function b(w){if(w)return`
@`+(w.systemId||"")+"#[line:"+w.lineNumber+",col:"+w.columnNumber+"]"}function m(w,f,v){return typeof w=="string"?w.substr(f,v):w.length>=f+v||f?new java.lang.String(w,f,v)+"":w}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(w){p.prototype[w]=function(){return null}});function O(w,f){w.currentElement?w.currentElement.appendChild(f):w.doc.appendChild(f)}return $t.__DOMHandler=p,$t.DOMParser=l,$t.DOMImplementation=e.DOMImplementation,$t.XMLSerializer=e.XMLSerializer,$t}var xn;function Ba(){if(xn)return si;xn=1;var E=rs();return si.DOMImplementation=E.DOMImplementation,si.XMLSerializer=E.XMLSerializer,si.DOMParser=Oa().DOMParser,si}var ns=Ba();const Lr=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,La=1,Fa=3,ss=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function Si(){var E=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(E+Math.random()*16)%16|0;return E=Math.floor(E/16),(t=="x"?i:i&7|8).toString(16)});return e}function Pa(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function as(E){return!!(E&&E.nodeType==1)}function ft(E){return!isNaN(parseFloat(E))&&isFinite(E)}function os(E){let e=parseFloat(E);return ft(E)===!1?!1:typeof E=="string"&&E.indexOf(".")>-1?!0:Math.floor(e)!==e}function Yt(E){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],i=E.toLowerCase(),r=e.length;if(typeof document>"u"||typeof document.body.style[i]<"u")return E;for(var n=0;n<r;n++)if(typeof document.body.style[t[n]+i]<"u")return t[n]+i;return E}function us(E){for(var e=1,t=arguments.length;e<t;e++){var i=arguments[e];for(var r in i)E[r]===void 0&&(E[r]=i[r])}return E}function bt(E){var e=[].slice.call(arguments,1);return e.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(i){Object.defineProperty(E,i,Object.getOwnPropertyDescriptor(t,i))})}),E}function za(E,e,t){var i=ei(E,e,t);return e.splice(i,0,E),i}function ei(E,e,t,i,r){var n=i||0,s=r||e.length,a=parseInt(n+(s-n)/2),l;return t||(t=function(h,p){if(h>p)return 1;if(h<p)return-1;if(h==p)return 0}),s-n<=0?a:(l=t(e[a],E),s-n===1?l>=0?a:a+1:l===0?a:l===-1?ei(E,e,t,a,s):ei(E,e,t,n,a))}function yi(E,e,t,i,r){var n=i||0,s=r||e.length,a=parseInt(n+(s-n)/2),l;return t||(t=function(h,p){if(h>p)return 1;if(h<p)return-1;if(h==p)return 0}),s-n<=0?-1:(l=t(e[a],E),s-n===1?l===0?a:-1:l===0?a:l===-1?yi(E,e,t,a,s):yi(E,e,t,n,a))}function gi(E){var e=window.getComputedStyle(E),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],i=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],r=0,n=0;return t.forEach(function(s){r+=parseFloat(e[s])||0}),i.forEach(function(s){n+=parseFloat(e[s])||0}),{height:n,width:r}}function bi(E){var e=window.getComputedStyle(E),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],i=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],r=0,n=0;return t.forEach(function(s){r+=parseFloat(e[s])||0}),i.forEach(function(s){n+=parseFloat(e[s])||0}),{height:n,width:r}}function Tr(E){let e,t=E.ownerDocument;if(E.nodeType==Node.TEXT_NODE){let i=t.createRange();i.selectNodeContents(E),e=i.getBoundingClientRect()}else e=E.getBoundingClientRect();return e}function _i(){var E=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:E,bottom:e,width:E,height:e}}function Fr(E,e){for(var t=E.parentNode,i=t.childNodes,r,n=-1,s=0;s<i.length&&(r=i[s],r.nodeType===e&&n++,r!=E);s++);return n}function Ua(E){return Fr(E,Fa)}function ls(E){return Fr(E,La)}function ui(E){return["xml","opf","ncx"].indexOf(E)>-1}function hs(E,e){return new Blob([E],{type:e})}function wi(E,e){var t,i=hs(E,e);return t=ss.createObjectURL(i),t}function fs(E){return ss.revokeObjectURL(E)}function kr(E,e){var t,i;if(typeof E=="string")return t=btoa(E),i="data:"+e+";base64,"+t,i}function cs(E){return Object.prototype.toString.call(E).slice(8,-1)}function Ot(E,e,t){var i,r;return typeof DOMParser>"u"||t?r=ns.DOMParser:r=DOMParser,E.charCodeAt(0)===65279&&(E=E.slice(1)),i=new r().parseFromString(E,e),i}function rt(E,e){var t;if(!E)throw new Error("No Element Provided");if(typeof E.querySelector<"u")return E.querySelector(e);if(t=E.getElementsByTagName(e),t.length)return t[0]}function Pt(E,e){return typeof E.querySelector<"u"?E.querySelectorAll(e):E.getElementsByTagName(e)}function Kt(E,e,t){var i,r;if(typeof E.querySelector<"u"){e+="[";for(var n in t)e+=n+"~='"+t[n]+"'";return e+="]",E.querySelector(e)}else if(i=E.getElementsByTagName(e),r=Array.prototype.slice.call(i,0).filter(function(s){for(var a in t)if(s.getAttribute(a)===t[a])return!0;return!1}),r)return r[0]}function Ei(E,e){var t=E.ownerDocument||E;typeof t.createTreeWalker<"u"?ds(E,e,NodeFilter.SHOW_TEXT):Pr(E,function(i){i&&i.nodeType===3&&e(i)})}function ds(E,e,t){var i=document.createTreeWalker(E,t,null,!1);let r;for(;r=i.nextNode();)e(r)}function Pr(E,e){if(e(E))return!0;if(E=E.firstChild,E)do{if(Pr(E,e))return!0;E=E.nextSibling}while(E)}function ps(E){return new Promise(function(e,t){var i=new FileReader;i.readAsDataURL(E),i.onloadend=function(){e(i.result)}})}function je(){this.resolve=null,this.reject=null,this.id=Si(),this.promise=new Promise((E,e)=>{this.resolve=E,this.reject=e}),Object.freeze(this)}function Ai(E,e,t){var i;if(typeof E.querySelector<"u"&&(i=E.querySelector(`${e}[*|type="${t}"]`)),!i||i.length===0){i=Pt(E,e);for(var r=0;r<i.length;r++)if(i[r].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||i[r].getAttribute("epub:type")===t)return i[r]}else return i}function Nr(E){for(var e=[],t=E.childNodes,i=0;i<t.length;i++){let r=t[i];r.nodeType===1&&e.push(r)}return e}function Ir(E){for(var e=[E];E;E=E.parentNode)e.unshift(E);return e}function Jt(E,e,t){for(var i=[],r=E.childNodes,n=0;n<r.length;n++){let s=r[n];if(s.nodeType===1&&s.nodeName.toLowerCase()===e){if(t)return s;i.push(s)}}if(!t)return i}function Ma(E,e){let t;if(!(E===null||e===""))for(t=E.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}class vs{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,i=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,i),this.setEnd(t,i+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var i=Ir(e||this.startContainer),r=Ir(t||this.endContainer);if(i[0]==r[0]){for(var n=0;n<i.length;n++)if(i[n]!=r[n])return i[n-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const qa=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:vs,blob2base64:ps,borders:bi,bounds:gi,createBase64Url:kr,createBlob:hs,createBlobUrl:wi,defaults:us,defer:je,documentHeight:Pa,extend:bt,filterChildren:Jt,findChildren:Nr,getParentByTagName:Ma,indexOfElementNode:ls,indexOfNode:Fr,indexOfSorted:yi,indexOfTextNode:Ua,insert:za,isElement:as,isFloat:os,isNumber:ft,isXml:ui,locationOf:ei,nodeBounds:Tr,parents:Ir,parse:Ot,prefixed:Yt,qs:rt,qsa:Pt,qsp:Kt,querySelectorByType:Ai,requestAnimationFrame:Lr,revokeBlobUrl:fs,sprint:Ei,treeWalker:ds,type:cs,uuid:Si,walk:Pr,windowBounds:_i},Symbol.toStringTag,{value:"Module"}));var nr,Cn;function Wa(){if(Cn)return nr;if(Cn=1,!E)var E={cwd:function(){return"/"}};function e(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+n)}function t(n,s){for(var a="",l=-1,h=0,p,c=0;c<=n.length;++c){if(c<n.length)p=n.charCodeAt(c);else{if(p===47)break;p=47}if(p===47){if(!(l===c-1||h===1))if(l!==c-1&&h===2){if(a.length<2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){for(var b=a.length-1,m=b;m>=0&&a.charCodeAt(m)!==47;--m);if(m!==b){m===-1?a="":a=a.slice(0,m),l=c,h=0;continue}}else if(a.length===2||a.length===1){a="",l=c,h=0;continue}}s&&(a.length>0?a+="/..":a="..")}else a.length>0?a+="/"+n.slice(l+1,c):a=n.slice(l+1,c);l=c,h=0}else p===46&&h!==-1?++h:h=-1}return a}function i(n,s){var a=s.dir||s.root,l=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+l:a+n+l:l}var r={resolve:function(){for(var s="",a=!1,l,h=arguments.length-1;h>=-1&&!a;h--){var p;h>=0?p=arguments[h]:(l===void 0&&(l=E.cwd()),p=l),e(p),p.length!==0&&(s=p+"/"+s,a=p.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,l=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&l&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var l=arguments[a];e(l),l.length>0&&(s===void 0?s=l:s+="/"+l)}return s===void 0?".":r.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=r.resolve(s),a=r.resolve(a),s===a))return"";for(var l=1;l<s.length&&s.charCodeAt(l)===47;++l);for(var h=s.length,p=h-l,c=1;c<a.length&&a.charCodeAt(c)===47;++c);for(var b=a.length,m=b-c,O=p<m?p:m,w=-1,f=0;f<=O;++f){if(f===O){if(m>O){if(a.charCodeAt(c+f)===47)return a.slice(c+f+1);if(f===0)return a.slice(c+f)}else p>O&&(s.charCodeAt(l+f)===47?w=f:f===0&&(w=0));break}var v=s.charCodeAt(l+f),g=a.charCodeAt(c+f);if(v!==g)break;v===47&&(w=f)}var x="";for(f=l+w+1;f<=h;++f)(f===h||s.charCodeAt(f)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+a.slice(c+w):(c+=w,a.charCodeAt(c)===47&&++c,a.slice(c))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),l=a===47,h=-1,p=!0,c=s.length-1;c>=1;--c)if(a=s.charCodeAt(c),a===47){if(!p){h=c;break}}else p=!1;return h===-1?l?"/":".":l&&h===1?"//":s.slice(0,h)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var l=0,h=-1,p=!0,c;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var b=a.length-1,m=-1;for(c=s.length-1;c>=0;--c){var O=s.charCodeAt(c);if(O===47){if(!p){l=c+1;break}}else m===-1&&(p=!1,m=c+1),b>=0&&(O===a.charCodeAt(b)?--b===-1&&(h=c):(b=-1,h=m))}return l===h?h=m:h===-1&&(h=s.length),s.slice(l,h)}else{for(c=s.length-1;c>=0;--c)if(s.charCodeAt(c)===47){if(!p){l=c+1;break}}else h===-1&&(p=!1,h=c+1);return h===-1?"":s.slice(l,h)}},extname:function(s){e(s);for(var a=-1,l=0,h=-1,p=!0,c=0,b=s.length-1;b>=0;--b){var m=s.charCodeAt(b);if(m===47){if(!p){l=b+1;break}continue}h===-1&&(p=!1,h=b+1),m===46?a===-1?a=b:c!==1&&(c=1):a!==-1&&(c=-1)}return a===-1||h===-1||c===0||c===1&&a===h-1&&a===l+1?"":s.slice(a,h)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof s);return i("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var l=s.charCodeAt(0),h=l===47,p;h?(a.root="/",p=1):p=0;for(var c=-1,b=0,m=-1,O=!0,w=s.length-1,f=0;w>=p;--w){if(l=s.charCodeAt(w),l===47){if(!O){b=w+1;break}continue}m===-1&&(O=!1,m=w+1),l===46?c===-1?c=w:f!==1&&(f=1):c!==-1&&(f=-1)}return c===-1||m===-1||f===0||f===1&&c===m-1&&c===b+1?m!==-1&&(b===0&&h?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(b,m)):(b===0&&h?(a.name=s.slice(1,c),a.base=s.slice(1,m)):(a.name=s.slice(b,c),a.base=s.slice(b,m)),a.ext=s.slice(c,m)),b>0?a.dir=s.slice(0,b-1):h&&(a.dir="/"),a},sep:"/",delimiter:":",posix:null};return nr=r,nr}var ja=Wa();const Wt=ti(ja);class zt{constructor(e){var t,i;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),i=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=i.dir+"/",this.filename=i.base,this.extension=i.ext.slice(1)}parse(e){return Wt.parse(e)}isAbsolute(e){return Wt.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Wt.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Wt.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class kt{constructor(e,t){var i=e.indexOf("://")>-1,r=e,n;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!i&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),i||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,r=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(n=new zt(this.base),r=n.resolve(r))}this.Path=new zt(r),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,i;return t?e:(i=Wt.resolve(this.directory,e),this.origin+i)}relative(e){return Wt.relative(e,this.directory)}toString(){return this.href}}const Zt=1,xt=3,Va=9;class Ve{constructor(e,t,i){var r;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Ve))return new Ve(e,t,i);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),r=this.checkType(e),r==="string")return this.str=e,bt(this,this.parse(e));if(r==="range")return bt(this,this.fromRange(e,this.base,i));if(r==="node")return bt(this,this.fromNode(e,this.base,i));if(r==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(cs(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof Ve?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},i,r,n;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),i=this.getChapterComponent(e),i?(t.base=this.parseComponent(i),r=this.getPathComponent(e),t.path=this.parseComponent(r),n=this.getRange(e),n&&(t.range=!0,t.start=this.parseComponent(n[0]),t.end=this.parseComponent(n[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},i=e.split(":"),r=i[0].split("/"),n;return i.length>1&&(n=i[1],t.terminal=this.parseTerminal(n)),r[0]===""&&r.shift(),t.steps=r.map((function(s){return this.parseStep(s)}).bind(this)),t}parseStep(e){var t,i,r,n,s;if(n=e.match(/\[(.*)\]/),n&&n[1]&&(s=n[1]),i=parseInt(e),!isNaN(i))return i%2===0?(t="element",r=i/2-1):(t="text",r=(i-1)/2),{type:t,index:r,id:s||null}}parseTerminal(e){var t,i,r=e.match(/\[(.*)\]/);return r&&r[1]?(t=parseInt(e.split("[")[0]),i=r[1]):t=parseInt(e),ft(t)||(t=null),{offset:t,assertion:i}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var i="";return t.type==="element"&&(i+=(t.index+1)*2),t.type==="text"&&(i+=1+2*t.index),t.id&&(i+="["+t.id+"]"),i}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var i,r,n,s;if(typeof e=="string"&&(e=new Ve(e)),typeof t=="string"&&(t=new Ve(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(i=e.path.steps.concat(e.start.steps),n=e.start.terminal):(i=e.path.steps,n=e.path.terminal),t.range?(r=t.path.steps.concat(t.start.steps),s=t.start.terminal):(r=t.path.steps,s=t.path.terminal);for(var a=0;a<i.length;a++){if(!i[a])return-1;if(!r[a]||i[a].index>r[a].index)return 1;if(i[a].index<r[a].index)return-1}return i.length<r.length?-1:n.offset>s.offset?1:n.offset<s.offset?-1:0}step(e){var t=e.nodeType===xt?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var i=this.filter(e,t),r;if(i)return r=i.nodeType===xt?"text":"element",{id:i.id,tagName:i.tagName,type:r,index:this.filteredPosition(i,t)}}pathTo(e,t,i){for(var r={steps:[],terminal:{offset:null,assertion:null}},n=e,s;n&&n.parentNode&&n.parentNode.nodeType!=Va;)i?s=this.filteredStep(n,i):s=this.step(n),s&&r.steps.unshift(s),n=n.parentNode;return t!=null&&t>=0&&(r.terminal.offset=t,r.steps[r.steps.length-1].type!="text"&&r.steps.push({type:"text",index:0})),r}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,i){var r={range:!1,base:{},path:{},start:null,end:null},n=e.startContainer,s=e.endContainer,a=e.startOffset,l=e.endOffset,h=!1;if(i&&(h=n.ownerDocument.querySelector("."+i)!=null),typeof t=="string"?(r.base=this.parseComponent(t),r.spinePos=r.base.steps[1].index):typeof t=="object"&&(r.base=t),e.collapsed)h&&(a=this.patchOffset(n,a,i)),r.path=this.pathTo(n,a,i);else{r.range=!0,h&&(a=this.patchOffset(n,a,i)),r.start=this.pathTo(n,a,i),h&&(l=this.patchOffset(s,l,i)),r.end=this.pathTo(s,l,i),r.path={steps:[],terminal:null};var p=r.start.steps.length,c;for(c=0;c<p&&this.equalStep(r.start.steps[c],r.end.steps[c]);c++)c===p-1?r.start.terminal===r.end.terminal&&(r.path.steps.push(r.start.steps[c]),r.range=!1):r.path.steps.push(r.start.steps[c]);r.start.steps=r.start.steps.slice(r.path.steps.length),r.end.steps=r.end.steps.slice(r.path.steps.length)}return r}fromNode(e,t,i){var r={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(r.base=this.parseComponent(t),r.spinePos=r.base.steps[1].index):typeof t=="object"&&(r.base=t),r.path=this.pathTo(e,null,i),r}filter(e,t){var i,r,n,s,a,l=!1;return e.nodeType===xt?(l=!0,n=e.parentNode,i=e.parentNode.classList.contains(t)):(l=!1,i=e.classList.contains(t)),i&&l?(s=n.previousSibling,a=n.nextSibling,s&&s.nodeType===xt?r=s:a&&a.nodeType===xt&&(r=a),r||e):i&&!l?!1:e}patchOffset(e,t,i){if(e.nodeType!=xt)throw new Error("Anchor must be a text node");var r=e,n=t;for(e.parentNode.classList.contains(i)&&(r=e.parentNode);r.previousSibling;){if(r.previousSibling.nodeType===Zt)if(r.previousSibling.classList.contains(i))n+=r.previousSibling.textContent.length;else break;else n+=r.previousSibling.textContent.length;r=r.previousSibling}return n}normalizedMap(e,t,i){var r={},n=-1,s,a=e.length,l,h;for(s=0;s<a;s++)l=e[s].nodeType,l===Zt&&e[s].classList.contains(i)&&(l=xt),s>0&&l===xt&&h===xt?r[s]=n:t===l&&(n=n+1,r[s]=n),h=l;return r}position(e){var t,i;return e.nodeType===Zt?(t=e.parentNode.children,t||(t=Nr(e.parentNode)),i=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),i=t.indexOf(e)),i}filteredPosition(e,t){var i,r,n;return e.nodeType===Zt?(i=e.parentNode.children,n=this.normalizedMap(i,Zt,t)):(i=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,i=e.parentNode.childNodes),n=this.normalizedMap(i,xt,t)),r=Array.prototype.indexOf.call(i,e),n[r]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(i){var r=i.index+1;i.id?t.push("*[position()="+r+" and @id='"+i.id+"']"):i.type==="text"?t.push("text()["+r+"]"):t.push("*["+r+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(i){var r=i.index+1;i.id?t.push("#"+i.id):i.type==="text"||t.push("*:nth-child("+r+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(i){return i.nodeType===xt?!0:!!(t&&i.classList.contains(t))})}walkToNode(e,t,i){var r=t||document,n=r.documentElement,s,a,l=e.length,h;for(h=0;h<l&&(a=e[h],a.type==="element"?a.id?n=r.getElementById(a.id):(s=n.children||Nr(n),n=s[a.index]):a.type==="text"&&(n=this.textNodes(n,i)[a.index]),!!n);h++);return n}findNode(e,t,i){var r=t||document,n,s;return!i&&typeof r.evaluate<"u"?(s=this.stepsToXpath(e),n=r.evaluate(s,r,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):i?n=this.walkToNode(e,r,i):n=this.walkToNode(e,r),n}fixMiss(e,t,i,r){var n=this.findNode(e.slice(0,-1),i,r),s=n.childNodes,a=this.normalizedMap(s,xt,r),l,h,p=e[e.length-1].index;for(let c in a){if(!a.hasOwnProperty(c))return;if(a[c]===p)if(l=s[c],h=l.textContent.length,t>h)t=t-h;else{l.nodeType===Zt?n=l.childNodes[0]:n=l;break}}return{container:n,offset:t}}toRange(e,t){var i=e||document,r,n,s,a,l,h=this,p,c,b=t?i.querySelector("."+t)!=null:!1,m;if(typeof i.createRange<"u"?r=i.createRange():r=new vs,h.range?(n=h.start,p=h.path.steps.concat(n.steps),a=this.findNode(p,i,b?t:null),s=h.end,c=h.path.steps.concat(s.steps),l=this.findNode(c,i,b?t:null)):(n=h.path,p=h.path.steps,a=this.findNode(h.path.steps,i,b?t:null)),a)try{n.terminal.offset!=null?r.setStart(a,n.terminal.offset):r.setStart(a,0)}catch{m=this.fixMiss(p,n.terminal.offset,i,b?t:null),r.setStart(m.container,m.offset)}else return console.log("No startContainer found for",this.toString()),null;if(l)try{s.terminal.offset!=null?r.setEnd(l,s.terminal.offset):r.setEnd(l,0)}catch{m=this.fixMiss(c,h.end.terminal.offset,i,b?t:null),r.setEnd(m.container,m.offset)}return r}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,i){var r=parseInt(t),n=(e+1)*2,s="/"+n+"/";return s+=(r+1)*2,i&&(s+="["+i+"]"),s}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Nt{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let i=0;i<this.hooks.length;i++)if(t=this.hooks[i],t===e){this.hooks.splice(i,1);break}}trigger(){var e=arguments,t=this.context,i=[];return this.hooks.forEach(function(r){try{var n=r.apply(t,e)}catch(s){console.log(s)}n&&typeof n.then=="function"&&i.push(n)}),Promise.all(i)}list(){return this.hooks}clear(){return this.hooks=[]}}function gs(E,e){var t,i,r=e.url,n=r.indexOf("://")>-1;E&&(i=rt(E,"head"),t=rt(i,"base"),t||(t=E.createElement("base"),i.insertBefore(t,i.firstChild)),!n&&window&&window.location&&(r=window.location.origin+r),t.setAttribute("href",r))}function Ha(E,e){var t,i,r=e.canonical;E&&(t=rt(E,"head"),i=rt(t,"link[rel='canonical']"),i?i.setAttribute("href",r):(i=E.createElement("link"),i.setAttribute("rel","canonical"),i.setAttribute("href",r),t.appendChild(i)))}function Ga(E,e){var t,i,r=e.idref;E&&(t=rt(E,"head"),i=rt(t,"link[property='dc.identifier']"),i?i.setAttribute("content",r):(i=E.createElement("meta"),i.setAttribute("name","dc.identifier"),i.setAttribute("content",r),t.appendChild(i)))}function $a(E,e){var t=E.querySelectorAll("a[href]");if(t.length)for(var i=rt(E.ownerDocument,"base"),r=i?i.getAttribute("href"):void 0,n=(function(a){var l=a.getAttribute("href");if(l.indexOf("mailto:")!==0){var h=l.indexOf("://")>-1;if(h)a.setAttribute("target","_blank");else{var p;try{p=new kt(l,r)}catch{}a.onclick=function(){return p&&p.hash?e(p.Path.path+p.hash):e(p?p.Path.path:l),!1}}}}).bind(this),s=0;s<t.length;s++)n(t[s])}function Sn(E,e,t){return e.forEach(function(i,r){i&&t[r]&&(i=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),E=E.replace(new RegExp(i,"g"),t[r]))}),E}function li(E,e,t,i){var r=typeof window<"u"?window.URL:!1,n=r?"blob":"arraybuffer",s=new je,a=new XMLHttpRequest,l=XMLHttpRequest.prototype,h;"overrideMimeType"in l||Object.defineProperty(l,"overrideMimeType",{value:function(){}}),t&&(a.withCredentials=!0),a.onreadystatechange=c,a.onerror=p,a.open("GET",E,!0);for(h in i)a.setRequestHeader(h,i[h]);e=="json"&&a.setRequestHeader("Accept","application/json"),e||(e=new zt(E).extension),e=="blob"&&(a.responseType=n),ui(e)&&a.overrideMimeType("text/xml"),e=="binary"&&(a.responseType="arraybuffer"),a.send();function p(b){s.reject(b)}function c(){if(this.readyState===XMLHttpRequest.DONE){var b=!1;if((this.responseType===""||this.responseType==="document")&&(b=this.responseXML),this.status===200||this.status===0||b){var m;if(!this.response&&!b)return s.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),s.promise;if(this.status===403)return s.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),s.promise;b?m=this.responseXML:ui(e)?m=Ot(this.response,"text/xml"):e=="xhtml"?m=Ot(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?m=Ot(this.response,"text/html"):e=="json"?m=JSON.parse(this.response):e=="blob"?r?m=this.response:m=new Blob([this.response]):m=this.response,s.resolve(m)}else s.reject({status:this.status,message:this.response,stack:new Error().stack})}}return s.promise}class Za{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new Nt(this),this.hooks.content=new Nt(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||li,i=new je,r=i.promise;return this.contents?i.resolve(this.contents):t(this.url).then((function(n){return this.document=n,this.contents=n.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){i.resolve(this.contents)}).bind(this)).catch(function(n){i.reject(n)}),r}base(){return gs(this.document,this)}render(e){var t=new je,i=t.promise;return this.output,this.load(e).then((function(r){var n=typeof navigator<"u"&&navigator.userAgent||"",s=n.indexOf("Trident")>=0,a;typeof XMLSerializer>"u"||s?a=ns.DOMParser:a=XMLSerializer;var l=new a;return this.output=l.serializeToString(r),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){t.resolve(this.output)}).bind(this)).catch(function(r){t.reject(r)}),i}find(e){var t=this,i=[],r=e.toLowerCase(),n=function(s){for(var a=s.textContent.toLowerCase(),l=t.document.createRange(),h,p,c=-1,b,m=150;p!=-1;)p=a.indexOf(r,c+1),p!=-1&&(l=t.document.createRange(),l.setStart(s,p),l.setEnd(s,p+r.length),h=t.cfiFromRange(l),s.textContent.length<m?b=s.textContent:(b=s.textContent.substring(p-m/2,p+m/2),b="..."+b+"..."),i.push({cfi:h,excerpt:b})),c=p};return Ei(t.document,function(s){n(s)}),i}search(e,t=5){if(typeof document.createTreeWalker>"u")return this.find(e);let i=[];const r=150,n=this,s=e.toLowerCase(),a=function(c){const O=c.reduce((w,f)=>w+f.textContent,"").toLowerCase().indexOf(s);if(O!=-1){const f=O+s.length;let v=0,g=0;if(O<c[0].length){let x;for(;v<c.length-1&&(g+=c[v].length,!(f<=g));)v+=1;let B=c[0],y=c[v],T=n.document.createRange();T.setStart(B,O);let N=c.slice(0,v).reduce((k,I)=>k+I.textContent.length,0);T.setEnd(y,N>f?f:f-N),x=n.cfiFromRange(T);let R=c.slice(0,v+1).reduce((k,I)=>k+I.textContent,"");R.length>r&&(R=R.substring(O-r/2,O+r/2),R="..."+R+"..."),i.push({cfi:x,excerpt:R})}}},l=document.createTreeWalker(n.document,NodeFilter.SHOW_TEXT,null,!1);let h,p=[];for(;h=l.nextNode();)p.push(h),p.length==t&&(a(p.slice(0,t)),p=p.slice(1,t));return p.length>0&&a(p),i}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(i){var r=i.replace("rendition:",""),n=r.indexOf("-"),s,a;n!=-1&&(s=r.slice(0,n),a=r.slice(n+1),t[s]=a)}),t}cfiFromRange(e){return new Ve(e,this.cfiBase).toString()}cfiFromElement(e){return new Ve(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class Xa{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Nt,this.hooks.content=new Nt,this.hooks.content.register(gs),this.hooks.content.register(Ha),this.hooks.content.register(Ga),this.epubcfi=new Ve,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,i){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((r,n)=>{var s=this.manifest[r.idref],a;r.index=n,r.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,r.index,r.id),r.href&&(r.url=t(r.href,!0),r.canonical=i(r.href)),s&&(r.href=s.href,r.url=t(r.href,!0),r.canonical=i(r.href),s.properties.length&&r.properties.push.apply(r.properties,s.properties)),r.linear==="yes"?(r.prev=(function(){let l=r.index;for(;l>0;){let h=this.get(l-1);if(h&&h.linear)return h;l-=1}}).bind(this),r.next=(function(){let l=r.index;for(;l<this.spineItems.length-1;){let h=this.get(l+1);if(h&&h.linear)return h;l+=1}}).bind(this)):(r.prev=function(){},r.next=function(){}),a=new Za(r,this.hooks),this.append(a)}),this.loaded=!0}get(e){var t=0;if(typeof e>"u")for(;t<this.spineItems.length;){let i=this.spineItems[t];if(i&&i.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new Ve(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,i){t.index=i}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class zr{constructor(e){this._q=[],this.context=e,this.tick=Lr,this.running=!1,this.paused=!1}enqueue(){var e,t,i,r=[].shift.call(arguments),n=arguments;if(!r)throw new Error("No Task Provided");return typeof r=="function"?(e=new je,t=e.promise,i={task:r,args:n,deferred:e,promise:t}):i={promise:r},this._q.push(i),this.paused==!1&&!this.running&&this.run(),i.promise}dequeue(){var e,t,i;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return i=t.apply(this.context,e.args),i&&typeof i.then=="function"?i.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,i),e.promise);if(e.promise)return e.promise}else return e=new je,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new je),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const Ti="0.3",mi=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],_e={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class ms{constructor(e,t,i){this.spine=e,this.request=t,this.pause=i||100,this.q=new zr(this),this.epubcfi=new Ve,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(t){var i=new je,r=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(r),e.unload(),this.processingTimeout=setTimeout(()=>i.resolve(r),this.pause),i.promise}).bind(this))}parse(e,t,i){var r=[],n,s=e.ownerDocument,a=rt(s,"body"),l=0,h,p=i||this.break,c=function(b){var m=b.length,O,w=0;if(b.textContent.trim().length===0)return!1;for(l==0&&(n=this.createRange(),n.startContainer=b,n.startOffset=0),O=p-l,O>m&&(l+=m,w=m);w<m;)if(O=p-l,l===0&&(w+=1,n=this.createRange(),n.startContainer=b,n.startOffset=w),w+O>=m)l+=m-w,w=m;else{w+=O,n.endContainer=b,n.endOffset=w;let f=new Ve(n,t).toString();r.push(f),l=0}h=b};if(Ei(a,c.bind(this)),n&&n.startContainer&&h){n.endContainer=h,n.endOffset=h.length;let b=new Ve(n,t).toString();r.push(b),l=0}return r}generateFromWords(e,t,i){var r=e?new Ve(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(n){n.linear&&(r?n.index>=r.spinePos&&this.q.enqueue(this.processWords.bind(this),n,t,r,i):this.q.enqueue(this.processWords.bind(this),n,t,r,i))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,t,i,r){return r&&this._locationsWords.length>=r?Promise.resolve():e.load(this.request).then((function(n){var s=new je,a=this.parseWords(n,e,t,i),l=r-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(a.length>=r?a.slice(0,l):a),e.unload(),this.processingTimeout=setTimeout(()=>s.resolve(a),this.pause),s.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,i,r){var n=t.cfiBase,s=[],a=e.ownerDocument,l=rt(a,"body"),h=i,p=r?r.spinePos!==t.index:!0,c;r&&t.index===r.spinePos&&(c=r.findNode(r.range?r.path.steps.concat(r.start.steps):r.path.steps,e.ownerDocument));var b=function(m){if(!p)if(m===c)p=!0;else return!1;if(m.textContent.length<10&&m.textContent.trim().length===0)return!1;var O=this.countWords(m.textContent),w,f=0;if(O===0)return!1;for(w=h-this._wordCounter,w>O&&(this._wordCounter+=O,f=O);f<O;)if(w=h-this._wordCounter,f+w>=O)this._wordCounter+=O-f,f=O;else{f+=w;let v=new Ve(m,n);s.push({cfi:v.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return Ei(l,b.bind(this)),s}locationFromCfi(e){let t;return Ve.prototype.isCfiString(e)&&(e=new Ve(e)),this._locations.length===0?-1:(t=ei(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let i=new Ve(this._locations[this.total]);return i.collapse(),i.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(_e.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Bt(ms.prototype);class Ya{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=rt(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=Wt.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Tn{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,i,r;if(!e)throw new Error("Package File Not Found");if(t=rt(e,"metadata"),!t)throw new Error("No Metadata Found");if(i=rt(e,"manifest"),!i)throw new Error("No Manifest Found");if(r=rt(e,"spine"),!r)throw new Error("No Spine Found");return this.manifest=this.parseManifest(i),this.navPath=this.findNavPath(i),this.ncxPath=this.findNcxPath(i,r),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=ls(r),this.spine=this.parseSpine(r,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=r.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},i=Pt(e,"item"),r=Array.prototype.slice.call(i);return r.forEach(function(n){var s=n.getAttribute("id"),a=n.getAttribute("href")||"",l=n.getAttribute("media-type")||"",h=n.getAttribute("media-overlay")||"",p=n.getAttribute("properties")||"";t[s]={href:a,type:l,overlay:h,properties:p.length?p.split(" "):[]}}),t}parseSpine(e,t){var i=[],r=Pt(e,"itemref"),n=Array.prototype.slice.call(r);return n.forEach(function(s,a){var l=s.getAttribute("idref"),h=s.getAttribute("properties")||"",p=h.length?h.split(" "):[],c={id:s.getAttribute("id"),idref:l,linear:s.getAttribute("linear")||"yes",properties:p,index:a};i.push(c)}),i}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var i=e.getElementById(t);return i&&i.localName==="identifier"&&i.namespaceURI==="http://purl.org/dc/elements/1.1/"&&i.childNodes.length>0?i.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=Kt(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var i=Kt(e,"item",{"media-type":"application/x-dtbncx+xml"}),r;return i||(r=t.getAttribute("toc"),r&&(i=e.querySelector(`#${r}`))),i?i.getAttribute("href"):!1}findCoverPath(e){var t=rt(e,"package");t.getAttribute("version");var i=Kt(e,"item",{properties:"cover-image"});if(i)return i.getAttribute("href");var r=Kt(e,"meta",{name:"cover"});if(r){var n=r.getAttribute("content"),s=e.getElementById(n);return s?s.getAttribute("href"):""}else return!1}getElementText(e,t){var i=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),r;return!i||i.length===0?"":(r=i[0],r.childNodes.length?r.childNodes[0].nodeValue:"")}getPropertyText(e,t){var i=Kt(e,"meta",{property:t});return i&&i.childNodes.length?i.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((i,r)=>(i.index=r,i.linear=i.linear||"yes",i)),e.resources.forEach((i,r)=>{this.manifest[r]=i,i.rel&&i.rel[0]==="cover"&&(this.coverPath=i.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((i,r)=>(i.label=i.title,i)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class sr{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,i,r;t&&(i=rt(e,"html"),r=rt(e,"ncx")),t?i?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):r&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,i=0;i<e.length;i++)t=e[i],t.href&&(this.tocByHref[t.href]=i),t.id&&(this.tocById[t.id]=i),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,i){if(i.length===0)return;const r=i[t];if(r&&(e===r.id||e===r.href))return r;{let n;for(let s=0;s<i.length&&(n=this.getByIndex(e,t,i[s].subitems),!n);++s);return n}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=Ai(e,"nav","toc"),i=[];if(!t)return i;let r=Jt(t,"ol",!0);return r&&(i=this.parseNavList(r)),i}parseNavList(e,t){const i=[];if(!e||!e.children)return i;for(let r=0;r<e.children.length;r++){const n=this.navItem(e.children[r],t);n&&i.push(n)}return i}navItem(e,t){let i=e.getAttribute("id")||void 0,r=Jt(e,"a",!0)||Jt(e,"span",!0);if(!r)return;let n=r.getAttribute("href")||"";i||(i=n);let s=r.textContent||"",a=[],l=Jt(e,"ol",!0);return l&&(a=this.parseNavList(l,i)),{id:i,href:n,label:s,subitems:a,parent:t}}parseLandmarks(e){var t=Ai(e,"nav","landmarks"),i=t?Pt(t,"li"):[],r=i.length,n,s=[],a;if(!i||r===0)return s;for(n=0;n<r;++n)a=this.landmarkItem(i[n]),a&&(s.push(a),this.landmarksByType[a.type]=n);return s}landmarkItem(e){let t=Jt(e,"a",!0);if(!t)return;let i=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,r=t.getAttribute("href")||"",n=t.textContent||"";return{href:r,label:n,type:i}}parseNcx(e){var t=Pt(e,"navPoint"),i=t.length,r,n={},s=[],a,l;if(!t||i===0)return s;for(r=0;r<i;++r)a=this.ncxItem(t[r]),n[a.id]=a,a.parent?(l=n[a.parent],l.subitems.push(a)):s.push(a);return s}ncxItem(e){var t=e.getAttribute("id")||!1,i=rt(e,"content"),r=i.getAttribute("src"),n=rt(e,"navLabel"),s=n.textContent?n.textContent:"",a=[],l=e.parentNode,h;return l&&(l.nodeName==="navPoint"||l.nodeName.split(":").slice(-1)[0]==="navPoint")&&(h=l.getAttribute("id")),{id:t,href:r,label:s,subitems:a,parent:h}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var ai={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},Ka=(function(){var E,e,t,i,r={};for(E in ai)if(ai.hasOwnProperty(E)){for(e in ai[E])if(ai[E].hasOwnProperty(e))if(t=ai[E][e],typeof t=="string")r[t]=E+"/"+e;else for(i=0;i<t.length;i++)r[t[i]]=E+"/"+e}return r})(),Ja="text/plain";function Qa(E){return E&&Ka[E.split(".").pop().toLowerCase()]||Ja}const Qt={lookup:Qa};class eo{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new kt(e),i=Qt.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(r=>ps(r)).then(r=>kr(r,i)):this.settings.request(e,"blob").then(r=>wi(r,i))}replacements(){if(this.settings.replacements==="none")return new Promise((function(t){t(this.urls)}).bind(this));var e=this.urls.map(t=>{var i=this.settings.resolver(t);return this.createUrl(i).catch(r=>(console.error(r),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(i=>typeof i=="string"),t))}replaceCss(e,t){var i=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach((function(r){var n=this.createCssFile(r,e,t).then((function(s){var a=this.urls.indexOf(r);a>-1&&(this.replacementUrls[a]=s)}).bind(this));i.push(n)}).bind(this)),Promise.all(i)}createCssFile(e){var t;if(Wt.isAbsolute(e))return new Promise(function(s){s()});var i=this.settings.resolver(e),r;this.settings.archive?r=this.settings.archive.getText(i):r=this.settings.request(i,"text");var n=this.urls.map(s=>{var a=this.settings.resolver(s),l=new zt(i).relative(a);return l});return r?r.then(s=>(s=Sn(s,n,this.replacementUrls),this.settings.replacements==="base64"?t=kr(s,"text/css"):t=wi(s,"text/css"),t),s=>new Promise(function(a){a()})):new Promise(function(s){s()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map((function(i){var r=t(i),n=new zt(e).relative(r);return n}).bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise((function(i,r){i(this.replacementUrls[t])}).bind(this)):this.createUrl(e)}substitute(e,t){var i;return t?i=this.relativeTo(t):i=this.urls,Sn(e,i,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class ar{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new Ve,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=rt(e,"html"),i=rt(e,"ncx");if(t)return this.parseNav(e);if(i)return this.parseNcx(e)}parseNav(e){var t=Ai(e,"nav","page-list"),i=t?Pt(t,"li"):[],r=i.length,n,s=[],a;if(!i||r===0)return s;for(n=0;n<r;++n)a=this.item(i[n]),s.push(a);return s}parseNcx(e){var t=[],i=0,r,n,s,a=0;if(n=rt(e,"pageList"),!n||(s=Pt(n,"pageTarget"),a=s.length,!s||s.length===0))return t;for(i=0;i<a;++i)r=this.ncxItem(s[i]),t.push(r);return t}ncxItem(e){var t=rt(e,"navLabel"),i=rt(t,"text"),r=i.textContent,n=rt(e,"content"),s=n.getAttribute("src"),a=parseInt(r,10);return{href:s,page:a}}item(e){var t=rt(e,"a"),i=t.getAttribute("href")||"",r=t.textContent||"",n=parseInt(r),s=i.indexOf("epubcfi"),a,l,h;return s!=-1?(a=i.split("#"),l=a[0],h=a.length>1?a[1]:!1,{cfi:h,href:i,packageUrl:l,page:n}):{href:i,page:n}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var i=yi(e,this.locations,this.epubcfi.compare);return i!=-1?t=this.pages[i]:(i=ei(e,this.locations,this.epubcfi.compare),t=i-1>=0?this.pages[i-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var i=this.pages.indexOf(e);return i!=-1&&(t=this.locations[i]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),i=this.percentageFromPage(t);return i}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class ys{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,i){var r=1,n=i||0,s=e,a=t,l=Math.floor(s/12),h,p,c,b;this._spread&&s>=this._minSpreadWidth?r=2:r=1,this.name==="reflowable"&&this._flow==="paginated"&&!(i>=0)&&(n=l%2===0?l:l-1),this.name==="pre-paginated"&&(n=0),r>1?(h=s/r-n,c=h+n):(h=s,c=s),this.name==="pre-paginated"&&r>1&&(s=h),p=h*r+n,b=s,this.width=s,this.height=a,this.spreadWidth=p,this.pageWidth=c,this.delta=b,this.columnWidth=h,this.gap=n,this.divisor=r,this.update({width:s,height:a,spreadWidth:p,pageWidth:c,delta:b,columnWidth:h,gap:n,divisor:r})}format(e,t,i){var r;return this.name==="pre-paginated"?r=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?r=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):i&&i==="horizontal"?r=e.size(null,this.height):r=e.size(this.width,null),r}count(e,t){let i,r;return this.name==="pre-paginated"?(i=1,r=1):this._flow==="paginated"?(t=t||this.delta,i=Math.ceil(e/t),r=i*this.divisor):(t=t||this.height,i=Math.ceil(e/t),r=i),{spreads:i,pages:r}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=bt(this.props,e);this.emit(_e.LAYOUT.UPDATED,t,e)}}}Bt(ys.prototype);class to{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var i=new kt(t);this._themes[e]={url:i.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,i;this._current=e,this.update(e),i=this.rendition.getContents(),i.forEach(r=>{r.removeClass(t),r.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(i=>{this.add(e,i)})}inject(e){var t=[],i=this._themes,r;for(var n in i)i.hasOwnProperty(n)&&(n===this._current||n==="default")&&(r=i[n],(r.rules&&Object.keys(r.rules).length>0||r.url&&t.indexOf(r.url)===-1)&&this.add(n,e),this._injected.push(n));this._current!="default"&&e.addClass(this._current)}add(e,t){var i=this._themes[e];!i||!t||(i.url?t.addStylesheet(i.url):i.serialized?(t.addStylesheetCss(i.serialized,e),i.injected=!0):i.rules&&(t.addStylesheetRules(i.rules,e),i.injected=!0))}override(e,t,i){var r=this.rendition.getContents();this._overrides[e]={value:t,priority:i===!0},r.forEach(n=>{n.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(i=>{i.css(e)})}overrides(e){var t=this._overrides;for(var i in t)t.hasOwnProperty(i)&&e.css(i,t[i].value,t[i].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class Di{constructor(e,t,i,r=!1){this.layout=e,this.horizontal=i==="horizontal",this.direction=t||"ltr",this._dev=r}section(e){var t=this.findRanges(e),i=this.rangeListToCfiList(e.section.cfiBase,t);return i}page(e,t,i,r){var n=e&&e.document?e.document.body:!1,s;if(n){if(s=this.rangePairToCfiPair(t,{start:this.findStart(n,i,r),end:this.findEnd(n,i,r)}),this._dev===!0){let a=e.document,l=new Ve(s.start).toRange(a),h=new Ve(s.end).toRange(a),p=a.defaultView.getSelection(),c=a.createRange();p.removeAllRanges(),c.setStart(l.startContainer,l.startOffset),c.setEnd(h.endContainer,h.endOffset),p.addRange(c)}return s}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var i={acceptNode:function(l){return l.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},r=i.acceptNode;r.acceptNode=i.acceptNode;for(var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,r,!1),s,a;(s=n.nextNode())&&(a=t(s),!a););return a}}findRanges(e){for(var t=[],i=e.contents.scrollWidth(),r=Math.ceil(i/this.layout.spreadWidth),n=r*this.layout.divisor,s=this.layout.columnWidth,a=this.layout.gap,l,h,p=0;p<n.pages;p++)l=(s+a)*p,h=s*(p+1)+a*p,t.push({start:this.findStart(e.document.body,l,h),end:this.findEnd(e.document.body,l,h)});return t}findStart(e,t,i){for(var r=[e],n,s,a=e;r.length;)if(n=r.shift(),s=this.walk(n,l=>{var h,p,c,b,m;if(m=Tr(l),this.horizontal&&this.direction==="ltr"){if(h=this.horizontal?m.left:m.top,p=this.horizontal?m.right:m.bottom,h>=t&&h<=i)return l;if(p>t)return l;a=l,r.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(h=m.left,p=m.right,p<=i&&p>=t)return l;if(h<i)return l;a=l,r.push(l)}else{if(c=m.top,b=m.bottom,c>=t&&c<=i)return l;if(b>t)return l;a=l,r.push(l)}}),s)return this.findTextStartRange(s,t,i);return this.findTextStartRange(a,t,i)}findEnd(e,t,i){for(var r=[e],n,s=e,a;r.length;)if(n=r.shift(),a=this.walk(n,l=>{var h,p,c,b,m;if(m=Tr(l),this.horizontal&&this.direction==="ltr"){if(h=Math.round(m.left),p=Math.round(m.right),h>i&&s)return s;if(p>i)return l;s=l,r.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(h=Math.round(this.horizontal?m.left:m.top),p=Math.round(this.horizontal?m.right:m.bottom),p<t&&s)return s;if(h<t)return l;s=l,r.push(l)}else{if(c=Math.round(m.top),b=Math.round(m.bottom),c>i&&s)return s;if(b>i)return l;s=l,r.push(l)}}),a)return this.findTextEndRange(a,t,i);return this.findTextEndRange(s,t,i)}findTextStartRange(e,t,i){for(var r=this.splitTextNodeIntoRanges(e),n,s,a,l,h,p=0;p<r.length;p++)if(n=r[p],s=n.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(a=s.left,a>=t)return n}else if(this.horizontal&&this.direction==="rtl"){if(h=s.right,h<=i)return n}else if(l=s.top,l>=t)return n;return r[0]}findTextEndRange(e,t,i){for(var r=this.splitTextNodeIntoRanges(e),n,s,a,l,h,p,c,b=0;b<r.length;b++){if(s=r[b],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=a.left,h=a.right,l>i&&n)return n;if(h>i)return s}else if(this.horizontal&&this.direction==="rtl"){if(l=a.left,h=a.right,h<t&&n)return n;if(l<t)return s}else{if(p=a.top,c=a.bottom,p>i&&n)return n;if(c>i)return s}n=s}return r[r.length-1]}splitTextNodeIntoRanges(e,t){var i=[],r=e.textContent||"",n=r.trim(),s,a=e.ownerDocument,l=t||" ",h=n.indexOf(l);if(h===-1||e.nodeType!=Node.TEXT_NODE)return s=a.createRange(),s.selectNodeContents(e),[s];for(s=a.createRange(),s.setStart(e,0),s.setEnd(e,h),i.push(s),s=!1;h!=-1;)h=n.indexOf(l,h+1),h>0&&(s&&(s.setEnd(e,h),i.push(s)),s=a.createRange(),s.setStart(e,h+1));return s&&(s.setEnd(e,n.length),i.push(s)),i}rangePairToCfiPair(e,t){var i=t.start,r=t.end;i.collapse(!0),r.collapse(!1);let n=new Ve(i,e).toString(),s=new Ve(r,e).toString();return{start:n,end:s}}rangeListToCfiList(e,t){for(var i=[],r,n=0;n<t.length;n++)r=this.rangePairToCfiPair(e,t[n]),i.push(r);return i}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const bs=typeof navigator<"u",io=bs&&/Chrome/.test(navigator.userAgent),kn=bs&&!io&&/AppleWebKit/.test(navigator.userAgent),ro=1;class Ur{constructor(e,t,i,r){this.epubcfi=new Ve,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=r||0,this.cfiBase=i||"",this.epubReadingSystem("epub.js",Ti),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return mi}width(e){var t=this.content;return e&&ft(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&ft(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&ft(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&ft(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,i=this.document.createRange(),r=this.content||this.document.body,n=bi(r);return i.selectNodeContents(r),e=i.getBoundingClientRect(),t=e.width,n&&n.width&&(t+=n.width),Math.round(t)}textHeight(){let e,t,i=this.document.createRange(),r=this.content||this.document.body;return i.selectNodeContents(r),e=i.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,i){var r=this.content||this.document.body;return t?r.style.setProperty(e,t,i?"important":""):r.style.removeProperty(e),this.window.getComputedStyle(r)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),i={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},r=[],n={};if(t&&t.hasAttribute("content")){let s=t.getAttribute("content"),a=s.match(/width\s*=\s*([^,]*)/),l=s.match(/height\s*=\s*([^,]*)/),h=s.match(/initial-scale\s*=\s*([^,]*)/),p=s.match(/minimum-scale\s*=\s*([^,]*)/),c=s.match(/maximum-scale\s*=\s*([^,]*)/),b=s.match(/user-scalable\s*=\s*([^,]*)/);a&&a.length&&typeof a[1]<"u"&&(i.width=a[1]),l&&l.length&&typeof l[1]<"u"&&(i.height=l[1]),h&&h.length&&typeof h[1]<"u"&&(i.scale=h[1]),p&&p.length&&typeof p[1]<"u"&&(i.minimum=p[1]),c&&c.length&&typeof c[1]<"u"&&(i.maximum=c[1]),b&&b.length&&typeof b[1]<"u"&&(i.scalable=b[1])}return n=us(e||{},i),e&&(n.width&&r.push("width="+n.width),n.height&&r.push("height="+n.height),n.scale&&r.push("initial-scale="+n.scale),n.scalable==="no"?(r.push("minimum-scale="+n.scale),r.push("maximum-scale="+n.scale),r.push("user-scalable="+n.scalable)):(n.scalable&&r.push("user-scalable="+n.scalable),n.minimum&&r.push("minimum-scale="+n.minimum),n.maximum&&r.push("minimum-scale="+n.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",r.join(", ")),this.window.scrollTo(0,0)),n}expand(){this.emit(_e.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(_e.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=(function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),i=0;i<e.length;i+=1){var r;try{r=e[i].cssRules}catch{return}if(!r)return;for(var n=0;n<r.length;n+=1)if(r[n].media){var s=this.window.matchMedia(r[n].media.mediaText);s.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,i=0;i<e.length;i++)t=e[i],typeof t.naturalWidth<"u"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var i,r={left:0,top:0};if(!this.document)return r;if(this.epubcfi.isCfiString(e)){let n=new Ve(e).toRange(this.document,t);if(n){try{if(!n.endContainer||n.startContainer==n.endContainer&&n.startOffset==n.endOffset){let s=n.startContainer.textContent.indexOf(" ",n.startOffset);s==-1&&(s=n.startContainer.textContent.length),n.setEnd(n.startContainer,s)}}catch(s){console.error("setting end offset to start container length failed",s)}if(n.startContainer.nodeType===Node.ELEMENT_NODE)i=n.startContainer.getBoundingClientRect(),r.left=i.left,r.top=i.top;else if(kn){let s=n.startContainer,a=new Range;try{s.nodeType===ro?i=s.getBoundingClientRect():n.startOffset+2<s.length?(a.setStart(s,n.startOffset),a.setEnd(s,n.startOffset+2),i=a.getBoundingClientRect()):n.startOffset-2>0?(a.setStart(s,n.startOffset-2),a.setEnd(s,n.startOffset),i=a.getBoundingClientRect()):i=s.parentNode.getBoundingClientRect()}catch(l){console.error(l,l.stack)}}else i=n.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let n=e.substring(e.indexOf("#")+1),s=this.document.getElementById(n);if(s)if(kn){let a=new Range;a.selectNode(s),i=a.getBoundingClientRect()}else i=s.getBoundingClientRect()}return i&&(r.left=i.left,r.top=i.top),r}addStylesheet(e){return new Promise((function(t,i){var r,n=!1;if(!this.document){t(!1);return}if(r=this.document.querySelector("link[href='"+e+"']"),r){t(!0);return}r=this.document.createElement("link"),r.type="text/css",r.rel="stylesheet",r.href=e,r.onload=r.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(r)}).bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var i;return i=this._getStylesheetNode(t),i.innerHTML=e,!0}addStylesheetRules(e,t){var i;if(!(!this.document||!e||e.length===0))if(i=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var r=0,n=e.length;r<n;r++){var s=1,a=e[r],l=e[r][0],h="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],s=0);for(var p=a.length;s<p;s++){var c=a[s];h+=c[0]+":"+c[1]+(c[2]?" !important":"")+`;
`}i.insertRule(l+"{"+h+"}",i.cssRules.length)}else Object.keys(e).forEach(m=>{const O=e[m];if(Array.isArray(O))O.forEach(w=>{const v=Object.keys(w).map(g=>`${g}:${w[g]}`).join(";");i.insertRule(`${m}{${v}}`,i.cssRules.length)});else{const f=Object.keys(O).map(v=>`${v}:${O[v]}`).join(";");i.insertRule(`${m}{${f}}`,i.cssRules.length)}})}addScript(e){return new Promise((function(t,i){var r,n=!1;if(!this.document){t(!1);return}r=this.document.createElement("script"),r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(r)}).bind(this))}addClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),mi.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(mi.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}).bind(this),250)}triggerSelectedEvent(e){var t,i;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(i=new Ve(t,this.cfiBase).toString(),this.emit(_e.CONTENTS.SELECTED,i),this.emit(_e.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var i=new Ve(e);return i.toRange(this.document,t)}cfiFromRange(e,t){return new Ve(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new Ve(e,this.cfiBase,t).toString()}map(e){var t=new Di(e);return t.section()}size(e,t){var i={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),i.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),i.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(i)}columns(e,t,i,r,n){let s=Yt("column-axis"),a=Yt("column-gap"),l=Yt("column-width"),h=Yt("column-fill"),c=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),n==="rtl"&&c==="horizontal"&&this.direction(n),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),c==="vertical"?(this.css("padding-top",r/2+"px",!0),this.css("padding-bottom",r/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(s,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",r/2+"px",!0),this.css("padding-right",r/2+"px",!0),this.css(s,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(h,"auto"),this.css(a,r+"px"),this.css(l,i+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,i){var r="scale("+e+")",n="";this.css("transform-origin","top left"),(t>=0||i>=0)&&(n=" translate("+(t||0)+"px, "+(i||0)+"px )"),this.css("transform",r+n)}fit(e,t,i){var r=this.viewport(),n=parseInt(r.width),s=parseInt(r.height),a=e/n,l=t/s,h=a<l?a:l;if(this.layoutStyle("paginated"),this.width(n),this.height(s),this.overflow("hidden"),this.scaler(h,0,0),this.css("background-size",n*h+"px "+s*h+"px"),this.css("background-color","transparent"),i&&i.properties.includes("page-spread-left")){var p=e-n*h;this.css("margin-left",p+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,i,r,n){var s=new Di(t,n);return s.page(this,e,i,r)}linksHandler(){$a(this.content,e=>{this.emit(_e.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=Yt("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(i){switch(i){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Bt(Ur.prototype);class no{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,i,r,n,s){let a=encodeURI(t+e),h=new Ve(t).spinePos,p=new _s({type:e,cfiRange:t,data:i,sectionIndex:h,cb:r,className:n,styles:s});return this._annotations[a]=p,h in this._annotationsBySectionIndex?this._annotationsBySectionIndex[h].push(a):this._annotationsBySectionIndex[h]=[a],this.rendition.views().forEach(b=>{p.sectionIndex===b.index&&p.attach(b)}),p}remove(e,t){let i=encodeURI(e+t);if(i in this._annotations){let r=this._annotations[i];if(t&&r.type!==t)return;this.rendition.views().forEach(s=>{this._removeFromAnnotationBySectionIndex(r.sectionIndex,i),r.sectionIndex===s.index&&r.detach(s)}),delete this._annotations[i]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(i=>i!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,i,r,n){return this.add("highlight",e,t,i,r,n)}underline(e,t,i,r,n){return this.add("underline",e,t,i,r,n)}mark(e,t,i){return this.add("mark",e,t,i)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(r=>{this._annotations[r].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(r=>{this._annotations[r].detach(e)})}show(){}hide(){}}class _s{constructor({type:e,cfiRange:t,data:i,sectionIndex:r,cb:n,className:s,styles:a}){this.type=e,this.cfiRange=t,this.data=i,this.sectionIndex=r,this.mark=void 0,this.cb=n,this.className=s,this.styles=a}update(e){this.data=e}attach(e){let{cfiRange:t,data:i,type:r,mark:n,cb:s,className:a,styles:l}=this,h;return r==="highlight"?h=e.highlight(t,i,s,a,l):r==="underline"?h=e.underline(t,i,s,a,l):r==="mark"&&(h=e.mark(t,i,s)),this.mark=h,this.emit(_e.ANNOTATION.ATTACH,h),h}detach(e){let{cfiRange:t,type:i}=this,r;return e&&(i==="highlight"?r=e.unhighlight(t):i==="underline"?r=e.ununderline(t):i==="mark"&&(r=e.unmark(t))),this.mark=void 0,this.emit(_e.ANNOTATION.DETACH,r),r}text(){}}Bt(_s.prototype);var St={},oi={},Nn;function so(){if(Nn)return oi;Nn=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.createElement=E;function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}return oi.default={createElement:E},oi}var Xt={},In;function ao(){if(In)return Xt;In=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.proxyMouse=E,Xt.clone=e,Xt.default={proxyMouse:E};function E(i,r){function n(h){for(var p=r.length-1;p>=0;p--){var c=r[p],b=h.clientX,m=h.clientY;if(h.touches&&h.touches.length&&(b=h.touches[0].clientX,m=h.touches[0].clientY),!!t(c,i,b,m)){c.dispatchEvent(e(h));break}}}if(i.nodeName==="iframe"||i.nodeName==="IFRAME")try{this.target=i.contentDocument}catch{this.target=i}else this.target=i;for(var s=["mouseup","mousedown","click","touchstart"],a=0;a<s.length;a++){var l=s[a];this.target.addEventListener(l,function(h){return n(h)},!1)}}function e(i){var r=Object.assign({},i,{bubbles:!1});try{return new MouseEvent(i.type,r)}catch{var n=document.createEvent("MouseEvents");return n.initMouseEvent(i.type,!1,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget),n}}function t(i,r,n,s){var a=r.getBoundingClientRect();function l(m,O,w){var f=m.top-a.top,v=m.left-a.left,g=f+m.height,x=v+m.width;return f<=w&&v<=O&&g>w&&x>O}var h=i.getBoundingClientRect();if(!l(h,n,s))return!1;for(var p=i.getClientRects(),c=0,b=p.length;c<b;c++)if(l(p[c],n,s))return!0;return!1}return Xt}var Rn;function oo(){if(Rn)return St;Rn=1,Object.defineProperty(St,"__esModule",{value:!0}),St.Underline=St.Highlight=St.Mark=St.Pane=void 0;var E=function w(f,v,g){f===null&&(f=Function.prototype);var x=Object.getOwnPropertyDescriptor(f,v);if(x===void 0){var B=Object.getPrototypeOf(f);return B===null?void 0:w(B,v,g)}else{if("value"in x)return x.value;var y=x.get;return y===void 0?void 0:y.call(g)}},e=(function(){function w(f,v){for(var g=0;g<v.length;g++){var x=v[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(f,x.key,x)}}return function(f,v,g){return v&&w(f.prototype,v),g&&w(f,g),f}})(),t=so(),i=s(t),r=ao(),n=s(r);function s(w){return w&&w.__esModule?w:{default:w}}function a(w,f){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:w}function l(w,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);w.prototype=Object.create(f&&f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(w,f):w.__proto__=f)}function h(w,f){if(!(w instanceof f))throw new TypeError("Cannot call a class as a function")}St.Pane=(function(){function w(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;h(this,w),this.target=f,this.element=i.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),n.default.proxyMouse(this.target,this.marks),this.container=v,this.container.appendChild(this.element),this.render()}return e(w,[{key:"addMark",value:function(v){var g=i.default.createElement("g");return this.element.appendChild(g),v.bind(g,this.container),this.marks.push(v),v.render(),v}},{key:"removeMark",value:function(v){var g=this.marks.indexOf(v);if(g!==-1){var x=v.unbind();this.element.removeChild(x),this.marks.splice(g,1)}}},{key:"render",value:function(){m(this.element,b(this.target,this.container));var v=!0,g=!1,x=void 0;try{for(var B=this.marks[Symbol.iterator](),y;!(v=(y=B.next()).done);v=!0){var T=y.value;T.render()}}catch(N){g=!0,x=N}finally{try{!v&&B.return&&B.return()}finally{if(g)throw x}}}}]),w})();var p=St.Mark=(function(){function w(){h(this,w),this.element=null}return e(w,[{key:"bind",value:function(v,g){this.element=v,this.container=g}},{key:"unbind",value:function(){var v=this.element;return this.element=null,v}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(v){this.element&&this.element.dispatchEvent(v)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var v=[],g=this.element.firstChild;g;)v.push(g.getBoundingClientRect()),g=g.nextSibling;return v}},{key:"filteredRanges",value:function(){var v=Array.from(this.range.getClientRects());return v.filter(function(g){for(var x=0;x<v.length;x++){if(v[x]===g)return!0;var B=O(v[x],g);if(B)return!1}return!0})}}]),w})(),c=St.Highlight=(function(w){l(f,w);function f(v,g,x,B){h(this,f);var y=a(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return y.range=v,y.className=g,y.data=x||{},y.attributes=B||{},y}return e(f,[{key:"bind",value:function(g,x){E(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"bind",this).call(this,g,x);for(var B in this.data)this.data.hasOwnProperty(B)&&(this.element.dataset[B]=this.data[B]);for(var B in this.attributes)this.attributes.hasOwnProperty(B)&&this.element.setAttribute(B,this.attributes[B]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var g=this.element.ownerDocument.createDocumentFragment(),x=this.filteredRanges(),B=this.element.getBoundingClientRect(),y=this.container.getBoundingClientRect(),T=0,N=x.length;T<N;T++){var R=x[T],k=i.default.createElement("rect");k.setAttribute("x",R.left-B.left+y.left),k.setAttribute("y",R.top-B.top+y.top),k.setAttribute("height",R.height),k.setAttribute("width",R.width),g.appendChild(k)}this.element.appendChild(g)}}]),f})(p);St.Underline=(function(w){l(f,w);function f(v,g,x,B){return h(this,f),a(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,g,x,B))}return e(f,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var g=this.element.ownerDocument.createDocumentFragment(),x=this.filteredRanges(),B=this.element.getBoundingClientRect(),y=this.container.getBoundingClientRect(),T=0,N=x.length;T<N;T++){var R=x[T],k=i.default.createElement("rect");k.setAttribute("x",R.left-B.left+y.left),k.setAttribute("y",R.top-B.top+y.top),k.setAttribute("height",R.height),k.setAttribute("width",R.width),k.setAttribute("fill","none");var I=i.default.createElement("line");I.setAttribute("x1",R.left-B.left+y.left),I.setAttribute("x2",R.left-B.left+y.left+R.width),I.setAttribute("y1",R.top-B.top+y.top+R.height-1),I.setAttribute("y2",R.top-B.top+y.top+R.height-1),I.setAttribute("stroke-width",1),I.setAttribute("stroke","black"),I.setAttribute("stroke-linecap","square"),g.appendChild(k),g.appendChild(I)}this.element.appendChild(g)}}]),f})(c);function b(w,f){var v=f.getBoundingClientRect(),g=w.getBoundingClientRect();return{top:g.top-v.top,left:g.left-v.left,height:w.scrollHeight,width:w.scrollWidth}}function m(w,f){w.style.setProperty("top",f.top+"px","important"),w.style.setProperty("left",f.left+"px","important"),w.style.setProperty("height",f.height+"px","important"),w.style.setProperty("width",f.width+"px","important")}function O(w,f){return f.right<=w.right&&f.left>=w.left&&f.top>=w.top&&f.bottom<=w.bottom}return St}var pi=oo();class ws{constructor(e,t){this.settings=bt({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+Si(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Ve,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=gi(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(i){return this.load(i)}).bind(this)).then((function(){let i=this.contents.writingMode(),r;return this.settings.flow==="scrolled"?r=i.indexOf("vertical")===0?"horizontal":"vertical":r=i.indexOf("vertical")===0?"vertical":"horizontal",i.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(r),this.emit(_e.VIEWS.AXIS,r),this.setWritingMode(i),this.emit(_e.VIEWS.WRITING_MODE,i),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((n,s)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),n()})}).bind(this),(function(i){return this.emit(_e.VIEWS.LOAD_ERROR,i),new Promise((r,n)=>{n(i)})}).bind(this)).then((function(){this.emit(_e.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var i=e||this.settings.width,r=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",i,r):this.settings.axis==="horizontal"?this.lock("height",i,r):this.lock("width",i,r),this.settings.width=i,this.settings.height=r}lock(e,t,i){var r=bi(this.element),n;this.iframe?n=bi(this.iframe):n={width:0,height:0},e=="width"&&ft(t)&&(this.lockedWidth=t-r.width-n.width),e=="height"&&ft(i)&&(this.lockedHeight=i-r.height-n.height),e==="both"&&ft(t)&&ft(i)&&(this.lockedWidth=t-r.width-n.width,this.lockedHeight=i-r.height-n.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,i=this.lockedHeight,r;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,i=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(r=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&r%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(i=this.contents.textHeight(),this.settings.flow==="paginated"&&i%this.layout.height>0&&(i=Math.ceil(i/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||i!=this._height)&&this.reframe(t,i),this._expanding=!1)}reframe(e,t){var i;ft(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),ft(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let r=this.prevBounds?e-this.prevBounds.width:e,n=this.prevBounds?t-this.prevBounds.height:t;i={width:e,height:t,widthDelta:r,heightDelta:n},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let s;for(let a in this.marks)this.marks.hasOwnProperty(a)&&(s=this.marks[a],this.placeMark(s.element,s.range))}),this.onResize(this,i),this.emit(_e.VIEWS.RESIZED,i),this.prevBounds=i,this.elementBounds=gi(this.element)}load(e){var t=new je,i=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),i;if(this.iframe.onload=(function(n){this.onLoad(n,t)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=wi(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),i;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var r=this;MSApp.execUnsafeLocalFunction(function(){r.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return i}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Ur(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var i=this.document.querySelector("link[rel='canonical']");i?i.setAttribute("href",this.section.canonical):(i=this.document.createElement("link"),i.setAttribute("rel","canonical"),i.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(i)),this.contents.on(_e.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(_e.CONTENTS.RESIZE,r=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new je;return this.displayed?t.resolve(this):this.render(e).then((function(){this.emit(_e.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}).bind(this),function(i){t.reject(i,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(_e.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(_e.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=gi(this.element)),this.elementBounds}highlight(e,t={},i,r="epubjs-hl",n={}){if(!this.contents)return;const s=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},n);let a=this.contents.range(e),l=()=>{this.emit(_e.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new pi.Pane(this.iframe,this.element));let h=new pi.Highlight(a,r,t,s),p=this.pane.addMark(h);return this.highlights[e]={mark:p,element:p.element,listeners:[l,i]},p.element.setAttribute("ref",r),p.element.addEventListener("click",l),p.element.addEventListener("touchstart",l),i&&(p.element.addEventListener("click",i),p.element.addEventListener("touchstart",i)),p}underline(e,t={},i,r="epubjs-ul",n={}){if(!this.contents)return;const s=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},n);let a=this.contents.range(e),l=()=>{this.emit(_e.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new pi.Pane(this.iframe,this.element));let h=new pi.Underline(a,r,t,s),p=this.pane.addMark(h);return this.underlines[e]={mark:p,element:p.element,listeners:[l,i]},p.element.setAttribute("ref",r),p.element.addEventListener("click",l),p.element.addEventListener("touchstart",l),i&&(p.element.addEventListener("click",i),p.element.addEventListener("touchstart",i)),p}mark(e,t={},i){if(!this.contents)return;if(e in this.marks)return this.marks[e];let r=this.contents.range(e);if(!r)return;let n=r.commonAncestorContainer,s=n.nodeType===1?n:n.parentNode,a=h=>{this.emit(_e.VIEWS.MARK_CLICKED,e,t)};r.collapsed&&n.nodeType===1?(r=new Range,r.selectNodeContents(n)):r.collapsed&&(r=new Range,r.selectNodeContents(s));let l=this.document.createElement("a");return l.setAttribute("ref","epubjs-mk"),l.style.position="absolute",l.dataset.epubcfi=e,t&&Object.keys(t).forEach(h=>{l.dataset[h]=t[h]}),i&&(l.addEventListener("click",i),l.addEventListener("touchstart",i)),l.addEventListener("click",a),l.addEventListener("touchstart",a),this.placeMark(l,r),this.element.appendChild(l),this.marks[e]={element:l,range:r,listeners:[a,i]},s}placeMark(e,t){let i,r,n;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let a=t.getBoundingClientRect();i=a.top,r=a.right}else{let a=t.getClientRects(),l;for(var s=0;s!=a.length;s++)l=a[s],(!n||l.left<n)&&(n=l.left,r=Math.ceil(n/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,i=l.top)}e.style.top=`${i}px`,e.style.left=`${r}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(i=>{i&&(t.element.removeEventListener("click",i),t.element.removeEventListener("touchstart",i))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(i=>{i&&(t.element.removeEventListener("click",i),t.element.removeEventListener("touchstart",i))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(i=>{i&&(t.element.removeEventListener("click",i),t.element.removeEventListener("touchstart",i))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&fs(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Bt(ws.prototype);function uo(){var E="reverse",e=lo();return document.body.appendChild(e),e.scrollLeft>0?E="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(E="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(E="negative")),document.body.removeChild(e),E}function lo(){var E=document.createElement("div");E.dir="rtl",E.style.position="fixed",E.style.width="1px",E.style.height="1px",E.style.top="0px",E.style.left="0px",E.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var i=document.createElement("span");return i.style.width="1px",i.style.display="inline-block",e.appendChild(t),e.appendChild(i),E.appendChild(e),E}var or,On;function Mr(){if(On)return or;On=1;function E(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return or=E,or}var ur,Bn;function ho(){if(Bn)return ur;Bn=1;var E=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;return ur=E,ur}var lr,Ln;function Es(){if(Ln)return lr;Ln=1;var E=ho(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=E||e||Function("return this")();return lr=t,lr}var hr,Fn;function fo(){if(Fn)return hr;Fn=1;var E=Es(),e=function(){return E.Date.now()};return hr=e,hr}var fr,Pn;function co(){if(Pn)return fr;Pn=1;var E=/\s/;function e(t){for(var i=t.length;i--&&E.test(t.charAt(i)););return i}return fr=e,fr}var cr,zn;function po(){if(zn)return cr;zn=1;var E=co(),e=/^\s+/;function t(i){return i&&i.slice(0,E(i)+1).replace(e,"")}return cr=t,cr}var dr,Un;function As(){if(Un)return dr;Un=1;var E=Es(),e=E.Symbol;return dr=e,dr}var pr,Mn;function vo(){if(Mn)return pr;Mn=1;var E=As(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=E?E.toStringTag:void 0;function n(s){var a=t.call(s,r),l=s[r];try{s[r]=void 0;var h=!0}catch{}var p=i.call(s);return h&&(a?s[r]=l:delete s[r]),p}return pr=n,pr}var vr,qn;function go(){if(qn)return vr;qn=1;var E=Object.prototype,e=E.toString;function t(i){return e.call(i)}return vr=t,vr}var gr,Wn;function mo(){if(Wn)return gr;Wn=1;var E=As(),e=vo(),t=go(),i="[object Null]",r="[object Undefined]",n=E?E.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:n&&n in Object(a)?e(a):t(a)}return gr=s,gr}var mr,jn;function yo(){if(jn)return mr;jn=1;function E(e){return e!=null&&typeof e=="object"}return mr=E,mr}var yr,Vn;function bo(){if(Vn)return yr;Vn=1;var E=mo(),e=yo(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&E(r)==t}return yr=i,yr}var br,Hn;function _o(){if(Hn)return br;Hn=1;var E=po(),e=Mr(),t=bo(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function l(h){if(typeof h=="number")return h;if(t(h))return i;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=E(h);var c=n.test(h);return c||s.test(h)?a(h.slice(2),c?2:8):r.test(h)?i:+h}return br=l,br}var _r,Gn;function Ds(){if(Gn)return _r;Gn=1;var E=Mr(),e=fo(),t=_o(),i="Expected a function",r=Math.max,n=Math.min;function s(a,l,h){var p,c,b,m,O,w,f=0,v=!1,g=!1,x=!0;if(typeof a!="function")throw new TypeError(i);l=t(l)||0,E(h)&&(v=!!h.leading,g="maxWait"in h,b=g?r(t(h.maxWait)||0,l):b,x="trailing"in h?!!h.trailing:x);function B(H){var X=p,te=c;return p=c=void 0,f=H,m=a.apply(te,X),m}function y(H){return f=H,O=setTimeout(R,l),v?B(H):m}function T(H){var X=H-w,te=H-f,re=l-X;return g?n(re,b-te):re}function N(H){var X=H-w,te=H-f;return w===void 0||X>=l||X<0||g&&te>=b}function R(){var H=e();if(N(H))return k(H);O=setTimeout(R,T(H))}function k(H){return O=void 0,x&&p?B(H):(p=c=void 0,m)}function I(){O!==void 0&&clearTimeout(O),f=0,p=w=c=O=void 0}function j(){return O===void 0?m:k(e())}function L(){var H=e(),X=N(H);if(p=arguments,c=this,w=H,X){if(O===void 0)return y(w);if(g)return clearTimeout(O),O=setTimeout(R,l),B(w)}return O===void 0&&(O=setTimeout(R,l)),m}return L.cancel=I,L.flush=j,L}return _r=s,_r}var wr,$n;function wo(){if($n)return wr;$n=1;var E=Ds(),e=Mr(),t="Expected a function";function i(r,n,s){var a=!0,l=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,l="trailing"in s?!!s.trailing:l),E(r,n,{leading:a,maxWait:n,trailing:l})}return wr=i,wr}var Eo=wo();const Ao=ti(Eo);class Do{constructor(e){this.settings=e||{},this.id="epubjs-container-"+Si(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,i=e.width,r=e.overflow||!1,n=e.axis||"vertical",s=e.direction;bt(this.settings,e),e.height&&ft(e.height)&&(t=e.height+"px"),e.width&&ft(e.width)&&(i=e.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative",n==="horizontal"&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),i&&(a.style.width=i),t&&(a.style.height=t),r&&(r==="scroll"&&n==="vertical"?(a.style["overflow-y"]=r,a.style["overflow-x"]="hidden"):r==="scroll"&&n==="horizontal"?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=r):a.style.overflow=r),s&&(a.dir=s,a.style.direction=s),s&&this.settings.fullsize&&(document.body.style.direction=s),a}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if(as(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),i;if(t)return this.settings.hidden?i=this.wrapper:i=this.container,t.appendChild(i),this.element=t,t}getContainer(){return this.container}onResize(e){(!ft(this.settings.width)||!ft(this.settings.height))&&(this.resizeFunc=Ao(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var i;let r=e||this.settings.width,n=t||this.settings.height;e===null?(i=this.element.getBoundingClientRect(),i.width&&(e=Math.floor(i.width),this.container.style.width=e+"px")):ft(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(i=i||this.element.getBoundingClientRect(),i.height&&(t=i.height,this.container.style.height=t+"px")):ft(t)?this.container.style.height=t+"px":this.container.style.height=t,ft(e)||(e=this.container.clientWidth),ft(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let s=_i(),a=window.getComputedStyle(document.body),l={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};return r||(e=s.width-l.left-l.right),(this.settings.fullsize&&!n||!n)&&(t=s.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?_i():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var i="#"+this.id+" ",r="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(n){for(var s in n)n.hasOwnProperty(s)&&(r+=s+":"+n[s]+";")}),this.sheet.insertRule(i+e+" {"+r+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class xo{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(this.length){for(var i=0;i<t;i++)e=this._views[i],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,i=this.length,r=0;r<i;r++)if(t=this._views[r],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,i=this.length,r=0;r<i;r++)t=this._views[r],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,i=0;i<t;i++)e=this._views[i],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,i=0;i<t;i++)e=this._views[i],e.displayed&&e.hide();this.hidden=!0}}class xi{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new zr(this),this.settings=bt(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),bt(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let i=e.tagName;typeof this.settings.fullsize>"u"&&i&&(i.toLowerCase()=="body"||i.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=uo(),this.stage=new Do({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new xo(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(t){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(_e.MANAGERS.ORIENTATION_CHANGE,t)}).bind(this),500)}onResized(e){this.resize()}resize(e,t,i){let r=this.stage.size(e,t);if(this.winBounds=_i(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===r.width&&this._stageSize.height===r.height||(this._stageSize=r,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(_e.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},i))}createView(e,t){return new this.View(e,bt(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,i){let r;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(r=t.next(),r&&!r.properties.includes("page-spread-left"))return i.call(this,r)}}display(e,t){var i=new je,r=i.promise;(t===e.href||ft(t))&&(t=void 0);var n=this.views.find(e);if(n&&e&&this.layout.name!=="pre-paginated"){let a=n.offset();if(this.settings.direction==="ltr")this.scrollTo(a.left,a.top,!0);else{let l=n.width();this.scrollTo(a.left+l,a.top,!0)}if(t){let l=n.locationOf(t),h=n.width();this.moveTo(l,h)}return i.resolve(),r}this.clear();let s=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(s=!0),this.add(e,s).then((function(a){if(t){let l=a.locationOf(t),h=a.width();this.moveTo(l,h)}}).bind(this),a=>{i.reject(a)}).then((function(){return this.handleNextPrePaginated(s,e,this.add)}).bind(this)).then((function(){this.views.show(),i.resolve()}).bind(this)),r}afterDisplayed(e){this.emit(_e.MANAGERS.ADDED,e)}afterResized(e){this.emit(_e.MANAGERS.RESIZE,e.section)}moveTo(e,t){var i=0,r=0;this.isPaginated?(i=Math.floor(e.left/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollWidth&&(i=this.container.scrollWidth-this.layout.delta),r=Math.floor(e.top/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollHeight&&(r=this.container.scrollHeight-this.layout.delta)):r=e.top,this.settings.direction==="rtl"&&(i=i+this.layout.delta,i=i-t),this.scrollTo(i,r,!0)}add(e,t){var i=this.createView(e,t);return this.views.append(i),i.onDisplayed=this.afterDisplayed.bind(this),i.onResize=this.afterResized.bind(this),i.on(_e.VIEWS.AXIS,r=>{this.updateAxis(r)}),i.on(_e.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),i.display(this.request)}append(e,t){var i=this.createView(e,t);return this.views.append(i),i.onDisplayed=this.afterDisplayed.bind(this),i.onResize=this.afterResized.bind(this),i.on(_e.VIEWS.AXIS,r=>{this.updateAxis(r)}),i.on(_e.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),i.display(this.request)}prepend(e,t){var i=this.createView(e,t);return i.on(_e.VIEWS.RESIZED,r=>{this.counter(r)}),this.views.prepend(i),i.onDisplayed=this.afterDisplayed.bind(this),i.onResize=this.afterResized.bind(this),i.on(_e.VIEWS.AXIS,r=>{this.updateAxis(r)}),i.on(_e.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),i.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let i=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!i||i==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&i==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let r=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(r=!0),this.append(e,r).then((function(){return this.handleNextPrePaginated(r,e,this.append)}).bind(this),n=>n).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,t;let i=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!i||i==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&i==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let r=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(r=!0),this.prepend(e,r).then((function(){var n;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(n=e.prev(),n))return this.prepend(n)}).bind(this),n=>n).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),i=t.height<window.innerHeight?t.height:window.innerHeight,r=t.width<window.innerWidth?t.width:window.innerWidth,n=this.settings.axis==="vertical";this.settings.direction;let s=0,a=0;return this.settings.fullsize&&(s=n?window.scrollY:window.scrollX),e.map(h=>{let{index:p,href:c}=h.section,b=h.position(),m=h.width(),O=h.height(),w,f,v,g;n?(w=s+t.top-b.top+a,f=w+i-a,g=this.layout.count(O,i).pages,v=i):(w=s+t.left-b.left+a,f=w+r-a,g=this.layout.count(m,r).pages,v=r);let x=Math.ceil(w/v),B=[],y=Math.ceil(f/v);if(this.settings.direction==="rtl"&&!n){let R=x;x=g-y,y=g-R}B=[];for(var T=x;T<=y;T++){let R=T+1;B.push(R)}let N=this.mapping.page(h.contents,h.section.cfiBase,w,f);return{index:p,href:c,pages:B,totalPages:g,mapping:N}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),i=0,r=0;return this.settings.fullsize&&(i=window.scrollX),e.map(s=>{let{index:a,href:l}=s.section,h,p=s.position(),c=s.width(),b,m,O;this.settings.direction==="rtl"?(h=t.right-i,O=Math.min(Math.abs(h-p.left),this.layout.width)-r,m=p.width-(p.right-h)-r,b=m-O):(h=t.left+i,O=Math.min(p.right-h,this.layout.width)-r,b=h-p.left+r,m=b+O),r+=O;let w=this.mapping.page(s.contents,s.section.cfiBase,b,m),f=this.layout.count(c).pages,v=Math.floor(b/this.layout.pageWidth),g=[],x=Math.floor(m/this.layout.pageWidth);if(v<0&&(v=0,x=x+1),this.settings.direction==="rtl"){let y=v;v=f-x,x=f-y}for(var B=v+1;B<=x;B++){let y=B;g.push(y)}return{index:a,href:l,pages:g,totalPages:f,mapping:w}})}isVisible(e,t,i,r){var n=e.position(),s=r||this.bounds();return this.settings.axis==="horizontal"&&n.right>s.left-t&&n.left<s.right+i?!0:this.settings.axis==="vertical"&&n.bottom>s.top-t&&n.top<s.bottom+i}visible(){for(var e=this.bounds(),t=this.views.displayed(),i=t.length,r=[],n,s,a=0;a<i;a++)s=t[a],n=this.isVisible(s,0,0,e),n===!0&&r.push(s);return r}scrollBy(e,t,i){let r=this.settings.direction==="rtl"?-1:1;i&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*r,t*r):(e&&(this.container.scrollLeft+=e*r),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,i){i&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(_e.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(_e.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Di(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Di(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let i=e==="paginated"||e==="auto";this.isPaginated=i,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=i?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const i=t&&t.contents;i&&e.push(i)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}Bt(xi.prototype);const Co={easeInCubic:function(E){return Math.pow(E,3)}};class Rr{constructor(e,t){this.settings=bt({duration:80,minVelocity:.2,minDistance:10,easing:Co.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(_e.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(_e.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(i=>{t.on(i,r=>this.triggerViewEvent(r,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:i}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=i,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=i,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:i}=e.touches[0],r=Math.abs(i-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&r<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=i,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,i=Math.abs(t),r=this.endTime-this.startTime,n=t/r,s=this.settings.minVelocity;if(i<=this.settings.minDistance||i>=e)return 0;if(n>s)return-1;if(n<-s)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!==0}snap(e=0){let t=this.scrollLeft,i=this.layout.pageWidth*this.layout.divisor,r=Math.round(t/i)*i;return e&&(r+=e*i),this.smoothScrollTo(r)}smoothScrollTo(e){const t=new je,i=this.scrollLeft,r=this.now(),n=this.settings.duration,s=this.settings.easing;this.snapping=!0;function a(){const l=this.now(),h=Math.min(1,(l-r)/n);if(s(h),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}h<1?(window.requestAnimationFrame(a.bind(this)),this.scrollTo(i+(e-i)*h,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return a.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Bt(Rr.prototype);var So=Ds();const To=ti(So);class ko extends xi{constructor(e){super(e),this.name="continuous",this.settings=bt(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),bt(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return xi.prototype.display.call(this,e,t).then((function(){return this.fill()}).bind(this))}fill(e){var t=e||new je;return this.q.enqueue(()=>this.check()).then(i=>{i?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,i=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(i=e.top,e.top+this.settings.offsetDelta),(t>0||i>0)&&this.scrollBy(t,i,!0)}afterResized(e){this.emit(_e.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(_e.VIEWS.RESIZED,i=>{t.expanded=!0}),t.on(_e.VIEWS.AXIS,i=>{this.updateAxis(i)}),t.on(_e.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(_e.VIEWS.RESIZED,i=>{t.expanded=!0}),t.on(_e.VIEWS.AXIS,i=>{this.updateAxis(i)}),t.on(_e.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(_e.VIEWS.RESIZED,i=>{this.counter(i),t.expanded=!0}),t.on(_e.VIEWS.AXIS,i=>{this.updateAxis(i)}),t.on(_e.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),i=this.views.all(),r=i.length,n=typeof e<"u"?e:this.settings.offset||0,s,a,l=new je,h=[],p=0;p<r;p++)if(a=i[p],s=this.isVisible(a,n,n,t),s===!0)if(a.displayed)a.show();else{let c=a.display(this.request).then(function(b){b.show()},b=>{a.hide()});h.push(c)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return h.length?Promise.all(h).catch(c=>{l.reject(c)}):(l.resolve(),l.promise)}check(e,t){var i=new je,r=[],n=this.settings.axis==="horizontal",s=this.settings.offset||0;e&&n&&(s=e),t&&!n&&(s=t);var a=this._bounds;let l=n?this.scrollLeft:this.scrollTop,h=n?Math.floor(a.width):a.height,p=n?this.container.scrollWidth:this.container.scrollHeight,c=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",b=this.settings.rtlScrollType,m=this.settings.direction==="rtl";this.settings.fullsize?(n&&m&&b==="negative"||!n&&m&&b==="default")&&(l=l*-1):(m&&b==="default"&&c==="horizontal"&&(l=p-h-l),m&&b==="negative"&&c==="horizontal"&&(l=l*-1));let O=()=>{let x=this.views.first(),B=x&&x.section.prev();B&&r.push(this.prepend(B))},w=()=>{let x=this.views.last(),B=x&&x.section.next();B&&r.push(this.append(B))},f=l+h+s,v=l-s;f>=p&&w(),v<0&&O();let g=r.map(x=>x.display(this.request));return r.length?Promise.all(g).then(()=>this.check()).then(()=>this.update(s),x=>x):(this.q.enqueue((function(){this.update()}).bind(this)),i.resolve(!1),i.promise)}trim(){for(var e=new je,t=this.views.displayed(),i=t[0],r=t[t.length-1],n=this.views.indexOf(i),s=this.views.indexOf(r),a=this.views.slice(0,n),l=this.views.slice(s+1),h=0;h<a.length-1;h++)this.erase(a[h],a);for(var p=1;p<l.length;p++)this.erase(l[p]);return e.resolve(),e.promise}erase(e,t){var i,r;this.settings.fullsize?(i=window.scrollY,r=window.scrollX):(i=this.container.scrollTop,r=this.container.scrollLeft);var n=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,i-n.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(r+Math.floor(n.width),0,!0):this.scrollTo(r,0,!0):this.scrollTo(r-Math.floor(n.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(t){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Rr(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Lr;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=To(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,i=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*i,t=window.scrollX*i):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(_e.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(_e.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Rr(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class qr{constructor(e,t){this.settings=bt(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),bt(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Nt(this),this.hooks.serialize=new Nt(this),this.hooks.content=new Nt(this),this.hooks.unloaded=new Nt(this),this.hooks.layout=new Nt(this),this.hooks.render=new Nt(this),this.hooks.show=new Nt(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new to(this),this.annotations=new no(this),this.epubcfi=new Ve,this.q=new zr(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new je,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=xi:typeof e=="string"&&e==="continuous"?t=ko:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=ws:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(_e.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(_e.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(_e.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(_e.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(_e.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(_e.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(_e.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var t=new je,i=t.promise,r;return this.displaying=t,this.book.locations.length()&&os(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),r=this.book.spine.get(e),r?(this.manager.display(r,e).then(()=>{t.resolve(r),this.displaying=void 0,this.emit(_e.RENDITION.DISPLAYED,r),this.reportLocation()},n=>{this.emit(_e.RENDITION.DISPLAY_ERROR,n)}),i):(t.reject(new Error("No Section Found")),i)}}afterDisplayed(e){e.on(_e.VIEWS.MARK_CLICKED,(t,i)=>this.triggerMarkEvent(t,i,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(_e.RENDITION.RENDERED,e.section,e)}):this.emit(_e.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(_e.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(_e.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(_e.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,i){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,i)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,i=this.settings.layout||e.layout||"reflowable",r=this.settings.spread||e.spread||"auto",n=this.settings.orientation||e.orientation||"auto",s=this.settings.flow||e.flow||"auto",a=e.viewport||"",l=this.settings.minSpreadWidth||e.minSpreadWidth||800,h=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:i,spread:r,orientation:n,flow:s,viewport:a,minSpreadWidth:l,direction:h},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new ys(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(_e.LAYOUT.UPDATED,(t,i)=>{this.emit(_e.RENDITION.LAYOUT,t,i)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var i=this.manager.currentLocation();if(i&&i.then&&typeof i.then=="function")i.then((function(r){let n=this.located(r);!n||!n.start||!n.end||(this.location=n,this.emit(_e.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(_e.RENDITION.RELOCATED,this.location))}).bind(this));else if(i){let r=this.located(i);if(!r||!r.start||!r.end)return;this.location=r,this.emit(_e.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(_e.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(t){return this.located(t)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],i=e[e.length-1],r={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:i.index,href:i.href,cfi:i.mapping.end,displayed:{page:i.pages[i.pages.length-1]||1,total:i.totalPages}}},n=this.book.locations.locationFromCfi(t.mapping.start),s=this.book.locations.locationFromCfi(i.mapping.end);n!=null&&(r.start.location=n,r.start.percentage=this.book.locations.percentageFromLocation(n)),s!=null&&(r.end.location=s,r.end.percentage=this.book.locations.percentageFromLocation(s));let a=this.book.pageList.pageFromCfi(t.mapping.start),l=this.book.pageList.pageFromCfi(i.mapping.end);return a!=-1&&(r.start.page=a),l!=-1&&(r.end.page=l),i.index===this.book.spine.last().index&&r.end.displayed.page>=r.end.displayed.total&&(r.atEnd=!0),t.index===this.book.spine.first().index&&r.start.displayed.page===1&&(r.atStart=!0),r}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){mi.forEach(t=>{e.on(t,i=>this.triggerViewEvent(i,e))}),e.on(_e.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(_e.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,i){this.emit(_e.RENDITION.MARK_CLICKED,e,t,i)}getRange(e,t){var i=new Ve(e),r=this.manager.visible().filter(function(n){if(i.spinePos===n.index)return!0});if(r.length)return r[0].contents.range(i,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(n){n()});let t=e.window.getComputedStyle(e.content,null),i=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,r=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":i+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":i+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(n,s){setTimeout(function(){n()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(_e.CONTENTS.LINK_CLICKED,t=>{let i=this.book.path.relative(t);this.display(i)})}injectStylesheet(e,t){let i=e.createElement("link");i.setAttribute("type","text/css"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(i)}injectScript(e,t){let i=e.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",this.settings.script),i.textContent=" ",e.getElementsByTagName("head")[0].appendChild(i)}injectIdentifier(e,t){let i=this.book.packaging.metadata.identifier,r=e.createElement("meta");r.setAttribute("name","dc.relation.ispartof"),i&&r.setAttribute("content",i),e.getElementsByTagName("head")[0].appendChild(r)}}Bt(qr.prototype);var Er={exports:{}};var Zn;function No(){return Zn||(Zn=1,(function(E,e){(function(t){E.exports=t()})(function(){return(function t(i,r,n){function s(h,p){if(!r[h]){if(!i[h]){var c=typeof qt=="function"&&qt;if(!p&&c)return c(h,!0);if(a)return a(h,!0);var b=new Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}var m=r[h]={exports:{}};i[h][0].call(m.exports,function(O){var w=i[h][1][O];return s(w||O)},m,m.exports,t,i,r,n)}return r[h].exports}for(var a=typeof qt=="function"&&qt,l=0;l<n.length;l++)s(n[l]);return s})({1:[function(t,i,r){var n=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var h=[],p,c,b,m,O,w,f,v=0,g=l.length,x=g,B=n.getTypeOf(l)!=="string";v<l.length;)x=g-v,B?(p=l[v++],c=v<g?l[v++]:0,b=v<g?l[v++]:0):(p=l.charCodeAt(v++),c=v<g?l.charCodeAt(v++):0,b=v<g?l.charCodeAt(v++):0),m=p>>2,O=(p&3)<<4|c>>4,w=x>1?(c&15)<<2|b>>6:64,f=x>2?b&63:64,h.push(a.charAt(m)+a.charAt(O)+a.charAt(w)+a.charAt(f));return h.join("")},r.decode=function(l){var h,p,c,b,m,O,w,f=0,v=0,g="data:";if(l.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var x=l.length*3/4;if(l.charAt(l.length-1)===a.charAt(64)&&x--,l.charAt(l.length-2)===a.charAt(64)&&x--,x%1!==0)throw new Error("Invalid base64 input, bad content length.");var B;for(s.uint8array?B=new Uint8Array(x|0):B=new Array(x|0);f<l.length;)b=a.indexOf(l.charAt(f++)),m=a.indexOf(l.charAt(f++)),O=a.indexOf(l.charAt(f++)),w=a.indexOf(l.charAt(f++)),h=b<<2|m>>4,p=(m&15)<<4|O>>2,c=(O&3)<<6|w,B[v++]=h,O!==64&&(B[v++]=p),w!==64&&(B[v++]=c);return B}},{"./support":30,"./utils":32}],2:[function(t,i,r){var n=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function h(p,c,b,m,O){this.compressedSize=p,this.uncompressedSize=c,this.crc32=b,this.compression=m,this.compressedContent=O}h.prototype={getContentWorker:function(){var p=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return p.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(p,c,b){return p.pipe(new a).pipe(new l("uncompressedSize")).pipe(c.compressWorker(b)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,r){var n=t("./utils");function s(){for(var p,c=[],b=0;b<256;b++){p=b;for(var m=0;m<8;m++)p=p&1?3988292384^p>>>1:p>>>1;c[b]=p}return c}var a=s();function l(p,c,b,m){var O=a,w=m+b;p=p^-1;for(var f=m;f<w;f++)p=p>>>8^O[(p^c[f])&255];return p^-1}function h(p,c,b,m){var O=a,w=m+b;p=p^-1;for(var f=m;f<w;f++)p=p>>>8^O[(p^c.charCodeAt(f))&255];return p^-1}i.exports=function(c,b){if(typeof c>"u"||!c.length)return 0;var m=n.getTypeOf(c)!=="string";return m?l(b|0,c,c.length,0):h(b|0,c,c.length,0)}},{"./utils":32}],5:[function(t,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,i,r){var n=null;typeof Promise<"u"?n=Promise:n=t("lie"),i.exports={Promise:n}},{lie:37}],7:[function(t,i,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),h=n?"uint8array":"array";r.magic="\b\0";function p(c,b){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=b,this.meta={}}a.inherits(p,l),p.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(h,c.data),!1)},p.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(b){c.push({data:b,meta:c.meta})}},r.compressWorker=function(c){return new p("Deflate",c)},r.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,r){var n=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),h=t("../signature"),p=function(v,g){var x="",B;for(B=0;B<g;B++)x+=String.fromCharCode(v&255),v=v>>>8;return x},c=function(v,g){var x=v;return v||(x=g?16893:33204),(x&65535)<<16},b=function(v){return(v||0)&63},m=function(v,g,x,B,y,T){var N=v.file,R=v.compression,k=T!==a.utf8encode,I=n.transformTo("string",T(N.name)),j=n.transformTo("string",a.utf8encode(N.name)),L=N.comment,H=n.transformTo("string",T(L)),X=n.transformTo("string",a.utf8encode(L)),te=j.length!==N.name.length,re=X.length!==L.length,Q,ie,de="",ne="",ue="",ve=N.dir,Re=N.date,Te={crc32:0,compressedSize:0,uncompressedSize:0};(!g||x)&&(Te.crc32=v.crc32,Te.compressedSize=v.compressedSize,Te.uncompressedSize=v.uncompressedSize);var Fe=0;g&&(Fe|=8),!k&&(te||re)&&(Fe|=2048);var Je=0,$e=0;ve&&(Je|=16),y==="UNIX"?($e=798,Je|=c(N.unixPermissions,ve)):($e=20,Je|=b(N.dosPermissions)),Q=Re.getUTCHours(),Q=Q<<6,Q=Q|Re.getUTCMinutes(),Q=Q<<5,Q=Q|Re.getUTCSeconds()/2,ie=Re.getUTCFullYear()-1980,ie=ie<<4,ie=ie|Re.getUTCMonth()+1,ie=ie<<5,ie=ie|Re.getUTCDate(),te&&(ne=p(1,1)+p(l(I),4)+j,de+="up"+p(ne.length,2)+ne),re&&(ue=p(1,1)+p(l(H),4)+X,de+="uc"+p(ue.length,2)+ue);var Se="";Se+=`
\0`,Se+=p(Fe,2),Se+=R.magic,Se+=p(Q,2),Se+=p(ie,2),Se+=p(Te.crc32,4),Se+=p(Te.compressedSize,4),Se+=p(Te.uncompressedSize,4),Se+=p(I.length,2),Se+=p(de.length,2);var He=h.LOCAL_FILE_HEADER+Se+I+de,Xe=h.CENTRAL_FILE_HEADER+p($e,2)+Se+p(H.length,2)+"\0\0\0\0"+p(Je,4)+p(B,4)+I+de+H;return{fileRecord:He,dirRecord:Xe}},O=function(v,g,x,B,y){var T="",N=n.transformTo("string",y(B));return T=h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(v,2)+p(v,2)+p(g,4)+p(x,4)+p(N.length,2)+N,T},w=function(v){var g="";return g=h.DATA_DESCRIPTOR+p(v.crc32,4)+p(v.compressedSize,4)+p(v.uncompressedSize,4),g};function f(v,g,x,B){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=x,this.encodeFileName=B,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(f,s),f.prototype.push=function(v){var g=v.meta.percent||0,x=this.entriesCount,B=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,s.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:x?(g+100*(x-B-1))/x:100}}))},f.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var g=this.streamFiles&&!v.file.dir;if(g){var x=m(v,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(v){this.accumulate=!1;var g=this.streamFiles&&!v.file.dir,x=m(v,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),g)this.push({data:w(v),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var v=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var x=this.bytesWritten-v,B=O(this.dirRecords.length,x,v,this.zipComment,this.encodeFileName);this.push({data:B,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(v){this._sources.push(v);var g=this;return v.on("data",function(x){g.processChunk(x)}),v.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),v.on("error",function(x){g.error(x)}),this},f.prototype.resume=function(){if(!s.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},f.prototype.error=function(v){var g=this._sources;if(!s.prototype.error.call(this,v))return!1;for(var x=0;x<g.length;x++)try{g[x].error(v)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var v=this._sources,g=0;g<v.length;g++)v[g].lock()},i.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,r){var n=t("../compressions"),s=t("./ZipFileWorker"),a=function(l,h){var p=l||h,c=n[p];if(!c)throw new Error(p+" is not a valid compression method !");return c};r.generateWorker=function(l,h,p){var c=new s(h.streamFiles,p,h.platform,h.encodeFileName),b=0;try{l.forEach(function(m,O){b++;var w=a(O.options.compression,h.compression),f=O.options.compressionOptions||h.compressionOptions||{},v=O.dir,g=O.date;O._compressWorker(w,f).withStreamInfo("file",{name:m,dir:v,date:g,comment:O.comment||"",unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions}).pipe(c)}),c.entriesCount=b}catch(m){c.error(m)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(s,a){return new n().loadAsync(s,a)},n.external=t("./external"),i.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,r){var n=t("./utils"),s=t("./external"),a=t("./utf8"),l=t("./zipEntries"),h=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function c(b){return new s.Promise(function(m,O){var w=b.decompressed.getContentWorker().pipe(new h);w.on("error",function(f){O(f)}).on("end",function(){w.streamInfo.crc32!==b.decompressed.crc32?O(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}i.exports=function(b,m){var O=this;return m=n.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),p.isNode&&p.isStream(b)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",b,!0,m.optimizedBinaryString,m.base64).then(function(w){var f=new l(m);return f.load(w),f}).then(function(f){var v=[s.Promise.resolve(f)],g=f.files;if(m.checkCRC32)for(var x=0;x<g.length;x++)v.push(c(g[x]));return s.Promise.all(v)}).then(function(f){for(var v=f.shift(),g=v.files,x=0;x<g.length;x++){var B=g[x],y=B.fileNameStr,T=n.resolve(B.fileNameStr);O.file(T,B.decompressed,{binary:!0,optimizedBinaryString:!0,date:B.date,dir:B.dir,comment:B.fileCommentStr.length?B.fileCommentStr:null,unixPermissions:B.unixPermissions,dosPermissions:B.dosPermissions,createFolders:m.createFolders}),B.dir||(O.file(T).unsafeOriginalName=y)}return v.zipComment.length&&(O.comment=v.zipComment),O})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,r){var n=t("../utils"),s=t("../stream/GenericWorker");function a(l,h){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}n.inherits(a,s),a.prototype._bindStream=function(l){var h=this;this._stream=l,l.pause(),l.on("data",function(p){h.push({data:p,meta:{percent:0}})}).on("error",function(p){h.isPaused?this.generatedError=p:h.error(p)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},a.prototype.pause=function(){return s.prototype.pause.call(this)?(this._stream.pause(),!0):!1},a.prototype.resume=function(){return s.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,r){var n=t("readable-stream").Readable,s=t("../utils");s.inherits(a,n);function a(l,h,p){n.call(this,h),this._helper=l;var c=this;l.on("data",function(b,m){c.push(b)||c._helper.pause(),p&&p(m)}).on("error",function(b){c.emit("error",b)}).on("end",function(){c.push(null)})}a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,i,r){var n=t("./utf8"),s=t("./utils"),a=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),h=t("./defaults"),p=t("./compressedObject"),c=t("./zipObject"),b=t("./generate"),m=t("./nodejsUtils"),O=t("./nodejs/NodejsStreamInputAdapter"),w=function(y,T,N){var R=s.getTypeOf(T),k,I=s.extend(N||{},h);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&I.unixPermissions&16384&&(I.dir=!0),I.dosPermissions&&I.dosPermissions&16&&(I.dir=!0),I.dir&&(y=v(y)),I.createFolders&&(k=f(y))&&g.call(this,k,!0);var j=R==="string"&&I.binary===!1&&I.base64===!1;(!N||typeof N.binary>"u")&&(I.binary=!j);var L=T instanceof p&&T.uncompressedSize===0;(L||I.dir||!T||T.length===0)&&(I.base64=!1,I.binary=!0,T="",I.compression="STORE",R="string");var H=null;T instanceof p||T instanceof a?H=T:m.isNode&&m.isStream(T)?H=new O(y,T):H=s.prepareContent(y,T,I.binary,I.optimizedBinaryString,I.base64);var X=new c(y,H,I);this.files[y]=X},f=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var T=y.lastIndexOf("/");return T>0?y.substring(0,T):""},v=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},g=function(y,T){return T=typeof T<"u"?T:h.createFolders,y=v(y),this.files[y]||w.call(this,y,null,{dir:!0,createFolders:T}),this.files[y]};function x(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var T,N,R;for(T in this.files)R=this.files[T],N=T.slice(this.root.length,T.length),N&&T.slice(0,this.root.length)===this.root&&y(N,R)},filter:function(y){var T=[];return this.forEach(function(N,R){y(N,R)&&T.push(R)}),T},file:function(y,T,N){if(arguments.length===1)if(x(y)){var R=y;return this.filter(function(I,j){return!j.dir&&R.test(I)})}else{var k=this.files[this.root+y];return k&&!k.dir?k:null}else y=this.root+y,w.call(this,y,T,N);return this},folder:function(y){if(!y)return this;if(x(y))return this.filter(function(k,I){return I.dir&&y.test(k)});var T=this.root+y,N=g.call(this,T),R=this.clone();return R.root=N.name,R},remove:function(y){y=this.root+y;var T=this.files[y];if(T||(y.slice(-1)!=="/"&&(y+="/"),T=this.files[y]),T&&!T.dir)delete this.files[y];else for(var N=this.filter(function(k,I){return I.name.slice(0,y.length)===y}),R=0;R<N.length;R++)delete this.files[N[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var T,N={};try{if(N=s.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),N.type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");s.checkSupport(N.type),(N.platform==="darwin"||N.platform==="freebsd"||N.platform==="linux"||N.platform==="sunos")&&(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var R=N.comment||this.comment||"";T=b.generateWorker(this,N,R)}catch(k){T=new a("error"),T.error(k)}return new l(T,N.type||"string",N.mimeType)},generateAsync:function(y,T){return this.generateInternalStream(y).accumulate(T)},generateNodeStream:function(y,T){return y=y||{},y.type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(T)}};i.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,r){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,r){var n=t("./DataReader"),s=t("../utils");function a(l){n.call(this,l);for(var h=0;h<this.data.length;h++)l[h]=l[h]&255}s.inherits(a,n),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var h=l.charCodeAt(0),p=l.charCodeAt(1),c=l.charCodeAt(2),b=l.charCodeAt(3),m=this.length-4;m>=0;--m)if(this.data[m]===h&&this.data[m+1]===p&&this.data[m+2]===c&&this.data[m+3]===b)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var h=l.charCodeAt(0),p=l.charCodeAt(1),c=l.charCodeAt(2),b=l.charCodeAt(3),m=this.readData(4);return h===m[0]&&p===m[1]&&c===m[2]&&b===m[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,i,r){var n=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l=0,h;for(this.checkOffset(a),h=this.index+a-1;h>=this.index;h--)l=(l<<8)+this.byteAt(h);return this.index+=a,l},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}},i.exports=s},{"../utils":32}],19:[function(t,i,r){var n=t("./Uint8ArrayReader"),s=t("../utils");function a(l){n.call(this,l)}s.inherits(a,n),a.prototype.readData=function(l){this.checkOffset(l);var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,r){var n=t("./DataReader"),s=t("../utils");function a(l){n.call(this,l)}s.inherits(a,n),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){var h=this.readData(4);return l===h},a.prototype.readData=function(l){this.checkOffset(l);var h=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,i,r){var n=t("./ArrayReader"),s=t("../utils");function a(l){n.call(this,l)}s.inherits(a,n),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,h},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,r){var n=t("../utils"),s=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),h=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");i.exports=function(c){var b=n.getTypeOf(c);return n.checkSupport(b),b==="string"&&!s.uint8array?new l(c):b==="nodebuffer"?new h(c):s.uint8array?new p(n.transformTo("uint8array",c)):new a(n.transformTo("array",c))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,r){var n=t("./GenericWorker"),s=t("../utils");function a(l){n.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(a,n),a.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,r){var n=t("./GenericWorker"),s=t("../crc32"),a=t("../utils");function l(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(l,n),l.prototype.processChunk=function(h){this.streamInfo.crc32=s(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,r){var n=t("../utils"),s=t("./GenericWorker");function a(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(a,s),a.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}s.prototype.processChunk.call(this,l)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,r){var n=t("../utils"),s=t("./GenericWorker"),a=16*1024;function l(h){s.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(c){p.dataIsReady=!0,p.data=c,p.max=c&&c.length||0,p.type=n.getTypeOf(c),p.isPaused||p._tickAndRepeat()},function(c){p.error(c)})}n.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return s.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=a,p=null,c=Math.min(this.max,this.index+h);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,c);break;case"uint8array":p=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":p=this.data.slice(this.index,c);break}return this.index=c,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,r){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return this.isFinished?!1:(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(l){a.processChunk(l)}),s.on("end",function(){a.end()}),s.on("error",function(l){a.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var s=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},i.exports=n},{}],29:[function(t,i,r){var n=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),h=t("../support"),p=t("../external"),c=null;if(h.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(f,v,g){switch(f){case"blob":return n.newBlob(n.transformTo("arraybuffer",v),g);case"base64":return l.encode(v);default:return n.transformTo(f,v)}}function m(f,v){var g,x=0,B=null,y=0;for(g=0;g<v.length;g++)y+=v[g].length;switch(f){case"string":return v.join("");case"array":return Array.prototype.concat.apply([],v);case"uint8array":for(B=new Uint8Array(y),g=0;g<v.length;g++)B.set(v[g],x),x+=v[g].length;return B;case"nodebuffer":return Buffer.concat(v);default:throw new Error("concat : unsupported type '"+f+"'")}}function O(f,v){return new p.Promise(function(g,x){var B=[],y=f._internalType,T=f._outputType,N=f._mimeType;f.on("data",function(R,k){B.push(R),v&&v(k)}).on("error",function(R){B=[],x(R)}).on("end",function(){try{var R=b(T,m(y,B),N);g(R)}catch(k){x(k)}B=[]}).resume()})}function w(f,v,g){var x=v;switch(v){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string";break}try{this._internalType=x,this._outputType=v,this._mimeType=g,n.checkSupport(x),this._worker=f.pipe(new s(x)),f.lock()}catch(B){this._worker=new a("error"),this._worker.error(B)}}w.prototype={accumulate:function(f){return O(this,f)},on:function(f,v){var g=this;return f==="data"?this._worker.on(f,function(x){v.call(g,x.data,x.meta)}):this._worker.on(f,function(){n.delay(v,arguments,g)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},f)}},i.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new s;a.append(n),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,r){for(var n=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),h=new Array(256),p=0;p<256;p++)h[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;h[254]=h[254]=1;var c=function(f){var v,g,x,B,y,T=f.length,N=0;for(B=0;B<T;B++)g=f.charCodeAt(B),(g&64512)===55296&&B+1<T&&(x=f.charCodeAt(B+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),B++)),N+=g<128?1:g<2048?2:g<65536?3:4;for(s.uint8array?v=new Uint8Array(N):v=new Array(N),y=0,B=0;y<N;B++)g=f.charCodeAt(B),(g&64512)===55296&&B+1<T&&(x=f.charCodeAt(B+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),B++)),g<128?v[y++]=g:g<2048?(v[y++]=192|g>>>6,v[y++]=128|g&63):g<65536?(v[y++]=224|g>>>12,v[y++]=128|g>>>6&63,v[y++]=128|g&63):(v[y++]=240|g>>>18,v[y++]=128|g>>>12&63,v[y++]=128|g>>>6&63,v[y++]=128|g&63);return v},b=function(f,v){var g;for(v=v||f.length,v>f.length&&(v=f.length),g=v-1;g>=0&&(f[g]&192)===128;)g--;return g<0||g===0?v:g+h[f[g]]>v?g:v},m=function(f){var v,g,x,B,y=f.length,T=new Array(y*2);for(g=0,v=0;v<y;){if(x=f[v++],x<128){T[g++]=x;continue}if(B=h[x],B>4){T[g++]=65533,v+=B-1;continue}for(x&=B===2?31:B===3?15:7;B>1&&v<y;)x=x<<6|f[v++]&63,B--;if(B>1){T[g++]=65533;continue}x<65536?T[g++]=x:(x-=65536,T[g++]=55296|x>>10&1023,T[g++]=56320|x&1023)}return T.length!==g&&(T.subarray?T=T.subarray(0,g):T.length=g),n.applyFromCharCode(T)};r.utf8encode=function(v){return s.nodebuffer?a.newBufferFrom(v,"utf-8"):c(v)},r.utf8decode=function(v){return s.nodebuffer?n.transformTo("nodebuffer",v).toString("utf-8"):(v=n.transformTo(s.uint8array?"uint8array":"array",v),m(v))};function O(){l.call(this,"utf-8 decode"),this.leftOver=null}n.inherits(O,l),O.prototype.processChunk=function(f){var v=n.transformTo(s.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=v;v=new Uint8Array(g.length+this.leftOver.length),v.set(this.leftOver,0),v.set(g,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=b(v),B=v;x!==v.length&&(s.uint8array?(B=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(B=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:r.utf8decode(B),meta:f.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=O;function w(){l.call(this,"utf-8 encode")}n.inherits(w,l),w.prototype.processChunk=function(f){this.push({data:r.utf8encode(f.data),meta:f.meta})},r.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,r){var n=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),l=t("./external");t("setimmediate");function h(f){var v=null;return n.uint8array?v=new Uint8Array(f.length):v=new Array(f.length),c(f,v)}r.newBlob=function(f,v){r.checkSupport("blob");try{return new Blob([f],{type:v})}catch{try{var g=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,x=new g;return x.append(f),x.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};function p(f){return f}function c(f,v){for(var g=0;g<f.length;++g)v[g]=f.charCodeAt(g)&255;return v}var b={stringifyByChunk:function(f,v,g){var x=[],B=0,y=f.length;if(y<=g)return String.fromCharCode.apply(null,f);for(;B<y;)v==="array"||v==="nodebuffer"?x.push(String.fromCharCode.apply(null,f.slice(B,Math.min(B+g,y)))):x.push(String.fromCharCode.apply(null,f.subarray(B,Math.min(B+g,y)))),B+=g;return x.join("")},stringifyByChar:function(f){for(var v="",g=0;g<f.length;g++)v+=String.fromCharCode(f[g]);return v},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function m(f){var v=65536,g=r.getTypeOf(f),x=!0;if(g==="uint8array"?x=b.applyCanBeUsed.uint8array:g==="nodebuffer"&&(x=b.applyCanBeUsed.nodebuffer),x)for(;v>1;)try{return b.stringifyByChunk(f,g,v)}catch{v=Math.floor(v/2)}return b.stringifyByChar(f)}r.applyFromCharCode=m;function O(f,v){for(var g=0;g<f.length;g++)v[g]=f[g];return v}var w={};w.string={string:p,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return w.string.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:function(f){return c(f,a.allocBuffer(f.length))}},w.array={string:m,array:p,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},w.arraybuffer={string:function(f){return m(new Uint8Array(f))},array:function(f){return O(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:p,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},w.uint8array={string:m,array:function(f){return O(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:p,nodebuffer:function(f){return a.newBufferFrom(f)}},w.nodebuffer={string:m,array:function(f){return O(f,new Array(f.length))},arraybuffer:function(f){return w.nodebuffer.uint8array(f).buffer},uint8array:function(f){return O(f,new Uint8Array(f.length))},nodebuffer:p},r.transformTo=function(f,v){if(v||(v=""),!f)return v;r.checkSupport(f);var g=r.getTypeOf(v),x=w[g][f](v);return x},r.resolve=function(f){for(var v=f.split("/"),g=[],x=0;x<v.length;x++){var B=v[x];B==="."||B===""&&x!==0&&x!==v.length-1||(B===".."?g.pop():g.push(B))}return g.join("/")},r.getTypeOf=function(f){if(typeof f=="string")return"string";if(Object.prototype.toString.call(f)==="[object Array]")return"array";if(n.nodebuffer&&a.isBuffer(f))return"nodebuffer";if(n.uint8array&&f instanceof Uint8Array)return"uint8array";if(n.arraybuffer&&f instanceof ArrayBuffer)return"arraybuffer"},r.checkSupport=function(f){var v=n[f.toLowerCase()];if(!v)throw new Error(f+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(f){var v="",g,x;for(x=0;x<(f||"").length;x++)g=f.charCodeAt(x),v+="\\x"+(g<16?"0":"")+g.toString(16).toUpperCase();return v},r.delay=function(f,v,g){setImmediate(function(){f.apply(g||null,v||[])})},r.inherits=function(f,v){var g=function(){};g.prototype=v.prototype,f.prototype=new g},r.extend=function(){var f={},v,g;for(v=0;v<arguments.length;v++)for(g in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],g)&&typeof f[g]>"u"&&(f[g]=arguments[v][g]);return f},r.prepareContent=function(f,v,g,x,B){var y=l.Promise.resolve(v).then(function(T){var N=n.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1);return N&&typeof FileReader<"u"?new l.Promise(function(R,k){var I=new FileReader;I.onload=function(j){R(j.target.result)},I.onerror=function(j){k(j.target.error)},I.readAsArrayBuffer(T)}):T});return y.then(function(T){var N=r.getTypeOf(T);return N?(N==="arraybuffer"?T=r.transformTo("uint8array",T):N==="string"&&(B?T=s.decode(T):g&&x!==!0&&(T=h(T))),T):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,r){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),l=t("./zipEntry"),h=t("./support");function p(c){this.files=[],this.loadOptions=c}p.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(b)+", expected "+s.pretty(c)+")")}},isSignature:function(c,b){var m=this.reader.index;this.reader.setIndex(c);var O=this.reader.readString(4),w=O===b;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),b=h.uint8array?"uint8array":"array",m=s.transformTo(b,c);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c=this.zip64EndOfCentralSize-44,b=0,m,O,w;b<c;)m=this.reader.readInt(2),O=this.reader.readInt(4),w=this.reader.readData(O),this.zip64ExtensibleData[m]={id:m,length:O,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,b;for(c=0;c<this.files.length;c++)b=this.files[c],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)c=new l({zip64:this.zip64},this.loadOptions),c.readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0){var b=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw b?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(c);var m=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),c<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var O=this.centralDirOffset+this.centralDirSize;this.zip64&&(O+=20,O+=12+this.zip64EndOfCentralSize);var w=m-O;if(w>0)this.isSignature(m,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(c){this.reader=n(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,r){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),h=t("./utf8"),p=t("./compressions"),c=t("./support"),b=0,m=3,O=function(f){for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)&&p[v].magic===f)return p[v];return null};function w(f,v){this.options=f,this.loadOptions=v}w.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(f){var v,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(v=O(this.compressionMethod),v===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var v=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(v),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),f===b&&(this.dosPermissions=this.externalFileAttributes&63),f===m&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var v=f.index+this.extraFieldsLength,g,x,B;for(this.extraFields||(this.extraFields={});f.index+4<v;)g=f.readInt(2),x=f.readInt(2),B=f.readData(x),this.extraFields[g]={id:g,length:x,value:B};f.setIndex(v)},handleUTF8:function(){var f=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var g=s.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var B=s.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(B)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var v=n(f.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:h.utf8decode(v.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var v=n(f.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:h.utf8decode(v.readData(f.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,r){var n=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),a=t("./utf8"),l=t("./compressedObject"),h=t("./stream/GenericWorker"),p=function(O,w,f){this.name=O,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=w,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}};p.prototype={internalStream:function(O){var w=null,f="string";try{if(!O)throw new Error("No output type specified.");f=O.toLowerCase();var v=f==="string"||f==="text";(f==="binarystring"||f==="text")&&(f="string"),w=this._decompressWorker();var g=!this._dataBinary;g&&!v&&(w=w.pipe(new a.Utf8EncodeWorker)),!g&&v&&(w=w.pipe(new a.Utf8DecodeWorker))}catch(x){w=new h("error"),w.error(x)}return new n(w,f,"")},async:function(O,w){return this.internalStream(O).accumulate(w)},nodeStream:function(O,w){return this.internalStream(O||"nodebuffer").toNodejsStream(w)},_compressWorker:function(O,w){if(this._data instanceof l&&this._data.compression.magic===O.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new a.Utf8EncodeWorker)),l.createWorkerFrom(f,O,w)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof h?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<c.length;m++)p.prototype[c[m]]=b;i.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,r){(function(n){var s=n.MutationObserver||n.WebKitMutationObserver,a;if(s){var l=0,h=new s(O),p=n.document.createTextNode("");h.observe(p,{characterData:!0}),a=function(){p.data=l=++l%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var c=new n.MessageChannel;c.port1.onmessage=O,a=function(){c.port2.postMessage(0)}}else"document"in n&&"onreadystatechange"in n.document.createElement("script")?a=function(){var f=n.document.createElement("script");f.onreadystatechange=function(){O(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},n.document.documentElement.appendChild(f)}:a=function(){setTimeout(O,0)};var b,m=[];function O(){b=!0;for(var f,v,g=m.length;g;){for(v=m,m=[],f=-1;++f<g;)v[f]();g=m.length}b=!1}i.exports=w;function w(f){m.push(f)===1&&!b&&a()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,r){var n=t("immediate");function s(){}var a={},l=["REJECTED"],h=["FULFILLED"],p=["PENDING"];i.exports=c;function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,y!==s&&w(this,y)}c.prototype.finally=function(y){if(typeof y!="function")return this;var T=this.constructor;return this.then(N,R);function N(k){function I(){return k}return T.resolve(y()).then(I)}function R(k){function I(){throw k}return T.resolve(y()).then(I)}},c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,T){if(typeof y!="function"&&this.state===h||typeof T!="function"&&this.state===l)return this;var N=new this.constructor(s);if(this.state!==p){var R=this.state===h?y:T;m(N,R,this.outcome)}else this.queue.push(new b(N,y,T));return N};function b(y,T,N){this.promise=y,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},b.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},b.prototype.callRejected=function(y){a.reject(this.promise,y)},b.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)};function m(y,T,N){n(function(){var R;try{R=T(N)}catch(k){return a.reject(y,k)}R===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,R)})}a.resolve=function(y,T){var N=f(O,T);if(N.status==="error")return a.reject(y,N.value);var R=N.value;if(R)w(y,R);else{y.state=h,y.outcome=T;for(var k=-1,I=y.queue.length;++k<I;)y.queue[k].callFulfilled(T)}return y},a.reject=function(y,T){y.state=l,y.outcome=T;for(var N=-1,R=y.queue.length;++N<R;)y.queue[N].callRejected(T);return y};function O(y){var T=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof T=="function")return function(){T.apply(y,arguments)}}function w(y,T){var N=!1;function R(L){N||(N=!0,a.reject(y,L))}function k(L){N||(N=!0,a.resolve(y,L))}function I(){T(k,R)}var j=f(I);j.status==="error"&&R(j.value)}function f(y,T){var N={};try{N.value=y(T),N.status="success"}catch(R){N.status="error",N.value=R}return N}c.resolve=v;function v(y){return y instanceof this?y:a.resolve(new this(s),y)}c.reject=g;function g(y){var T=new this(s);return a.reject(T,y)}c.all=x;function x(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=y.length,R=!1;if(!N)return this.resolve([]);for(var k=new Array(N),I=0,j=-1,L=new this(s);++j<N;)H(y[j],j);return L;function H(X,te){T.resolve(X).then(re,function(Q){R||(R=!0,a.reject(L,Q))});function re(Q){k[te]=Q,++I===N&&!R&&(R=!0,a.resolve(L,k))}}}c.race=B;function B(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=y.length,R=!1;if(!N)return this.resolve([]);for(var k=-1,I=new this(s);++k<N;)j(y[k]);return I;function j(L){T.resolve(L).then(function(H){R||(R=!0,a.resolve(I,H))},function(H){R||(R=!0,a.reject(I,H))})}}},{immediate:36}],38:[function(t,i,r){var n=t("./lib/utils/common").assign,s=t("./lib/deflate"),a=t("./lib/inflate"),l=t("./lib/zlib/constants"),h={};n(h,s,a,l),i.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,r){var n=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),p=Object.prototype.toString,c=0,b=4,m=0,O=1,w=2,f=-1,v=0,g=8;function x(N){if(!(this instanceof x))return new x(N);this.options=s.assign({level:f,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},N||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var k=n.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(k!==m)throw new Error(l[k]);if(R.header&&n.deflateSetHeader(this.strm,R.header),R.dictionary){var I;if(typeof R.dictionary=="string"?I=a.string2buf(R.dictionary):p.call(R.dictionary)==="[object ArrayBuffer]"?I=new Uint8Array(R.dictionary):I=R.dictionary,k=n.deflateSetDictionary(this.strm,I),k!==m)throw new Error(l[k]);this._dict_set=!0}}x.prototype.push=function(N,R){var k=this.strm,I=this.options.chunkSize,j,L;if(this.ended)return!1;L=R===~~R?R:R===!0?b:c,typeof N=="string"?k.input=a.string2buf(N):p.call(N)==="[object ArrayBuffer]"?k.input=new Uint8Array(N):k.input=N,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(I),k.next_out=0,k.avail_out=I),j=n.deflate(k,L),j!==O&&j!==m)return this.onEnd(j),this.ended=!0,!1;(k.avail_out===0||k.avail_in===0&&(L===b||L===w))&&(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&j!==O);return L===b?(j=n.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===m):(L===w&&(this.onEnd(m),k.avail_out=0),!0)},x.prototype.onData=function(N){this.chunks.push(N)},x.prototype.onEnd=function(N){N===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg};function B(N,R){var k=new x(R);if(k.push(N,!0),k.err)throw k.msg||l[k.err];return k.result}function y(N,R){return R=R||{},R.raw=!0,B(N,R)}function T(N,R){return R=R||{},R.gzip=!0,B(N,R)}r.Deflate=x,r.deflate=B,r.deflateRaw=y,r.gzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,r){var n=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),p=t("./zlib/zstream"),c=t("./zlib/gzheader"),b=Object.prototype.toString;function m(f){if(!(this instanceof m))return new m(f);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},f||{});var v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),v.windowBits>=0&&v.windowBits<16&&!(f&&f.windowBits)&&(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&(v.windowBits&15)===0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var g=n.inflateInit2(this.strm,v.windowBits);if(g!==l.Z_OK)throw new Error(h[g]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}m.prototype.push=function(f,v){var g=this.strm,x=this.options.chunkSize,B=this.options.dictionary,y,T,N,R,k,I,j=!1;if(this.ended)return!1;T=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?g.input=a.binstring2buf(f):b.call(f)==="[object ArrayBuffer]"?g.input=new Uint8Array(f):g.input=f,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new s.Buf8(x),g.next_out=0,g.avail_out=x),y=n.inflate(g,l.Z_NO_FLUSH),y===l.Z_NEED_DICT&&B&&(typeof B=="string"?I=a.string2buf(B):b.call(B)==="[object ArrayBuffer]"?I=new Uint8Array(B):I=B,y=n.inflateSetDictionary(this.strm,I)),y===l.Z_BUF_ERROR&&j===!0&&(y=l.Z_OK,j=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),this.ended=!0,!1;g.next_out&&(g.avail_out===0||y===l.Z_STREAM_END||g.avail_in===0&&(T===l.Z_FINISH||T===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(N=a.utf8border(g.output,g.next_out),R=g.next_out-N,k=a.buf2string(g.output,N),g.next_out=R,g.avail_out=x-R,R&&s.arraySet(g.output,g.output,N,R,0),this.onData(k)):this.onData(s.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(j=!0)}while((g.avail_in>0||g.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(T=l.Z_FINISH),T===l.Z_FINISH?(y=n.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):(T===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),g.avail_out=0),!0)},m.prototype.onData=function(f){this.chunks.push(f)},m.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg};function O(f,v){var g=new m(v);if(g.push(f,!0),g.err)throw g.msg||h[g.err];return g.result}function w(f,v){return v=v||{},v.raw=!0,O(f,v)}r.Inflate=m,r.inflate=O,r.inflateRaw=w,r.ungzip=O},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,r){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var p=h.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var c in p)p.hasOwnProperty(c)&&(l[c]=p[c])}}return l},r.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var s={arraySet:function(l,h,p,c,b){if(h.subarray&&l.subarray){l.set(h.subarray(p,p+c),b);return}for(var m=0;m<c;m++)l[b+m]=h[p+m]},flattenChunks:function(l){var h,p,c,b,m,O;for(c=0,h=0,p=l.length;h<p;h++)c+=l[h].length;for(O=new Uint8Array(c),b=0,h=0,p=l.length;h<p;h++)m=l[h],O.set(m,b),b+=m.length;return O}},a={arraySet:function(l,h,p,c,b){for(var m=0;m<c;m++)l[b+m]=h[p+m]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],42:[function(t,i,r){var n=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new n.Buf8(256),h=0;h<256;h++)l[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;l[254]=l[254]=1,r.string2buf=function(c){var b,m,O,w,f,v=c.length,g=0;for(w=0;w<v;w++)m=c.charCodeAt(w),(m&64512)===55296&&w+1<v&&(O=c.charCodeAt(w+1),(O&64512)===56320&&(m=65536+(m-55296<<10)+(O-56320),w++)),g+=m<128?1:m<2048?2:m<65536?3:4;for(b=new n.Buf8(g),f=0,w=0;f<g;w++)m=c.charCodeAt(w),(m&64512)===55296&&w+1<v&&(O=c.charCodeAt(w+1),(O&64512)===56320&&(m=65536+(m-55296<<10)+(O-56320),w++)),m<128?b[f++]=m:m<2048?(b[f++]=192|m>>>6,b[f++]=128|m&63):m<65536?(b[f++]=224|m>>>12,b[f++]=128|m>>>6&63,b[f++]=128|m&63):(b[f++]=240|m>>>18,b[f++]=128|m>>>12&63,b[f++]=128|m>>>6&63,b[f++]=128|m&63);return b};function p(c,b){if(b<65537&&(c.subarray&&a||!c.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(c,b));for(var m="",O=0;O<b;O++)m+=String.fromCharCode(c[O]);return m}r.buf2binstring=function(c){return p(c,c.length)},r.binstring2buf=function(c){for(var b=new n.Buf8(c.length),m=0,O=b.length;m<O;m++)b[m]=c.charCodeAt(m);return b},r.buf2string=function(c,b){var m,O,w,f,v=b||c.length,g=new Array(v*2);for(O=0,m=0;m<v;){if(w=c[m++],w<128){g[O++]=w;continue}if(f=l[w],f>4){g[O++]=65533,m+=f-1;continue}for(w&=f===2?31:f===3?15:7;f>1&&m<v;)w=w<<6|c[m++]&63,f--;if(f>1){g[O++]=65533;continue}w<65536?g[O++]=w:(w-=65536,g[O++]=55296|w>>10&1023,g[O++]=56320|w&1023)}return p(g,O)},r.utf8border=function(c,b){var m;for(b=b||c.length,b>c.length&&(b=c.length),m=b-1;m>=0&&(c[m]&192)===128;)m--;return m<0||m===0?b:m+l[c[m]]>b?m:b}},{"./common":41}],43:[function(t,i,r){function n(s,a,l,h){for(var p=s&65535|0,c=s>>>16&65535|0,b=0;l!==0;){b=l>2e3?2e3:l,l-=b;do p=p+a[h++]|0,c=c+p|0;while(--b);p%=65521,c%=65521}return p|c<<16|0}i.exports=n},{}],44:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,r){function n(){for(var l,h=[],p=0;p<256;p++){l=p;for(var c=0;c<8;c++)l=l&1?3988292384^l>>>1:l>>>1;h[p]=l}return h}var s=n();function a(l,h,p,c){var b=s,m=c+p;l^=-1;for(var O=c;O<m;O++)l=l>>>8^b[(l^h[O])&255];return l^-1}i.exports=a},{}],46:[function(t,i,r){var n=t("../utils/common"),s=t("./trees"),a=t("./adler32"),l=t("./crc32"),h=t("./messages"),p=0,c=1,b=3,m=4,O=5,w=0,f=1,v=-2,g=-3,x=-5,B=-1,y=1,T=2,N=3,R=4,k=0,I=2,j=8,L=9,H=15,X=8,te=29,re=256,Q=re+1+te,ie=30,de=19,ne=2*Q+1,ue=15,ve=3,Re=258,Te=Re+ve+1,Fe=32,Je=42,$e=69,Se=73,He=91,Xe=103,Ne=113,Le=666,Oe=1,Me=2,ee=3,Z=4,K=3;function me(u,M){return u.msg=h[M],M}function be(u){return(u<<1)-(u>4?9:0)}function ce(u){for(var M=u.length;--M>=0;)u[M]=0}function ge(u){var M=u.state,G=M.pending;G>u.avail_out&&(G=u.avail_out),G!==0&&(n.arraySet(u.output,M.pending_buf,M.pending_out,G,u.next_out),u.next_out+=G,M.pending_out+=G,u.total_out+=G,u.avail_out-=G,M.pending-=G,M.pending===0&&(M.pending_out=0))}function Ae(u,M){s._tr_flush_block(u,u.block_start>=0?u.block_start:-1,u.strstart-u.block_start,M),u.block_start=u.strstart,ge(u.strm)}function De(u,M){u.pending_buf[u.pending++]=M}function Pe(u,M){u.pending_buf[u.pending++]=M>>>8&255,u.pending_buf[u.pending++]=M&255}function qe(u,M,G,_){var F=u.avail_in;return F>_&&(F=_),F===0?0:(u.avail_in-=F,n.arraySet(M,u.input,u.next_in,F,G),u.state.wrap===1?u.adler=a(u.adler,M,F,G):u.state.wrap===2&&(u.adler=l(u.adler,M,F,G)),u.next_in+=F,u.total_in+=F,F)}function nt(u,M){var G=u.max_chain_length,_=u.strstart,F,$,Ee=u.prev_length,pe=u.nice_match,ye=u.strstart>u.w_size-Te?u.strstart-(u.w_size-Te):0,Ie=u.window,ut=u.w_mask,Ze=u.prev,Be=u.strstart+Re,ze=Ie[_+Ee-1],dt=Ie[_+Ee];u.prev_length>=u.good_match&&(G>>=2),pe>u.lookahead&&(pe=u.lookahead);do if(F=M,!(Ie[F+Ee]!==dt||Ie[F+Ee-1]!==ze||Ie[F]!==Ie[_]||Ie[++F]!==Ie[_+1])){_+=2,F++;do;while(Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&Ie[++_]===Ie[++F]&&_<Be);if($=Re-(Be-_),_=Be-Re,$>Ee){if(u.match_start=M,Ee=$,$>=pe)break;ze=Ie[_+Ee-1],dt=Ie[_+Ee]}}while((M=Ze[M&ut])>ye&&--G!==0);return Ee<=u.lookahead?Ee:u.lookahead}function We(u){var M=u.w_size,G,_,F,$,Ee;do{if($=u.window_size-u.lookahead-u.strstart,u.strstart>=M+(M-Te)){n.arraySet(u.window,u.window,M,M,0),u.match_start-=M,u.strstart-=M,u.block_start-=M,_=u.hash_size,G=_;do F=u.head[--G],u.head[G]=F>=M?F-M:0;while(--_);_=M,G=_;do F=u.prev[--G],u.prev[G]=F>=M?F-M:0;while(--_);$+=M}if(u.strm.avail_in===0)break;if(_=qe(u.strm,u.window,u.strstart+u.lookahead,$),u.lookahead+=_,u.lookahead+u.insert>=ve)for(Ee=u.strstart-u.insert,u.ins_h=u.window[Ee],u.ins_h=(u.ins_h<<u.hash_shift^u.window[Ee+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[Ee+ve-1])&u.hash_mask,u.prev[Ee&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=Ee,Ee++,u.insert--,!(u.lookahead+u.insert<ve)););}while(u.lookahead<Te&&u.strm.avail_in!==0)}function Qe(u,M){var G=65535;for(G>u.pending_buf_size-5&&(G=u.pending_buf_size-5);;){if(u.lookahead<=1){if(We(u),u.lookahead===0&&M===p)return Oe;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var _=u.block_start+G;if((u.strstart===0||u.strstart>=_)&&(u.lookahead=u.strstart-_,u.strstart=_,Ae(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-Te&&(Ae(u,!1),u.strm.avail_out===0))return Oe}return u.insert=0,M===m?(Ae(u,!0),u.strm.avail_out===0?ee:Z):(u.strstart>u.block_start&&(Ae(u,!1),u.strm.avail_out===0),Oe)}function Ye(u,M){for(var G,_;;){if(u.lookahead<Te){if(We(u),u.lookahead<Te&&M===p)return Oe;if(u.lookahead===0)break}if(G=0,u.lookahead>=ve&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+ve-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),G!==0&&u.strstart-G<=u.w_size-Te&&(u.match_length=nt(u,G)),u.match_length>=ve)if(_=s._tr_tally(u,u.strstart-u.match_start,u.match_length-ve),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=ve){u.match_length--;do u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+ve-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart;while(--u.match_length!==0);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else _=s._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(_&&(Ae(u,!1),u.strm.avail_out===0))return Oe}return u.insert=u.strstart<ve-1?u.strstart:ve-1,M===m?(Ae(u,!0),u.strm.avail_out===0?ee:Z):u.last_lit&&(Ae(u,!1),u.strm.avail_out===0)?Oe:Me}function et(u,M){for(var G,_,F;;){if(u.lookahead<Te){if(We(u),u.lookahead<Te&&M===p)return Oe;if(u.lookahead===0)break}if(G=0,u.lookahead>=ve&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+ve-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=ve-1,G!==0&&u.prev_length<u.max_lazy_match&&u.strstart-G<=u.w_size-Te&&(u.match_length=nt(u,G),u.match_length<=5&&(u.strategy===y||u.match_length===ve&&u.strstart-u.match_start>4096)&&(u.match_length=ve-1)),u.prev_length>=ve&&u.match_length<=u.prev_length){F=u.strstart+u.lookahead-ve,_=s._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-ve),u.lookahead-=u.prev_length-1,u.prev_length-=2;do++u.strstart<=F&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+ve-1])&u.hash_mask,G=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart);while(--u.prev_length!==0);if(u.match_available=0,u.match_length=ve-1,u.strstart++,_&&(Ae(u,!1),u.strm.avail_out===0))return Oe}else if(u.match_available){if(_=s._tr_tally(u,0,u.window[u.strstart-1]),_&&Ae(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return Oe}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(_=s._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<ve-1?u.strstart:ve-1,M===m?(Ae(u,!0),u.strm.avail_out===0?ee:Z):u.last_lit&&(Ae(u,!1),u.strm.avail_out===0)?Oe:Me}function yt(u,M){for(var G,_,F,$,Ee=u.window;;){if(u.lookahead<=Re){if(We(u),u.lookahead<=Re&&M===p)return Oe;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=ve&&u.strstart>0&&(F=u.strstart-1,_=Ee[F],_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F])){$=u.strstart+Re;do;while(_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F]&&_===Ee[++F]&&F<$);u.match_length=Re-($-F),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=ve?(G=s._tr_tally(u,1,u.match_length-ve),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(G=s._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),G&&(Ae(u,!1),u.strm.avail_out===0))return Oe}return u.insert=0,M===m?(Ae(u,!0),u.strm.avail_out===0?ee:Z):u.last_lit&&(Ae(u,!1),u.strm.avail_out===0)?Oe:Me}function ct(u,M){for(var G;;){if(u.lookahead===0&&(We(u),u.lookahead===0)){if(M===p)return Oe;break}if(u.match_length=0,G=s._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,G&&(Ae(u,!1),u.strm.avail_out===0))return Oe}return u.insert=0,M===m?(Ae(u,!0),u.strm.avail_out===0?ee:Z):u.last_lit&&(Ae(u,!1),u.strm.avail_out===0)?Oe:Me}function it(u,M,G,_,F){this.good_length=u,this.max_lazy=M,this.nice_length=G,this.max_chain=_,this.func=F}var vt;vt=[new it(0,0,0,0,Qe),new it(4,4,8,4,Ye),new it(4,5,16,8,Ye),new it(4,6,32,32,Ye),new it(4,4,16,16,et),new it(8,16,32,32,et),new it(8,16,128,128,et),new it(8,32,128,256,et),new it(32,128,258,1024,et),new it(32,258,258,4096,et)];function _t(u){u.window_size=2*u.w_size,ce(u.head),u.max_lazy_match=vt[u.level].max_lazy,u.good_match=vt[u.level].good_length,u.nice_match=vt[u.level].nice_length,u.max_chain_length=vt[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=ve-1,u.match_available=0,u.ins_h=0}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(ne*2),this.dyn_dtree=new n.Buf16((2*ie+1)*2),this.bl_tree=new n.Buf16((2*de+1)*2),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(ue+1),this.heap=new n.Buf16(2*Q+1),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*Q+1),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function J(u){var M;return!u||!u.state?me(u,v):(u.total_in=u.total_out=0,u.data_type=I,M=u.state,M.pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?Je:Ne,u.adler=M.wrap===2?0:1,M.last_flush=p,s._tr_init(M),w)}function ae(u){var M=J(u);return M===w&&_t(u.state),M}function we(u,M){return!u||!u.state||u.state.wrap!==2?v:(u.state.gzhead=M,w)}function z(u,M,G,_,F,$){if(!u)return v;var Ee=1;if(M===B&&(M=6),_<0?(Ee=0,_=-_):_>15&&(Ee=2,_-=16),F<1||F>L||G!==j||_<8||_>15||M<0||M>9||$<0||$>R)return me(u,v);_===8&&(_=9);var pe=new C;return u.state=pe,pe.strm=u,pe.wrap=Ee,pe.gzhead=null,pe.w_bits=_,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=F+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+ve-1)/ve),pe.window=new n.Buf8(pe.w_size*2),pe.head=new n.Buf16(pe.hash_size),pe.prev=new n.Buf16(pe.w_size),pe.lit_bufsize=1<<F+6,pe.pending_buf_size=pe.lit_bufsize*4,pe.pending_buf=new n.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=M,pe.strategy=$,pe.method=G,ae(u)}function d(u,M){return z(u,M,j,H,X,k)}function o(u,M){var G,_,F,$;if(!u||!u.state||M>O||M<0)return u?me(u,v):v;if(_=u.state,!u.output||!u.input&&u.avail_in!==0||_.status===Le&&M!==m)return me(u,u.avail_out===0?x:v);if(_.strm=u,G=_.last_flush,_.last_flush=M,_.status===Je)if(_.wrap===2)u.adler=0,De(_,31),De(_,139),De(_,8),_.gzhead?(De(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),De(_,_.gzhead.time&255),De(_,_.gzhead.time>>8&255),De(_,_.gzhead.time>>16&255),De(_,_.gzhead.time>>24&255),De(_,_.level===9?2:_.strategy>=T||_.level<2?4:0),De(_,_.gzhead.os&255),_.gzhead.extra&&_.gzhead.extra.length&&(De(_,_.gzhead.extra.length&255),De(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(u.adler=l(u.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=$e):(De(_,0),De(_,0),De(_,0),De(_,0),De(_,0),De(_,_.level===9?2:_.strategy>=T||_.level<2?4:0),De(_,K),_.status=Ne);else{var Ee=j+(_.w_bits-8<<4)<<8,pe=-1;_.strategy>=T||_.level<2?pe=0:_.level<6?pe=1:_.level===6?pe=2:pe=3,Ee|=pe<<6,_.strstart!==0&&(Ee|=Fe),Ee+=31-Ee%31,_.status=Ne,Pe(_,Ee),_.strstart!==0&&(Pe(_,u.adler>>>16),Pe(_,u.adler&65535)),u.adler=1}if(_.status===$e)if(_.gzhead.extra){for(F=_.pending;_.gzindex<(_.gzhead.extra.length&65535)&&!(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>F&&(u.adler=l(u.adler,_.pending_buf,_.pending-F,F)),ge(u),F=_.pending,_.pending===_.pending_buf_size));)De(_,_.gzhead.extra[_.gzindex]&255),_.gzindex++;_.gzhead.hcrc&&_.pending>F&&(u.adler=l(u.adler,_.pending_buf,_.pending-F,F)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=Se)}else _.status=Se;if(_.status===Se)if(_.gzhead.name){F=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>F&&(u.adler=l(u.adler,_.pending_buf,_.pending-F,F)),ge(u),F=_.pending,_.pending===_.pending_buf_size)){$=1;break}_.gzindex<_.gzhead.name.length?$=_.gzhead.name.charCodeAt(_.gzindex++)&255:$=0,De(_,$)}while($!==0);_.gzhead.hcrc&&_.pending>F&&(u.adler=l(u.adler,_.pending_buf,_.pending-F,F)),$===0&&(_.gzindex=0,_.status=He)}else _.status=He;if(_.status===He)if(_.gzhead.comment){F=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>F&&(u.adler=l(u.adler,_.pending_buf,_.pending-F,F)),ge(u),F=_.pending,_.pending===_.pending_buf_size)){$=1;break}_.gzindex<_.gzhead.comment.length?$=_.gzhead.comment.charCodeAt(_.gzindex++)&255:$=0,De(_,$)}while($!==0);_.gzhead.hcrc&&_.pending>F&&(u.adler=l(u.adler,_.pending_buf,_.pending-F,F)),$===0&&(_.status=Xe)}else _.status=Xe;if(_.status===Xe&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&ge(u),_.pending+2<=_.pending_buf_size&&(De(_,u.adler&255),De(_,u.adler>>8&255),u.adler=0,_.status=Ne)):_.status=Ne),_.pending!==0){if(ge(u),u.avail_out===0)return _.last_flush=-1,w}else if(u.avail_in===0&&be(M)<=be(G)&&M!==m)return me(u,x);if(_.status===Le&&u.avail_in!==0)return me(u,x);if(u.avail_in!==0||_.lookahead!==0||M!==p&&_.status!==Le){var ye=_.strategy===T?ct(_,M):_.strategy===N?yt(_,M):vt[_.level].func(_,M);if((ye===ee||ye===Z)&&(_.status=Le),ye===Oe||ye===ee)return u.avail_out===0&&(_.last_flush=-1),w;if(ye===Me&&(M===c?s._tr_align(_):M!==O&&(s._tr_stored_block(_,0,0,!1),M===b&&(ce(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),ge(u),u.avail_out===0))return _.last_flush=-1,w}return M!==m?w:_.wrap<=0?f:(_.wrap===2?(De(_,u.adler&255),De(_,u.adler>>8&255),De(_,u.adler>>16&255),De(_,u.adler>>24&255),De(_,u.total_in&255),De(_,u.total_in>>8&255),De(_,u.total_in>>16&255),De(_,u.total_in>>24&255)):(Pe(_,u.adler>>>16),Pe(_,u.adler&65535)),ge(u),_.wrap>0&&(_.wrap=-_.wrap),_.pending!==0?w:f)}function A(u){var M;return!u||!u.state?v:(M=u.state.status,M!==Je&&M!==$e&&M!==Se&&M!==He&&M!==Xe&&M!==Ne&&M!==Le?me(u,v):(u.state=null,M===Ne?me(u,g):w))}function U(u,M){var G=M.length,_,F,$,Ee,pe,ye,Ie,ut;if(!u||!u.state||(_=u.state,Ee=_.wrap,Ee===2||Ee===1&&_.status!==Je||_.lookahead))return v;for(Ee===1&&(u.adler=a(u.adler,M,G,0)),_.wrap=0,G>=_.w_size&&(Ee===0&&(ce(_.head),_.strstart=0,_.block_start=0,_.insert=0),ut=new n.Buf8(_.w_size),n.arraySet(ut,M,G-_.w_size,_.w_size,0),M=ut,G=_.w_size),pe=u.avail_in,ye=u.next_in,Ie=u.input,u.avail_in=G,u.next_in=0,u.input=M,We(_);_.lookahead>=ve;){F=_.strstart,$=_.lookahead-(ve-1);do _.ins_h=(_.ins_h<<_.hash_shift^_.window[F+ve-1])&_.hash_mask,_.prev[F&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=F,F++;while(--$);_.strstart=F,_.lookahead=ve-1,We(_)}return _.strstart+=_.lookahead,_.block_start=_.strstart,_.insert=_.lookahead,_.lookahead=0,_.match_length=_.prev_length=ve-1,_.match_available=0,u.next_in=ye,u.input=Ie,u.avail_in=pe,_.wrap=Ee,w}r.deflateInit=d,r.deflateInit2=z,r.deflateReset=ae,r.deflateResetKeep=J,r.deflateSetHeader=we,r.deflate=o,r.deflateEnd=A,r.deflateSetDictionary=U,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,r){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}i.exports=n},{}],48:[function(t,i,r){var n=30,s=12;i.exports=function(l,h){var p,c,b,m,O,w,f,v,g,x,B,y,T,N,R,k,I,j,L,H,X,te,re,Q,ie;p=l.state,c=l.next_in,Q=l.input,b=c+(l.avail_in-5),m=l.next_out,ie=l.output,O=m-(h-l.avail_out),w=m+(l.avail_out-257),f=p.dmax,v=p.wsize,g=p.whave,x=p.wnext,B=p.window,y=p.hold,T=p.bits,N=p.lencode,R=p.distcode,k=(1<<p.lenbits)-1,I=(1<<p.distbits)-1;e:do{T<15&&(y+=Q[c++]<<T,T+=8,y+=Q[c++]<<T,T+=8),j=N[y&k];t:for(;;){if(L=j>>>24,y>>>=L,T-=L,L=j>>>16&255,L===0)ie[m++]=j&65535;else if(L&16){H=j&65535,L&=15,L&&(T<L&&(y+=Q[c++]<<T,T+=8),H+=y&(1<<L)-1,y>>>=L,T-=L),T<15&&(y+=Q[c++]<<T,T+=8,y+=Q[c++]<<T,T+=8),j=R[y&I];i:for(;;){if(L=j>>>24,y>>>=L,T-=L,L=j>>>16&255,L&16){if(X=j&65535,L&=15,T<L&&(y+=Q[c++]<<T,T+=8,T<L&&(y+=Q[c++]<<T,T+=8)),X+=y&(1<<L)-1,X>f){l.msg="invalid distance too far back",p.mode=n;break e}if(y>>>=L,T-=L,L=m-O,X>L){if(L=X-L,L>g&&p.sane){l.msg="invalid distance too far back",p.mode=n;break e}if(te=0,re=B,x===0){if(te+=v-L,L<H){H-=L;do ie[m++]=B[te++];while(--L);te=m-X,re=ie}}else if(x<L){if(te+=v+x-L,L-=x,L<H){H-=L;do ie[m++]=B[te++];while(--L);if(te=0,x<H){L=x,H-=L;do ie[m++]=B[te++];while(--L);te=m-X,re=ie}}}else if(te+=x-L,L<H){H-=L;do ie[m++]=B[te++];while(--L);te=m-X,re=ie}for(;H>2;)ie[m++]=re[te++],ie[m++]=re[te++],ie[m++]=re[te++],H-=3;H&&(ie[m++]=re[te++],H>1&&(ie[m++]=re[te++]))}else{te=m-X;do ie[m++]=ie[te++],ie[m++]=ie[te++],ie[m++]=ie[te++],H-=3;while(H>2);H&&(ie[m++]=ie[te++],H>1&&(ie[m++]=ie[te++]))}}else if((L&64)===0){j=R[(j&65535)+(y&(1<<L)-1)];continue i}else{l.msg="invalid distance code",p.mode=n;break e}break}}else if((L&64)===0){j=N[(j&65535)+(y&(1<<L)-1)];continue t}else if(L&32){p.mode=s;break e}else{l.msg="invalid literal/length code",p.mode=n;break e}break}}while(c<b&&m<w);H=T>>3,c-=H,T-=H<<3,y&=(1<<T)-1,l.next_in=c,l.next_out=m,l.avail_in=c<b?5+(b-c):5-(c-b),l.avail_out=m<w?257+(w-m):257-(m-w),p.hold=y,p.bits=T}},{}],49:[function(t,i,r){var n=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),l=t("./inffast"),h=t("./inftrees"),p=0,c=1,b=2,m=4,O=5,w=6,f=0,v=1,g=2,x=-2,B=-3,y=-4,T=-5,N=8,R=1,k=2,I=3,j=4,L=5,H=6,X=7,te=8,re=9,Q=10,ie=11,de=12,ne=13,ue=14,ve=15,Re=16,Te=17,Fe=18,Je=19,$e=20,Se=21,He=22,Xe=23,Ne=24,Le=25,Oe=26,Me=27,ee=28,Z=29,K=30,me=31,be=32,ce=852,ge=592,Ae=15,De=Ae;function Pe(z){return(z>>>24&255)+(z>>>8&65280)+((z&65280)<<8)+((z&255)<<24)}function qe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function nt(z){var d;return!z||!z.state?x:(d=z.state,z.total_in=z.total_out=d.total=0,z.msg="",d.wrap&&(z.adler=d.wrap&1),d.mode=R,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new n.Buf32(ce),d.distcode=d.distdyn=new n.Buf32(ge),d.sane=1,d.back=-1,f)}function We(z){var d;return!z||!z.state?x:(d=z.state,d.wsize=0,d.whave=0,d.wnext=0,nt(z))}function Qe(z,d){var o,A;return!z||!z.state||(A=z.state,d<0?(o=0,d=-d):(o=(d>>4)+1,d<48&&(d&=15)),d&&(d<8||d>15))?x:(A.window!==null&&A.wbits!==d&&(A.window=null),A.wrap=o,A.wbits=d,We(z))}function Ye(z,d){var o,A;return z?(A=new qe,z.state=A,A.window=null,o=Qe(z,d),o!==f&&(z.state=null),o):x}function et(z){return Ye(z,De)}var yt=!0,ct,it;function vt(z){if(yt){var d;for(ct=new n.Buf32(512),it=new n.Buf32(32),d=0;d<144;)z.lens[d++]=8;for(;d<256;)z.lens[d++]=9;for(;d<280;)z.lens[d++]=7;for(;d<288;)z.lens[d++]=8;for(h(c,z.lens,0,288,ct,0,z.work,{bits:9}),d=0;d<32;)z.lens[d++]=5;h(b,z.lens,0,32,it,0,z.work,{bits:5}),yt=!1}z.lencode=ct,z.lenbits=9,z.distcode=it,z.distbits=5}function _t(z,d,o,A){var U,u=z.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new n.Buf8(u.wsize)),A>=u.wsize?(n.arraySet(u.window,d,o-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(U=u.wsize-u.wnext,U>A&&(U=A),n.arraySet(u.window,d,o-A,U,u.wnext),A-=U,A?(n.arraySet(u.window,d,o-A,A,0),u.wnext=A,u.whave=u.wsize):(u.wnext+=U,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=U))),0}function C(z,d){var o,A,U,u,M,G,_,F,$,Ee,pe,ye,Ie,ut,Ze=0,Be,ze,dt,at,Lt,Vt,lt,wt,mt=new n.Buf8(4),Ct,At,hi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return x;o=z.state,o.mode===de&&(o.mode=ne),M=z.next_out,U=z.output,_=z.avail_out,u=z.next_in,A=z.input,G=z.avail_in,F=o.hold,$=o.bits,Ee=G,pe=_,wt=f;e:for(;;)switch(o.mode){case R:if(o.wrap===0){o.mode=ne;break}for(;$<16;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(o.wrap&2&&F===35615){o.check=0,mt[0]=F&255,mt[1]=F>>>8&255,o.check=a(o.check,mt,2,0),F=0,$=0,o.mode=k;break}if(o.flags=0,o.head&&(o.head.done=!1),!(o.wrap&1)||(((F&255)<<8)+(F>>8))%31){z.msg="incorrect header check",o.mode=K;break}if((F&15)!==N){z.msg="unknown compression method",o.mode=K;break}if(F>>>=4,$-=4,lt=(F&15)+8,o.wbits===0)o.wbits=lt;else if(lt>o.wbits){z.msg="invalid window size",o.mode=K;break}o.dmax=1<<lt,z.adler=o.check=1,o.mode=F&512?Q:de,F=0,$=0;break;case k:for(;$<16;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(o.flags=F,(o.flags&255)!==N){z.msg="unknown compression method",o.mode=K;break}if(o.flags&57344){z.msg="unknown header flags set",o.mode=K;break}o.head&&(o.head.text=F>>8&1),o.flags&512&&(mt[0]=F&255,mt[1]=F>>>8&255,o.check=a(o.check,mt,2,0)),F=0,$=0,o.mode=I;case I:for(;$<32;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}o.head&&(o.head.time=F),o.flags&512&&(mt[0]=F&255,mt[1]=F>>>8&255,mt[2]=F>>>16&255,mt[3]=F>>>24&255,o.check=a(o.check,mt,4,0)),F=0,$=0,o.mode=j;case j:for(;$<16;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}o.head&&(o.head.xflags=F&255,o.head.os=F>>8),o.flags&512&&(mt[0]=F&255,mt[1]=F>>>8&255,o.check=a(o.check,mt,2,0)),F=0,$=0,o.mode=L;case L:if(o.flags&1024){for(;$<16;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}o.length=F,o.head&&(o.head.extra_len=F),o.flags&512&&(mt[0]=F&255,mt[1]=F>>>8&255,o.check=a(o.check,mt,2,0)),F=0,$=0}else o.head&&(o.head.extra=null);o.mode=H;case H:if(o.flags&1024&&(ye=o.length,ye>G&&(ye=G),ye&&(o.head&&(lt=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),n.arraySet(o.head.extra,A,u,ye,lt)),o.flags&512&&(o.check=a(o.check,A,ye,u)),G-=ye,u+=ye,o.length-=ye),o.length))break e;o.length=0,o.mode=X;case X:if(o.flags&2048){if(G===0)break e;ye=0;do lt=A[u+ye++],o.head&&lt&&o.length<65536&&(o.head.name+=String.fromCharCode(lt));while(lt&&ye<G);if(o.flags&512&&(o.check=a(o.check,A,ye,u)),G-=ye,u+=ye,lt)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=te;case te:if(o.flags&4096){if(G===0)break e;ye=0;do lt=A[u+ye++],o.head&&lt&&o.length<65536&&(o.head.comment+=String.fromCharCode(lt));while(lt&&ye<G);if(o.flags&512&&(o.check=a(o.check,A,ye,u)),G-=ye,u+=ye,lt)break e}else o.head&&(o.head.comment=null);o.mode=re;case re:if(o.flags&512){for(;$<16;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(F!==(o.check&65535)){z.msg="header crc mismatch",o.mode=K;break}F=0,$=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),z.adler=o.check=0,o.mode=de;break;case Q:for(;$<32;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}z.adler=o.check=Pe(F),F=0,$=0,o.mode=ie;case ie:if(o.havedict===0)return z.next_out=M,z.avail_out=_,z.next_in=u,z.avail_in=G,o.hold=F,o.bits=$,g;z.adler=o.check=1,o.mode=de;case de:if(d===O||d===w)break e;case ne:if(o.last){F>>>=$&7,$-=$&7,o.mode=Me;break}for(;$<3;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}switch(o.last=F&1,F>>>=1,$-=1,F&3){case 0:o.mode=ue;break;case 1:if(vt(o),o.mode=$e,d===w){F>>>=2,$-=2;break e}break;case 2:o.mode=Te;break;case 3:z.msg="invalid block type",o.mode=K}F>>>=2,$-=2;break;case ue:for(F>>>=$&7,$-=$&7;$<32;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if((F&65535)!==(F>>>16^65535)){z.msg="invalid stored block lengths",o.mode=K;break}if(o.length=F&65535,F=0,$=0,o.mode=ve,d===w)break e;case ve:o.mode=Re;case Re:if(ye=o.length,ye){if(ye>G&&(ye=G),ye>_&&(ye=_),ye===0)break e;n.arraySet(U,A,u,ye,M),G-=ye,u+=ye,_-=ye,M+=ye,o.length-=ye;break}o.mode=de;break;case Te:for(;$<14;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(o.nlen=(F&31)+257,F>>>=5,$-=5,o.ndist=(F&31)+1,F>>>=5,$-=5,o.ncode=(F&15)+4,F>>>=4,$-=4,o.nlen>286||o.ndist>30){z.msg="too many length or distance symbols",o.mode=K;break}o.have=0,o.mode=Fe;case Fe:for(;o.have<o.ncode;){for(;$<3;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}o.lens[hi[o.have++]]=F&7,F>>>=3,$-=3}for(;o.have<19;)o.lens[hi[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,Ct={bits:o.lenbits},wt=h(p,o.lens,0,19,o.lencode,0,o.work,Ct),o.lenbits=Ct.bits,wt){z.msg="invalid code lengths set",o.mode=K;break}o.have=0,o.mode=Je;case Je:for(;o.have<o.nlen+o.ndist;){for(;Ze=o.lencode[F&(1<<o.lenbits)-1],Be=Ze>>>24,ze=Ze>>>16&255,dt=Ze&65535,!(Be<=$);){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(dt<16)F>>>=Be,$-=Be,o.lens[o.have++]=dt;else{if(dt===16){for(At=Be+2;$<At;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(F>>>=Be,$-=Be,o.have===0){z.msg="invalid bit length repeat",o.mode=K;break}lt=o.lens[o.have-1],ye=3+(F&3),F>>>=2,$-=2}else if(dt===17){for(At=Be+3;$<At;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}F>>>=Be,$-=Be,lt=0,ye=3+(F&7),F>>>=3,$-=3}else{for(At=Be+7;$<At;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}F>>>=Be,$-=Be,lt=0,ye=11+(F&127),F>>>=7,$-=7}if(o.have+ye>o.nlen+o.ndist){z.msg="invalid bit length repeat",o.mode=K;break}for(;ye--;)o.lens[o.have++]=lt}}if(o.mode===K)break;if(o.lens[256]===0){z.msg="invalid code -- missing end-of-block",o.mode=K;break}if(o.lenbits=9,Ct={bits:o.lenbits},wt=h(c,o.lens,0,o.nlen,o.lencode,0,o.work,Ct),o.lenbits=Ct.bits,wt){z.msg="invalid literal/lengths set",o.mode=K;break}if(o.distbits=6,o.distcode=o.distdyn,Ct={bits:o.distbits},wt=h(b,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,Ct),o.distbits=Ct.bits,wt){z.msg="invalid distances set",o.mode=K;break}if(o.mode=$e,d===w)break e;case $e:o.mode=Se;case Se:if(G>=6&&_>=258){z.next_out=M,z.avail_out=_,z.next_in=u,z.avail_in=G,o.hold=F,o.bits=$,l(z,pe),M=z.next_out,U=z.output,_=z.avail_out,u=z.next_in,A=z.input,G=z.avail_in,F=o.hold,$=o.bits,o.mode===de&&(o.back=-1);break}for(o.back=0;Ze=o.lencode[F&(1<<o.lenbits)-1],Be=Ze>>>24,ze=Ze>>>16&255,dt=Ze&65535,!(Be<=$);){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(ze&&(ze&240)===0){for(at=Be,Lt=ze,Vt=dt;Ze=o.lencode[Vt+((F&(1<<at+Lt)-1)>>at)],Be=Ze>>>24,ze=Ze>>>16&255,dt=Ze&65535,!(at+Be<=$);){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}F>>>=at,$-=at,o.back+=at}if(F>>>=Be,$-=Be,o.back+=Be,o.length=dt,ze===0){o.mode=Oe;break}if(ze&32){o.back=-1,o.mode=de;break}if(ze&64){z.msg="invalid literal/length code",o.mode=K;break}o.extra=ze&15,o.mode=He;case He:if(o.extra){for(At=o.extra;$<At;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}o.length+=F&(1<<o.extra)-1,F>>>=o.extra,$-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=Xe;case Xe:for(;Ze=o.distcode[F&(1<<o.distbits)-1],Be=Ze>>>24,ze=Ze>>>16&255,dt=Ze&65535,!(Be<=$);){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if((ze&240)===0){for(at=Be,Lt=ze,Vt=dt;Ze=o.distcode[Vt+((F&(1<<at+Lt)-1)>>at)],Be=Ze>>>24,ze=Ze>>>16&255,dt=Ze&65535,!(at+Be<=$);){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}F>>>=at,$-=at,o.back+=at}if(F>>>=Be,$-=Be,o.back+=Be,ze&64){z.msg="invalid distance code",o.mode=K;break}o.offset=dt,o.extra=ze&15,o.mode=Ne;case Ne:if(o.extra){for(At=o.extra;$<At;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}o.offset+=F&(1<<o.extra)-1,F>>>=o.extra,$-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){z.msg="invalid distance too far back",o.mode=K;break}o.mode=Le;case Le:if(_===0)break e;if(ye=pe-_,o.offset>ye){if(ye=o.offset-ye,ye>o.whave&&o.sane){z.msg="invalid distance too far back",o.mode=K;break}ye>o.wnext?(ye-=o.wnext,Ie=o.wsize-ye):Ie=o.wnext-ye,ye>o.length&&(ye=o.length),ut=o.window}else ut=U,Ie=M-o.offset,ye=o.length;ye>_&&(ye=_),_-=ye,o.length-=ye;do U[M++]=ut[Ie++];while(--ye);o.length===0&&(o.mode=Se);break;case Oe:if(_===0)break e;U[M++]=o.length,_--,o.mode=Se;break;case Me:if(o.wrap){for(;$<32;){if(G===0)break e;G--,F|=A[u++]<<$,$+=8}if(pe-=_,z.total_out+=pe,o.total+=pe,pe&&(z.adler=o.check=o.flags?a(o.check,U,pe,M-pe):s(o.check,U,pe,M-pe)),pe=_,(o.flags?F:Pe(F))!==o.check){z.msg="incorrect data check",o.mode=K;break}F=0,$=0}o.mode=ee;case ee:if(o.wrap&&o.flags){for(;$<32;){if(G===0)break e;G--,F+=A[u++]<<$,$+=8}if(F!==(o.total&4294967295)){z.msg="incorrect length check",o.mode=K;break}F=0,$=0}o.mode=Z;case Z:wt=v;break e;case K:wt=B;break e;case me:return y;case be:default:return x}return z.next_out=M,z.avail_out=_,z.next_in=u,z.avail_in=G,o.hold=F,o.bits=$,(o.wsize||pe!==z.avail_out&&o.mode<K&&(o.mode<Me||d!==m))&&_t(z,z.output,z.next_out,pe-z.avail_out),Ee-=z.avail_in,pe-=z.avail_out,z.total_in+=Ee,z.total_out+=pe,o.total+=pe,o.wrap&&pe&&(z.adler=o.check=o.flags?a(o.check,U,pe,z.next_out-pe):s(o.check,U,pe,z.next_out-pe)),z.data_type=o.bits+(o.last?64:0)+(o.mode===de?128:0)+(o.mode===$e||o.mode===ve?256:0),(Ee===0&&pe===0||d===m)&&wt===f&&(wt=T),wt}function J(z){if(!z||!z.state)return x;var d=z.state;return d.window&&(d.window=null),z.state=null,f}function ae(z,d){var o;return!z||!z.state||(o=z.state,(o.wrap&2)===0)?x:(o.head=d,d.done=!1,f)}function we(z,d){var o=d.length,A,U,u;return!z||!z.state||(A=z.state,A.wrap!==0&&A.mode!==ie)?x:A.mode===ie&&(U=1,U=s(U,d,o,0),U!==A.check)?B:(u=_t(z,d,o,o),u?(A.mode=me,y):(A.havedict=1,f))}r.inflateReset=We,r.inflateReset2=Qe,r.inflateResetKeep=nt,r.inflateInit=et,r.inflateInit2=Ye,r.inflate=C,r.inflateEnd=J,r.inflateGetHeader=ae,r.inflateSetDictionary=we,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,r){var n=t("../utils/common"),s=15,a=852,l=592,h=0,p=1,c=2,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],O=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(v,g,x,B,y,T,N,R){var k=R.bits,I=0,j=0,L=0,H=0,X=0,te=0,re=0,Q=0,ie=0,de=0,ne,ue,ve,Re,Te,Fe=null,Je=0,$e,Se=new n.Buf16(s+1),He=new n.Buf16(s+1),Xe=null,Ne=0,Le,Oe,Me;for(I=0;I<=s;I++)Se[I]=0;for(j=0;j<B;j++)Se[g[x+j]]++;for(X=k,H=s;H>=1&&Se[H]===0;H--);if(X>H&&(X=H),H===0)return y[T++]=1<<24|64<<16|0,y[T++]=1<<24|64<<16|0,R.bits=1,0;for(L=1;L<H&&Se[L]===0;L++);for(X<L&&(X=L),Q=1,I=1;I<=s;I++)if(Q<<=1,Q-=Se[I],Q<0)return-1;if(Q>0&&(v===h||H!==1))return-1;for(He[1]=0,I=1;I<s;I++)He[I+1]=He[I]+Se[I];for(j=0;j<B;j++)g[x+j]!==0&&(N[He[g[x+j]]++]=j);if(v===h?(Fe=Xe=N,$e=19):v===p?(Fe=b,Je-=257,Xe=m,Ne-=257,$e=256):(Fe=O,Xe=w,$e=-1),de=0,j=0,I=L,Te=T,te=X,re=0,ve=-1,ie=1<<X,Re=ie-1,v===p&&ie>a||v===c&&ie>l)return 1;for(;;){Le=I-re,N[j]<$e?(Oe=0,Me=N[j]):N[j]>$e?(Oe=Xe[Ne+N[j]],Me=Fe[Je+N[j]]):(Oe=96,Me=0),ne=1<<I-re,ue=1<<te,L=ue;do ue-=ne,y[Te+(de>>re)+ue]=Le<<24|Oe<<16|Me|0;while(ue!==0);for(ne=1<<I-1;de&ne;)ne>>=1;if(ne!==0?(de&=ne-1,de+=ne):de=0,j++,--Se[I]===0){if(I===H)break;I=g[x+N[j]]}if(I>X&&(de&Re)!==ve){for(re===0&&(re=X),Te+=L,te=I-re,Q=1<<te;te+re<H&&(Q-=Se[te+re],!(Q<=0));)te++,Q<<=1;if(ie+=1<<te,v===p&&ie>a||v===c&&ie>l)return 1;ve=de&Re,y[ve]=X<<24|te<<16|Te-T|0}}return de!==0&&(y[Te+de]=I-re<<24|64<<16|0),R.bits=X,0}},{"../utils/common":41}],51:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,r){var n=t("../utils/common"),s=4,a=0,l=1,h=2;function p(C){for(var J=C.length;--J>=0;)C[J]=0}var c=0,b=1,m=2,O=3,w=258,f=29,v=256,g=v+1+f,x=30,B=19,y=2*g+1,T=15,N=16,R=7,k=256,I=16,j=17,L=18,H=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=512,ie=new Array((g+2)*2);p(ie);var de=new Array(x*2);p(de);var ne=new Array(Q);p(ne);var ue=new Array(w-O+1);p(ue);var ve=new Array(f);p(ve);var Re=new Array(x);p(Re);function Te(C,J,ae,we,z){this.static_tree=C,this.extra_bits=J,this.extra_base=ae,this.elems=we,this.max_length=z,this.has_stree=C&&C.length}var Fe,Je,$e;function Se(C,J){this.dyn_tree=C,this.max_code=0,this.stat_desc=J}function He(C){return C<256?ne[C]:ne[256+(C>>>7)]}function Xe(C,J){C.pending_buf[C.pending++]=J&255,C.pending_buf[C.pending++]=J>>>8&255}function Ne(C,J,ae){C.bi_valid>N-ae?(C.bi_buf|=J<<C.bi_valid&65535,Xe(C,C.bi_buf),C.bi_buf=J>>N-C.bi_valid,C.bi_valid+=ae-N):(C.bi_buf|=J<<C.bi_valid&65535,C.bi_valid+=ae)}function Le(C,J,ae){Ne(C,ae[J*2],ae[J*2+1])}function Oe(C,J){var ae=0;do ae|=C&1,C>>>=1,ae<<=1;while(--J>0);return ae>>>1}function Me(C){C.bi_valid===16?(Xe(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):C.bi_valid>=8&&(C.pending_buf[C.pending++]=C.bi_buf&255,C.bi_buf>>=8,C.bi_valid-=8)}function ee(C,J){var ae=J.dyn_tree,we=J.max_code,z=J.stat_desc.static_tree,d=J.stat_desc.has_stree,o=J.stat_desc.extra_bits,A=J.stat_desc.extra_base,U=J.stat_desc.max_length,u,M,G,_,F,$,Ee=0;for(_=0;_<=T;_++)C.bl_count[_]=0;for(ae[C.heap[C.heap_max]*2+1]=0,u=C.heap_max+1;u<y;u++)M=C.heap[u],_=ae[ae[M*2+1]*2+1]+1,_>U&&(_=U,Ee++),ae[M*2+1]=_,!(M>we)&&(C.bl_count[_]++,F=0,M>=A&&(F=o[M-A]),$=ae[M*2],C.opt_len+=$*(_+F),d&&(C.static_len+=$*(z[M*2+1]+F)));if(Ee!==0){do{for(_=U-1;C.bl_count[_]===0;)_--;C.bl_count[_]--,C.bl_count[_+1]+=2,C.bl_count[U]--,Ee-=2}while(Ee>0);for(_=U;_!==0;_--)for(M=C.bl_count[_];M!==0;)G=C.heap[--u],!(G>we)&&(ae[G*2+1]!==_&&(C.opt_len+=(_-ae[G*2+1])*ae[G*2],ae[G*2+1]=_),M--)}}function Z(C,J,ae){var we=new Array(T+1),z=0,d,o;for(d=1;d<=T;d++)we[d]=z=z+ae[d-1]<<1;for(o=0;o<=J;o++){var A=C[o*2+1];A!==0&&(C[o*2]=Oe(we[A]++,A))}}function K(){var C,J,ae,we,z,d=new Array(T+1);for(ae=0,we=0;we<f-1;we++)for(ve[we]=ae,C=0;C<1<<H[we];C++)ue[ae++]=we;for(ue[ae-1]=we,z=0,we=0;we<16;we++)for(Re[we]=z,C=0;C<1<<X[we];C++)ne[z++]=we;for(z>>=7;we<x;we++)for(Re[we]=z<<7,C=0;C<1<<X[we]-7;C++)ne[256+z++]=we;for(J=0;J<=T;J++)d[J]=0;for(C=0;C<=143;)ie[C*2+1]=8,C++,d[8]++;for(;C<=255;)ie[C*2+1]=9,C++,d[9]++;for(;C<=279;)ie[C*2+1]=7,C++,d[7]++;for(;C<=287;)ie[C*2+1]=8,C++,d[8]++;for(Z(ie,g+1,d),C=0;C<x;C++)de[C*2+1]=5,de[C*2]=Oe(C,5);Fe=new Te(ie,H,v+1,g,T),Je=new Te(de,X,0,x,T),$e=new Te(new Array(0),te,0,B,R)}function me(C){var J;for(J=0;J<g;J++)C.dyn_ltree[J*2]=0;for(J=0;J<x;J++)C.dyn_dtree[J*2]=0;for(J=0;J<B;J++)C.bl_tree[J*2]=0;C.dyn_ltree[k*2]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0}function be(C){C.bi_valid>8?Xe(C,C.bi_buf):C.bi_valid>0&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0}function ce(C,J,ae,we){be(C),Xe(C,ae),Xe(C,~ae),n.arraySet(C.pending_buf,C.window,J,ae,C.pending),C.pending+=ae}function ge(C,J,ae,we){var z=J*2,d=ae*2;return C[z]<C[d]||C[z]===C[d]&&we[J]<=we[ae]}function Ae(C,J,ae){for(var we=C.heap[ae],z=ae<<1;z<=C.heap_len&&(z<C.heap_len&&ge(J,C.heap[z+1],C.heap[z],C.depth)&&z++,!ge(J,we,C.heap[z],C.depth));)C.heap[ae]=C.heap[z],ae=z,z<<=1;C.heap[ae]=we}function De(C,J,ae){var we,z,d=0,o,A;if(C.last_lit!==0)do we=C.pending_buf[C.d_buf+d*2]<<8|C.pending_buf[C.d_buf+d*2+1],z=C.pending_buf[C.l_buf+d],d++,we===0?Le(C,z,J):(o=ue[z],Le(C,o+v+1,J),A=H[o],A!==0&&(z-=ve[o],Ne(C,z,A)),we--,o=He(we),Le(C,o,ae),A=X[o],A!==0&&(we-=Re[o],Ne(C,we,A)));while(d<C.last_lit);Le(C,k,J)}function Pe(C,J){var ae=J.dyn_tree,we=J.stat_desc.static_tree,z=J.stat_desc.has_stree,d=J.stat_desc.elems,o,A,U=-1,u;for(C.heap_len=0,C.heap_max=y,o=0;o<d;o++)ae[o*2]!==0?(C.heap[++C.heap_len]=U=o,C.depth[o]=0):ae[o*2+1]=0;for(;C.heap_len<2;)u=C.heap[++C.heap_len]=U<2?++U:0,ae[u*2]=1,C.depth[u]=0,C.opt_len--,z&&(C.static_len-=we[u*2+1]);for(J.max_code=U,o=C.heap_len>>1;o>=1;o--)Ae(C,ae,o);u=d;do o=C.heap[1],C.heap[1]=C.heap[C.heap_len--],Ae(C,ae,1),A=C.heap[1],C.heap[--C.heap_max]=o,C.heap[--C.heap_max]=A,ae[u*2]=ae[o*2]+ae[A*2],C.depth[u]=(C.depth[o]>=C.depth[A]?C.depth[o]:C.depth[A])+1,ae[o*2+1]=ae[A*2+1]=u,C.heap[1]=u++,Ae(C,ae,1);while(C.heap_len>=2);C.heap[--C.heap_max]=C.heap[1],ee(C,J),Z(ae,U,C.bl_count)}function qe(C,J,ae){var we,z=-1,d,o=J[1],A=0,U=7,u=4;for(o===0&&(U=138,u=3),J[(ae+1)*2+1]=65535,we=0;we<=ae;we++)d=o,o=J[(we+1)*2+1],!(++A<U&&d===o)&&(A<u?C.bl_tree[d*2]+=A:d!==0?(d!==z&&C.bl_tree[d*2]++,C.bl_tree[I*2]++):A<=10?C.bl_tree[j*2]++:C.bl_tree[L*2]++,A=0,z=d,o===0?(U=138,u=3):d===o?(U=6,u=3):(U=7,u=4))}function nt(C,J,ae){var we,z=-1,d,o=J[1],A=0,U=7,u=4;for(o===0&&(U=138,u=3),we=0;we<=ae;we++)if(d=o,o=J[(we+1)*2+1],!(++A<U&&d===o)){if(A<u)do Le(C,d,C.bl_tree);while(--A!==0);else d!==0?(d!==z&&(Le(C,d,C.bl_tree),A--),Le(C,I,C.bl_tree),Ne(C,A-3,2)):A<=10?(Le(C,j,C.bl_tree),Ne(C,A-3,3)):(Le(C,L,C.bl_tree),Ne(C,A-11,7));A=0,z=d,o===0?(U=138,u=3):d===o?(U=6,u=3):(U=7,u=4)}}function We(C){var J;for(qe(C,C.dyn_ltree,C.l_desc.max_code),qe(C,C.dyn_dtree,C.d_desc.max_code),Pe(C,C.bl_desc),J=B-1;J>=3&&C.bl_tree[re[J]*2+1]===0;J--);return C.opt_len+=3*(J+1)+5+5+4,J}function Qe(C,J,ae,we){var z;for(Ne(C,J-257,5),Ne(C,ae-1,5),Ne(C,we-4,4),z=0;z<we;z++)Ne(C,C.bl_tree[re[z]*2+1],3);nt(C,C.dyn_ltree,J-1),nt(C,C.dyn_dtree,ae-1)}function Ye(C){var J=4093624447,ae;for(ae=0;ae<=31;ae++,J>>>=1)if(J&1&&C.dyn_ltree[ae*2]!==0)return a;if(C.dyn_ltree[18]!==0||C.dyn_ltree[20]!==0||C.dyn_ltree[26]!==0)return l;for(ae=32;ae<v;ae++)if(C.dyn_ltree[ae*2]!==0)return l;return a}var et=!1;function yt(C){et||(K(),et=!0),C.l_desc=new Se(C.dyn_ltree,Fe),C.d_desc=new Se(C.dyn_dtree,Je),C.bl_desc=new Se(C.bl_tree,$e),C.bi_buf=0,C.bi_valid=0,me(C)}function ct(C,J,ae,we){Ne(C,(c<<1)+(we?1:0),3),ce(C,J,ae)}function it(C){Ne(C,b<<1,3),Le(C,k,ie),Me(C)}function vt(C,J,ae,we){var z,d,o=0;C.level>0?(C.strm.data_type===h&&(C.strm.data_type=Ye(C)),Pe(C,C.l_desc),Pe(C,C.d_desc),o=We(C),z=C.opt_len+3+7>>>3,d=C.static_len+3+7>>>3,d<=z&&(z=d)):z=d=ae+5,ae+4<=z&&J!==-1?ct(C,J,ae,we):C.strategy===s||d===z?(Ne(C,(b<<1)+(we?1:0),3),De(C,ie,de)):(Ne(C,(m<<1)+(we?1:0),3),Qe(C,C.l_desc.max_code+1,C.d_desc.max_code+1,o+1),De(C,C.dyn_ltree,C.dyn_dtree)),me(C),we&&be(C)}function _t(C,J,ae){return C.pending_buf[C.d_buf+C.last_lit*2]=J>>>8&255,C.pending_buf[C.d_buf+C.last_lit*2+1]=J&255,C.pending_buf[C.l_buf+C.last_lit]=ae&255,C.last_lit++,J===0?C.dyn_ltree[ae*2]++:(C.matches++,J--,C.dyn_ltree[(ue[ae]+v+1)*2]++,C.dyn_dtree[He(J)*2]++),C.last_lit===C.lit_bufsize-1}r._tr_init=yt,r._tr_stored_block=ct,r._tr_flush_block=vt,r._tr_tally=_t,r._tr_align=it},{"../utils/common":41}],53:[function(t,i,r){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}i.exports=n},{}],54:[function(t,i,r){(function(n){(function(s,a){if(s.setImmediate)return;var l=1,h={},p=!1,c=s.document,b;function m(R){typeof R!="function"&&(R=new Function(""+R));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var j={callback:R,args:k};return h[l]=j,b(l),l++}function O(R){delete h[R]}function w(R){var k=R.callback,I=R.args;switch(I.length){case 0:k();break;case 1:k(I[0]);break;case 2:k(I[0],I[1]);break;case 3:k(I[0],I[1],I[2]);break;default:k.apply(a,I);break}}function f(R){if(p)setTimeout(f,0,R);else{var k=h[R];if(k){p=!0;try{w(k)}finally{O(R),p=!1}}}}function v(){b=function(R){process.nextTick(function(){f(R)})}}function g(){if(s.postMessage&&!s.importScripts){var R=!0,k=s.onmessage;return s.onmessage=function(){R=!1},s.postMessage("","*"),s.onmessage=k,R}}function x(){var R="setImmediate$"+Math.random()+"$",k=function(I){I.source===s&&typeof I.data=="string"&&I.data.indexOf(R)===0&&f(+I.data.slice(R.length))};s.addEventListener?s.addEventListener("message",k,!1):s.attachEvent("onmessage",k),b=function(I){s.postMessage(R+I,"*")}}function B(){var R=new MessageChannel;R.port1.onmessage=function(k){var I=k.data;f(I)},b=function(k){R.port2.postMessage(k)}}function y(){var R=c.documentElement;b=function(k){var I=c.createElement("script");I.onreadystatechange=function(){f(k),I.onreadystatechange=null,R.removeChild(I),I=null},R.appendChild(I)}}function T(){b=function(R){setTimeout(f,0,R)}}var N=Object.getPrototypeOf&&Object.getPrototypeOf(s);N=N&&N.setTimeout?N:s,{}.toString.call(s.process)==="[object process]"?v():g()?x():s.MessageChannel?B():c&&"onreadystatechange"in c.createElement("script")?y():T(),N.setImmediate=m,N.clearImmediate=O})(typeof self>"u"?typeof n>"u"?this:n:self)}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Er)),Er.exports}var Io=No();const Ro=ti(Io);class Oo{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new Ro}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return li(e,"binary").then((function(i){return this.zip.loadAsync(i,{base64:t})}).bind(this))}request(e,t){var i=new je,r,n=new zt(e);return t||(t=n.extension),t=="blob"?r=this.getBlob(e):r=this.getText(e),r?r.then((function(s){let a=this.handleResponse(s,t);i.resolve(a)}).bind(this)):i.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),i.promise}handleResponse(e,t){var i;return t=="json"?i=JSON.parse(e):ui(t)?i=Ot(e,"text/xml"):t=="xhtml"?i=Ot(e,"application/xhtml+xml"):t=="html"||t=="htm"?i=Ot(e,"text/html"):i=e,i}getBlob(e,t){var i=window.decodeURIComponent(e.substr(1)),r=this.zip.file(i);if(r)return t=t||Qt.lookup(r.name),r.async("uint8array").then(function(n){return new Blob([n],{type:t})})}getText(e,t){var i=window.decodeURIComponent(e.substr(1)),r=this.zip.file(i);if(r)return r.async("string").then(function(n){return n})}getBase64(e,t){var i=window.decodeURIComponent(e.substr(1)),r=this.zip.file(i);if(r)return t=t||Qt.lookup(r.name),r.async("base64").then(function(n){return"data:"+t+";base64,"+n})}createUrl(e,t){var i=new je,r=window.URL||window.webkitURL||window.mozURL,n,s,a=t&&t.base64;return e in this.urlCache?(i.resolve(this.urlCache[e]),i.promise):(a?(s=this.getBase64(e),s&&s.then((function(l){this.urlCache[e]=l,i.resolve(l)}).bind(this))):(s=this.getBlob(e),s&&s.then((function(l){n=r.createObjectURL(l),this.urlCache[e]=n,i.resolve(n)}).bind(this))),s||i.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),i.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,i=this.urlCache[e];i&&t.revokeObjectURL(i)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}var Ar={exports:{}};var Xn;function Bo(){return Xn||(Xn=1,(function(E,e){(function(t){E.exports=t()})(function(){return(function t(i,r,n){function s(h,p){if(!r[h]){if(!i[h]){var c=typeof qt=="function"&&qt;if(!p&&c)return c(h,!0);if(a)return a(h,!0);var b=new Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}var m=r[h]={exports:{}};i[h][0].call(m.exports,function(O){var w=i[h][1][O];return s(w||O)},m,m.exports,t,i,r,n)}return r[h].exports}for(var a=typeof qt=="function"&&qt,l=0;l<n.length;l++)s(n[l]);return s})({1:[function(t,i,r){(function(n){var s=n.MutationObserver||n.WebKitMutationObserver,a;if(s){var l=0,h=new s(O),p=n.document.createTextNode("");h.observe(p,{characterData:!0}),a=function(){p.data=l=++l%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var c=new n.MessageChannel;c.port1.onmessage=O,a=function(){c.port2.postMessage(0)}}else"document"in n&&"onreadystatechange"in n.document.createElement("script")?a=function(){var f=n.document.createElement("script");f.onreadystatechange=function(){O(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},n.document.documentElement.appendChild(f)}:a=function(){setTimeout(O,0)};var b,m=[];function O(){b=!0;for(var f,v,g=m.length;g;){for(v=m,m=[],f=-1;++f<g;)v[f]();g=m.length}b=!1}i.exports=w;function w(f){m.push(f)===1&&!b&&a()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,i,r){var n=t(1);function s(){}var a={},l=["REJECTED"],h=["FULFILLED"],p=["PENDING"];i.exports=c;function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,y!==s&&w(this,y)}c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,T){if(typeof y!="function"&&this.state===h||typeof T!="function"&&this.state===l)return this;var N=new this.constructor(s);if(this.state!==p){var R=this.state===h?y:T;m(N,R,this.outcome)}else this.queue.push(new b(N,y,T));return N};function b(y,T,N){this.promise=y,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},b.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},b.prototype.callRejected=function(y){a.reject(this.promise,y)},b.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)};function m(y,T,N){n(function(){var R;try{R=T(N)}catch(k){return a.reject(y,k)}R===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,R)})}a.resolve=function(y,T){var N=f(O,T);if(N.status==="error")return a.reject(y,N.value);var R=N.value;if(R)w(y,R);else{y.state=h,y.outcome=T;for(var k=-1,I=y.queue.length;++k<I;)y.queue[k].callFulfilled(T)}return y},a.reject=function(y,T){y.state=l,y.outcome=T;for(var N=-1,R=y.queue.length;++N<R;)y.queue[N].callRejected(T);return y};function O(y){var T=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof T=="function")return function(){T.apply(y,arguments)}}function w(y,T){var N=!1;function R(L){N||(N=!0,a.reject(y,L))}function k(L){N||(N=!0,a.resolve(y,L))}function I(){T(k,R)}var j=f(I);j.status==="error"&&R(j.value)}function f(y,T){var N={};try{N.value=y(T),N.status="success"}catch(R){N.status="error",N.value=R}return N}c.resolve=v;function v(y){return y instanceof this?y:a.resolve(new this(s),y)}c.reject=g;function g(y){var T=new this(s);return a.reject(T,y)}c.all=x;function x(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=y.length,R=!1;if(!N)return this.resolve([]);for(var k=new Array(N),I=0,j=-1,L=new this(s);++j<N;)H(y[j],j);return L;function H(X,te){T.resolve(X).then(re,function(Q){R||(R=!0,a.reject(L,Q))});function re(Q){k[te]=Q,++I===N&&!R&&(R=!0,a.resolve(L,k))}}}c.race=B;function B(y){var T=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=y.length,R=!1;if(!N)return this.resolve([]);for(var k=-1,I=new this(s);++k<N;)j(y[k]);return I;function j(L){T.resolve(L).then(function(H){R||(R=!0,a.resolve(I,H))},function(H){R||(R=!0,a.reject(I,H))})}}},{1:1}],3:[function(t,i,r){(function(n){typeof n.Promise!="function"&&(n.Promise=t(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,i,r){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};function s(D,P){if(!(D instanceof P))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function h(){try{if(!l||!l.open)return!1;var D=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!D||P)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function p(D,P){D=D||[],P=P||{};try{return new Blob(D,P)}catch(q){if(q.name!=="TypeError")throw q;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,W=new S,V=0;V<D.length;V+=1)W.append(D[V]);return W.getBlob(P.type)}}typeof Promise>"u"&&t(3);var c=Promise;function b(D,P){P&&D.then(function(S){P(null,S)},function(S){P(S)})}function m(D,P,S){typeof P=="function"&&D.then(P),typeof S=="function"&&D.catch(S)}function O(D){return typeof D!="string"&&(console.warn(D+" used as a key, but it is not a string."),D=String(D)),D}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",v=void 0,g={},x=Object.prototype.toString,B="readonly",y="readwrite";function T(D){for(var P=D.length,S=new ArrayBuffer(P),W=new Uint8Array(S),V=0;V<P;V++)W[V]=D.charCodeAt(V);return S}function N(D){return new c(function(P){var S=D.transaction(f,y),W=p([""]);S.objectStore(f).put(W,"key"),S.onabort=function(V){V.preventDefault(),V.stopPropagation(),P(!1)},S.oncomplete=function(){var V=navigator.userAgent.match(/Chrome\/(\d+)/),q=navigator.userAgent.match(/Edge\//);P(q||!V||parseInt(V[1],10)>=43)}}).catch(function(){return!1})}function R(D){return typeof v=="boolean"?c.resolve(v):N(D).then(function(P){return v=P,v})}function k(D){var P=g[D.name],S={};S.promise=new c(function(W,V){S.resolve=W,S.reject=V}),P.deferredOperations.push(S),P.dbReady?P.dbReady=P.dbReady.then(function(){return S.promise}):P.dbReady=S.promise}function I(D){var P=g[D.name],S=P.deferredOperations.pop();if(S)return S.resolve(),S.promise}function j(D,P){var S=g[D.name],W=S.deferredOperations.pop();if(W)return W.reject(P),W.promise}function L(D,P){return new c(function(S,W){if(g[D.name]=g[D.name]||ve(),D.db)if(P)k(D),D.db.close();else return S(D.db);var V=[D.name];P&&V.push(D.version);var q=l.open.apply(l,V);P&&(q.onupgradeneeded=function(Y){var se=q.result;try{se.createObjectStore(D.storeName),Y.oldVersion<=1&&se.createObjectStore(f)}catch(le){if(le.name==="ConstraintError")console.warn('The database "'+D.name+'" has been upgraded from version '+Y.oldVersion+" to version "+Y.newVersion+', but the storage "'+D.storeName+'" already exists.');else throw le}}),q.onerror=function(Y){Y.preventDefault(),W(q.error)},q.onsuccess=function(){var Y=q.result;Y.onversionchange=function(se){se.target.close()},S(Y),I(D)}})}function H(D){return L(D,!1)}function X(D){return L(D,!0)}function te(D,P){if(!D.db)return!0;var S=!D.db.objectStoreNames.contains(D.storeName),W=D.version<D.db.version,V=D.version>D.db.version;if(W&&(D.version!==P&&console.warn('The database "'+D.name+`" can't be downgraded from version `+D.db.version+" to version "+D.version+"."),D.version=D.db.version),V||S){if(S){var q=D.db.version+1;q>D.version&&(D.version=q)}return!0}return!1}function re(D){return new c(function(P,S){var W=new FileReader;W.onerror=S,W.onloadend=function(V){var q=btoa(V.target.result||"");P({__local_forage_encoded_blob:!0,data:q,type:D.type})},W.readAsBinaryString(D)})}function Q(D){var P=T(atob(D.data));return p([P],{type:D.type})}function ie(D){return D&&D.__local_forage_encoded_blob}function de(D){var P=this,S=P._initReady().then(function(){var W=g[P._dbInfo.name];if(W&&W.dbReady)return W.dbReady});return m(S,D,D),S}function ne(D){k(D);for(var P=g[D.name],S=P.forages,W=0;W<S.length;W++){var V=S[W];V._dbInfo.db&&(V._dbInfo.db.close(),V._dbInfo.db=null)}return D.db=null,H(D).then(function(q){return D.db=q,te(D)?X(D):q}).then(function(q){D.db=P.db=q;for(var Y=0;Y<S.length;Y++)S[Y]._dbInfo.db=q}).catch(function(q){throw j(D,q),q})}function ue(D,P,S,W){W===void 0&&(W=1);try{var V=D.db.transaction(D.storeName,P);S(null,V)}catch(q){if(W>0&&(!D.db||q.name==="InvalidStateError"||q.name==="NotFoundError"))return c.resolve().then(function(){if(!D.db||q.name==="NotFoundError"&&!D.db.objectStoreNames.contains(D.storeName)&&D.version<=D.db.version)return D.db&&(D.version=D.db.version+1),X(D)}).then(function(){return ne(D).then(function(){ue(D,P,S,W-1)})}).catch(S);S(q)}}function ve(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Re(D){var P=this,S={db:null};if(D)for(var W in D)S[W]=D[W];var V=g[S.name];V||(V=ve(),g[S.name]=V),V.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=de);var q=[];function Y(){return c.resolve()}for(var se=0;se<V.forages.length;se++){var le=V.forages[se];le!==P&&q.push(le._initReady().catch(Y))}var he=V.forages.slice(0);return c.all(q).then(function(){return S.db=V.db,H(S)}).then(function(fe){return S.db=fe,te(S,P._defaultConfig.version)?X(S):fe}).then(function(fe){S.db=V.db=fe,P._dbInfo=S;for(var xe=0;xe<he.length;xe++){var Ue=he[xe];Ue!==P&&(Ue._dbInfo.db=S.db,Ue._dbInfo.version=S.version)}})}function Te(D,P){var S=this;D=O(D);var W=new c(function(V,q){S.ready().then(function(){ue(S._dbInfo,B,function(Y,se){if(Y)return q(Y);try{var le=se.objectStore(S._dbInfo.storeName),he=le.get(D);he.onsuccess=function(){var fe=he.result;fe===void 0&&(fe=null),ie(fe)&&(fe=Q(fe)),V(fe)},he.onerror=function(){q(he.error)}}catch(fe){q(fe)}})}).catch(q)});return b(W,P),W}function Fe(D,P){var S=this,W=new c(function(V,q){S.ready().then(function(){ue(S._dbInfo,B,function(Y,se){if(Y)return q(Y);try{var le=se.objectStore(S._dbInfo.storeName),he=le.openCursor(),fe=1;he.onsuccess=function(){var xe=he.result;if(xe){var Ue=xe.value;ie(Ue)&&(Ue=Q(Ue));var Ke=D(Ue,xe.key,fe++);Ke!==void 0?V(Ke):xe.continue()}else V()},he.onerror=function(){q(he.error)}}catch(xe){q(xe)}})}).catch(q)});return b(W,P),W}function Je(D,P,S){var W=this;D=O(D);var V=new c(function(q,Y){var se;W.ready().then(function(){return se=W._dbInfo,x.call(P)==="[object Blob]"?R(se.db).then(function(le){return le?P:re(P)}):P}).then(function(le){ue(W._dbInfo,y,function(he,fe){if(he)return Y(he);try{var xe=fe.objectStore(W._dbInfo.storeName);le===null&&(le=void 0);var Ue=xe.put(le,D);fe.oncomplete=function(){le===void 0&&(le=null),q(le)},fe.onabort=fe.onerror=function(){var Ke=Ue.error?Ue.error:Ue.transaction.error;Y(Ke)}}catch(Ke){Y(Ke)}})}).catch(Y)});return b(V,S),V}function $e(D,P){var S=this;D=O(D);var W=new c(function(V,q){S.ready().then(function(){ue(S._dbInfo,y,function(Y,se){if(Y)return q(Y);try{var le=se.objectStore(S._dbInfo.storeName),he=le.delete(D);se.oncomplete=function(){V()},se.onerror=function(){q(he.error)},se.onabort=function(){var fe=he.error?he.error:he.transaction.error;q(fe)}}catch(fe){q(fe)}})}).catch(q)});return b(W,P),W}function Se(D){var P=this,S=new c(function(W,V){P.ready().then(function(){ue(P._dbInfo,y,function(q,Y){if(q)return V(q);try{var se=Y.objectStore(P._dbInfo.storeName),le=se.clear();Y.oncomplete=function(){W()},Y.onabort=Y.onerror=function(){var he=le.error?le.error:le.transaction.error;V(he)}}catch(he){V(he)}})}).catch(V)});return b(S,D),S}function He(D){var P=this,S=new c(function(W,V){P.ready().then(function(){ue(P._dbInfo,B,function(q,Y){if(q)return V(q);try{var se=Y.objectStore(P._dbInfo.storeName),le=se.count();le.onsuccess=function(){W(le.result)},le.onerror=function(){V(le.error)}}catch(he){V(he)}})}).catch(V)});return b(S,D),S}function Xe(D,P){var S=this,W=new c(function(V,q){if(D<0){V(null);return}S.ready().then(function(){ue(S._dbInfo,B,function(Y,se){if(Y)return q(Y);try{var le=se.objectStore(S._dbInfo.storeName),he=!1,fe=le.openKeyCursor();fe.onsuccess=function(){var xe=fe.result;if(!xe){V(null);return}D===0||he?V(xe.key):(he=!0,xe.advance(D))},fe.onerror=function(){q(fe.error)}}catch(xe){q(xe)}})}).catch(q)});return b(W,P),W}function Ne(D){var P=this,S=new c(function(W,V){P.ready().then(function(){ue(P._dbInfo,B,function(q,Y){if(q)return V(q);try{var se=Y.objectStore(P._dbInfo.storeName),le=se.openKeyCursor(),he=[];le.onsuccess=function(){var fe=le.result;if(!fe){W(he);return}he.push(fe.key),fe.continue()},le.onerror=function(){V(le.error)}}catch(fe){V(fe)}})}).catch(V)});return b(S,D),S}function Le(D,P){P=w.apply(this,arguments);var S=this.config();D=typeof D!="function"&&D||{},D.name||(D.name=D.name||S.name,D.storeName=D.storeName||S.storeName);var W=this,V;if(!D.name)V=c.reject("Invalid arguments");else{var q=D.name===S.name&&W._dbInfo.db,Y=q?c.resolve(W._dbInfo.db):H(D).then(function(se){var le=g[D.name],he=le.forages;le.db=se;for(var fe=0;fe<he.length;fe++)he[fe]._dbInfo.db=se;return se});D.storeName?V=Y.then(function(se){if(se.objectStoreNames.contains(D.storeName)){var le=se.version+1;k(D);var he=g[D.name],fe=he.forages;se.close();for(var xe=0;xe<fe.length;xe++){var Ue=fe[xe];Ue._dbInfo.db=null,Ue._dbInfo.version=le}var Ke=new c(function(tt,gt){var pt=l.open(D.name,le);pt.onerror=function(Dt){var ri=pt.result;ri.close(),gt(Dt)},pt.onupgradeneeded=function(){var Dt=pt.result;Dt.deleteObjectStore(D.storeName)},pt.onsuccess=function(){var Dt=pt.result;Dt.close(),tt(Dt)}});return Ke.then(function(tt){he.db=tt;for(var gt=0;gt<fe.length;gt++){var pt=fe[gt];pt._dbInfo.db=tt,I(pt._dbInfo)}}).catch(function(tt){throw(j(D,tt)||c.resolve()).catch(function(){}),tt})}}):V=Y.then(function(se){k(D);var le=g[D.name],he=le.forages;se.close();for(var fe=0;fe<he.length;fe++){var xe=he[fe];xe._dbInfo.db=null}var Ue=new c(function(Ke,tt){var gt=l.deleteDatabase(D.name);gt.onerror=function(){var pt=gt.result;pt&&pt.close(),tt(gt.error)},gt.onblocked=function(){console.warn('dropInstance blocked for database "'+D.name+'" until all open connections are closed')},gt.onsuccess=function(){var pt=gt.result;pt&&pt.close(),Ke(pt)}});return Ue.then(function(Ke){le.db=Ke;for(var tt=0;tt<he.length;tt++){var gt=he[tt];I(gt._dbInfo)}}).catch(function(Ke){throw(j(D,Ke)||c.resolve()).catch(function(){}),Ke})})}return b(V,P),V}var Oe={_driver:"asyncStorage",_initStorage:Re,_support:h(),iterate:Fe,getItem:Te,setItem:Je,removeItem:$e,clear:Se,length:He,key:Xe,keys:Ne,dropInstance:Le};function Me(){return typeof openDatabase=="function"}var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,me="__lfsc__:",be=me.length,ce="arbf",ge="blob",Ae="si08",De="ui08",Pe="uic8",qe="si16",nt="si32",We="ur16",Qe="ui32",Ye="fl32",et="fl64",yt=be+ce.length,ct=Object.prototype.toString;function it(D){var P=D.length*.75,S=D.length,W,V=0,q,Y,se,le;D[D.length-1]==="="&&(P--,D[D.length-2]==="="&&P--);var he=new ArrayBuffer(P),fe=new Uint8Array(he);for(W=0;W<S;W+=4)q=ee.indexOf(D[W]),Y=ee.indexOf(D[W+1]),se=ee.indexOf(D[W+2]),le=ee.indexOf(D[W+3]),fe[V++]=q<<2|Y>>4,fe[V++]=(Y&15)<<4|se>>2,fe[V++]=(se&3)<<6|le&63;return he}function vt(D){var P=new Uint8Array(D),S="",W;for(W=0;W<P.length;W+=3)S+=ee[P[W]>>2],S+=ee[(P[W]&3)<<4|P[W+1]>>4],S+=ee[(P[W+1]&15)<<2|P[W+2]>>6],S+=ee[P[W+2]&63];return P.length%3===2?S=S.substring(0,S.length-1)+"=":P.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function _t(D,P){var S="";if(D&&(S=ct.call(D)),D&&(S==="[object ArrayBuffer]"||D.buffer&&ct.call(D.buffer)==="[object ArrayBuffer]")){var W,V=me;D instanceof ArrayBuffer?(W=D,V+=ce):(W=D.buffer,S==="[object Int8Array]"?V+=Ae:S==="[object Uint8Array]"?V+=De:S==="[object Uint8ClampedArray]"?V+=Pe:S==="[object Int16Array]"?V+=qe:S==="[object Uint16Array]"?V+=We:S==="[object Int32Array]"?V+=nt:S==="[object Uint32Array]"?V+=Qe:S==="[object Float32Array]"?V+=Ye:S==="[object Float64Array]"?V+=et:P(new Error("Failed to get type for BinaryArray"))),P(V+vt(W))}else if(S==="[object Blob]"){var q=new FileReader;q.onload=function(){var Y=Z+D.type+"~"+vt(this.result);P(me+ge+Y)},q.readAsArrayBuffer(D)}else try{P(JSON.stringify(D))}catch(Y){console.error("Couldn't convert value into a JSON string: ",D),P(null,Y)}}function C(D){if(D.substring(0,be)!==me)return JSON.parse(D);var P=D.substring(yt),S=D.substring(be,yt),W;if(S===ge&&K.test(P)){var V=P.match(K);W=V[1],P=P.substring(V[0].length)}var q=it(P);switch(S){case ce:return q;case ge:return p([q],{type:W});case Ae:return new Int8Array(q);case De:return new Uint8Array(q);case Pe:return new Uint8ClampedArray(q);case qe:return new Int16Array(q);case We:return new Uint16Array(q);case nt:return new Int32Array(q);case Qe:return new Uint32Array(q);case Ye:return new Float32Array(q);case et:return new Float64Array(q);default:throw new Error("Unkown type: "+S)}}var J={serialize:_t,deserialize:C,stringToBuffer:it,bufferToString:vt};function ae(D,P,S,W){D.executeSql("CREATE TABLE IF NOT EXISTS "+P.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],S,W)}function we(D){var P=this,S={db:null};if(D)for(var W in D)S[W]=typeof D[W]!="string"?D[W].toString():D[W];var V=new c(function(q,Y){try{S.db=openDatabase(S.name,String(S.version),S.description,S.size)}catch(se){return Y(se)}S.db.transaction(function(se){ae(se,S,function(){P._dbInfo=S,q()},function(le,he){Y(he)})},Y)});return S.serializer=J,V}function z(D,P,S,W,V,q){D.executeSql(S,W,V,function(Y,se){se.code===se.SYNTAX_ERR?Y.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[P.storeName],function(le,he){he.rows.length?q(le,se):ae(le,P,function(){le.executeSql(S,W,V,q)},q)},q):q(Y,se)},q)}function d(D,P){var S=this;D=O(D);var W=new c(function(V,q){S.ready().then(function(){var Y=S._dbInfo;Y.db.transaction(function(se){z(se,Y,"SELECT * FROM "+Y.storeName+" WHERE key = ? LIMIT 1",[D],function(le,he){var fe=he.rows.length?he.rows.item(0).value:null;fe&&(fe=Y.serializer.deserialize(fe)),V(fe)},function(le,he){q(he)})})}).catch(q)});return b(W,P),W}function o(D,P){var S=this,W=new c(function(V,q){S.ready().then(function(){var Y=S._dbInfo;Y.db.transaction(function(se){z(se,Y,"SELECT * FROM "+Y.storeName,[],function(le,he){for(var fe=he.rows,xe=fe.length,Ue=0;Ue<xe;Ue++){var Ke=fe.item(Ue),tt=Ke.value;if(tt&&(tt=Y.serializer.deserialize(tt)),tt=D(tt,Ke.key,Ue+1),tt!==void 0){V(tt);return}}V()},function(le,he){q(he)})})}).catch(q)});return b(W,P),W}function A(D,P,S,W){var V=this;D=O(D);var q=new c(function(Y,se){V.ready().then(function(){P===void 0&&(P=null);var le=P,he=V._dbInfo;he.serializer.serialize(P,function(fe,xe){xe?se(xe):he.db.transaction(function(Ue){z(Ue,he,"INSERT OR REPLACE INTO "+he.storeName+" (key, value) VALUES (?, ?)",[D,fe],function(){Y(le)},function(Ke,tt){se(tt)})},function(Ue){if(Ue.code===Ue.QUOTA_ERR){if(W>0){Y(A.apply(V,[D,le,S,W-1]));return}se(Ue)}})})}).catch(se)});return b(q,S),q}function U(D,P,S){return A.apply(this,[D,P,S,1])}function u(D,P){var S=this;D=O(D);var W=new c(function(V,q){S.ready().then(function(){var Y=S._dbInfo;Y.db.transaction(function(se){z(se,Y,"DELETE FROM "+Y.storeName+" WHERE key = ?",[D],function(){V()},function(le,he){q(he)})})}).catch(q)});return b(W,P),W}function M(D){var P=this,S=new c(function(W,V){P.ready().then(function(){var q=P._dbInfo;q.db.transaction(function(Y){z(Y,q,"DELETE FROM "+q.storeName,[],function(){W()},function(se,le){V(le)})})}).catch(V)});return b(S,D),S}function G(D){var P=this,S=new c(function(W,V){P.ready().then(function(){var q=P._dbInfo;q.db.transaction(function(Y){z(Y,q,"SELECT COUNT(key) as c FROM "+q.storeName,[],function(se,le){var he=le.rows.item(0).c;W(he)},function(se,le){V(le)})})}).catch(V)});return b(S,D),S}function _(D,P){var S=this,W=new c(function(V,q){S.ready().then(function(){var Y=S._dbInfo;Y.db.transaction(function(se){z(se,Y,"SELECT key FROM "+Y.storeName+" WHERE id = ? LIMIT 1",[D+1],function(le,he){var fe=he.rows.length?he.rows.item(0).key:null;V(fe)},function(le,he){q(he)})})}).catch(q)});return b(W,P),W}function F(D){var P=this,S=new c(function(W,V){P.ready().then(function(){var q=P._dbInfo;q.db.transaction(function(Y){z(Y,q,"SELECT key FROM "+q.storeName,[],function(se,le){for(var he=[],fe=0;fe<le.rows.length;fe++)he.push(le.rows.item(fe).key);W(he)},function(se,le){V(le)})})}).catch(V)});return b(S,D),S}function $(D){return new c(function(P,S){D.transaction(function(W){W.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(V,q){for(var Y=[],se=0;se<q.rows.length;se++)Y.push(q.rows.item(se).name);P({db:D,storeNames:Y})},function(V,q){S(q)})},function(W){S(W)})})}function Ee(D,P){P=w.apply(this,arguments);var S=this.config();D=typeof D!="function"&&D||{},D.name||(D.name=D.name||S.name,D.storeName=D.storeName||S.storeName);var W=this,V;return D.name?V=new c(function(q){var Y;D.name===S.name?Y=W._dbInfo.db:Y=openDatabase(D.name,"","",0),D.storeName?q({db:Y,storeNames:[D.storeName]}):q($(Y))}).then(function(q){return new c(function(Y,se){q.db.transaction(function(le){function he(Ke){return new c(function(tt,gt){le.executeSql("DROP TABLE IF EXISTS "+Ke,[],function(){tt()},function(pt,Dt){gt(Dt)})})}for(var fe=[],xe=0,Ue=q.storeNames.length;xe<Ue;xe++)fe.push(he(q.storeNames[xe]));c.all(fe).then(function(){Y()}).catch(function(Ke){se(Ke)})},function(le){se(le)})})}):V=c.reject("Invalid arguments"),b(V,P),V}var pe={_driver:"webSQLStorage",_initStorage:we,_support:Me(),iterate:o,getItem:d,setItem:U,removeItem:u,clear:M,length:G,key:_,keys:F,dropInstance:Ee};function ye(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ie(D,P){var S=D.name+"/";return D.storeName!==P.storeName&&(S+=D.storeName+"/"),S}function ut(){var D="_localforage_support_test";try{return localStorage.setItem(D,!0),localStorage.removeItem(D),!1}catch{return!0}}function Ze(){return!ut()||localStorage.length>0}function Be(D){var P=this,S={};if(D)for(var W in D)S[W]=D[W];return S.keyPrefix=Ie(D,P._defaultConfig),Ze()?(P._dbInfo=S,S.serializer=J,c.resolve()):c.reject()}function ze(D){var P=this,S=P.ready().then(function(){for(var W=P._dbInfo.keyPrefix,V=localStorage.length-1;V>=0;V--){var q=localStorage.key(V);q.indexOf(W)===0&&localStorage.removeItem(q)}});return b(S,D),S}function dt(D,P){var S=this;D=O(D);var W=S.ready().then(function(){var V=S._dbInfo,q=localStorage.getItem(V.keyPrefix+D);return q&&(q=V.serializer.deserialize(q)),q});return b(W,P),W}function at(D,P){var S=this,W=S.ready().then(function(){for(var V=S._dbInfo,q=V.keyPrefix,Y=q.length,se=localStorage.length,le=1,he=0;he<se;he++){var fe=localStorage.key(he);if(fe.indexOf(q)===0){var xe=localStorage.getItem(fe);if(xe&&(xe=V.serializer.deserialize(xe)),xe=D(xe,fe.substring(Y),le++),xe!==void 0)return xe}}});return b(W,P),W}function Lt(D,P){var S=this,W=S.ready().then(function(){var V=S._dbInfo,q;try{q=localStorage.key(D)}catch{q=null}return q&&(q=q.substring(V.keyPrefix.length)),q});return b(W,P),W}function Vt(D){var P=this,S=P.ready().then(function(){for(var W=P._dbInfo,V=localStorage.length,q=[],Y=0;Y<V;Y++){var se=localStorage.key(Y);se.indexOf(W.keyPrefix)===0&&q.push(se.substring(W.keyPrefix.length))}return q});return b(S,D),S}function lt(D){var P=this,S=P.keys().then(function(W){return W.length});return b(S,D),S}function wt(D,P){var S=this;D=O(D);var W=S.ready().then(function(){var V=S._dbInfo;localStorage.removeItem(V.keyPrefix+D)});return b(W,P),W}function mt(D,P,S){var W=this;D=O(D);var V=W.ready().then(function(){P===void 0&&(P=null);var q=P;return new c(function(Y,se){var le=W._dbInfo;le.serializer.serialize(P,function(he,fe){if(fe)se(fe);else try{localStorage.setItem(le.keyPrefix+D,he),Y(q)}catch(xe){(xe.name==="QuotaExceededError"||xe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&se(xe),se(xe)}})})});return b(V,S),V}function Ct(D,P){if(P=w.apply(this,arguments),D=typeof D!="function"&&D||{},!D.name){var S=this.config();D.name=D.name||S.name,D.storeName=D.storeName||S.storeName}var W=this,V;return D.name?V=new c(function(q){D.storeName?q(Ie(D,W._defaultConfig)):q(D.name+"/")}).then(function(q){for(var Y=localStorage.length-1;Y>=0;Y--){var se=localStorage.key(Y);se.indexOf(q)===0&&localStorage.removeItem(se)}}):V=c.reject("Invalid arguments"),b(V,P),V}var At={_driver:"localStorageWrapper",_initStorage:Be,_support:ye(),iterate:at,getItem:dt,setItem:mt,removeItem:wt,clear:ze,length:lt,key:Lt,keys:Vt,dropInstance:Ct},hi=function(P,S){return P===S||typeof P=="number"&&typeof S=="number"&&isNaN(P)&&isNaN(S)},Cs=function(P,S){for(var W=P.length,V=0;V<W;){if(hi(P[V],S))return!0;V++}return!1},jr=Array.isArray||function(D){return Object.prototype.toString.call(D)==="[object Array]"},ii={},Vr={},Ht={INDEXEDDB:Oe,WEBSQL:pe,LOCALSTORAGE:At},Ss=[Ht.INDEXEDDB._driver,Ht.WEBSQL._driver,Ht.LOCALSTORAGE._driver],fi=["dropInstance"],ki=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fi),Ts={description:"",driver:Ss.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ks(D,P){D[P]=function(){var S=arguments;return D.ready().then(function(){return D[P].apply(D,S)})}}function Ni(){for(var D=1;D<arguments.length;D++){var P=arguments[D];if(P)for(var S in P)P.hasOwnProperty(S)&&(jr(P[S])?arguments[0][S]=P[S].slice():arguments[0][S]=P[S])}return arguments[0]}var Ns=(function(){function D(P){s(this,D);for(var S in Ht)if(Ht.hasOwnProperty(S)){var W=Ht[S],V=W._driver;this[S]=V,ii[V]||this.defineDriver(W)}this._defaultConfig=Ni({},Ts),this._config=Ni({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return D.prototype.config=function(S){if((typeof S>"u"?"undefined":n(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var W in S){if(W==="storeName"&&(S[W]=S[W].replace(/\W/g,"_")),W==="version"&&typeof S[W]!="number")return new Error("Database version must be a number.");this._config[W]=S[W]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},D.prototype.defineDriver=function(S,W,V){var q=new c(function(Y,se){try{var le=S._driver,he=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){se(he);return}for(var fe=ki.concat("_initStorage"),xe=0,Ue=fe.length;xe<Ue;xe++){var Ke=fe[xe],tt=!Cs(fi,Ke);if((tt||S[Ke])&&typeof S[Ke]!="function"){se(he);return}}var gt=function(){for(var ri=function(Os){return function(){var Bs=new Error("Method "+Os+" is not implemented by the current driver"),Hr=c.reject(Bs);return b(Hr,arguments[arguments.length-1]),Hr}},Ii=0,Rs=fi.length;Ii<Rs;Ii++){var Ri=fi[Ii];S[Ri]||(S[Ri]=ri(Ri))}};gt();var pt=function(ri){ii[le]&&console.info("Redefining LocalForage driver: "+le),ii[le]=S,Vr[le]=ri,Y()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(pt,se):pt(!!S._support):pt(!0)}catch(Dt){se(Dt)}});return m(q,W,V),q},D.prototype.driver=function(){return this._driver||null},D.prototype.getDriver=function(S,W,V){var q=ii[S]?c.resolve(ii[S]):c.reject(new Error("Driver not found."));return m(q,W,V),q},D.prototype.getSerializer=function(S){var W=c.resolve(J);return m(W,S),W},D.prototype.ready=function(S){var W=this,V=W._driverSet.then(function(){return W._ready===null&&(W._ready=W._initDriver()),W._ready});return m(V,S,S),V},D.prototype.setDriver=function(S,W,V){var q=this;jr(S)||(S=[S]);var Y=this._getSupportedDrivers(S);function se(){q._config.driver=q.driver()}function le(xe){return q._extend(xe),se(),q._ready=q._initStorage(q._config),q._ready}function he(xe){return function(){var Ue=0;function Ke(){for(;Ue<xe.length;){var tt=xe[Ue];return Ue++,q._dbInfo=null,q._ready=null,q.getDriver(tt).then(le).catch(Ke)}se();var gt=new Error("No available storage method found.");return q._driverSet=c.reject(gt),q._driverSet}return Ke()}}var fe=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=fe.then(function(){var xe=Y[0];return q._dbInfo=null,q._ready=null,q.getDriver(xe).then(function(Ue){q._driver=Ue._driver,se(),q._wrapLibraryMethodsWithReady(),q._initDriver=he(Y)})}).catch(function(){se();var xe=new Error("No available storage method found.");return q._driverSet=c.reject(xe),q._driverSet}),m(this._driverSet,W,V),this._driverSet},D.prototype.supports=function(S){return!!Vr[S]},D.prototype._extend=function(S){Ni(this,S)},D.prototype._getSupportedDrivers=function(S){for(var W=[],V=0,q=S.length;V<q;V++){var Y=S[V];this.supports(Y)&&W.push(Y)}return W},D.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,W=ki.length;S<W;S++)ks(this,ki[S])},D.prototype.createInstance=function(S){return new D(S)},D})(),Is=new Ns;i.exports=Is},{3:3}]},{},[4])(4)})})(Ar)),Ar.exports}var Lo=Bo();const Yn=ti(Lo);class xs{constructor(e,t,i){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||li,this.resolver=i,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Yn>"u"&&(e=Yn),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let i=e.resources.map(r=>{let{href:n}=r,s=this.resolver(n),a=window.encodeURIComponent(s);return this.storage.getItem(a).then(l=>!l||t?this.requester(s,"binary").then(h=>this.storage.setItem(a,h)):l)});return Promise.all(i)}put(e,t,i){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(n=>n||this.requester(e,"binary",t,i).then(s=>this.storage.setItem(r,s)))}request(e,t,i,r){return this.online?this.requester(e,t,i,r).then(n=>(this.put(e),n)):this.retrieve(e,t)}retrieve(e,t){new je;var i,r=new zt(e);return t||(t=r.extension),t=="blob"?i=this.getBlob(e):i=this.getText(e),i.then(n=>{var s=new je,a;return n?(a=this.handleResponse(n,t),s.resolve(a)):s.reject({message:"File not found in storage: "+e,stack:new Error().stack}),s.promise})}handleResponse(e,t){var i;return t=="json"?i=JSON.parse(e):ui(t)?i=Ot(e,"text/xml"):t=="xhtml"?i=Ot(e,"application/xhtml+xml"):t=="html"||t=="htm"?i=Ot(e,"text/html"):i=e,i}getBlob(e,t){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(function(r){if(r)return t=t||Qt.lookup(e),new Blob([r],{type:t})})}getText(e,t){let i=window.encodeURIComponent(e);return t=t||Qt.lookup(e),this.storage.getItem(i).then(function(r){var n=new je,s=new FileReader,a;if(r)return a=new Blob([r],{type:t}),s.addEventListener("loadend",()=>{n.resolve(s.result)}),s.readAsText(a,t),n.promise})}getBase64(e,t){let i=window.encodeURIComponent(e);return t=t||Qt.lookup(e),this.storage.getItem(i).then(r=>{var n=new je,s=new FileReader,a;if(r)return a=new Blob([r],{type:t}),s.addEventListener("loadend",()=>{n.resolve(s.result)}),s.readAsDataURL(a,t),n.promise})}createUrl(e,t){var i=new je,r=window.URL||window.webkitURL||window.mozURL,n,s,a=t&&t.base64;return e in this.urlCache?(i.resolve(this.urlCache[e]),i.promise):(a?(s=this.getBase64(e),s&&s.then((function(l){this.urlCache[e]=l,i.resolve(l)}).bind(this))):(s=this.getBlob(e),s&&s.then((function(l){n=r.createObjectURL(l),this.urlCache[e]=n,i.resolve(n)}).bind(this))),s||i.reject({message:"File not found in storage: "+e,stack:new Error().stack}),i.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,i=this.urlCache[e];i&&t.revokeObjectURL(i)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}Bt(xs.prototype);class Dr{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=rt(e,"display_options");return t?(Pt(t,"option").forEach(r=>{let n="";switch(r.childNodes.length&&(n=r.childNodes[0].nodeValue),r.attributes.name.value){case"interactive":this.interactive=n;break;case"fixed-layout":this.fixedLayout=n;break;case"open-to-spread":this.openToSpread=n;break;case"orientation-lock":this.orientationLock=n;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const Kn="META-INF/container.xml",Fo="META-INF/com.apple.ibooks.display-options.xml",Tt={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Wr{constructor(e,t){typeof t>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=bt(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),bt(this.settings,t),this.opening=new je,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new je,spine:new je,metadata:new je,cover:new je,navigation:new je,pageList:new je,resources:new je,displayOptions:new je},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||li,this.spine=new Xa,this.locations=new ms(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(i=>{var r=new Error("Cannot load book at "+e);this.emit(_e.BOOK.OPEN_FAILED,r)})}open(e,t){var i,r=t||this.determineType(e);return r===Tt.BINARY?(this.archived=!0,this.url=new kt("/",""),i=this.openEpub(e)):r===Tt.BASE64?(this.archived=!0,this.url=new kt("/",""),i=this.openEpub(e,r)):r===Tt.EPUB?(this.archived=!0,this.url=new kt("/",""),i=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):r==Tt.OPF?(this.url=new kt(e),i=this.openPackaging(this.url.Path.toString())):r==Tt.MANIFEST?(this.url=new kt(e),i=this.openManifest(this.url.Path.toString())):(this.url=new kt(e),i=this.openContainer(Kn).then(this.openPackaging.bind(this))),i}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(Kn)).then(i=>this.openPackaging(i))}openContainer(e){return this.load(e).then(t=>(this.container=new Ya(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new zt(e),this.load(e).then(t=>(this.packaging=new Tn(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new zt(e),this.load(e).then(t=>(this.packaging=new Tn,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(e){var i=e,r=e.indexOf("://")>-1;return r?e:(this.path&&(i=this.path.resolve(e)),t!=!1&&this.url&&(i=this.url.resolve(i)),i)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,i,r;if(this.settings.encoding==="base64")return Tt.BASE64;if(typeof e!="string")return Tt.BINARY;if(t=new kt(e),i=t.path(),r=i.extension,r&&(r=r.replace(/\?.*$/,"")),!r)return Tt.DIRECTORY;if(r==="epub")return Tt.EPUB;if(r==="opf")return Tt.OPF;if(r==="json")return Tt.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(Fo)).then(t=>{this.displayOptions=new Dr(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new Dr,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new Dr,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new eo(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,i=e.toc;return i?new Promise((r,n)=>{this.navigation=new sr(i),e.pageList&&(this.pageList=new ar(e.pageList)),r(this.navigation)}):t?this.load(t,"xml").then(r=>(this.navigation=new sr(r),this.pageList=new ar(r),this.navigation)):new Promise((r,n)=>{this.navigation=new sr,this.pageList=new ar,r(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new qr(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new Oo,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",i=this.url,r=this.settings.requestMethod||li.bind(this);return this.storage=new xs(e,r,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let n=(s,a)=>{a.output=this.resources.substitute(s,a.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new kt("/",""),this.spine.hooks.serialize.register(n)}),this.storage.on("online",()=>{this.url=i,this.spine.hooks.serialize.deregister(n)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new Ve(e),i=this.spine.get(t.spinePos),r=this.load.bind(this);return i?i.load(r).then(function(n){var s=t.toRange(i.document);return s}):new Promise((n,s)=>{s("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Ti}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Bt(Wr.prototype);function jt(E,e){return new Wr(E,e)}jt.VERSION=Ti;typeof globalThis<"u"&&(globalThis.EPUBJS_VERSION=Ti);jt.Book=Wr;jt.Rendition=qr;jt.Contents=Ur;jt.CFI=Ve;jt.utils=qa;const Po={class:"flex flex-col gap-4"},zo={class:"flex gap-3"},Uo=["textContent"],Mo=["textContent"],qo=["href"],Wo={key:0,class:"flex flex-col w-full"},jo={class:"w-full"},Vo={class:"w-full"},Ho={class:"py-[4px]"},Go={class:"flex flex-col"},$o={class:"font-semibold text-gray-700"},Zo={class:"text-gray-500 text-sm"},Xo={class:"flex items-center gap-2"},Yo={class:"flex items-center gap-2 mt-4"},Ko={class:"space-y-3"},Jo={class:"flex justify-between items-center"},Qo={class:"text-xs text-gray-500"},eu={class:"flex items-start gap-3 p-4"},tu={class:"space-y-2"},iu={class:"font-semibold text-gray-900"},ru={class:"text-gray-600"},nu={class:"text-sm text-gray-500 whitespace-pre-line"},su=["href"],au={class:"flex justify-end gap-2"},ou={class:"flex items-center gap-3"},uu={class:"font-semibold text-gray-900"},lu={class:"text-sm text-gray-500 mt-2"},hu={class:"max-h-[300px] overflow-y-auto space-y-2 text-sm"},fu={key:0,class:"text-red-600"},cu={class:"font-semibold mb-1"},du={class:"whitespace-pre-wrap text-xs"},pu={key:1,class:"text-yellow-600"},vu={class:"font-semibold mb-1"},gu={class:"whitespace-pre-wrap text-xs"},mu=200*1024*1024,yu=Or({__name:"UploadForm",props:{defaultEncrypted:{type:Boolean,default:!0}},emits:["arweaveUploaded","submit","fileReady","fileUploadStatus"],setup(E,{expose:e,emit:t}){const{t:i}=Qn(),r=Ls(),{wallet:n,signer:s}=Gr(r),{validateWalletConsistency:a}=r,{waitForTransactionReceipt:l,assertSufficientBalanceForTransfer:h}=aa(),p=Fs(),{token:c}=Gr(p),b=Ps(),m=ot(null),O=E,w=ot([]),{sendTransactionAsync:f}=ra(),v=ot(!1),g=ot(!1),x=ot([]),B=ot(new Fi(0)),y=ot({}),T=ot(""),N=ot(new Map),R=ot(O.defaultEncrypted),k=t,I=ot(""),j=ot(!1),L=ot(""),H=ot(!1),X=ot(!0),te=ot(!1),re=ot(""),Q=ot(""),ie=It(()=>["block","flex","w-full",w.value.length?"max-w-[320px]":"","flex-col","justify-center",v.value?"bg-transparent":"","items-center","justify-between","p-[28px]","mb-[12px]","border-2","border-dashed","border-gray-300","rounded-[12px]","text-gray-500","cursor-pointer","bg-gray-100","hover:bg-gray-200"]);$r(R,async()=>{I.value=i("upload_form.loading"),await Je(),I.value=""}),$r(I,ee=>{k("fileUploadStatus",ee)},{immediate:!0});const de=ee=>{let Z="";return ee&&(ee.toLowerCase().startsWith("en")?Z="en":ee.toLowerCase().startsWith("zh")?Z="zh":Z=ee),Z},ne=async ee=>{try{const Z=await Ws(ee);if(!Z)return null;const[K,me]=await Promise.all([js(Z),Xr(Buffer.from(Z))]);return{fileBytes:Z,fileSHA256:K,ipfsHash:me}}catch(Z){return b.add({icon:"i-heroicons-exclamation-circle",title:i("upload_form.error_during_upload"),description:Z.message||i("upload_form.upload_error_occurred"),duration:3e3,color:"error"}),null}},ue=async ee=>{try{I.value=i("upload_form.loading"),v.value=!1;const Z=ee.dataTransfer?.files||ee.target?.files;if(ee.currentTarget instanceof HTMLElement&&ee.currentTarget.classList.remove("bg-gray-100"),Z?.length){const K=Array.from(Z).sort((me,be)=>{const ce=me.type.startsWith("image/"),ge=be.type.startsWith("image/");return ce===ge?0:ce?1:-1});for(const me of K){const be=new FileReader;let ce={};if(me.size<mu){be.onload=Ae=>{Ae.target&&(ce.fileData=Ae.target.result)},be.readAsDataURL(me);const ge=await ne(me);if(ge){const{fileBytes:Ae,fileSHA256:De,ipfsHash:Pe}=ge;if(ce={...ce,fileName:me.name,fileSize:me.size,fileType:me.type,ipfsHash:Pe||void 0,fileSHA256:De,fileBlob:me},ce.fileType==="application/epub+zip"){const qe=await ve(Ae);qe.hasIssues&&(ce.validationErrors=qe.errors,ce.validationWarnings=qe.warnings,ce.hasValidationIssues=!0,re.value=qe.errors,Q.value=qe.warnings,te.value=!0),await Re({buffer:Ae,file:me})}else if(ce.fileType?.startsWith("image/")){let qe=x.value.find(We=>!We.thumbnailIpfsHash);if(!qe)if(x.value.length===0)qe={thumbnailIpfsHash:null,coverData:null},x.value.push(qe);else{b.add({icon:"i-heroicons-exclamation-circle",title:i("upload_form.warning"),description:i("upload_form.only_one_cover_image"),duration:3e3,color:"warning"});return}const nt=new FileReader;nt.onload=We=>{We.target&&(qe.thumbnailIpfsHash=Pe,qe.coverData=We.target.result)},nt.readAsDataURL(me)}}}else v.value=!0;w.value.push(ce),I.value=""}}}finally{try{await Je()}catch(Z){console.error(Z)}m.value&&(m.value.value=""),I.value="",k("fileReady",w.value)}},ve=async ee=>{try{const{EpubCheck:Z}=await Ms(async()=>{const{EpubCheck:ce}=await import("./CsZy2wOR.js");return{EpubCheck:ce}},__vite__mapDeps([0,1,2]),import.meta.url),K=await Z.validate(new Uint8Array(ee)),me=K.messages.filter(ce=>ce.severity==="error"||ce.severity==="fatal").map(ce=>{let ge="";return ce.location&&(ge=` (${ce.location.path}${ce.location.line?":"+ce.location.line:""})`),`â€¢ ${ce.message}${ge}`}).join(`
`),be=K.messages.filter(ce=>ce.severity==="warning").map(ce=>{let ge="";return ce.location&&(ge=` (${ce.location.path}${ce.location.line?":"+ce.location.line:""})`),`â€¢ ${ce.message}${ge}`}).join(`
`);return{errors:me,warnings:be,hasIssues:!!(me||be)}}catch(Z){return{errors:Z.message||i("upload_form.epub_validation_failed"),warnings:"",hasIssues:!0}}},Re=async({buffer:ee,file:Z})=>{try{const K=jt(ee);await K.ready;const me={},{metadata:be}=K.packaging;if(be&&(me.epubFileName=Z.name,me.title=be.title,me.author=be.creator,me.language=de(be.language),me.description=be.description),K.navigation?.toc?.length){const We=(Qe,Ye=0)=>Qe.map(et=>{const ct=" ".repeat(Ye*2)+"- "+(et.label?.trim()||""),it=et.subitems?.length?We(et.subitems,Ye+1):"";return it?ct+`
`+it:ct}).join(`
`);me.tableOfContents=We(K.navigation.toc)}const ce=K.path.toString(),ge=await K.archive.getText(ce),Pe=new DOMParser().parseFromString(ge,"application/xml").querySelectorAll("dc\\:subject, subject"),qe=[];Pe.forEach(We=>{const Qe=We.textContent;Qe&&qe.push(Qe)}),me.tags=qe;const nt=await K.coverUrl();if(nt){const Qe=await(await fetch(nt)).blob();if(Qe){const Ye=new File([Qe],`${be.title}_cover.jpeg`,{type:"image/jpeg"}),et=await ne(Ye);if(et){const{fileSHA256:yt,ipfsHash:ct}=et;me.thumbnailIpfsHash=ct;const it={fileName:Ye.name,fileSize:Ye.size,fileType:Ye.type,fileBlob:Ye,ipfsHash:ct??void 0,fileSHA256:yt},vt=new FileReader;vt.onload=_t=>{_t.target&&(it.fileData=_t.target.result,w.value.push(it),me.coverData=_t.target.result,x.value.push(me))},vt.readAsDataURL(Ye);return}}}x.value.push(me)}catch(K){console.error(K),b.add({icon:"i-heroicons-exclamation-circle",title:i("upload_form.error_during_upload"),description:K.message||i("upload_form.epub_processing_error"),duration:3e3,color:"error"})}},Te=ee=>{(ee.validationErrors||ee.validationWarnings)&&(re.value=ee.validationErrors||"",Q.value=ee.validationWarnings||"",te.value=!0)},Fe=ee=>{const[Z]=w.value.splice(ee,1);Z&&(Z.fileType?.startsWith("image/")?x.value=x.value.map(K=>K.thumbnailIpfsHash===Z.ipfsHash?{...K,thumbnailIpfsHash:null,coverData:null}:K).filter(K=>K.epubFileName||K.thumbnailIpfsHash):Z.fileType==="application/epub+zip"&&(x.value=x.value.filter(K=>K.epubFileName!==Z.fileName)))},Je=async()=>{try{I.value=i("upload_form.estimating_fees");const ee=[];for(const K of w.value){await qs(100);const me=K.fileType==="application/epub+zip"||K.fileType==="application/pdf",be=await na({fileSize:K.fileBlob?.size||0,ipfsHash:me&&R.value?void 0:K.ipfsHash});ee.push({...be,ipfsHash:K.ipfsHash})}let Z=new Fi(0);ee.forEach(K=>{const{evmAddress:me,arweaveId:be,ETH:ce,ipfsHash:ge}=K;if(ge){if(ce&&(Z=Z.plus(new Fi(ce)),y.value[ge]=ce),be){N.value.set(ge,{transactionHash:"",arweaveId:be});const Ae=x.value.find(De=>De.thumbnailIpfsHash===ge);Ae&&(Ae.thumbnailArweaveId=be)}!T.value&&me&&(T.value=me)}}),B.value=Z}catch(ee){console.error(ee),b.add({icon:"i-heroicons-exclamation-circle",title:i("upload_form.error_during_upload"),description:ee.message||i("upload_form.fee_estimation_error"),duration:3e3,color:"error"})}finally{I.value=""}},$e=async ee=>{const Z=N.value.get(ee.ipfsHash)||{},{transactionHash:K,arweaveId:me}=Z;if(me||!ee.fileBlob)return;let be=K,ce;const ge=await ee.fileBlob.arrayBuffer();let Ae=Buffer.from(ge),{ipfsHash:De}=ee;if((ee.fileType==="application/epub+zip"||ee.fileType==="application/pdf")&&R.value)if(ee.encryptedIpfsHash)De=ee.encryptedIpfsHash,Ae=ee.encryptedBuffer||Ae,ce=ee.encryptionKey||void 0;else{I.value=i("upload_form.encrypting");const{rawEncryptedKeyAsBase64:Qe,combinedArrayBuffer:Ye}=await sa({data:ge}),et=Buffer.from(Ye);De=await Xr(et)||"",ce=Qe,Ae=et,ee.encryptedIpfsHash=De,ee.encryptedBuffer=et,ee.encryptionKey=ce}if(!be&&(be=await Se(ee,De),!be))throw new Error("TRANSACTION_NOT_SENT");const{arweaveId:qe,arweaveLink:nt}=await Yr(Ae,{fileSize:ee.fileBlob?.size||0,ipfsHash:De,fileType:ee.fileType,txHash:be,token:c.value,key:ce});if(!qe)throw new Error(`Failed to upload file ${ee.fileName} with IPFS hash ${De}`);const We=N.value.get(ee.ipfsHash)||{};if(N.value.set(ee.ipfsHash,{...We,arweaveId:qe,arweaveLink:nt,arweaveKey:ce}),ee.fileName?.endsWith("cover.jpeg")){const Qe=x.value.find(Ye=>Ye.thumbnailIpfsHash===ee.ipfsHash);Qe&&(Qe.thumbnailArweaveId=qe)}k("arweaveUploaded",{arweaveId:qe,arweaveLink:nt})},Se=async(ee,Z)=>{const K=ee.ipfsHash;if(!K)throw new Error("IPFS_HASH_NOT_SET");if(N.value.has(K)){const be=N.value.get(K);if(be&&be.transactionHash)return be.transactionHash}if((!n.value||!s.value)&&await a(),!n.value||!s.value)throw new Error("SIGNER_NOT_INITED");if(!T.value)throw new Error("TARGET_ADDRESS_NOT_SET");if(!y.value[K])throw new Error("ARWEAVE_FEE_NOT_SET");I.value=i("upload_form.checking_balance");const me=JSON.stringify({ipfs:Z||K,fileSize:ee.fileBlob?.size||0});try{await h({wallet:n.value,to:T.value,value:Kr(y.value[K]),data:`0x${Buffer.from(me,"utf-8").toString("hex")}`}),I.value=i("upload_form.waiting_signature");const be=await f({to:T.value,value:Kr(y.value[K]),data:`0x${Buffer.from(me,"utf-8").toString("hex")}`});I.value=i("upload_form.waiting_confirmation");const ce=await l({hash:be});if(!ce||ce.status!=="success")throw new Error("INVALID_RECEIPT");if(be){const ge=N.value.get(K)||{};return N.value.set(K,{...ge,transactionHash:be}),be}}finally{I.value=i("upload_form.uploading")}return""},He=async(ee,Z)=>{if(!ee.fileBlob||!ee.ipfsHash)throw new Error("FILE_BLOB_OR_IPFS_HASH_NOT_SET");const K=await ee.fileBlob.arrayBuffer(),me=Buffer.from(K),{arweaveId:be,arweaveLink:ce}=await Yr(me,{fileSize:ee.fileBlob.size||0,ipfsHash:ee.ipfsHash,fileType:ee.fileType,txHash:Z,token:c.value});return{arweaveId:be,arweaveLink:ce}},Xe=async()=>{const ee=x.value.find(Z=>Z.coverData||Z.thumbnailIpfsHash);if(!ee?.thumbnailArweaveId)for(let Z=0;Z<w.value.length;Z+=1){const K=w.value[Z];if(!K||!K.fileType?.startsWith("image"))continue;const me=N.value.get(K.ipfsHash)||{};let{transactionHash:be,arweaveId:ce,arweaveLink:ge}=me;if(!ce){be||(be=await Se(K));const Ae=await He(K,be);ce=Ae.arweaveId,ge=Ae.arweaveLink,ce&&N.value.set(K.ipfsHash,{transactionHash:be,arweaveId:ce,arweaveLink:ge})}if(ce){ee&&K.ipfsHash===ee.thumbnailIpfsHash&&(ee.thumbnailArweaveId=ce);break}console.error(`Failed to upload image file ${K.fileName} to Arweave`)}},Ne=async()=>{try{if(s.value||await a(),!s.value)throw new Error("SIGNER_NOT_INITED");if(I.value=i("upload_form.uploading"),!w.value.some(Z=>Z.fileBlob))throw new Error("NO_FILE_TO_UPLOAD");I.value=i("upload_form.uploading"),w.value.find(Z=>Z.fileType==="application/pdf")&&!w.value.find(Z=>Z.fileType==="application/epub+zip")&&(I.value=i("upload_form.preparing_cover"),await Xe());for(let Z=0;Z<w.value.length;Z+=1){const K=w.value[Z];K&&(I.value=i("upload_form.processing_file",{index:Z+1,total:w.value.length}),await $e(K))}}catch(Z){console.error(Z),I.value="",b.add({icon:"i-heroicons-exclamation-circle",title:i("upload_form.error_during_upload"),description:Z.message||i("upload_form.upload_error_occurred"),duration:3e3,color:"error"});return}finally{I.value=""}w.value.forEach((Z,K)=>{if(!(!Z||!w.value[K])&&N.value.has(Z.ipfsHash)){const me=N.value.get(Z.ipfsHash);if(me){const{arweaveId:be,arweaveLink:ce,arweaveKey:ge}=me;be&&(w.value[K].arweaveId=be),ce&&(w.value[K].arweaveLink=ce),ge&&(w.value[K].arweaveKey=ge)}}});const ee={fileRecords:w.value.map(Z=>({fileType:Z.fileType,fileName:Z.fileName,arweaveId:Z.arweaveId,arweaveLink:Z.arweaveLink,arweaveKey:Z.arweaveKey,ipfsHash:Z.ipfsHash})),epubMetadata:x.value[0]};k("submit",ee)},Le=()=>{const ee=w.value.filter(be=>be.fileType==="application/pdf"),Z=w.value.filter(be=>be.fileType==="application/epub+zip"),K=w.value.filter(be=>be.fileType?.startsWith("image/")),me=K.filter(be=>!be.fileName?.endsWith("_cover.jpeg"));return Z.length===0&&ee.length===0?{valid:!1,error:i("upload_form.missing_ebook_file")}:ee.length>1?{valid:!1,error:i("upload_form.too_many_pdfs")}:me.length>1?{valid:!1,error:i("upload_form.only_one_cover_image")}:ee.length>0&&K.length===0?{valid:!1,error:i("upload_form.missing_cover_for_pdf"),canProceedAnyway:!1}:Z.length>0&&K.length===0?{valid:!1,error:i("upload_form.missing_cover_for_epub"),canProceedAnyway:!1}:{valid:!0}},Oe=async()=>{j.value=!1,H.value&&(H.value=!1,await Ne())};return e({onSubmit:async()=>{const ee=Le();if(!ee.valid){L.value=ee.error||"",X.value=ee.canProceedAnyway!==!1,j.value=!0,H.value=!0;return}await Ne()},validateFiles:Le}),(ee,Z)=>{const K=Jn,me=es,be=ha,ce=ia,ge=zs,Ae=Us,De=ts;return ht(),Et("div",Po,[ke("div",zo,[ke("form",{class:xr([oe(ie),oe(g)?"bg-white":""]),onDrop:ni(ue,["prevent"]),onDragover:Z[2]||(Z[2]=ni(Pe=>g.value=!0,["prevent"])),onDragleave:Z[3]||(Z[3]=ni(Pe=>g.value=!1,["prevent"])),onClick:Z[4]||(Z[4]=Pe=>ee.$refs.imageFile?.click())},[Ce(K,{name:"i-heroicons-folder-arrow-down",class:"w-5 h-5"}),ke("p",{class:"text-gray-600 my-[16px]",textContent:st(oe(i)("upload_form.drag_files_here"))},null,8,Uo),Ce(me,{type:"button",variant:"ghost",onClick:Z[0]||(Z[0]=ni(Pe=>ee.$refs.imageFile?.click(),["stop"]))},{default:Ge(()=>[Ut(st(oe(i)("common.select_file")),1)]),_:1}),ke("p",{class:"text-xs text-gray-500 mt-2",textContent:st(oe(i)("upload_form.file_size_suggestion"))},null,8,Mo),ke("a",{href:oe(Zr),target:"_blank",rel:"noopener noreferrer",class:"text-xs text-primary-500 hover:text-primary-600 mt-2 flex items-center gap-1",onClick:Z[1]||(Z[1]=ni(()=>{},["stop"]))},[Ce(K,{name:"i-heroicons-question-mark-circle",class:"w-4 h-4"}),Ut(" "+st(oe(i)("upload_form.help_link")),1)],8,qo),ke("input",{ref_key:"imageFile",ref:m,type:"file",multiple:"",class:"hidden",accept:"image/*,application/pdf,application/epub+zip",onChange:ue},null,544)],34),oe(w).length?(ht(),Et("div",Wo,[ke("table",jo,[ke("tbody",Vo,[(ht(!0),Et(Cr,null,Sr(oe(w),({fileData:Pe,fileName:qe,fileSize:nt,fileType:We},Qe)=>(ht(),Et("tr",{key:qe,class:"flex justify-between items-center border-b-shade-gray border-b text-dark-gray hover:bg-light-gray transition-colors w-full"},[ke("td",Ho,[Ce(be,{"file-type":We,"file-data":Pe,size:"small"},null,8,["file-type","file-data"])]),ke("td",null,[ke("div",Go,[ke("p",$o,st(qe),1),ke("p",Zo,st(Math.round((nt||0)*.001))+" KB ",1)])]),ke("td",Xo,[oe(w)[Qe]?.hasValidationIssues?(ht(),Mt(K,{key:0,name:"i-heroicons-exclamation-triangle",class:"w-5 h-5 text-yellow-500 cursor-help",title:oe(i)("upload_form.epub_has_issues"),onClick:Ye=>Te(oe(w)[Qe])},null,8,["title","onClick"])):Rt("",!0),Ce(K,{name:"i-heroicons-trash",class:"cursor-pointer text-red-500",onClick:Ye=>Fe(Qe)},null,8,["onClick"])])]))),128))])])])):Rt("",!0)]),ke("div",Yo,[Ce(ce,{modelValue:oe(R),"onUpdate:modelValue":Z[5]||(Z[5]=Pe=>vi(R)?R.value=Pe:null),label:oe(i)("upload_form.drm_encrypt_disable")},null,8,["modelValue","label"])]),Ce(De,{open:!!oe(I),dismissible:!1,class:"p-4 gap-2"},{body:Ge(()=>[ke("div",Ko,[ke("div",Jo,[Ce(ge,{variant:"soft"},{default:Ge(()=>[Ut(st(oe(I)),1)]),_:1}),ke("p",Qo,st(oe(i)("upload_form.do_not_close_upload")),1)]),Ce(Ae,{animation:"carousel",color:"primary",class:"w-full"})])]),_:1},8,["open"]),Ce(De,{open:oe(j),"onUpdate:open":Z[7]||(Z[7]=Pe=>vi(j)?j.value=Pe:null)},{body:Ge(()=>[ke("div",eu,[Ce(K,{name:"i-heroicons-exclamation-triangle",class:"w-6 h-6 text-yellow-500 shrink-0 mt-0.5"}),ke("div",tu,[ke("h3",iu,st(oe(i)("upload_form.validation_error")),1),ke("p",ru,st(oe(L)),1),ke("p",nu,st(oe(i)("upload_form.valid_combinations")),1),ke("a",{href:oe(Zr),target:"_blank",rel:"noopener noreferrer",class:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1"},[Ce(K,{name:"i-heroicons-question-mark-circle",class:"w-4 h-4"}),Ut(" "+st(oe(i)("upload_form.help_link")),1)],8,su)])])]),footer:Ge(()=>[ke("div",au,[Ce(me,{variant:"outline",color:"neutral",onClick:Z[6]||(Z[6]=Pe=>{j.value=!1,H.value=!1})},{default:Ge(()=>[Ut(st(oe(i)("upload_form.fix_files")),1)]),_:1}),oe(X)?(ht(),Mt(me,{key:0,color:"warning",onClick:Oe},{default:Ge(()=>[Ut(st(oe(i)("upload_form.proceed_anyway")),1)]),_:1})):Rt("",!0)])]),_:1},8,["open"]),Ce(De,{open:oe(te),"onUpdate:open":Z[9]||(Z[9]=Pe=>vi(te)?te.value=Pe:null)},{header:Ge(()=>[ke("div",ou,[Ce(K,{name:"i-heroicons-exclamation-triangle",class:"w-6 h-6 text-yellow-500 shrink-0"}),ke("h3",uu,st(oe(i)("upload_form.epub_validation_title")),1)]),ke("p",lu,st(oe(i)("upload_form.epub_validation_notice")),1)]),body:Ge(()=>[ke("div",hu,[oe(re)?(ht(),Et("div",fu,[ke("p",cu,st(oe(i)("upload_form.epub_validation_errors"))+": ",1),ke("pre",du,st(oe(re)),1)])):Rt("",!0),oe(Q)?(ht(),Et("div",pu,[ke("p",vu,st(oe(i)("upload_form.epub_validation_warnings"))+": ",1),ke("pre",gu,st(oe(Q)),1)])):Rt("",!0)])]),footer:Ge(()=>[Ce(me,{color:"neutral",variant:"ghost",onClick:Z[8]||(Z[8]=Pe=>te.value=!1)},{default:Ge(()=>[Ut(st(oe(i)("auth_state.close")),1)]),_:1})]),_:1},8,["open"])])}}}),bu=Object.assign(yu,{__name:"UploadForm"}),_u=()=>({getFileType:i=>{if(i.startsWith("image/"))return"image";switch(i){case"application/epub+zip":return"epub";case"application/pdf":return"pdf";default:return"other"}},stripHtmlTags:i=>i?i.replace(/<[^>]*>/g,"").trim():"",formatLanguage:i=>{if(!i)return"";const r=i.toLowerCase();return r.startsWith("zh")?"zh":r.startsWith("en")?"en":r}}),wu={class:"flex flex-col gap-6"},Eu={class:"grid grid-cols-3 gap-4"},Au={class:"grid grid-cols-2 gap-4"},Du={class:"space-y-2"},xu={class:"flex flex-col border p-4 rounded-lg gap-4"},Cu={class:"flex flex-col gap-2 mb-4"},Su={class:"flex justify-between items-center"},Tu=["textContent"],ku=["textContent"],Nu={class:"flex justify-between items-end w-full gap-[8px]"},Iu={class:"flex items-center justify-center"},Ru={class:"border p-4 rounded-lg"},Ou={class:"flex justify-between items-center mb-4"},Bu=["textContent"],Lu={class:"grid grid-cols-3 gap-4 flex-1"},Fu=["textContent"],Pu={class:"space-y-4"},zu={class:"w-full flex justify-center items-center gap-2"},Uu=Or({__name:"ISCNForm",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(E,{expose:e}){const{t}=Qn(),i=[{label:"EPUB",value:"epub"},{label:"PDF",value:"pdf"},{label:"Image",value:"image"},{label:"Other",value:"other"}],r=Vs.map(j=>({label:t(j.i18nKey),value:j.value})),n=ot(!1),s=ot(),a=ot([]),l=ot(""),h=Hs(E,"modelValue"),p=ot(""),c=It(()=>{if(!p.value)return!1;try{const j=JSON.parse(p.value),L=JSON.stringify(h.value.contentFingerprints),H=JSON.stringify(j.contentFingerprints);return L!==H}catch{return!1}}),b=It(()=>p.value?JSON.stringify(h.value)!==p.value:!1);Gs(window,"beforeunload",j=>{if(b.value)return j.preventDefault(),j.returnValue=t("unsaved_changes_warning"),t("unsaved_changes_warning")}),$s(()=>{if(b.value)return window.confirm(t("unsaved_changes_warning"))});function m(){p.value=JSON.stringify(h.value)}Zs(()=>{m()}),e({resetSnapshot:m});const O=It(()=>a.value?.length>0),w=It(()=>l.value!==""),f=It(()=>{const j=h.value.description||"";if(j){if(j.length>Bi)return t("validation.description_cannot_exceed",{max:Bi})}else return"Description is required";return!1}),v=It(()=>(h.value.descriptionFull||"").length>Li?t("validation.text_cannot_exceed",{max:Li}):!1),g=It(()=>(h.value.alternativeHeadline||"").length>Oi?t("validation.text_cannot_exceed",{max:Oi}):!1),x=It(()=>{const j=h.value.contentFingerprints.map(X=>X.url),H=oa().API_GET_ARWEAVE_V2_LINK;return j.some(X=>!!X.startsWith(H)||X.includes("?key="))}),B=()=>{h.value.contentFingerprints.push({url:""})},y=j=>{h.value.contentFingerprints.length&&h.value.contentFingerprints.splice(j,1)},T=()=>{h.value.downloadableUrls.push({url:"",type:"",fileName:""})},N=j=>{h.value.downloadableUrls.length&&h.value.downloadableUrls.splice(j,1)},R=async()=>{await s.value.onSubmit()},{getFileType:k}=_u(),I=j=>{const{fileRecords:L,epubMetadata:H}=j;if(!L.length)return;const X=L.filter(re=>re.fileType==="application/pdf"||re.fileType==="application/epub+zip").map(re=>({url:re.arweaveKey?re.arweaveLink||"":`ar://${re.arweaveId}`,type:k(re.fileType||""),fileName:re.fileName||""})),te=[...new Set(L.map(re=>{const Q=re.arweaveKey?re.arweaveLink||"":`ar://${re.arweaveId}`;return re.fileType==="application/epub+zip"||re.fileType==="application/pdf"?Q:`ar://${re.arweaveId}`}).filter(re=>!!re))].map(re=>({url:re}));h.value.downloadableUrls=X,h.value.contentFingerprints=te,H?.thumbnailArweaveId&&(h.value.coverUrl=`ar://${H?.thumbnailArweaveId}`),n.value=!1};return(j,L)=>{const H=Ys,X=Xs,te=ea,re=ta,Q=es,ie=bu,de=ts;return ht(),Et("div",wu,[Ce(X,{label:oe(t)("common.title"),error:!h.value.title&&oe(t)("iscn_form.title_required"),class:"flex-1 text-left",required:""},{default:Ge(()=>[Ce(H,{modelValue:h.value.title,"onUpdate:modelValue":L[0]||(L[0]=ne=>h.value.title=ne),placeholder:oe(t)("iscn_form.enter_iscn_title")},null,8,["modelValue","placeholder"])]),_:1},8,["label","error"]),Ce(X,{label:oe(t)("iscn_form.subtitle"),class:"flex-1 text-left",hint:`${(h.value.alternativeHeadline||"").length}/${oe(Oi)}`,error:oe(g)},{default:Ge(()=>[Ce(H,{modelValue:h.value.alternativeHeadline,"onUpdate:modelValue":L[1]||(L[1]=ne=>h.value.alternativeHeadline=ne),placeholder:oe(t)("iscn_form.enter_subtitle")},null,8,["modelValue","placeholder"])]),_:1},8,["label","hint","error"]),Ce(X,{label:oe(t)("common.description"),class:"flex-1 text-left",hint:`${h.value.description.length}/${oe(Bi)}`,error:oe(f),required:""},{default:Ge(()=>[Ce(te,{modelValue:h.value.description,"onUpdate:modelValue":L[2]||(L[2]=ne=>h.value.description=ne),placeholder:oe(t)("iscn_form.enter_iscn_description"),autoresize:""},null,8,["modelValue","placeholder"])]),_:1},8,["label","hint","error"]),Ce(X,{label:oe(t)("iscn_form.description_full"),class:"flex-1 text-left",hint:`${(h.value.descriptionFull||"").length}/${oe(Li)}`,error:oe(v)},{default:Ge(()=>[Ce(te,{modelValue:h.value.descriptionFull,"onUpdate:modelValue":L[3]||(L[3]=ne=>h.value.descriptionFull=ne),placeholder:oe(t)("iscn_form.enter_iscn_description_full"),autoresize:""},null,8,["modelValue","placeholder"])]),_:1},8,["label","hint","error"]),ke("div",Eu,[Ce(X,{label:oe(t)("form.isbn")},{default:Ge(()=>[Ce(H,{modelValue:h.value.isbn,"onUpdate:modelValue":L[4]||(L[4]=ne=>h.value.isbn=ne),placeholder:oe(t)("form.enter_isbn")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),Ce(X,{label:oe(t)("form.publisher")},{default:Ge(()=>[Ce(H,{modelValue:h.value.publisher,"onUpdate:modelValue":L[5]||(L[5]=ne=>h.value.publisher=ne),placeholder:oe(t)("form.enter_publisher_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),Ce(X,{label:oe(t)("form.publication_date")},{default:Ge(()=>[Ce(H,{modelValue:h.value.publicationDate,"onUpdate:modelValue":L[6]||(L[6]=ne=>h.value.publicationDate=ne),type:"date",placeholder:oe(t)("iscn_form.select_date")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),Ce(X,{label:oe(t)("form.language"),required:""},{default:Ge(()=>[Ce(re,{modelValue:h.value.language,"onUpdate:modelValue":L[7]||(L[7]=ne=>h.value.language=ne),items:oe(Ks),placeholder:oe(t)("iscn_form.select_language")},null,8,["modelValue","items","placeholder"])]),_:1},8,["label"]),Ce(X,{label:oe(t)("form.genre")},{default:Ge(()=>[Ce(re,{modelValue:h.value.genre,"onUpdate:modelValue":L[8]||(L[8]=ne=>h.value.genre=ne),items:oe(r),placeholder:oe(t)("iscn_form.select_genre")},null,8,["modelValue","items","placeholder"])]),_:1},8,["label"]),Ce(X,{required:"",label:oe(t)("form.cover_image"),error:!h.value.coverUrl&&oe(t)("iscn_form.cover_image_required"),class:"text-left"},{default:Ge(()=>[Ce(H,{modelValue:h.value.coverUrl,"onUpdate:modelValue":L[9]||(L[9]=ne=>h.value.coverUrl=ne),placeholder:"ar://{arweave_id}",class:"font-mono"},null,8,["modelValue"])]),_:1},8,["label","error"]),Ce(X,{label:oe(t)("form_labels.book_info")},{default:Ge(()=>[Ce(H,{modelValue:h.value.bookInfoUrl,"onUpdate:modelValue":L[10]||(L[10]=ne=>h.value.bookInfoUrl=ne),placeholder:oe(t)("iscn_form.enter_book_info_url")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),ke("div",Au,[Ce(X,{label:oe(t)("iscn_form.author_name"),error:!h.value.author.name&&oe(t)("iscn_form.author_name_required"),class:"text-left",required:""},{default:Ge(()=>[Ce(H,{modelValue:h.value.author.name,"onUpdate:modelValue":L[11]||(L[11]=ne=>h.value.author.name=ne),placeholder:oe(t)("iscn_form.enter_author_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","error"]),Ce(X,{label:oe(t)("iscn_form.author_description")},{default:Ge(()=>[Ce(te,{modelValue:h.value.author.description,"onUpdate:modelValue":L[12]||(L[12]=ne=>h.value.author.description=ne),placeholder:oe(t)("iscn_form.enter_author_description"),autoresize:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),Ce(X,{label:oe(t)("iscn_form.license"),class:"flex-1"},{default:Ge(()=>[ke("div",Du,[Ce(re,{modelValue:h.value.license,"onUpdate:modelValue":L[13]||(L[13]=ne=>h.value.license=ne),items:oe(Js),placeholder:oe(t)("iscn_form.select_license")},null,8,["modelValue","items","placeholder"]),E.modelValue.license==="Other"?(ht(),Mt(H,{key:0,modelValue:h.value.customLicense,"onUpdate:modelValue":L[14]||(L[14]=ne=>h.value.customLicense=ne),placeholder:oe(t)("iscn_form.enter_custom_license")},null,8,["modelValue","placeholder"])):Rt("",!0)])]),_:1},8,["label"]),ke("div",xu,[ke("div",Cu,[ke("div",Su,[ke("h3",{class:"font-medium",textContent:st(oe(t)("iscn_form.content_fingerprint"))},null,8,Tu)]),oe(c)?(ht(),Et("p",{key:0,class:"text-sm text-amber-600 dark:text-amber-400",textContent:st(oe(t)("iscn_form.content_fingerprint_not_saved"))},null,8,ku)):Rt("",!0)]),(ht(!0),Et(Cr,null,Sr(h.value.contentFingerprints,(ne,ue)=>(ht(),Et("div",{key:ue,class:"flex gap-4 items-end"},[ke("div",Nu,[Ce(X,{class:"w-full",label:`URL #${ue+1}`},{default:Ge(()=>[Ce(H,{modelValue:ne.url,"onUpdate:modelValue":ve=>ne.url=ve,class:"w-full",placeholder:oe(t)("iscn_form.enter_content_fingerprint_url")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),h.value.contentFingerprints.length>1?(ht(),Mt(Q,{key:0,color:"error",class:"w-min",variant:"soft",icon:"i-heroicons-trash",onClick:ve=>y(ue)},null,8,["onClick"])):Rt("",!0)]),ue===h.value.contentFingerprints.length-1?(ht(),Mt(Q,{key:0,variant:"soft",icon:"i-heroicons-plus",class:"mb-[2px]",onClick:B})):Rt("",!0)]))),128)),ke("div",Iu,[Ce(Q,{variant:"soft",label:oe(t)("form.upload_update_content"),onClick:L[15]||(L[15]=ne=>n.value=!0)},null,8,["label"])])]),ke("div",Ru,[ke("div",Ou,[ke("h3",{class:"font-medium",textContent:st(oe(t)("iscn_form.downloadable_url"))},null,8,Bu)]),(ht(!0),Et(Cr,null,Sr(h.value.downloadableUrls,(ne,ue)=>(ht(),Et("div",{key:ue,class:"flex gap-4 items-end"},[ke("div",Lu,[Ce(X,{label:oe(t)("iscn_form.type")},{default:Ge(()=>[Ce(re,{modelValue:ne.type,"onUpdate:modelValue":ve=>ne.type=ve,items:i,placeholder:"Select file type"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),Ce(X,{label:oe(t)("iscn_form.url")},{default:Ge(()=>[Ce(H,{modelValue:ne.url,"onUpdate:modelValue":ve=>ne.url=ve,placeholder:oe(t)("iscn_form.enter_download_url")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]),Ce(X,{label:oe(t)("iscn_form.filename")},{default:Ge(()=>[Ce(H,{modelValue:ne.fileName,"onUpdate:modelValue":ve=>ne.fileName=ve,placeholder:oe(t)("iscn_form.enter_filename")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])])]))),128)),Ce(Q,{variant:"soft",icon:"i-heroicons-plus",class:"mb-[2px]",onClick:T}),h.value.downloadableUrls?.length>1?(ht(),Mt(Q,{key:0,color:"error",variant:"soft",icon:"i-heroicons-trash",onClick:L[16]||(L[16]=ne=>N(h.value.downloadableUrls.length-1))})):Rt("",!0)]),Ce(de,{open:oe(n),"onUpdate:open":L[20]||(L[20]=ne=>vi(n)?n.value=ne:null),dismissible:!1,class:"w-full max-w-[80vw]"},{header:Ge(()=>[ke("h2",{class:"font-bold font-mono",textContent:st(oe(t)("iscn_form.upload_files"))},null,8,Fu)]),body:Ge(()=>[ke("div",Pu,[Ce(ie,{ref_key:"uploadFormRef",ref:s,"default-encrypted":oe(x),onFileUploadStatus:L[17]||(L[17]=ne=>l.value=ne),onFileReady:L[18]||(L[18]=ne=>a.value=ne),onSubmit:I},null,8,["default-encrypted"])])]),footer:Ge(()=>[ke("div",zu,[Ce(Q,{color:"neutral",variant:"soft",onClick:L[19]||(L[19]=ne=>n.value=!1)},{default:Ge(()=>[...L[21]||(L[21]=[Ut(" Cancel ",-1)])]),_:1}),Ce(Q,{color:"primary",loading:!1,disabled:!oe(O)||oe(w),label:oe(t)("iscn_form.confirm_upload"),onClick:R},null,8,["disabled","label"])])]),_:1},8,["open"])])}}}),Yu=Object.assign(Qs(Uu,[["__scopeId","data-v-fa686051"]]),{__name:"ISCNForm"});export{Yu as _,bu as a,_u as u};
