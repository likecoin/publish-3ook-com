{"version":3,"file":"G_i_Bgr2.js","sources":["../../../node_modules/@coinbase/wallet-sdk/dist/core/storage/ScopedLocalStorage.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/error/constants.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/error/utils.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/error/errors.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/type/index.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/type/util.js","../../../node_modules/@coinbase/wallet-sdk/dist/util/cipher.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/scw/SCWKeyManager.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/scw/utils.js","../../../node_modules/@coinbase/wallet-sdk/dist/sdk-info.js","../../../node_modules/@coinbase/wallet-sdk/dist/util/provider.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/scw/SCWSigner.js","../../../node_modules/@noble/hashes/_u64.js","../../../node_modules/@noble/hashes/crypto.js","../../../node_modules/@noble/hashes/utils.js","../../../node_modules/@noble/hashes/sha3.js","../../../node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/util.cjs","../../../node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/abi.cjs","../../../node_modules/@coinbase/wallet-sdk/dist/vendor-js/eth-eip712-util/index.cjs","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/constants.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/type/Web3Response.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkCipher.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkHTTP.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkWebSocket.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/connection/WalletLinkConnection.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/RelayEventManager.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/type/WalletLinkSession.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/util.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/cssReset/cssReset-css.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/cssReset/cssReset.js","../../../node_modules/clsx/dist/clsx.m.js","../../../node_modules/preact/dist/preact.module.js","../../../node_modules/preact/hooks/dist/hooks.module.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/Snackbar/Snackbar-css.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/Snackbar/Snackbar.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/WalletLinkRelayUI.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/RedirectDialog/RedirectDialog-css.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/components/RedirectDialog/RedirectDialog.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/constants.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/WLMobileRelayUI.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/WalletLinkRelay.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/WalletLinkSigner.js","../../../node_modules/@coinbase/wallet-sdk/dist/sign/util.js","../../../node_modules/@coinbase/wallet-sdk/dist/util/checkCrossOriginOpenerPolicy.js","../../../node_modules/@coinbase/wallet-sdk/dist/util/web.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/communicator/Communicator.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/error/serialize.js","../../../node_modules/@coinbase/wallet-sdk/dist/core/provider/interface.js","../../../node_modules/@coinbase/wallet-sdk/dist/CoinbaseWalletProvider.js","../../../node_modules/@coinbase/wallet-sdk/dist/util/validatePreferences.js","../../../node_modules/@coinbase/wallet-sdk/dist/createCoinbaseWalletProvider.js","../../../node_modules/@coinbase/wallet-sdk/dist/createCoinbaseWalletSDK.js"],"sourcesContent":["// Copyright (c) 2018-2024 Coinbase, Inc. <https://www.coinbase.com/>\n// TODO: clean up, or possibly deprecate Storage class\nexport class ScopedLocalStorage {\n    constructor(scope, module) {\n        this.scope = scope;\n        this.module = module;\n    }\n    storeObject(key, item) {\n        this.setItem(key, JSON.stringify(item));\n    }\n    loadObject(key) {\n        const item = this.getItem(key);\n        return item ? JSON.parse(item) : undefined;\n    }\n    setItem(key, value) {\n        localStorage.setItem(this.scopedKey(key), value);\n    }\n    getItem(key) {\n        return localStorage.getItem(this.scopedKey(key));\n    }\n    removeItem(key) {\n        localStorage.removeItem(this.scopedKey(key));\n    }\n    clear() {\n        const prefix = this.scopedKey('');\n        const keysToRemove = [];\n        for (let i = 0; i < localStorage.length; i++) {\n            const key = localStorage.key(i);\n            if (typeof key === 'string' && key.startsWith(prefix)) {\n                keysToRemove.push(key);\n            }\n        }\n        keysToRemove.forEach((key) => localStorage.removeItem(key));\n    }\n    scopedKey(key) {\n        return `-${this.scope}${this.module ? `:${this.module}` : ''}:${key}`;\n    }\n    static clearAll() {\n        new ScopedLocalStorage('CBWSDK').clear();\n        new ScopedLocalStorage('walletlink').clear();\n    }\n}\n//# sourceMappingURL=ScopedLocalStorage.js.map","export const standardErrorCodes = {\n    rpc: {\n        invalidInput: -32000,\n        resourceNotFound: -32001,\n        resourceUnavailable: -32002,\n        transactionRejected: -32003,\n        methodNotSupported: -32004,\n        limitExceeded: -32005,\n        parse: -32700,\n        invalidRequest: -32600,\n        methodNotFound: -32601,\n        invalidParams: -32602,\n        internal: -32603,\n    },\n    provider: {\n        userRejectedRequest: 4001,\n        unauthorized: 4100,\n        unsupportedMethod: 4200,\n        disconnected: 4900,\n        chainDisconnected: 4901,\n        unsupportedChain: 4902,\n    },\n};\nexport const errorValues = {\n    '-32700': {\n        standard: 'JSON RPC 2.0',\n        message: 'Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text.',\n    },\n    '-32600': {\n        standard: 'JSON RPC 2.0',\n        message: 'The JSON sent is not a valid Request object.',\n    },\n    '-32601': {\n        standard: 'JSON RPC 2.0',\n        message: 'The method does not exist / is not available.',\n    },\n    '-32602': {\n        standard: 'JSON RPC 2.0',\n        message: 'Invalid method parameter(s).',\n    },\n    '-32603': {\n        standard: 'JSON RPC 2.0',\n        message: 'Internal JSON-RPC error.',\n    },\n    '-32000': {\n        standard: 'EIP-1474',\n        message: 'Invalid input.',\n    },\n    '-32001': {\n        standard: 'EIP-1474',\n        message: 'Resource not found.',\n    },\n    '-32002': {\n        standard: 'EIP-1474',\n        message: 'Resource unavailable.',\n    },\n    '-32003': {\n        standard: 'EIP-1474',\n        message: 'Transaction rejected.',\n    },\n    '-32004': {\n        standard: 'EIP-1474',\n        message: 'Method not supported.',\n    },\n    '-32005': {\n        standard: 'EIP-1474',\n        message: 'Request limit exceeded.',\n    },\n    '4001': {\n        standard: 'EIP-1193',\n        message: 'User rejected the request.',\n    },\n    '4100': {\n        standard: 'EIP-1193',\n        message: 'The requested account and/or method has not been authorized by the user.',\n    },\n    '4200': {\n        standard: 'EIP-1193',\n        message: 'The requested method is not supported by this Ethereum provider.',\n    },\n    '4900': {\n        standard: 'EIP-1193',\n        message: 'The provider is disconnected from all chains.',\n    },\n    '4901': {\n        standard: 'EIP-1193',\n        message: 'The provider is disconnected from the specified chain.',\n    },\n    '4902': {\n        standard: 'EIP-3085',\n        message: 'Unrecognized chain ID.',\n    },\n};\n//# sourceMappingURL=constants.js.map","import { errorValues, standardErrorCodes } from './constants.js';\nconst FALLBACK_MESSAGE = 'Unspecified error message.';\nexport const JSON_RPC_SERVER_ERROR_MESSAGE = 'Unspecified server error.';\n/**\n * Gets the message for a given code, or a fallback message if the code has\n * no corresponding message.\n */\nexport function getMessageFromCode(code, fallbackMessage = FALLBACK_MESSAGE) {\n    if (code && Number.isInteger(code)) {\n        const codeString = code.toString();\n        if (hasKey(errorValues, codeString)) {\n            return errorValues[codeString].message;\n        }\n        if (isJsonRpcServerError(code)) {\n            return JSON_RPC_SERVER_ERROR_MESSAGE;\n        }\n    }\n    return fallbackMessage;\n}\n/**\n * Returns whether the given code is valid.\n * A code is only valid if it has a message.\n */\nexport function isValidCode(code) {\n    if (!Number.isInteger(code)) {\n        return false;\n    }\n    const codeString = code.toString();\n    if (errorValues[codeString]) {\n        return true;\n    }\n    if (isJsonRpcServerError(code)) {\n        return true;\n    }\n    return false;\n}\n/**\n * Returns the error code from an error object.\n */\nexport function getErrorCode(error) {\n    var _a;\n    if (typeof error === 'number') {\n        return error;\n    }\n    else if (isErrorWithCode(error)) {\n        return (_a = error.code) !== null && _a !== void 0 ? _a : error.errorCode;\n    }\n    return undefined;\n}\nfunction isErrorWithCode(error) {\n    return (typeof error === 'object' &&\n        error !== null &&\n        (typeof error.code === 'number' ||\n            typeof error.errorCode === 'number'));\n}\nexport function serialize(error, { shouldIncludeStack = false } = {}) {\n    const serialized = {};\n    if (error &&\n        typeof error === 'object' &&\n        !Array.isArray(error) &&\n        hasKey(error, 'code') &&\n        isValidCode(error.code)) {\n        const _error = error;\n        serialized.code = _error.code;\n        if (_error.message && typeof _error.message === 'string') {\n            serialized.message = _error.message;\n            if (hasKey(_error, 'data')) {\n                serialized.data = _error.data;\n            }\n        }\n        else {\n            serialized.message = getMessageFromCode(serialized.code);\n            serialized.data = { originalError: assignOriginalError(error) };\n        }\n    }\n    else {\n        serialized.code = standardErrorCodes.rpc.internal;\n        serialized.message = hasStringProperty(error, 'message') ? error.message : FALLBACK_MESSAGE;\n        serialized.data = { originalError: assignOriginalError(error) };\n    }\n    if (shouldIncludeStack) {\n        serialized.stack = hasStringProperty(error, 'stack') ? error.stack : undefined;\n    }\n    return serialized;\n}\n// Internal\nfunction isJsonRpcServerError(code) {\n    return code >= -32099 && code <= -32000;\n}\nfunction assignOriginalError(error) {\n    if (error && typeof error === 'object' && !Array.isArray(error)) {\n        return Object.assign({}, error);\n    }\n    return error;\n}\nfunction hasKey(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction hasStringProperty(obj, prop) {\n    return (typeof obj === 'object' && obj !== null && prop in obj && typeof obj[prop] === 'string');\n}\n//# sourceMappingURL=utils.js.map","import { standardErrorCodes } from './constants.js';\nimport { getMessageFromCode } from './utils.js';\nexport const standardErrors = {\n    rpc: {\n        parse: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.parse, arg),\n        invalidRequest: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.invalidRequest, arg),\n        invalidParams: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.invalidParams, arg),\n        methodNotFound: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.methodNotFound, arg),\n        internal: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.internal, arg),\n        server: (opts) => {\n            if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n                throw new Error('Ethereum RPC Server errors must provide single object argument.');\n            }\n            const { code } = opts;\n            if (!Number.isInteger(code) || code > -32005 || code < -32099) {\n                throw new Error('\"code\" must be an integer such that: -32099 <= code <= -32005');\n            }\n            return getEthJsonRpcError(code, opts);\n        },\n        invalidInput: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.invalidInput, arg),\n        resourceNotFound: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.resourceNotFound, arg),\n        resourceUnavailable: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.resourceUnavailable, arg),\n        transactionRejected: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.transactionRejected, arg),\n        methodNotSupported: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.methodNotSupported, arg),\n        limitExceeded: (arg) => getEthJsonRpcError(standardErrorCodes.rpc.limitExceeded, arg),\n    },\n    provider: {\n        userRejectedRequest: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.userRejectedRequest, arg);\n        },\n        unauthorized: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.unauthorized, arg);\n        },\n        unsupportedMethod: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.unsupportedMethod, arg);\n        },\n        disconnected: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.disconnected, arg);\n        },\n        chainDisconnected: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.chainDisconnected, arg);\n        },\n        unsupportedChain: (arg) => {\n            return getEthProviderError(standardErrorCodes.provider.unsupportedChain, arg);\n        },\n        custom: (opts) => {\n            if (!opts || typeof opts !== 'object' || Array.isArray(opts)) {\n                throw new Error('Ethereum Provider custom errors must provide single object argument.');\n            }\n            const { code, message, data } = opts;\n            if (!message || typeof message !== 'string') {\n                throw new Error('\"message\" must be a nonempty string');\n            }\n            return new EthereumProviderError(code, message, data);\n        },\n    },\n};\n// Internal\nfunction getEthJsonRpcError(code, arg) {\n    const [message, data] = parseOpts(arg);\n    return new EthereumRpcError(code, message || getMessageFromCode(code), data);\n}\nfunction getEthProviderError(code, arg) {\n    const [message, data] = parseOpts(arg);\n    return new EthereumProviderError(code, message || getMessageFromCode(code), data);\n}\nfunction parseOpts(arg) {\n    if (arg) {\n        if (typeof arg === 'string') {\n            return [arg];\n        }\n        else if (typeof arg === 'object' && !Array.isArray(arg)) {\n            const { message, data } = arg;\n            if (message && typeof message !== 'string') {\n                throw new Error('Must specify string message.');\n            }\n            return [message || undefined, data];\n        }\n    }\n    return [];\n}\nclass EthereumRpcError extends Error {\n    constructor(code, message, data) {\n        if (!Number.isInteger(code)) {\n            throw new Error('\"code\" must be an integer.');\n        }\n        if (!message || typeof message !== 'string') {\n            throw new Error('\"message\" must be a nonempty string.');\n        }\n        super(message);\n        this.code = code;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nclass EthereumProviderError extends EthereumRpcError {\n    /**\n     * Create an Ethereum Provider JSON-RPC error.\n     * `code` must be an integer in the 1000 <= 4999 range.\n     */\n    constructor(code, message, data) {\n        if (!isValidEthProviderCode(code)) {\n            throw new Error('\"code\" must be an integer such that: 1000 <= code <= 4999');\n        }\n        super(code, message, data);\n    }\n}\nfunction isValidEthProviderCode(code) {\n    return Number.isInteger(code) && code >= 1000 && code <= 4999;\n}\n//# sourceMappingURL=errors.js.map","export function OpaqueType() {\n    return (value) => value;\n}\nexport const HexString = OpaqueType();\nexport const AddressString = OpaqueType();\nexport const BigIntString = OpaqueType();\nexport function IntNumber(num) {\n    return Math.floor(num);\n}\nexport const RegExpString = OpaqueType();\n//# sourceMappingURL=index.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\n// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { standardErrors } from '../error/errors.js';\nimport { AddressString, BigIntString, HexString, IntNumber, RegExpString } from './index.js';\nconst INT_STRING_REGEX = /^[0-9]*$/;\nconst HEXADECIMAL_STRING_REGEX = /^[a-f0-9]*$/;\n/**\n * @param length number of bytes\n */\nexport function randomBytesHex(length) {\n    return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(length)));\n}\nexport function uint8ArrayToHex(value) {\n    return [...value].map((b) => b.toString(16).padStart(2, '0')).join('');\n}\nexport function hexStringToUint8Array(hexString) {\n    return new Uint8Array(hexString.match(/.{1,2}/g).map((byte) => Number.parseInt(byte, 16)));\n}\nexport function hexStringFromBuffer(buf, includePrefix = false) {\n    const hex = buf.toString('hex');\n    return HexString(includePrefix ? `0x${hex}` : hex);\n}\nexport function encodeToHexString(str) {\n    return hexStringFromBuffer(ensureBuffer(str), true);\n}\nexport function bigIntStringFromBigInt(bi) {\n    return BigIntString(bi.toString(10));\n}\nexport function intNumberFromHexString(hex) {\n    return IntNumber(Number(BigInt(ensureEvenLengthHexString(hex, true))));\n}\nexport function hexStringFromNumber(num) {\n    return HexString(`0x${BigInt(num).toString(16)}`);\n}\nexport function has0xPrefix(str) {\n    return str.startsWith('0x') || str.startsWith('0X');\n}\nexport function strip0x(hex) {\n    if (has0xPrefix(hex)) {\n        return hex.slice(2);\n    }\n    return hex;\n}\nexport function prepend0x(hex) {\n    if (has0xPrefix(hex)) {\n        return `0x${hex.slice(2)}`;\n    }\n    return `0x${hex}`;\n}\nexport function isHexString(hex) {\n    if (typeof hex !== 'string') {\n        return false;\n    }\n    const s = strip0x(hex).toLowerCase();\n    return HEXADECIMAL_STRING_REGEX.test(s);\n}\nexport function ensureHexString(hex, includePrefix = false) {\n    if (typeof hex === 'string') {\n        const s = strip0x(hex).toLowerCase();\n        if (HEXADECIMAL_STRING_REGEX.test(s)) {\n            return HexString(includePrefix ? `0x${s}` : s);\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`\"${String(hex)}\" is not a hexadecimal string`);\n}\nexport function ensureEvenLengthHexString(hex, includePrefix = false) {\n    let h = ensureHexString(hex, false);\n    if (h.length % 2 === 1) {\n        h = HexString(`0${h}`);\n    }\n    return includePrefix ? HexString(`0x${h}`) : h;\n}\nexport function ensureAddressString(str) {\n    if (typeof str === 'string') {\n        const s = strip0x(str).toLowerCase();\n        if (isHexString(s) && s.length === 40) {\n            return AddressString(prepend0x(s));\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(str)}`);\n}\nexport function ensureBuffer(str) {\n    if (Buffer.isBuffer(str)) {\n        return str;\n    }\n    if (typeof str === 'string') {\n        if (isHexString(str)) {\n            const s = ensureEvenLengthHexString(str, false);\n            return Buffer.from(s, 'hex');\n        }\n        return Buffer.from(str, 'utf8');\n    }\n    throw standardErrors.rpc.invalidParams(`Not binary data: ${String(str)}`);\n}\nexport function ensureIntNumber(num) {\n    if (typeof num === 'number' && Number.isInteger(num)) {\n        return IntNumber(num);\n    }\n    if (typeof num === 'string') {\n        if (INT_STRING_REGEX.test(num)) {\n            return IntNumber(Number(num));\n        }\n        if (isHexString(num)) {\n            return IntNumber(Number(BigInt(ensureEvenLengthHexString(num, true))));\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`Not an integer: ${String(num)}`);\n}\nexport function ensureRegExpString(regExp) {\n    if (regExp instanceof RegExp) {\n        return RegExpString(regExp.toString());\n    }\n    throw standardErrors.rpc.invalidParams(`Not a RegExp: ${String(regExp)}`);\n}\nexport function ensureBigInt(val) {\n    if (val !== null && (typeof val === 'bigint' || isBigNumber(val))) {\n        return BigInt(val.toString(10));\n    }\n    if (typeof val === 'number') {\n        return BigInt(ensureIntNumber(val));\n    }\n    if (typeof val === 'string') {\n        if (INT_STRING_REGEX.test(val)) {\n            return BigInt(val);\n        }\n        if (isHexString(val)) {\n            return BigInt(ensureEvenLengthHexString(val, true));\n        }\n    }\n    throw standardErrors.rpc.invalidParams(`Not an integer: ${String(val)}`);\n}\nexport function ensureParsedJSONObject(val) {\n    if (typeof val === 'string') {\n        return JSON.parse(val);\n    }\n    if (typeof val === 'object') {\n        return val;\n    }\n    throw standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(val)}`);\n}\nexport function isBigNumber(val) {\n    if (val == null || typeof val.constructor !== 'function') {\n        return false;\n    }\n    const { constructor } = val;\n    return typeof constructor.config === 'function' && typeof constructor.EUCLID === 'number';\n}\nexport function range(start, stop) {\n    return Array.from({ length: stop - start }, (_, i) => start + i);\n}\nexport function getFavicon() {\n    const el = document.querySelector('link[sizes=\"192x192\"]') ||\n        document.querySelector('link[sizes=\"180x180\"]') ||\n        document.querySelector('link[rel=\"icon\"]') ||\n        document.querySelector('link[rel=\"shortcut icon\"]');\n    const { protocol, host } = document.location;\n    const href = el ? el.getAttribute('href') : null;\n    if (!href || href.startsWith('javascript:') || href.startsWith('vbscript:')) {\n        return `${protocol}//${host}/favicon.ico`; // fallback\n    }\n    if (href.startsWith('http://') || href.startsWith('https://') || href.startsWith('data:')) {\n        return href;\n    }\n    if (href.startsWith('//')) {\n        return protocol + href;\n    }\n    return `${protocol}//${host}${href}`;\n}\nexport function areAddressArraysEqual(arr1, arr2) {\n    return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n//# sourceMappingURL=util.js.map","import { hexStringToUint8Array, uint8ArrayToHex } from '../core/type/util.js';\nexport async function generateKeyPair() {\n    return crypto.subtle.generateKey({\n        name: 'ECDH',\n        namedCurve: 'P-256',\n    }, true, ['deriveKey']);\n}\nexport async function deriveSharedSecret(ownPrivateKey, peerPublicKey) {\n    return crypto.subtle.deriveKey({\n        name: 'ECDH',\n        public: peerPublicKey,\n    }, ownPrivateKey, {\n        name: 'AES-GCM',\n        length: 256,\n    }, false, ['encrypt', 'decrypt']);\n}\nexport async function encrypt(sharedSecret, plainText) {\n    const iv = crypto.getRandomValues(new Uint8Array(12));\n    const cipherText = await crypto.subtle.encrypt({\n        name: 'AES-GCM',\n        iv,\n    }, sharedSecret, new TextEncoder().encode(plainText));\n    return { iv, cipherText };\n}\nexport async function decrypt(sharedSecret, { iv, cipherText }) {\n    const plainText = await crypto.subtle.decrypt({\n        name: 'AES-GCM',\n        iv,\n    }, sharedSecret, cipherText);\n    return new TextDecoder().decode(plainText);\n}\nfunction getFormat(keyType) {\n    switch (keyType) {\n        case 'public':\n            return 'spki';\n        case 'private':\n            return 'pkcs8';\n    }\n}\nexport async function exportKeyToHexString(type, key) {\n    const format = getFormat(type);\n    const exported = await crypto.subtle.exportKey(format, key);\n    return uint8ArrayToHex(new Uint8Array(exported));\n}\nexport async function importKeyFromHexString(type, hexString) {\n    const format = getFormat(type);\n    const arrayBuffer = hexStringToUint8Array(hexString).buffer;\n    return await crypto.subtle.importKey(format, new Uint8Array(arrayBuffer), {\n        name: 'ECDH',\n        namedCurve: 'P-256',\n    }, true, type === 'private' ? ['deriveKey'] : []);\n}\nexport async function encryptContent(content, sharedSecret) {\n    const serialized = JSON.stringify(content, (_, value) => {\n        if (!(value instanceof Error))\n            return value;\n        const error = value;\n        return Object.assign(Object.assign({}, (error.code ? { code: error.code } : {})), { message: error.message });\n    });\n    return encrypt(sharedSecret, serialized);\n}\nexport async function decryptContent(encryptedData, sharedSecret) {\n    return JSON.parse(await decrypt(sharedSecret, encryptedData));\n}\n//# sourceMappingURL=cipher.js.map","import { ScopedLocalStorage } from '../../core/storage/ScopedLocalStorage.js';\nimport { deriveSharedSecret, exportKeyToHexString, generateKeyPair, importKeyFromHexString, } from '../../util/cipher.js';\nconst OWN_PRIVATE_KEY = {\n    storageKey: 'ownPrivateKey',\n    keyType: 'private',\n};\nconst OWN_PUBLIC_KEY = {\n    storageKey: 'ownPublicKey',\n    keyType: 'public',\n};\nconst PEER_PUBLIC_KEY = {\n    storageKey: 'peerPublicKey',\n    keyType: 'public',\n};\nexport class SCWKeyManager {\n    constructor() {\n        this.storage = new ScopedLocalStorage('CBWSDK', 'SCWKeyManager');\n        this.ownPrivateKey = null;\n        this.ownPublicKey = null;\n        this.peerPublicKey = null;\n        this.sharedSecret = null;\n    }\n    async getOwnPublicKey() {\n        await this.loadKeysIfNeeded();\n        return this.ownPublicKey;\n    }\n    // returns null if the shared secret is not yet derived\n    async getSharedSecret() {\n        await this.loadKeysIfNeeded();\n        return this.sharedSecret;\n    }\n    async setPeerPublicKey(key) {\n        this.sharedSecret = null;\n        this.peerPublicKey = key;\n        await this.storeKey(PEER_PUBLIC_KEY, key);\n        await this.loadKeysIfNeeded();\n    }\n    async clear() {\n        this.ownPrivateKey = null;\n        this.ownPublicKey = null;\n        this.peerPublicKey = null;\n        this.sharedSecret = null;\n        this.storage.removeItem(OWN_PUBLIC_KEY.storageKey);\n        this.storage.removeItem(OWN_PRIVATE_KEY.storageKey);\n        this.storage.removeItem(PEER_PUBLIC_KEY.storageKey);\n    }\n    async generateKeyPair() {\n        const newKeyPair = await generateKeyPair();\n        this.ownPrivateKey = newKeyPair.privateKey;\n        this.ownPublicKey = newKeyPair.publicKey;\n        await this.storeKey(OWN_PRIVATE_KEY, newKeyPair.privateKey);\n        await this.storeKey(OWN_PUBLIC_KEY, newKeyPair.publicKey);\n    }\n    async loadKeysIfNeeded() {\n        if (this.ownPrivateKey === null) {\n            this.ownPrivateKey = await this.loadKey(OWN_PRIVATE_KEY);\n        }\n        if (this.ownPublicKey === null) {\n            this.ownPublicKey = await this.loadKey(OWN_PUBLIC_KEY);\n        }\n        if (this.ownPrivateKey === null || this.ownPublicKey === null) {\n            await this.generateKeyPair();\n        }\n        if (this.peerPublicKey === null) {\n            this.peerPublicKey = await this.loadKey(PEER_PUBLIC_KEY);\n        }\n        if (this.sharedSecret === null) {\n            if (this.ownPrivateKey === null || this.peerPublicKey === null)\n                return;\n            this.sharedSecret = await deriveSharedSecret(this.ownPrivateKey, this.peerPublicKey);\n        }\n    }\n    // storage methods\n    async loadKey(item) {\n        const key = this.storage.getItem(item.storageKey);\n        if (!key)\n            return null;\n        return importKeyFromHexString(item.keyType, key);\n    }\n    async storeKey(item, key) {\n        const hexString = await exportKeyToHexString(item.keyType, key);\n        this.storage.setItem(item.storageKey, hexString);\n    }\n}\n//# sourceMappingURL=SCWKeyManager.js.map","import { isAddress } from 'viem';\nimport { standardErrors } from '../../core/error/errors.js';\nexport function assertGetCapabilitiesParams(params) {\n    if (!params || !Array.isArray(params) || (params.length !== 1 && params.length !== 2)) {\n        throw standardErrors.rpc.invalidParams();\n    }\n    if (typeof params[0] !== 'string' || !isAddress(params[0])) {\n        throw standardErrors.rpc.invalidParams();\n    }\n    if (params.length === 2) {\n        if (!Array.isArray(params[1])) {\n            throw standardErrors.rpc.invalidParams();\n        }\n        for (const param of params[1]) {\n            if (typeof param !== 'string' || !param.startsWith('0x')) {\n                throw standardErrors.rpc.invalidParams();\n            }\n        }\n    }\n}\n//# sourceMappingURL=utils.js.map","export const VERSION = '4.3.7';\nexport const NAME = '@coinbase/wallet-sdk';\n//# sourceMappingURL=sdk-info.js.map","import { NAME, VERSION } from '../sdk-info.js';\nimport { standardErrors } from '../core/error/errors.js';\nexport async function fetchRPCRequest(request, rpcUrl) {\n    const requestBody = Object.assign(Object.assign({}, request), { jsonrpc: '2.0', id: crypto.randomUUID() });\n    const res = await window.fetch(rpcUrl, {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        mode: 'cors',\n        headers: {\n            'Content-Type': 'application/json',\n            'X-Cbw-Sdk-Version': VERSION,\n            'X-Cbw-Sdk-Platform': NAME,\n        },\n    });\n    const { result, error } = await res.json();\n    if (error)\n        throw error;\n    return result;\n}\nfunction getCoinbaseInjectedLegacyProvider() {\n    const window = globalThis;\n    return window.coinbaseWalletExtension;\n}\nfunction getInjectedEthereum() {\n    var _a, _b;\n    try {\n        const window = globalThis;\n        return (_b = (_a = window.top) === null || _a === void 0 ? void 0 : _a.ethereum) !== null && _b !== void 0 ? _b : window.ethereum;\n    }\n    catch (_c) {\n        return undefined;\n    }\n}\nexport function getCoinbaseInjectedProvider({ metadata, preference, }) {\n    var _a, _b;\n    const { appName, appLogoUrl, appChainIds } = metadata;\n    if (preference.options !== 'smartWalletOnly') {\n        const extension = getCoinbaseInjectedLegacyProvider();\n        if (extension) {\n            (_a = extension.setAppInfo) === null || _a === void 0 ? void 0 : _a.call(extension, appName, appLogoUrl, appChainIds, preference);\n            return extension;\n        }\n    }\n    const ethereum = getInjectedEthereum();\n    if (ethereum === null || ethereum === void 0 ? void 0 : ethereum.isCoinbaseBrowser) {\n        (_b = ethereum.setAppInfo) === null || _b === void 0 ? void 0 : _b.call(ethereum, appName, appLogoUrl, appChainIds, preference);\n        return ethereum;\n    }\n    return undefined;\n}\n/**\n * Validates the arguments for an invalid request and returns an error if any validation fails.\n * Valid request args are defined here: https://eips.ethereum.org/EIPS/eip-1193#request\n * @param args The request arguments to validate.\n * @returns An error object if the arguments are invalid, otherwise undefined.\n */\nexport function checkErrorForInvalidRequestArgs(args) {\n    if (!args || typeof args !== 'object' || Array.isArray(args)) {\n        throw standardErrors.rpc.invalidParams({\n            message: 'Expected a single, non-array, object argument.',\n            data: args,\n        });\n    }\n    const { method, params } = args;\n    if (typeof method !== 'string' || method.length === 0) {\n        throw standardErrors.rpc.invalidParams({\n            message: \"'args.method' must be a non-empty string.\",\n            data: args,\n        });\n    }\n    if (params !== undefined &&\n        !Array.isArray(params) &&\n        (typeof params !== 'object' || params === null)) {\n        throw standardErrors.rpc.invalidParams({\n            message: \"'args.params' must be an object or array if provided.\",\n            data: args,\n        });\n    }\n    switch (method) {\n        case 'eth_sign':\n        case 'eth_signTypedData_v2':\n        case 'eth_subscribe':\n        case 'eth_unsubscribe':\n            throw standardErrors.provider.unsupportedMethod();\n    }\n}\n//# sourceMappingURL=provider.js.map","import { hexToNumber, isAddressEqual } from 'viem';\nimport { SCWKeyManager } from './SCWKeyManager.js';\nimport { assertGetCapabilitiesParams } from './utils.js';\nimport { standardErrors } from '../../core/error/errors.js';\nimport { ScopedLocalStorage } from '../../core/storage/ScopedLocalStorage.js';\nimport { ensureIntNumber, hexStringFromNumber } from '../../core/type/util.js';\nimport { decryptContent, encryptContent, exportKeyToHexString, importKeyFromHexString, } from '../../util/cipher.js';\nimport { fetchRPCRequest } from '../../util/provider.js';\nconst ACCOUNTS_KEY = 'accounts';\nconst ACTIVE_CHAIN_STORAGE_KEY = 'activeChain';\nconst AVAILABLE_CHAINS_STORAGE_KEY = 'availableChains';\nconst WALLET_CAPABILITIES_STORAGE_KEY = 'walletCapabilities';\nexport class SCWSigner {\n    constructor(params) {\n        var _a, _b, _c;\n        this.metadata = params.metadata;\n        this.communicator = params.communicator;\n        this.callback = params.callback;\n        this.keyManager = new SCWKeyManager();\n        this.storage = new ScopedLocalStorage('CBWSDK', 'SCWStateManager');\n        this.accounts = (_a = this.storage.loadObject(ACCOUNTS_KEY)) !== null && _a !== void 0 ? _a : [];\n        this.chain = this.storage.loadObject(ACTIVE_CHAIN_STORAGE_KEY) || {\n            id: (_c = (_b = params.metadata.appChainIds) === null || _b === void 0 ? void 0 : _b[0]) !== null && _c !== void 0 ? _c : 1,\n        };\n        this.handshake = this.handshake.bind(this);\n        this.request = this.request.bind(this);\n        this.createRequestMessage = this.createRequestMessage.bind(this);\n        this.decryptResponseMessage = this.decryptResponseMessage.bind(this);\n    }\n    async handshake(args) {\n        var _a, _b, _c, _d;\n        // Open the popup before constructing the request message.\n        // This is to ensure that the popup is not blocked by some browsers (i.e. Safari)\n        await ((_b = (_a = this.communicator).waitForPopupLoaded) === null || _b === void 0 ? void 0 : _b.call(_a));\n        const handshakeMessage = await this.createRequestMessage({\n            handshake: {\n                method: args.method,\n                params: Object.assign({}, this.metadata, (_c = args.params) !== null && _c !== void 0 ? _c : {}),\n            },\n        });\n        const response = await this.communicator.postRequestAndWaitForResponse(handshakeMessage);\n        // store peer's public key\n        if ('failure' in response.content)\n            throw response.content.failure;\n        const peerPublicKey = await importKeyFromHexString('public', response.sender);\n        await this.keyManager.setPeerPublicKey(peerPublicKey);\n        const decrypted = await this.decryptResponseMessage(response);\n        const result = decrypted.result;\n        if ('error' in result)\n            throw result.error;\n        switch (args.method) {\n            case 'eth_requestAccounts': {\n                const accounts = result.value;\n                this.accounts = accounts;\n                this.storage.storeObject(ACCOUNTS_KEY, accounts);\n                (_d = this.callback) === null || _d === void 0 ? void 0 : _d.call(this, 'accountsChanged', accounts);\n                break;\n            }\n        }\n    }\n    async request(request) {\n        var _a;\n        if (this.accounts.length === 0) {\n            switch (request.method) {\n                case 'wallet_sendCalls':\n                    return this.sendRequestToPopup(request);\n                default:\n                    throw standardErrors.provider.unauthorized();\n            }\n        }\n        switch (request.method) {\n            case 'eth_requestAccounts':\n                (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'connect', { chainId: hexStringFromNumber(this.chain.id) });\n                return this.accounts;\n            case 'eth_accounts':\n                return this.accounts;\n            case 'eth_coinbase':\n                return this.accounts[0];\n            case 'net_version':\n                return this.chain.id;\n            case 'eth_chainId':\n                return hexStringFromNumber(this.chain.id);\n            case 'wallet_getCapabilities':\n                return this.handleGetCapabilitiesRequest(request);\n            case 'wallet_switchEthereumChain':\n                return this.handleSwitchChainRequest(request);\n            case 'eth_ecRecover':\n            case 'personal_sign':\n            case 'wallet_sign':\n            case 'personal_ecRecover':\n            case 'eth_signTransaction':\n            case 'eth_sendTransaction':\n            case 'eth_signTypedData_v1':\n            case 'eth_signTypedData_v3':\n            case 'eth_signTypedData_v4':\n            case 'eth_signTypedData':\n            case 'wallet_addEthereumChain':\n            case 'wallet_watchAsset':\n            case 'wallet_sendCalls':\n            case 'wallet_showCallsStatus':\n            case 'wallet_grantPermissions':\n                return this.sendRequestToPopup(request);\n            default:\n                if (!this.chain.rpcUrl)\n                    throw standardErrors.rpc.internal('No RPC URL set for chain');\n                return fetchRPCRequest(request, this.chain.rpcUrl);\n        }\n    }\n    async sendRequestToPopup(request) {\n        var _a, _b;\n        // Open the popup before constructing the request message.\n        // This is to ensure that the popup is not blocked by some browsers (i.e. Safari)\n        await ((_b = (_a = this.communicator).waitForPopupLoaded) === null || _b === void 0 ? void 0 : _b.call(_a));\n        const response = await this.sendEncryptedRequest(request);\n        const decrypted = await this.decryptResponseMessage(response);\n        const result = decrypted.result;\n        if ('error' in result)\n            throw result.error;\n        return result.value;\n    }\n    async cleanup() {\n        var _a, _b;\n        this.storage.clear();\n        await this.keyManager.clear();\n        this.accounts = [];\n        this.chain = {\n            id: (_b = (_a = this.metadata.appChainIds) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : 1,\n        };\n    }\n    /**\n     * @returns `null` if the request was successful.\n     * https://eips.ethereum.org/EIPS/eip-3326#wallet_switchethereumchain\n     */\n    async handleSwitchChainRequest(request) {\n        var _a;\n        const params = request.params;\n        if (!params || !((_a = params[0]) === null || _a === void 0 ? void 0 : _a.chainId)) {\n            throw standardErrors.rpc.invalidParams();\n        }\n        const chainId = ensureIntNumber(params[0].chainId);\n        const localResult = this.updateChain(chainId);\n        if (localResult)\n            return null;\n        const popupResult = await this.sendRequestToPopup(request);\n        if (popupResult === null) {\n            this.updateChain(chainId);\n        }\n        return popupResult;\n    }\n    async handleGetCapabilitiesRequest(request) {\n        assertGetCapabilitiesParams(request.params);\n        const requestedAccount = request.params[0];\n        const filterChainIds = request.params[1]; // Optional second parameter\n        if (!this.accounts.some((account) => isAddressEqual(account, requestedAccount))) {\n            throw standardErrors.provider.unauthorized('no active account found');\n        }\n        const capabilities = this.storage.loadObject(WALLET_CAPABILITIES_STORAGE_KEY);\n        // Return empty object if capabilities is undefined\n        if (!capabilities) {\n            return {};\n        }\n        // If no filter is provided, return all capabilities\n        if (!filterChainIds || filterChainIds.length === 0) {\n            return capabilities;\n        }\n        // Convert filter chain IDs to numbers once for efficient lookup\n        const filterChainNumbers = new Set(filterChainIds.map((chainId) => hexToNumber(chainId)));\n        // Filter capabilities\n        const filteredCapabilities = Object.fromEntries(Object.entries(capabilities).filter(([capabilityKey]) => {\n            try {\n                const capabilityChainNumber = hexToNumber(capabilityKey);\n                return filterChainNumbers.has(capabilityChainNumber);\n            }\n            catch (_a) {\n                // If capabilityKey is not a valid hex string, exclude it\n                return false;\n            }\n        }));\n        return filteredCapabilities;\n    }\n    async sendEncryptedRequest(request) {\n        const sharedSecret = await this.keyManager.getSharedSecret();\n        if (!sharedSecret) {\n            throw standardErrors.provider.unauthorized('No valid session found, try requestAccounts before other methods');\n        }\n        const encrypted = await encryptContent({\n            action: request,\n            chainId: this.chain.id,\n        }, sharedSecret);\n        const message = await this.createRequestMessage({ encrypted });\n        return this.communicator.postRequestAndWaitForResponse(message);\n    }\n    async createRequestMessage(content) {\n        const publicKey = await exportKeyToHexString('public', await this.keyManager.getOwnPublicKey());\n        return {\n            id: crypto.randomUUID(),\n            sender: publicKey,\n            content,\n            timestamp: new Date(),\n        };\n    }\n    async decryptResponseMessage(message) {\n        var _a, _b;\n        const content = message.content;\n        // throw protocol level error\n        if ('failure' in content) {\n            throw content.failure;\n        }\n        const sharedSecret = await this.keyManager.getSharedSecret();\n        if (!sharedSecret) {\n            throw standardErrors.provider.unauthorized('Invalid session');\n        }\n        const response = await decryptContent(content.encrypted, sharedSecret);\n        const availableChains = (_a = response.data) === null || _a === void 0 ? void 0 : _a.chains;\n        if (availableChains) {\n            const chains = Object.entries(availableChains).map(([id, rpcUrl]) => ({\n                id: Number(id),\n                rpcUrl,\n            }));\n            this.storage.storeObject(AVAILABLE_CHAINS_STORAGE_KEY, chains);\n            this.updateChain(this.chain.id, chains);\n        }\n        const walletCapabilities = (_b = response.data) === null || _b === void 0 ? void 0 : _b.capabilities;\n        if (walletCapabilities) {\n            this.storage.storeObject(WALLET_CAPABILITIES_STORAGE_KEY, walletCapabilities);\n        }\n        return response;\n    }\n    updateChain(chainId, newAvailableChains) {\n        var _a;\n        const chains = newAvailableChains !== null && newAvailableChains !== void 0 ? newAvailableChains : this.storage.loadObject(AVAILABLE_CHAINS_STORAGE_KEY);\n        const chain = chains === null || chains === void 0 ? void 0 : chains.find((chain) => chain.id === chainId);\n        if (!chain)\n            return false;\n        if (chain !== this.chain) {\n            this.chain = chain;\n            this.storage.storeObject(ACTIVE_CHAIN_STORAGE_KEY, chain);\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'chainChanged', hexStringFromNumber(chain.id));\n        }\n        return true;\n    }\n}\n//# sourceMappingURL=SCWSigner.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toBig = exports.shrSL = exports.shrSH = exports.rotrSL = exports.rotrSH = exports.rotrBL = exports.rotrBH = exports.rotr32L = exports.rotr32H = exports.rotlSL = exports.rotlSH = exports.rotlBL = exports.rotlBH = exports.add5L = exports.add5H = exports.add4L = exports.add4H = exports.add3L = exports.add3H = void 0;\nexports.add = add;\nexports.fromBig = fromBig;\nexports.split = split;\n/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for (let i = 0; i < len; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nexports.shrSH = shrSH;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.shrSL = shrSL;\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nexports.rotrSH = rotrSH;\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.rotrSL = rotrSL;\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nexports.rotrBH = rotrBH;\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\nexports.rotrBL = rotrBL;\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nexports.rotr32H = rotr32H;\nconst rotr32L = (h, _l) => h;\nexports.rotr32L = rotr32L;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nexports.rotlSH = rotlSH;\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\nexports.rotlSL = rotlSL;\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nexports.rotlBH = rotlBH;\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\nexports.rotlBL = rotlBL;\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nexports.add3L = add3L;\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nexports.add3H = add3H;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nexports.add4L = add4L;\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nexports.add4H = add4H;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nexports.add5L = add5L;\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\nexports.add5H = add5H;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.Hash = exports.nextTick = exports.swap32IfBE = exports.byteSwapIfBE = exports.swap8IfBE = exports.isLE = void 0;\nexports.isBytes = isBytes;\nexports.anumber = anumber;\nexports.abytes = abytes;\nexports.ahash = ahash;\nexports.aexists = aexists;\nexports.aoutput = aoutput;\nexports.u8 = u8;\nexports.u32 = u32;\nexports.clean = clean;\nexports.createView = createView;\nexports.rotr = rotr;\nexports.rotl = rotl;\nexports.byteSwap = byteSwap;\nexports.byteSwap32 = byteSwap32;\nexports.bytesToHex = bytesToHex;\nexports.hexToBytes = hexToBytes;\nexports.asyncLoop = asyncLoop;\nexports.utf8ToBytes = utf8ToBytes;\nexports.bytesToUtf8 = bytesToUtf8;\nexports.toBytes = toBytes;\nexports.kdfInputToBytes = kdfInputToBytes;\nexports.concatBytes = concatBytes;\nexports.checkOpts = checkOpts;\nexports.createHasher = createHasher;\nexports.createOptHasher = createOptHasher;\nexports.createXOFer = createXOFer;\nexports.randomBytes = randomBytes;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nfunction isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nfunction anumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error('positive integer expected, got ' + n);\n}\n/** Asserts something is Uint8Array. */\nfunction abytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error('Uint8Array expected of length ' + lengths + ', got length=' + b.length);\n}\n/** Asserts something is hash */\nfunction ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nfunction aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nfunction aoutput(out, instance) {\n    abytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('digestInto() expects output buffer of length at least ' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nfunction u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nfunction u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nfunction clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nfunction createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nfunction rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nfunction rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexports.isLE = (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nfunction byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexports.swap8IfBE = exports.isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** @deprecated */\nexports.byteSwapIfBE = exports.swap8IfBE;\n/** In place byte swap for Uint32Array */\nfunction byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nexports.swap32IfBE = exports.isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(Uint8Array.from([97, 98, 99])) // 'abc'\n */\nfunction bytesToUtf8(bytes) {\n    return new TextDecoder().decode(bytes);\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nfunction kdfInputToBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/** Copies several Uint8Arrays into one. */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** For runtime check if class implements interface */\nclass Hash {\n}\nexports.Hash = Hash;\n/** Wraps hash function, creating an interface on top of it */\nfunction createHasher(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nfunction createOptHasher(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nfunction createXOFer(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructor = createHasher;\nexports.wrapConstructorWithOpts = createOptHasher;\nexports.wrapXOFConstructorWithOpts = createXOFer;\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    // Legacy Node.js compatibility\n    if (crypto_1.crypto && typeof crypto_1.crypto.randomBytes === 'function') {\n        return Uint8Array.from(crypto_1.crypto.randomBytes(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shake256 = exports.shake128 = exports.keccak_512 = exports.keccak_384 = exports.keccak_256 = exports.keccak_224 = exports.sha3_512 = exports.sha3_384 = exports.sha3_256 = exports.sha3_224 = exports.Keccak = void 0;\nexports.keccakP = keccakP;\n/**\n * SHA3 (keccak) hash function, based on a new \"Sponge function\" design.\n * Different from older hashes, the internal state is bigger than output size.\n *\n * Check out [FIPS-202](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf),\n * [Website](https://keccak.team/keccak.html),\n * [the differences between SHA-3 and Keccak](https://crypto.stackexchange.com/questions/15727/what-are-the-key-differences-between-the-draft-sha-3-standard-and-the-keccak-sub).\n *\n * Check out `sha3-addons` module for cSHAKE, k12, and others.\n * @module\n */\nconst _u64_ts_1 = require(\"./_u64.js\");\n// prettier-ignore\nconst utils_ts_1 = require(\"./utils.js\");\n// No __PURE__ annotations in sha3 header:\n// EVERYTHING is in fact used on every export.\n// Various per round constants calculations\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _7n = BigInt(7);\nconst _256n = BigInt(256);\nconst _0x71n = BigInt(0x71);\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = [];\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst IOTAS = (0, _u64_ts_1.split)(_SHA3_IOTA, true);\nconst SHA3_IOTA_H = IOTAS[0];\nconst SHA3_IOTA_L = IOTAS[1];\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? (0, _u64_ts_1.rotlBH)(h, l, s) : (0, _u64_ts_1.rotlSH)(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? (0, _u64_ts_1.rotlBL)(h, l, s) : (0, _u64_ts_1.rotlSL)(h, l, s));\n/** `keccakf1600` internal function, additionally allows to adjust round count. */\nfunction keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    (0, utils_ts_1.clean)(B);\n}\n/** Keccak sponge function. */\nclass Keccak extends utils_ts_1.Hash {\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        super();\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        this.enableXOF = false;\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        // Can be passed from user as dkLen\n        (0, utils_ts_1.anumber)(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        // 0 < blockLen < 200\n        if (!(0 < blockLen && blockLen < 200))\n            throw new Error('only keccak-f1600 function is supported');\n        this.state = new Uint8Array(200);\n        this.state32 = (0, utils_ts_1.u32)(this.state);\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    keccak() {\n        (0, utils_ts_1.swap32IfBE)(this.state32);\n        keccakP(this.state32, this.rounds);\n        (0, utils_ts_1.swap32IfBE)(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        (0, utils_ts_1.aexists)(this);\n        data = (0, utils_ts_1.toBytes)(data);\n        (0, utils_ts_1.abytes)(data);\n        const { blockLen, state } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        (0, utils_ts_1.aexists)(this, false);\n        (0, utils_ts_1.abytes)(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        (0, utils_ts_1.anumber)(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        (0, utils_ts_1.aoutput)(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        (0, utils_ts_1.clean)(this.state);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nexports.Keccak = Keccak;\nconst gen = (suffix, blockLen, outputLen) => (0, utils_ts_1.createHasher)(() => new Keccak(blockLen, suffix, outputLen));\n/** SHA3-224 hash function. */\nexports.sha3_224 = (() => gen(0x06, 144, 224 / 8))();\n/** SHA3-256 hash function. Different from keccak-256. */\nexports.sha3_256 = (() => gen(0x06, 136, 256 / 8))();\n/** SHA3-384 hash function. */\nexports.sha3_384 = (() => gen(0x06, 104, 384 / 8))();\n/** SHA3-512 hash function. */\nexports.sha3_512 = (() => gen(0x06, 72, 512 / 8))();\n/** keccak-224 hash function. */\nexports.keccak_224 = (() => gen(0x01, 144, 224 / 8))();\n/** keccak-256 hash function. Different from SHA3-256. */\nexports.keccak_256 = (() => gen(0x01, 136, 256 / 8))();\n/** keccak-384 hash function. */\nexports.keccak_384 = (() => gen(0x01, 104, 384 / 8))();\n/** keccak-512 hash function. */\nexports.keccak_512 = (() => gen(0x01, 72, 512 / 8))();\nconst genShake = (suffix, blockLen, outputLen) => (0, utils_ts_1.createXOFer)((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true));\n/** SHAKE128 XOF with 128-bit security. */\nexports.shake128 = (() => genShake(0x1f, 168, 128 / 8))();\n/** SHAKE256 XOF with 256-bit security. */\nexports.shake256 = (() => genShake(0x1f, 136, 256 / 8))();\n//# sourceMappingURL=sha3.js.map","// Extracted from https://github.com/ethereumjs/ethereumjs-util and stripped out irrelevant code\n// Original code licensed under the Mozilla Public License Version 2.0\n\n/* eslint-disable */\n//prettier-ignore\nconst { keccak_256 } = require('@noble/hashes/sha3')\n\n/**\n * Returns a buffer filled with 0s\n * @method zeros\n * @param {Number} bytes  the number of bytes the buffer should be\n * @return {Buffer}\n */\nfunction zeros (bytes) {\n  return Buffer.allocUnsafe(bytes).fill(0)\n}\n\nfunction bitLengthFromBigInt (num) {\n  return num.toString(2).length\n}\n\nfunction bufferBEFromBigInt(num, length) {\n  let hex = num.toString(16);\n  // Ensure the hex string length is even\n  if (hex.length % 2 !== 0) hex = '0' + hex;\n  // Convert hex string to a byte array\n  const byteArray = hex.match(/.{1,2}/g).map(byte => parseInt(byte, 16));\n  // Ensure the byte array is of the specified length\n  while (byteArray.length < length) {\n    byteArray.unshift(0); // Prepend with zeroes if shorter than required length\n  }\n\n  return Buffer.from(byteArray);\n}\n\nfunction twosFromBigInt(value, width) {\n  const isNegative = value < 0n;\n  let result;\n  if (isNegative) {\n    // Prepare a mask for the specified width to perform NOT operation\n    const mask = (1n << BigInt(width)) - 1n;\n    // Invert bits (using NOT) and add one\n    result = (~value & mask) + 1n;\n  } else {\n    result = value;\n  }\n  // Ensure the result fits in the specified width\n  result &= (1n << BigInt(width)) - 1n;\n\n  return result;\n}\n\n/**\n * Left Pads an `Array` or `Buffer` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @method setLength\n * @param {Buffer|Array} msg the value to pad\n * @param {Number} length the number of bytes the output should be\n * @param {Boolean} [right=false] whether to start padding form the left or right\n * @return {Buffer|Array}\n */\nfunction setLength (msg, length, right) {\n  const buf = zeros(length)\n  msg = toBuffer(msg)\n  if (right) {\n    if (msg.length < length) {\n      msg.copy(buf)\n      return buf\n    }\n    return msg.slice(0, length)\n  } else {\n    if (msg.length < length) {\n      msg.copy(buf, length - msg.length)\n      return buf\n    }\n    return msg.slice(-length)\n  }\n}\n\n/**\n * Right Pads an `Array` or `Buffer` with leading zeros till it has `length` bytes.\n * Or it truncates the beginning if it exceeds.\n * @param {Buffer|Array} msg the value to pad\n * @param {Number} length the number of bytes the output should be\n * @return {Buffer|Array}\n */\nfunction setLengthRight (msg, length) {\n  return setLength(msg, length, true)\n}\n\n/**\n * Attempts to turn a value into a `Buffer`. As input it supports `Buffer`, `String`, `Number`, null/undefined, `BIgInt` and other objects with a `toArray()` method.\n * @param {*} v the value\n */\nfunction toBuffer (v) {\n  if (!Buffer.isBuffer(v)) {\n    if (Array.isArray(v)) {\n      v = Buffer.from(v)\n    } else if (typeof v === 'string') {\n      if (isHexString(v)) {\n        v = Buffer.from(padToEven(stripHexPrefix(v)), 'hex')\n      } else {\n        v = Buffer.from(v)\n      }\n    } else if (typeof v === 'number') {\n      v = intToBuffer(v)\n    } else if (v === null || v === undefined) {\n      v = Buffer.allocUnsafe(0)\n    } else if (typeof v === 'bigint') {\n      v = bufferBEFromBigInt(v)\n    } else if (v.toArray) {\n      // TODO: bigint should be handled above, may remove this duplicate\n      // converts a BigInt to a Buffer\n      v = Buffer.from(v.toArray())\n    } else {\n      throw new Error('invalid type')\n    }\n  }\n  return v\n}\n\n/**\n * Converts a `Buffer` into a hex `String`\n * @param {Buffer} buf\n * @return {String}\n */\nfunction bufferToHex (buf) {\n  buf = toBuffer(buf)\n  return '0x' + buf.toString('hex')\n}\n\n/**\n * Creates Keccak hash of the input\n * @param {Buffer|Array|String|Number} a the input data\n * @param {Number} [bits=256] the Keccak width\n * @return {Buffer}\n */\nfunction keccak (a, bits) {\n  a = toBuffer(a)\n  if (!bits) bits = 256\n  if (bits !== 256) {\n    throw new Error('unsupported')\n  }\n  return Buffer.from(keccak_256(new Uint8Array(a)))\n}\n\nfunction padToEven (str) {\n  return str.length % 2 ? '0' + str : str\n}\n\nfunction isHexString (str) {\n  return typeof str === 'string' && str.match(/^0x[0-9A-Fa-f]*$/)\n}\n\nfunction stripHexPrefix (str) {\n  if (typeof str === 'string' && str.startsWith('0x')) {\n    return str.slice(2)\n  }\n  return str\n}\n\nmodule.exports = {\n  zeros,\n  setLength,\n  setLengthRight,\n  isHexString,\n  stripHexPrefix,\n  toBuffer,\n  bufferToHex,\n  keccak,\n  bitLengthFromBigInt,\n  bufferBEFromBigInt,\n  twosFromBigInt\n}\n","// Extracted from https://github.com/ethereumjs/ethereumjs-abi and stripped out irrelevant code\n// Original code licensed under the MIT License - Copyright (c) 2015 Alex Beregszaszi\n\n/* eslint-disable */\n//prettier-ignore\nconst util = require('./util.cjs')\n\n// Convert from short to canonical names\n// FIXME: optimise or make this nicer?\nfunction elementaryName (name) {\n  if (name.startsWith('int[')) {\n    return 'int256' + name.slice(3)\n  } else if (name === 'int') {\n    return 'int256'\n  } else if (name.startsWith('uint[')) {\n    return 'uint256' + name.slice(4)\n  } else if (name === 'uint') {\n    return 'uint256'\n  } else if (name.startsWith('fixed[')) {\n    return 'fixed128x128' + name.slice(5)\n  } else if (name === 'fixed') {\n    return 'fixed128x128'\n  } else if (name.startsWith('ufixed[')) {\n    return 'ufixed128x128' + name.slice(6)\n  } else if (name === 'ufixed') {\n    return 'ufixed128x128'\n  }\n  return name\n}\n\n// Parse N from type<N>\nfunction parseTypeN (type) {\n  return Number.parseInt(/^\\D+(\\d+)$/.exec(type)[1], 10)\n}\n\n// Parse N,M from type<N>x<M>\nfunction parseTypeNxM (type) {\n  var tmp = /^\\D+(\\d+)x(\\d+)$/.exec(type)\n  return [ Number.parseInt(tmp[1], 10), Number.parseInt(tmp[2], 10) ]\n}\n\n// Parse N in type[<N>] where \"type\" can itself be an array type.\nfunction parseTypeArray (type) {\n  var tmp = type.match(/(.*)\\[(.*?)\\]$/)\n  if (tmp) {\n    return tmp[2] === '' ? 'dynamic' : Number.parseInt(tmp[2], 10)\n  }\n  return null\n}\n\nfunction parseNumber (arg) {\n  var type = typeof arg\n  if (type === 'string' || type === 'number') {\n    return BigInt(arg)\n  } else if (type === 'bigint') {\n    return arg\n  } else {\n    throw new Error('Argument is not a number')\n  }\n}\n\n// Encodes a single item (can be dynamic array)\n// @returns: Buffer\nfunction encodeSingle (type, arg) {\n  var size, num, ret, i\n\n  if (type === 'address') {\n    return encodeSingle('uint160', parseNumber(arg))\n  } else if (type === 'bool') {\n    return encodeSingle('uint8', arg ? 1 : 0)\n  } else if (type === 'string') {\n    return encodeSingle('bytes', new Buffer(arg, 'utf8'))\n  } else if (isArray(type)) {\n    // this part handles fixed-length ([2]) and variable length ([]) arrays\n    // NOTE: we catch here all calls to arrays, that simplifies the rest\n    if (typeof arg.length === 'undefined') {\n      throw new Error('Not an array?')\n    }\n    size = parseTypeArray(type)\n    if (size !== 'dynamic' && size !== 0 && arg.length > size) {\n      throw new Error('Elements exceed array size: ' + size)\n    }\n    ret = []\n    type = type.slice(0, type.lastIndexOf('['))\n    if (typeof arg === 'string') {\n      arg = JSON.parse(arg)\n    }\n    for (i in arg) {\n      ret.push(encodeSingle(type, arg[i]))\n    }\n    if (size === 'dynamic') {\n      var length = encodeSingle('uint256', arg.length)\n      ret.unshift(length)\n    }\n    return Buffer.concat(ret)\n  } else if (type === 'bytes') {\n    arg = new Buffer(arg)\n\n    ret = Buffer.concat([ encodeSingle('uint256', arg.length), arg ])\n\n    if ((arg.length % 32) !== 0) {\n      ret = Buffer.concat([ ret, util.zeros(32 - (arg.length % 32)) ])\n    }\n\n    return ret\n  } else if (type.startsWith('bytes')) {\n    size = parseTypeN(type)\n    if (size < 1 || size > 32) {\n      throw new Error('Invalid bytes<N> width: ' + size)\n    }\n\n    return util.setLengthRight(arg, 32)\n  } else if (type.startsWith('uint')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid uint<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    const bitLength = util.bitLengthFromBigInt(num)\n    if (bitLength > size) {\n      throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + bitLength)\n    }\n\n    if (num < 0) {\n      throw new Error('Supplied uint is negative')\n    }\n\n    return util.bufferBEFromBigInt(num, 32);\n  } else if (type.startsWith('int')) {\n    size = parseTypeN(type)\n    if ((size % 8) || (size < 8) || (size > 256)) {\n      throw new Error('Invalid int<N> width: ' + size)\n    }\n\n    num = parseNumber(arg)\n    const bitLength = util.bitLengthFromBigInt(num)\n    if (bitLength > size) {\n      throw new Error('Supplied int exceeds width: ' + size + ' vs ' + bitLength)\n    }\n\n    const twos = util.twosFromBigInt(num, 256);\n\n    return util.bufferBEFromBigInt(twos, 32);\n  } else if (type.startsWith('ufixed')) {\n    size = parseTypeNxM(type)\n\n    num = parseNumber(arg)\n\n    if (num < 0) {\n      throw new Error('Supplied ufixed is negative')\n    }\n\n    return encodeSingle('uint256', num * BigInt(2) ** BigInt(size[1]))\n  } else if (type.startsWith('fixed')) {\n    size = parseTypeNxM(type)\n\n    return encodeSingle('int256', parseNumber(arg) * BigInt(2) ** BigInt(size[1]))\n  }\n\n  throw new Error('Unsupported or invalid type: ' + type)\n}\n\n// Is a type dynamic?\nfunction isDynamic (type) {\n  // FIXME: handle all types? I don't think anything is missing now\n  return (type === 'string') || (type === 'bytes') || (parseTypeArray(type) === 'dynamic')\n}\n\n// Is a type an array?\nfunction isArray (type) {\n  return type.lastIndexOf(']') === type.length - 1\n}\n\n// Encode a method/event with arguments\n// @types an array of string type names\n// @args  an array of the appropriate values\nfunction rawEncode (types, values) {\n  var output = []\n  var data = []\n\n  var headLength = 32 * types.length\n\n  for (var i in types) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n    var cur = encodeSingle(type, value)\n\n    // Use the head/tail method for storing dynamic data\n    if (isDynamic(type)) {\n      output.push(encodeSingle('uint256', headLength))\n      data.push(cur)\n      headLength += cur.length\n    } else {\n      output.push(cur)\n    }\n  }\n\n  return Buffer.concat(output.concat(data))\n}\n\nfunction solidityPack (types, values) {\n  if (types.length !== values.length) {\n    throw new Error('Number of types are not matching the values')\n  }\n\n  var size, num\n  var ret = []\n\n  for (var i = 0; i < types.length; i++) {\n    var type = elementaryName(types[i])\n    var value = values[i]\n\n    if (type === 'bytes') {\n      ret.push(value)\n    } else if (type === 'string') {\n      ret.push(new Buffer(value, 'utf8'))\n    } else if (type === 'bool') {\n      ret.push(new Buffer(value ? '01' : '00', 'hex'))\n    } else if (type === 'address') {\n      ret.push(util.setLength(value, 20))\n    } else if (type.startsWith('bytes')) {\n      size = parseTypeN(type)\n      if (size < 1 || size > 32) {\n        throw new Error('Invalid bytes<N> width: ' + size)\n      }\n\n      ret.push(util.setLengthRight(value, size))\n    } else if (type.startsWith('uint')) {\n      size = parseTypeN(type)\n      if ((size % 8) || (size < 8) || (size > 256)) {\n        throw new Error('Invalid uint<N> width: ' + size)\n      }\n\n      num = parseNumber(value)\n      const bitLength = util.bitLengthFromBigInt(num)\n      if (bitLength > size) {\n        throw new Error('Supplied uint exceeds width: ' + size + ' vs ' + bitLength)\n      }\n\n      ret.push(util.bufferBEFromBigInt(num, size / 8))\n    } else if (type.startsWith('int')) {\n      size = parseTypeN(type)\n      if ((size % 8) || (size < 8) || (size > 256)) {\n        throw new Error('Invalid int<N> width: ' + size)\n      }\n\n      num = parseNumber(value)\n      const bitLength = util.bitLengthFromBigInt(num)\n      if (bitLength > size) {\n        throw new Error('Supplied int exceeds width: ' + size + ' vs ' + bitLength)\n      }\n\n      const twos = util.twosFromBigInt(num, size);\n      ret.push(util.bufferBEFromBigInt(twos, size / 8))\n    } else {\n      // FIXME: support all other types\n      throw new Error('Unsupported or invalid type: ' + type)\n    }\n  }\n\n  return Buffer.concat(ret)\n}\n\nfunction soliditySHA3 (types, values) {\n  return util.keccak(solidityPack(types, values))\n}\n\nmodule.exports = {\n  rawEncode,\n  solidityPack,\n  soliditySHA3\n}\n","/* eslint-disable */\n//prettier-ignore\n\nconst util = require('./util.cjs')\nconst abi = require('./abi.cjs')\n\nconst TYPED_MESSAGE_SCHEMA = {\n  type: 'object',\n  properties: {\n    types: {\n      type: 'object',\n      additionalProperties: {\n        type: 'array',\n        items: {\n          type: 'object',\n          properties: {\n            name: {type: 'string'},\n            type: {type: 'string'},\n          },\n          required: ['name', 'type'],\n        },\n      },\n    },\n    primaryType: {type: 'string'},\n    domain: {type: 'object'},\n    message: {type: 'object'},\n  },\n  required: ['types', 'primaryType', 'domain', 'message'],\n}\n\n/**\n * A collection of utility functions used for signing typed data\n */\nconst TypedDataUtils = {\n  /**\n   * Encodes an object by encoding and concatenating each of its members\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} data - Object to encode\n   * @param {Object} types - Type definitions\n   * @returns {string} - Encoded representation of an object\n   */\n  encodeData (primaryType, data, types, useV4 = true) {\n    const encodedTypes = ['bytes32']\n    const encodedValues = [this.hashType(primaryType, types)]\n\n    if(useV4) {\n      const encodeField = (name, type, value) => {\n        if (types[type] !== undefined) {\n          return ['bytes32', value == null ?\n            '0x0000000000000000000000000000000000000000000000000000000000000000' :\n            util.keccak(this.encodeData(type, value, types, useV4))]\n        }\n\n        if(value === undefined)\n          throw new Error(`missing value for field ${name} of type ${type}`)\n\n        if (type === 'bytes') {\n          return ['bytes32', util.keccak(value)]\n        }\n\n        if (type === 'string') {\n          // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n          if (typeof value === 'string') {\n            value = Buffer.from(value, 'utf8')\n          }\n          return ['bytes32', util.keccak(value)]\n        }\n\n        if (type.lastIndexOf(']') === type.length - 1) {\n          const parsedType = type.slice(0, type.lastIndexOf('['))\n          const typeValuePairs = value.map(item =>\n            encodeField(name, parsedType, item))\n          return ['bytes32', util.keccak(abi.rawEncode(\n            typeValuePairs.map(([type]) => type),\n            typeValuePairs.map(([, value]) => value),\n          ))]\n        }\n\n        return [type, value]\n      }\n\n      for (const field of types[primaryType]) {\n        const [type, value] = encodeField(field.name, field.type, data[field.name])\n        encodedTypes.push(type)\n        encodedValues.push(value)\n      }\n    } else {\n      for (const field of types[primaryType]) {\n        let value = data[field.name]\n        if (value !== undefined) {\n          if (field.type === 'bytes') {\n            encodedTypes.push('bytes32')\n            value = util.keccak(value)\n            encodedValues.push(value)\n          } else if (field.type === 'string') {\n            encodedTypes.push('bytes32')\n            // convert string to buffer - prevents ethUtil from interpreting strings like '0xabcd' as hex\n            if (typeof value === 'string') {\n              value = Buffer.from(value, 'utf8')\n            }\n            value = util.keccak(value)\n            encodedValues.push(value)\n          } else if (types[field.type] !== undefined) {\n            encodedTypes.push('bytes32')\n            value = util.keccak(this.encodeData(field.type, value, types, useV4))\n            encodedValues.push(value)\n          } else if (field.type.lastIndexOf(']') === field.type.length - 1) {\n            throw new Error('Arrays currently unimplemented in encodeData')\n          } else {\n            encodedTypes.push(field.type)\n            encodedValues.push(value)\n          }\n        }\n      }\n    }\n\n    return abi.rawEncode(encodedTypes, encodedValues)\n  },\n\n  /**\n   * Encodes the type of an object by encoding a comma delimited list of its members\n   *\n   * @param {string} primaryType - Root type to encode\n   * @param {Object} types - Type definitions\n   * @returns {string} - Encoded representation of the type of an object\n   */\n  encodeType (primaryType, types) {\n    let result = ''\n    let deps = this.findTypeDependencies(primaryType, types).filter(dep => dep !== primaryType)\n    deps = [primaryType].concat(deps.sort())\n    for (const type of deps) {\n      const children = types[type]\n      if (!children) {\n        throw new Error('No type definition specified: ' + type)\n      }\n      result += type + '(' + types[type].map(({ name, type }) => type + ' ' + name).join(',') + ')'\n    }\n    return result\n  },\n\n  /**\n   * Finds all types within a type definition object\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} types - Type definitions\n   * @param {Array} results - current set of accumulated types\n   * @returns {Array} - Set of all types found in the type definition\n   */\n  findTypeDependencies (primaryType, types, results = []) {\n    primaryType = primaryType.match(/^\\w*/)[0]\n    if (results.includes(primaryType) || types[primaryType] === undefined) { return results }\n    results.push(primaryType)\n    for (const field of types[primaryType]) {\n      for (const dep of this.findTypeDependencies(field.type, types, results)) {\n        !results.includes(dep) && results.push(dep)\n      }\n    }\n    return results\n  },\n\n  /**\n   * Hashes an object\n   *\n   * @param {string} primaryType - Root type\n   * @param {Object} data - Object to hash\n   * @param {Object} types - Type definitions\n   * @returns {Buffer} - Hash of an object\n   */\n  hashStruct (primaryType, data, types, useV4 = true) {\n    return util.keccak(this.encodeData(primaryType, data, types, useV4))\n  },\n\n  /**\n   * Hashes the type of an object\n   *\n   * @param {string} primaryType - Root type to hash\n   * @param {Object} types - Type definitions\n   * @returns {string} - Hash of an object\n   */\n  hashType (primaryType, types) {\n    return util.keccak(this.encodeType(primaryType, types))\n  },\n\n  /**\n   * Removes properties from a message object that are not defined per EIP-712\n   *\n   * @param {Object} data - typed message object\n   * @returns {Object} - typed message object with only allowed fields\n   */\n  sanitizeData (data) {\n    const sanitizedData = {}\n    for (const key in TYPED_MESSAGE_SCHEMA.properties) {\n      data[key] && (sanitizedData[key] = data[key])\n    }\n    if (sanitizedData.types) {\n      sanitizedData.types = Object.assign({ EIP712Domain: [] }, sanitizedData.types)\n    }\n    return sanitizedData\n  },\n\n  /**\n   * Returns the hash of a typed message as per EIP-712 for signing\n   *\n   * @param {Object} typedData - Types message data to sign\n   * @returns {string} - sha3 hash for signing\n   */\n  hash (typedData, useV4 = true) {\n    const sanitizedData = this.sanitizeData(typedData)\n    const parts = [Buffer.from('1901', 'hex')]\n    parts.push(this.hashStruct('EIP712Domain', sanitizedData.domain, sanitizedData.types, useV4))\n    if (sanitizedData.primaryType !== 'EIP712Domain') {\n      parts.push(this.hashStruct(sanitizedData.primaryType, sanitizedData.message, sanitizedData.types, useV4))\n    }\n    return util.keccak(Buffer.concat(parts))\n  },\n}\n\nmodule.exports = {\n  TYPED_MESSAGE_SCHEMA,\n  TypedDataUtils,\n\n  hashForSignTypedDataLegacy: function (msgParams) {\n    return typedSignatureHashLegacy(msgParams.data)\n  },\n\n  hashForSignTypedData_v3: function (msgParams) {\n    return TypedDataUtils.hash(msgParams.data, false)\n  },\n\n  hashForSignTypedData_v4: function (msgParams) {\n    return TypedDataUtils.hash(msgParams.data)\n  },\n}\n\n/**\n * @param typedData - Array of data along with types, as per EIP712.\n * @returns Buffer\n */\nfunction typedSignatureHashLegacy(typedData) {\n  const error = new Error('Expect argument to be non-empty array')\n  if (typeof typedData !== 'object' || !typedData.length) throw error\n\n  const data = typedData.map(function (e) {\n    return e.type === 'bytes' ? util.toBuffer(e.value) : e.value\n  })\n  const types = typedData.map(function (e) { return e.type })\n  const schema = typedData.map(function (e) {\n    if (!e.name) throw error\n    return e.type + ' ' + e.name\n  })\n\n  return abi.soliditySHA3(\n    ['bytes32', 'bytes32'],\n    [\n      abi.soliditySHA3(new Array(typedData.length).fill('string'), schema),\n      abi.soliditySHA3(types, data)\n    ]\n  )\n}","export const WALLET_USER_NAME_KEY = 'walletUsername';\nexport const LOCAL_STORAGE_ADDRESSES_KEY = 'Addresses';\nexport const APP_VERSION_KEY = 'AppVersion';\n//# sourceMappingURL=constants.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nexport function isErrorResponse(response) {\n    return response.errorMessage !== undefined;\n}\n//# sourceMappingURL=Web3Response.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { hexStringToUint8Array, uint8ArrayToHex } from '../../../../core/type/util.js';\nexport class WalletLinkCipher {\n    // @param secret hex representation of 32-byte secret\n    constructor(secret) {\n        this.secret = secret;\n    }\n    /**\n     *\n     * @param plainText string to be encrypted\n     * returns hex string representation of bytes in the order: initialization vector (iv),\n     * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes. Remaining bytes are the\n     * encrypted plainText.\n     */\n    async encrypt(plainText) {\n        const secret = this.secret;\n        if (secret.length !== 64)\n            throw Error(`secret must be 256 bits`);\n        const ivBytes = crypto.getRandomValues(new Uint8Array(12));\n        const secretKey = await crypto.subtle.importKey('raw', hexStringToUint8Array(secret), { name: 'aes-gcm' }, false, ['encrypt', 'decrypt']);\n        const enc = new TextEncoder();\n        // Will return encrypted plainText with auth tag (ie MAC or checksum) appended at the end\n        const encryptedResult = await window.crypto.subtle.encrypt({\n            name: 'AES-GCM',\n            iv: ivBytes,\n        }, secretKey, enc.encode(plainText));\n        const tagLength = 16;\n        const authTag = encryptedResult.slice(encryptedResult.byteLength - tagLength);\n        const encryptedPlaintext = encryptedResult.slice(0, encryptedResult.byteLength - tagLength);\n        const authTagBytes = new Uint8Array(authTag);\n        const encryptedPlaintextBytes = new Uint8Array(encryptedPlaintext);\n        const concatted = new Uint8Array([...ivBytes, ...authTagBytes, ...encryptedPlaintextBytes]);\n        return uint8ArrayToHex(concatted);\n    }\n    /**\n     *\n     * @param cipherText hex string representation of bytes in the order: initialization vector (iv),\n     * auth tag, encrypted plaintext. IV is 12 bytes. Auth tag is 16 bytes.\n     */\n    async decrypt(cipherText) {\n        const secret = this.secret;\n        if (secret.length !== 64)\n            throw Error(`secret must be 256 bits`);\n        return new Promise((resolve, reject) => {\n            void (async function () {\n                const secretKey = await crypto.subtle.importKey('raw', hexStringToUint8Array(secret), { name: 'aes-gcm' }, false, ['encrypt', 'decrypt']);\n                const encrypted = hexStringToUint8Array(cipherText);\n                const ivBytes = encrypted.slice(0, 12);\n                const authTagBytes = encrypted.slice(12, 28);\n                const encryptedPlaintextBytes = encrypted.slice(28);\n                const concattedBytes = new Uint8Array([...encryptedPlaintextBytes, ...authTagBytes]);\n                const algo = {\n                    name: 'AES-GCM',\n                    iv: new Uint8Array(ivBytes),\n                };\n                try {\n                    const decrypted = await window.crypto.subtle.decrypt(algo, secretKey, concattedBytes);\n                    const decoder = new TextDecoder();\n                    resolve(decoder.decode(decrypted));\n                }\n                catch (err) {\n                    reject(err);\n                }\n            })();\n        });\n    }\n}\n//# sourceMappingURL=WalletLinkCipher.js.map","export class WalletLinkHTTP {\n    constructor(linkAPIUrl, sessionId, sessionKey) {\n        this.linkAPIUrl = linkAPIUrl;\n        this.sessionId = sessionId;\n        const credentials = `${sessionId}:${sessionKey}`;\n        this.auth = `Basic ${btoa(credentials)}`;\n    }\n    // mark unseen events as seen\n    async markUnseenEventsAsSeen(events) {\n        return Promise.all(events.map((e) => fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`, {\n            method: 'POST',\n            headers: {\n                Authorization: this.auth,\n            },\n        }))).catch((error) => console.error('Unabled to mark event as failed:', error));\n    }\n    async fetchUnseenEvents() {\n        var _a;\n        const response = await fetch(`${this.linkAPIUrl}/events?unseen=true`, {\n            headers: {\n                Authorization: this.auth,\n            },\n        });\n        if (response.ok) {\n            const { events, error } = (await response.json());\n            if (error) {\n                throw new Error(`Check unseen events failed: ${error}`);\n            }\n            const responseEvents = (_a = events === null || events === void 0 ? void 0 : events.filter((e) => e.event === 'Web3Response').map((e) => ({\n                type: 'Event',\n                sessionId: this.sessionId,\n                eventId: e.id,\n                event: e.event,\n                data: e.data,\n            }))) !== null && _a !== void 0 ? _a : [];\n            this.markUnseenEventsAsSeen(responseEvents);\n            return responseEvents;\n        }\n        throw new Error(`Check unseen events failed: ${response.status}`);\n    }\n}\n//# sourceMappingURL=WalletLinkHTTP.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nexport var ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"DISCONNECTED\"] = 0] = \"DISCONNECTED\";\n    ConnectionState[ConnectionState[\"CONNECTING\"] = 1] = \"CONNECTING\";\n    ConnectionState[ConnectionState[\"CONNECTED\"] = 2] = \"CONNECTED\";\n})(ConnectionState || (ConnectionState = {}));\nexport class WalletLinkWebSocket {\n    setConnectionStateListener(listener) {\n        this.connectionStateListener = listener;\n    }\n    setIncomingDataListener(listener) {\n        this.incomingDataListener = listener;\n    }\n    /**\n     * Constructor\n     * @param url WebSocket server URL\n     * @param [WebSocketClass] Custom WebSocket implementation\n     */\n    constructor(url, WebSocketClass = WebSocket) {\n        this.WebSocketClass = WebSocketClass;\n        this.webSocket = null;\n        this.isDisconnecting = false;\n        this.url = url.replace(/^http/, 'ws');\n        this.instanceId = WalletLinkWebSocket.instanceCounter++;\n        WalletLinkWebSocket.activeInstances.add(this.instanceId);\n    }\n    /**\n     * Make a websocket connection\n     * @returns a Promise that resolves when connected\n     */\n    async connect() {\n        if (this.webSocket) {\n            throw new Error('webSocket object is not null');\n        }\n        if (this.isDisconnecting) {\n            throw new Error('WebSocket is disconnecting, cannot reconnect on same instance');\n        }\n        return new Promise((resolve, reject) => {\n            var _a;\n            let webSocket;\n            try {\n                this.webSocket = webSocket = new this.WebSocketClass(this.url);\n            }\n            catch (err) {\n                reject(err);\n                return;\n            }\n            (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.CONNECTING);\n            webSocket.onclose = (evt) => {\n                var _a;\n                this.clearWebSocket();\n                // Only reject the connection promise if we haven't connected yet\n                if (webSocket.readyState !== WebSocket.OPEN) {\n                    reject(new Error(`websocket error ${evt.code}: ${evt.reason}`));\n                }\n                (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.DISCONNECTED);\n            };\n            webSocket.onopen = (_) => {\n                var _a;\n                resolve();\n                (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.CONNECTED);\n                if (WalletLinkWebSocket.pendingData.length > 0) {\n                    const pending = [...WalletLinkWebSocket.pendingData];\n                    pending.forEach((data) => this.sendData(data));\n                    WalletLinkWebSocket.pendingData = [];\n                }\n            };\n            webSocket.onmessage = (evt) => {\n                var _a, _b;\n                if (evt.data === 'h') {\n                    (_a = this.incomingDataListener) === null || _a === void 0 ? void 0 : _a.call(this, {\n                        type: 'Heartbeat',\n                    });\n                }\n                else {\n                    try {\n                        const message = JSON.parse(evt.data);\n                        (_b = this.incomingDataListener) === null || _b === void 0 ? void 0 : _b.call(this, message);\n                    }\n                    catch (_c) {\n                        // noop\n                    }\n                }\n            };\n        });\n    }\n    /**\n     * Disconnect from server\n     */\n    disconnect() {\n        var _a;\n        const { webSocket } = this;\n        if (!webSocket) {\n            return;\n        }\n        // Mark as disconnecting to prevent reconnection attempts on this instance\n        this.isDisconnecting = true;\n        this.clearWebSocket();\n        // Clear listeners\n        (_a = this.connectionStateListener) === null || _a === void 0 ? void 0 : _a.call(this, ConnectionState.DISCONNECTED);\n        this.connectionStateListener = undefined;\n        this.incomingDataListener = undefined;\n        try {\n            webSocket.close();\n        }\n        catch (_b) {\n            // noop\n        }\n    }\n    /**\n     * Send data to server\n     * @param data text to send\n     */\n    sendData(data) {\n        const { webSocket } = this;\n        if (!webSocket) {\n            WalletLinkWebSocket.pendingData.push(data);\n            if (!this.isDisconnecting) {\n                this.connect();\n            }\n            return;\n        }\n        // Check if WebSocket is actually open before sending\n        if (webSocket.readyState !== WebSocket.OPEN) {\n            WalletLinkWebSocket.pendingData.push(data);\n            return;\n        }\n        webSocket.send(data);\n    }\n    clearWebSocket() {\n        const { webSocket } = this;\n        if (!webSocket) {\n            return;\n        }\n        this.webSocket = null;\n        webSocket.onclose = null;\n        webSocket.onerror = null;\n        webSocket.onmessage = null;\n        webSocket.onopen = null;\n    }\n    /**\n     * remove ws from active instances\n     */\n    cleanup() {\n        WalletLinkWebSocket.activeInstances.delete(this.instanceId);\n    }\n}\n// used to differentiate instances\nWalletLinkWebSocket.instanceCounter = 0;\nWalletLinkWebSocket.activeInstances = new Set();\nWalletLinkWebSocket.pendingData = [];\n//# sourceMappingURL=WalletLinkWebSocket.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { APP_VERSION_KEY, WALLET_USER_NAME_KEY } from '../constants.js';\nimport { WalletLinkCipher } from './WalletLinkCipher.js';\nimport { WalletLinkHTTP } from './WalletLinkHTTP.js';\nimport { ConnectionState, WalletLinkWebSocket } from './WalletLinkWebSocket.js';\nimport { IntNumber } from '../../../../core/type/index.js';\nconst HEARTBEAT_INTERVAL = 10000;\nconst REQUEST_TIMEOUT = 60000;\n/**\n * Coinbase Wallet Connection\n */\nexport class WalletLinkConnection {\n    /**\n     * Constructor\n     * @param session Session\n     * @param linkAPIUrl Coinbase Wallet link server URL\n     * @param listener WalletLinkConnectionUpdateListener\n     * @param [WebSocketClass] Custom WebSocket implementation\n     */\n    constructor({ session, linkAPIUrl, listener }) {\n        this.destroyed = false;\n        this.lastHeartbeatResponse = 0;\n        this.nextReqId = IntNumber(1);\n        this.reconnectAttempts = 0;\n        this.isReconnecting = false;\n        /**\n         * true if connected and authenticated, else false\n         * runs listener when connected status changes\n         */\n        this._connected = false;\n        /**\n         * true if linked (a guest has joined before)\n         * runs listener when linked status changes\n         */\n        this._linked = false;\n        this.requestResolutions = new Map();\n        this.handleSessionMetadataUpdated = (metadata) => {\n            if (!metadata)\n                return;\n            // Map of metadata key to handler function\n            const handlers = new Map([\n                ['__destroyed', this.handleDestroyed],\n                ['EthereumAddress', this.handleAccountUpdated],\n                ['WalletUsername', this.handleWalletUsernameUpdated],\n                ['AppVersion', this.handleAppVersionUpdated],\n                [\n                    'ChainId', // ChainId and JsonRpcUrl are always updated together\n                    (v) => metadata.JsonRpcUrl && this.handleChainUpdated(v, metadata.JsonRpcUrl),\n                ],\n            ]);\n            // call handler for each metadata key if value is defined\n            handlers.forEach((handler, key) => {\n                const value = metadata[key];\n                if (value === undefined)\n                    return;\n                handler(value);\n            });\n        };\n        this.handleDestroyed = (__destroyed) => {\n            var _a;\n            if (__destroyed !== '1')\n                return;\n            (_a = this.listener) === null || _a === void 0 ? void 0 : _a.resetAndReload();\n        };\n        this.handleAccountUpdated = async (encryptedEthereumAddress) => {\n            var _a;\n            try {\n                const address = await this.cipher.decrypt(encryptedEthereumAddress);\n                (_a = this.listener) === null || _a === void 0 ? void 0 : _a.accountUpdated(address);\n            }\n            catch (_b) {\n                // Had error decrypting\n            }\n        };\n        this.handleMetadataUpdated = async (key, encryptedMetadataValue) => {\n            var _a;\n            try {\n                const decryptedValue = await this.cipher.decrypt(encryptedMetadataValue);\n                (_a = this.listener) === null || _a === void 0 ? void 0 : _a.metadataUpdated(key, decryptedValue);\n            }\n            catch (_b) {\n                // Had error decrypting\n            }\n        };\n        this.handleWalletUsernameUpdated = async (walletUsername) => {\n            this.handleMetadataUpdated(WALLET_USER_NAME_KEY, walletUsername);\n        };\n        this.handleAppVersionUpdated = async (appVersion) => {\n            this.handleMetadataUpdated(APP_VERSION_KEY, appVersion);\n        };\n        this.handleChainUpdated = async (encryptedChainId, encryptedJsonRpcUrl) => {\n            var _a;\n            try {\n                const chainId = await this.cipher.decrypt(encryptedChainId);\n                const jsonRpcUrl = await this.cipher.decrypt(encryptedJsonRpcUrl);\n                (_a = this.listener) === null || _a === void 0 ? void 0 : _a.chainUpdated(chainId, jsonRpcUrl);\n            }\n            catch (_b) {\n                // Had error decrypting\n            }\n        };\n        this.session = session;\n        this.cipher = new WalletLinkCipher(session.secret);\n        this.listener = listener;\n        this.linkAPIUrl = linkAPIUrl;\n        this.WebSocketClass = WebSocket;\n        const ws = this.createWebSocket();\n        this.ws = ws;\n        this.http = new WalletLinkHTTP(linkAPIUrl, session.id, session.key);\n        this.setupVisibilityChangeHandler();\n    }\n    createWebSocket() {\n        const ws = new WalletLinkWebSocket(`${this.linkAPIUrl}/rpc`, this.WebSocketClass);\n        // Track this as the active WebSocket instance\n        this.activeWsInstance = ws;\n        ws.setConnectionStateListener(async (state) => {\n            // Ignore events from non-active WebSocket instances\n            if (ws !== this.activeWsInstance) {\n                return;\n            }\n            // attempt to reconnect every 5 seconds when disconnected\n            let connected = false;\n            switch (state) {\n                case ConnectionState.DISCONNECTED:\n                    // Clear heartbeat timer when disconnected\n                    if (this.heartbeatIntervalId) {\n                        clearInterval(this.heartbeatIntervalId);\n                        this.heartbeatIntervalId = undefined;\n                    }\n                    // Reset lastHeartbeatResponse to prevent false timeout on reconnection\n                    this.lastHeartbeatResponse = 0;\n                    // Reset connected state to false on disconnect\n                    connected = false;\n                    // if DISCONNECTED and not destroyed, create a fresh WebSocket connection\n                    if (!this.destroyed) {\n                        const reconnect = async () => {\n                            // Prevent multiple concurrent reconnection attempts\n                            if (this.isReconnecting) {\n                                return;\n                            }\n                            this.isReconnecting = true;\n                            // 0 second delay on first attempt, then 3 seconds\n                            const delay = this.reconnectAttempts === 0 ? 0 : 3000;\n                            // wait before reconnecting\n                            await new Promise((resolve) => setTimeout(resolve, delay));\n                            // check whether it's destroyed again and ensure this is still the active instance\n                            if (!this.destroyed && ws === this.activeWsInstance) {\n                                this.reconnectAttempts++;\n                                // Clean up the old WebSocket instance\n                                if ('cleanup' in this.ws && typeof this.ws.cleanup === 'function') {\n                                    this.ws.cleanup();\n                                }\n                                // Create a fresh WebSocket instance\n                                this.ws = this.createWebSocket();\n                                this.ws\n                                    .connect()\n                                    .catch(() => {\n                                    // Reconnection failed, will retry\n                                })\n                                    .finally(() => {\n                                    this.isReconnecting = false;\n                                });\n                            }\n                            else {\n                                this.isReconnecting = false;\n                            }\n                        };\n                        reconnect();\n                    }\n                    break;\n                case ConnectionState.CONNECTED:\n                    // Reset reconnect attempts on successful connection\n                    this.reconnectAttempts = 0;\n                    // perform authentication upon connection\n                    try {\n                        // if CONNECTED, authenticate, and then check link status\n                        connected = await this.handleConnected();\n                        // Always fetch unseen events when WebSocket state changes to CONNECTED\n                        this.fetchUnseenEventsAPI().catch(() => {\n                            // Failed to fetch unseen events after connection\n                        });\n                    }\n                    catch (_error) {\n                        // Don't set connected to true if authentication fails\n                        break;\n                    }\n                    // Update connected state immediately after successful authentication\n                    // This ensures heartbeats won't be skipped\n                    this.connected = connected;\n                    // send heartbeat every n seconds while connected\n                    // if CONNECTED, start the heartbeat timer\n                    // first timer event updates lastHeartbeat timestamp\n                    // subsequent calls send heartbeat message\n                    this.updateLastHeartbeat();\n                    // Clear existing heartbeat timer\n                    if (this.heartbeatIntervalId) {\n                        clearInterval(this.heartbeatIntervalId);\n                    }\n                    this.heartbeatIntervalId = window.setInterval(() => {\n                        this.heartbeat();\n                    }, HEARTBEAT_INTERVAL);\n                    // Send an immediate heartbeat\n                    setTimeout(() => {\n                        this.heartbeat();\n                    }, 100);\n                    break;\n                case ConnectionState.CONNECTING:\n                    break;\n            }\n            // Update connected state for DISCONNECTED and CONNECTING cases\n            // For CONNECTED case, it's already set above\n            if (state !== ConnectionState.CONNECTED) {\n                this.connected = connected;\n            }\n        });\n        ws.setIncomingDataListener((m) => {\n            var _a;\n            switch (m.type) {\n                // handle server's heartbeat responses\n                case 'Heartbeat':\n                    this.updateLastHeartbeat();\n                    return;\n                // handle link status updates\n                case 'IsLinkedOK':\n                case 'Linked': {\n                    const linked = m.type === 'IsLinkedOK' ? m.linked : undefined;\n                    this.linked = linked || m.onlineGuests > 0;\n                    break;\n                }\n                // handle session config updates\n                case 'GetSessionConfigOK':\n                case 'SessionConfigUpdated': {\n                    this.handleSessionMetadataUpdated(m.metadata);\n                    break;\n                }\n                case 'Event': {\n                    this.handleIncomingEvent(m);\n                    break;\n                }\n            }\n            // resolve request promises\n            if (m.id !== undefined) {\n                (_a = this.requestResolutions.get(m.id)) === null || _a === void 0 ? void 0 : _a(m);\n            }\n        });\n        return ws;\n    }\n    setupVisibilityChangeHandler() {\n        this.visibilityChangeHandler = () => {\n            if (!document.hidden && !this.destroyed) {\n                if (!this.connected) {\n                    // Force a fresh connection if we're disconnected\n                    this.reconnectWithFreshWebSocket();\n                }\n                else {\n                    // Otherwise send a heartbeat to check if connection is still alive\n                    this.heartbeat();\n                }\n            }\n        };\n        // Handle focus events (when user switches back to the tab/app)\n        this.focusHandler = () => {\n            if (!this.destroyed && !this.connected) {\n                this.reconnectWithFreshWebSocket();\n            }\n        };\n        // Add event listeners\n        document.addEventListener('visibilitychange', this.visibilityChangeHandler);\n        window.addEventListener('focus', this.focusHandler);\n        window.addEventListener('pageshow', (event) => {\n            if (event.persisted) {\n                if (this.focusHandler) {\n                    this.focusHandler();\n                }\n            }\n        });\n    }\n    reconnectWithFreshWebSocket() {\n        if (this.destroyed)\n            return;\n        // Clear the active instance reference before disconnecting\n        const oldWs = this.ws;\n        this.activeWsInstance = undefined;\n        // Disconnect current WebSocket\n        oldWs.disconnect();\n        // Clean up the old instance\n        if ('cleanup' in oldWs && typeof oldWs.cleanup === 'function') {\n            oldWs.cleanup();\n        }\n        // Create and connect fresh WebSocket\n        this.ws = this.createWebSocket();\n        this.ws.connect().catch(() => {\n            // Fresh reconnection failed\n        });\n    }\n    /**\n     * Make a connection to the server\n     */\n    connect() {\n        if (this.destroyed) {\n            throw new Error('instance is destroyed');\n        }\n        this.ws.connect();\n    }\n    /**\n     * Terminate connection, and mark as destroyed. To reconnect, create a new\n     * instance of WalletSDKConnection\n     */\n    async destroy() {\n        if (this.destroyed)\n            return;\n        await this.makeRequest({\n            type: 'SetSessionConfig',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n            metadata: { __destroyed: '1' },\n        }, { timeout: 1000 });\n        this.destroyed = true;\n        // Clear the active instance reference\n        this.activeWsInstance = undefined;\n        // Clear heartbeat timer\n        if (this.heartbeatIntervalId) {\n            clearInterval(this.heartbeatIntervalId);\n            this.heartbeatIntervalId = undefined;\n        }\n        // Remove event listeners\n        if (this.visibilityChangeHandler) {\n            document.removeEventListener('visibilitychange', this.visibilityChangeHandler);\n        }\n        if (this.focusHandler) {\n            window.removeEventListener('focus', this.focusHandler);\n        }\n        this.ws.disconnect();\n        // Call cleanup on the WebSocket instance if it has the method\n        if ('cleanup' in this.ws && typeof this.ws.cleanup === 'function') {\n            this.ws.cleanup();\n        }\n        this.listener = undefined;\n    }\n    get connected() {\n        return this._connected;\n    }\n    set connected(connected) {\n        this._connected = connected;\n    }\n    get linked() {\n        return this._linked;\n    }\n    set linked(linked) {\n        var _a, _b;\n        this._linked = linked;\n        if (linked)\n            (_a = this.onceLinked) === null || _a === void 0 ? void 0 : _a.call(this);\n        (_b = this.listener) === null || _b === void 0 ? void 0 : _b.linkedUpdated(linked);\n    }\n    setOnceLinked(callback) {\n        return new Promise((resolve) => {\n            if (this.linked) {\n                callback().then(resolve);\n            }\n            else {\n                this.onceLinked = () => {\n                    callback().then(resolve);\n                    this.onceLinked = undefined;\n                };\n            }\n        });\n    }\n    async handleIncomingEvent(m) {\n        var _a;\n        if (m.type !== 'Event' || m.event !== 'Web3Response') {\n            return;\n        }\n        try {\n            const decryptedData = await this.cipher.decrypt(m.data);\n            const message = JSON.parse(decryptedData);\n            if (message.type !== 'WEB3_RESPONSE')\n                return;\n            (_a = this.listener) === null || _a === void 0 ? void 0 : _a.handleWeb3ResponseMessage(message.id, message.response);\n        }\n        catch (_error) {\n            // Had error decrypting\n        }\n    }\n    async checkUnseenEvents() {\n        // Add a small delay to ensure any pending operations complete\n        await new Promise((resolve) => setTimeout(resolve, 250));\n        try {\n            await this.fetchUnseenEventsAPI();\n        }\n        catch (e) {\n            console.error('Unable to check for unseen events', e);\n        }\n    }\n    async fetchUnseenEventsAPI() {\n        try {\n            const responseEvents = await this.http.fetchUnseenEvents();\n            responseEvents.forEach((e) => {\n                this.handleIncomingEvent(e);\n            });\n        }\n        catch (_error) {\n            // Failed to fetch unseen events\n        }\n    }\n    /**\n     * Publish an event and emit event ID when successful\n     * @param event event name\n     * @param unencryptedData unencrypted event data\n     * @param callWebhook whether the webhook should be invoked\n     * @returns a Promise that emits event ID when successful\n     */\n    async publishEvent(event, unencryptedData, callWebhook = false) {\n        const data = await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({}, unencryptedData), { origin: location.origin, location: location.href, relaySource: 'coinbaseWalletExtension' in window && window.coinbaseWalletExtension\n                ? 'injected_sdk'\n                : 'sdk' })));\n        const message = {\n            type: 'PublishEvent',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n            event,\n            data,\n            callWebhook,\n        };\n        return this.setOnceLinked(async () => {\n            const res = await this.makeRequest(message);\n            if (res.type === 'Fail') {\n                throw new Error(res.error || 'failed to publish event');\n            }\n            return res.eventId;\n        });\n    }\n    sendData(message) {\n        this.ws.sendData(JSON.stringify(message));\n    }\n    updateLastHeartbeat() {\n        this.lastHeartbeatResponse = Date.now();\n    }\n    heartbeat() {\n        if (Date.now() - this.lastHeartbeatResponse > HEARTBEAT_INTERVAL * 2) {\n            this.ws.disconnect();\n            return;\n        }\n        // Only send heartbeat if we're connected\n        if (!this.connected) {\n            return;\n        }\n        try {\n            this.ws.sendData('h');\n        }\n        catch (_error) {\n            // Error sending heartbeat\n        }\n    }\n    async makeRequest(message, options = { timeout: REQUEST_TIMEOUT }) {\n        const reqId = message.id;\n        this.sendData(message);\n        // await server message with corresponding id\n        let timeoutId;\n        return Promise.race([\n            new Promise((_, reject) => {\n                timeoutId = window.setTimeout(() => {\n                    reject(new Error(`request ${reqId} timed out`));\n                }, options.timeout);\n            }),\n            new Promise((resolve) => {\n                this.requestResolutions.set(reqId, (m) => {\n                    clearTimeout(timeoutId); // clear the timeout\n                    resolve(m);\n                    this.requestResolutions.delete(reqId);\n                });\n            }),\n        ]);\n    }\n    async handleConnected() {\n        const res = await this.makeRequest({\n            type: 'HostSession',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n            sessionKey: this.session.key,\n        });\n        if (res.type === 'Fail') {\n            return false;\n        }\n        this.sendData({\n            type: 'IsLinked',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n        });\n        this.sendData({\n            type: 'GetSessionConfig',\n            id: IntNumber(this.nextReqId++),\n            sessionId: this.session.id,\n        });\n        return true;\n    }\n}\n//# sourceMappingURL=WalletLinkConnection.js.map","import { prepend0x } from '../../../core/type/util.js';\nexport class RelayEventManager {\n    constructor() {\n        this._nextRequestId = 0;\n        this.callbacks = new Map();\n    }\n    makeRequestId() {\n        // max nextId == max int32 for compatibility with mobile\n        this._nextRequestId = (this._nextRequestId + 1) % 0x7fffffff;\n        const id = this._nextRequestId;\n        const idStr = prepend0x(id.toString(16));\n        // unlikely that this will ever be an issue, but just to be safe\n        const callback = this.callbacks.get(idStr);\n        if (callback) {\n            this.callbacks.delete(idStr);\n        }\n        return id;\n    }\n}\n//# sourceMappingURL=RelayEventManager.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { sha256 } from '@noble/hashes/sha256';\nimport { bytesToHex } from '@noble/hashes/utils';\nimport { randomBytesHex } from '../../../../core/type/util.js';\nconst STORAGE_KEY_SESSION_ID = 'session:id';\nconst STORAGE_KEY_SESSION_SECRET = 'session:secret';\nconst STORAGE_KEY_SESSION_LINKED = 'session:linked';\nexport class WalletLinkSession {\n    constructor(storage, id, secret, linked = false) {\n        this.storage = storage;\n        this.id = id;\n        this.secret = secret;\n        this.key = bytesToHex(sha256(`${id}, ${secret} WalletLink`));\n        this._linked = !!linked;\n    }\n    static create(storage) {\n        const id = randomBytesHex(16);\n        const secret = randomBytesHex(32);\n        return new WalletLinkSession(storage, id, secret).save();\n    }\n    static load(storage) {\n        const id = storage.getItem(STORAGE_KEY_SESSION_ID);\n        const linked = storage.getItem(STORAGE_KEY_SESSION_LINKED);\n        const secret = storage.getItem(STORAGE_KEY_SESSION_SECRET);\n        if (id && secret) {\n            return new WalletLinkSession(storage, id, secret, linked === '1');\n        }\n        return null;\n    }\n    get linked() {\n        return this._linked;\n    }\n    set linked(val) {\n        this._linked = val;\n        this.persistLinked();\n    }\n    save() {\n        this.storage.setItem(STORAGE_KEY_SESSION_ID, this.id);\n        this.storage.setItem(STORAGE_KEY_SESSION_SECRET, this.secret);\n        this.persistLinked();\n        return this;\n    }\n    persistLinked() {\n        this.storage.setItem(STORAGE_KEY_SESSION_LINKED, this._linked ? '1' : '0');\n    }\n}\n//# sourceMappingURL=WalletLinkSession.js.map","export function createQrUrl(sessionId, sessionSecret, serverUrl, isParentConnection, version, chainId) {\n    const sessionIdKey = isParentConnection ? 'parent-id' : 'id';\n    const query = new URLSearchParams({\n        [sessionIdKey]: sessionId,\n        secret: sessionSecret,\n        server: serverUrl,\n        v: version,\n        chainId: chainId.toString(),\n    }).toString();\n    const qrUrl = `${serverUrl}/#/link?${query}`;\n    return qrUrl;\n}\nfunction isInIFrame() {\n    try {\n        return window.frameElement !== null;\n    }\n    catch (e) {\n        return false;\n    }\n}\nexport function getLocation() {\n    try {\n        if (isInIFrame() && window.top) {\n            return window.top.location;\n        }\n        return window.location;\n    }\n    catch (e) {\n        return window.location;\n    }\n}\nexport function isMobileWeb() {\n    var _a;\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent);\n}\nexport function isDarkMode() {\n    var _a, _b;\n    return (_b = (_a = window === null || window === void 0 ? void 0 : window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, '(prefers-color-scheme: dark)').matches) !== null && _b !== void 0 ? _b : false;\n}\n//# sourceMappingURL=util.js.map","export default (() => `@namespace svg \"http://www.w3.org/2000/svg\";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:\"\\\\201C\" \"\\\\201D\" \"\\\\2018\" \"\\\\2019\";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}`)();\n//# sourceMappingURL=cssReset-css.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport css from './cssReset-css.js';\nexport function injectCssReset() {\n    const styleEl = document.createElement('style');\n    styleEl.type = 'text/css';\n    styleEl.appendChild(document.createTextNode(css));\n    document.documentElement.appendChild(styleEl);\n}\n//# sourceMappingURL=cssReset.js.map","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,r=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,N(f,t,c),r.__e=r.__=null,t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_,m=t&&t.__k||v,b=l.length;for(f=P(u,l,m,f,b),a=0;a<b;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:m[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),(_=!!(4&y.__u))||h.__k===y.__k?f=A(y,f,n,_):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(f=r+h,(o=n.__k[r]=\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?m(null,o,null,null,null):w(o)?m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,e=null,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u,t){var i,r;if(\"function\"==typeof n.type){for(i=n.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=n,l=A(i[r],l,u,t));return l}n.__e!=l&&(t&&(l&&n.type&&!l.parentNode&&(l=S(n)),u.insertBefore(n.__e,l||null)),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o,e=n.key,f=n.type,c=l[u],s=null!=c&&0==(2&c.__u);if(null===c&&null==n.key||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;)if(null!=(c=l[o=i>=0?i--:r++])&&0==(2&c.__u)&&e==c.key&&f==c.type)return o;return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.props=b,h.state||(h.state={}),h.context=M,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)||u.__v==t.__v){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else{for(T=o.length;T--;)g(o[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(V):d({},n)}function q(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),b=i.props||p,!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function B(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&D(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,K as cloneElement,Q as createContext,_ as createElement,b as createRef,_ as h,J as hydrate,t as isValidElement,l as options,G as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","export default (() => `.-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}`)();\n//# sourceMappingURL=Snackbar-css.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { clsx } from 'clsx';\nimport { h, render } from 'preact';\nimport { useEffect, useState } from 'preact/hooks';\nimport { isDarkMode } from '../util.js';\nimport css from './Snackbar-css.js';\nconst cblogo = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+`;\nconst gearIcon = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=`;\nexport class Snackbar {\n    constructor() {\n        this.items = new Map();\n        this.nextItemKey = 0;\n        this.root = null;\n        this.darkMode = isDarkMode();\n    }\n    attach(el) {\n        this.root = document.createElement('div');\n        this.root.className = '-cbwsdk-snackbar-root';\n        el.appendChild(this.root);\n        this.render();\n    }\n    presentItem(itemProps) {\n        const key = this.nextItemKey++;\n        this.items.set(key, itemProps);\n        this.render();\n        return () => {\n            this.items.delete(key);\n            this.render();\n        };\n    }\n    clear() {\n        this.items.clear();\n        this.render();\n    }\n    render() {\n        if (!this.root) {\n            return;\n        }\n        render(h(\"div\", null,\n            h(SnackbarContainer, { darkMode: this.darkMode }, Array.from(this.items.entries()).map(([key, itemProps]) => (h(SnackbarInstance, Object.assign({}, itemProps, { key: key })))))), this.root);\n    }\n}\nexport const SnackbarContainer = (props) => (h(\"div\", { class: clsx('-cbwsdk-snackbar-container') },\n    h(\"style\", null, css),\n    h(\"div\", { class: \"-cbwsdk-snackbar\" }, props.children)));\nexport const SnackbarInstance = ({ autoExpand, message, menuItems, }) => {\n    const [hidden, setHidden] = useState(true);\n    const [expanded, setExpanded] = useState(autoExpand !== null && autoExpand !== void 0 ? autoExpand : false);\n    useEffect(() => {\n        const timers = [\n            window.setTimeout(() => {\n                setHidden(false);\n            }, 1),\n            window.setTimeout(() => {\n                setExpanded(true);\n            }, 10000),\n        ];\n        return () => {\n            timers.forEach(window.clearTimeout);\n        };\n    });\n    const toggleExpanded = () => {\n        setExpanded(!expanded);\n    };\n    return (h(\"div\", { class: clsx('-cbwsdk-snackbar-instance', hidden && '-cbwsdk-snackbar-instance-hidden', expanded && '-cbwsdk-snackbar-instance-expanded') },\n        h(\"div\", { class: \"-cbwsdk-snackbar-instance-header\", onClick: toggleExpanded },\n            h(\"img\", { src: cblogo, class: \"-cbwsdk-snackbar-instance-header-cblogo\" }),\n            ' ',\n            h(\"div\", { class: \"-cbwsdk-snackbar-instance-header-message\" }, message),\n            h(\"div\", { class: \"-gear-container\" },\n                !expanded && (h(\"svg\", { width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                    h(\"circle\", { cx: \"12\", cy: \"12\", r: \"12\", fill: \"#F5F7F8\" }))),\n                h(\"img\", { src: gearIcon, class: \"-gear-icon\", title: \"Expand\" }))),\n        menuItems && menuItems.length > 0 && (h(\"div\", { class: \"-cbwsdk-snackbar-instance-menu\" }, menuItems.map((action, i) => (h(\"div\", { class: clsx('-cbwsdk-snackbar-instance-menu-item', action.isRed && '-cbwsdk-snackbar-instance-menu-item-is-red'), onClick: action.onClick, key: i },\n            h(\"svg\", { width: action.svgWidth, height: action.svgHeight, viewBox: \"0 0 10 11\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n                h(\"path\", { \"fill-rule\": action.defaultFillRule, \"clip-rule\": action.defaultClipRule, d: action.path, fill: \"#AAAAAA\" })),\n            h(\"span\", { class: clsx('-cbwsdk-snackbar-instance-menu-item-info', action.isRed && '-cbwsdk-snackbar-instance-menu-item-info-is-red') }, action.info))))))));\n};\n//# sourceMappingURL=Snackbar.js.map","import { injectCssReset } from './components/cssReset/cssReset.js';\nimport { Snackbar } from './components/Snackbar/Snackbar.js';\nexport const RETRY_SVG_PATH = 'M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z';\nexport class WalletLinkRelayUI {\n    constructor() {\n        this.attached = false;\n        this.snackbar = new Snackbar();\n    }\n    attach() {\n        if (this.attached) {\n            throw new Error('Coinbase Wallet SDK UI is already attached');\n        }\n        const el = document.documentElement;\n        const container = document.createElement('div');\n        container.className = '-cbwsdk-css-reset';\n        el.appendChild(container);\n        this.snackbar.attach(container);\n        this.attached = true;\n        injectCssReset();\n    }\n    showConnecting(options) {\n        let snackbarProps;\n        if (options.isUnlinkedErrorState) {\n            snackbarProps = {\n                autoExpand: true,\n                message: 'Connection lost',\n                menuItems: [\n                    {\n                        isRed: false,\n                        info: 'Reset connection',\n                        svgWidth: '10',\n                        svgHeight: '11',\n                        path: 'M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z',\n                        defaultFillRule: 'evenodd',\n                        defaultClipRule: 'evenodd',\n                        onClick: options.onResetConnection,\n                    },\n                ],\n            };\n        }\n        else {\n            snackbarProps = {\n                message: 'Confirm on phone',\n                menuItems: [\n                    {\n                        isRed: true,\n                        info: 'Cancel transaction',\n                        svgWidth: '11',\n                        svgHeight: '11',\n                        path: 'M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z',\n                        defaultFillRule: 'inherit',\n                        defaultClipRule: 'inherit',\n                        onClick: options.onCancel,\n                    },\n                    {\n                        isRed: false,\n                        info: 'Reset connection',\n                        svgWidth: '10',\n                        svgHeight: '11',\n                        path: RETRY_SVG_PATH,\n                        defaultFillRule: 'evenodd',\n                        defaultClipRule: 'evenodd',\n                        onClick: options.onResetConnection,\n                    },\n                ],\n            };\n        }\n        return this.snackbar.presentItem(snackbarProps);\n    }\n}\n//# sourceMappingURL=WalletLinkRelayUI.js.map","export default (() => `.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}`)();\n//# sourceMappingURL=RedirectDialog-css.js.map","import { clsx } from 'clsx';\nimport { h, render } from 'preact';\nimport { injectCssReset } from '../cssReset/cssReset.js';\nimport { SnackbarContainer } from '../Snackbar/Snackbar.js';\nimport { isDarkMode } from '../util.js';\nimport css from './RedirectDialog-css.js';\nexport class RedirectDialog {\n    constructor() {\n        this.root = null;\n        this.darkMode = isDarkMode();\n    }\n    attach() {\n        const el = document.documentElement;\n        this.root = document.createElement('div');\n        this.root.className = '-cbwsdk-css-reset';\n        el.appendChild(this.root);\n        injectCssReset();\n    }\n    present(props) {\n        this.render(props);\n    }\n    clear() {\n        this.render(null);\n    }\n    render(props) {\n        if (!this.root)\n            return;\n        render(null, this.root);\n        if (!props)\n            return;\n        render(h(RedirectDialogContent, Object.assign({}, props, { onDismiss: () => {\n                this.clear();\n            }, darkMode: this.darkMode })), this.root);\n    }\n}\nconst RedirectDialogContent = ({ title, buttonText, darkMode, onButtonClick, onDismiss }) => {\n    const theme = darkMode ? 'dark' : 'light';\n    return (h(SnackbarContainer, { darkMode: darkMode },\n        h(\"div\", { class: \"-cbwsdk-redirect-dialog\" },\n            h(\"style\", null, css),\n            h(\"div\", { class: \"-cbwsdk-redirect-dialog-backdrop\", onClick: onDismiss }),\n            h(\"div\", { class: clsx('-cbwsdk-redirect-dialog-box', theme) },\n                h(\"p\", null, title),\n                h(\"button\", { onClick: onButtonClick }, buttonText)))));\n};\n//# sourceMappingURL=RedirectDialog.js.map","export const CB_KEYS_URL = 'https://keys.coinbase.com/connect';\nexport const CB_WALLET_RPC_URL = 'https://rpc.wallet.coinbase.com';\nexport const WALLETLINK_URL = 'https://www.walletlink.org';\nexport const CBW_MOBILE_DEEPLINK_URL = 'https://go.cb-w.com/walletlink';\n//# sourceMappingURL=constants.js.map","import { RedirectDialog } from './components/RedirectDialog/RedirectDialog.js';\nimport { getLocation } from './components/util.js';\nimport { CBW_MOBILE_DEEPLINK_URL } from '../../../../core/constants.js';\nexport class WLMobileRelayUI {\n    constructor() {\n        this.attached = false;\n        this.redirectDialog = new RedirectDialog();\n    }\n    attach() {\n        if (this.attached) {\n            throw new Error('Coinbase Wallet SDK UI is already attached');\n        }\n        this.redirectDialog.attach();\n        this.attached = true;\n    }\n    redirectToCoinbaseWallet(walletLinkUrl) {\n        const url = new URL(CBW_MOBILE_DEEPLINK_URL);\n        url.searchParams.append('redirect_url', getLocation().href);\n        if (walletLinkUrl) {\n            url.searchParams.append('wl_url', walletLinkUrl);\n        }\n        const anchorTag = document.createElement('a');\n        anchorTag.target = 'cbw-opener';\n        anchorTag.href = url.href;\n        anchorTag.rel = 'noreferrer noopener';\n        anchorTag.click();\n    }\n    openCoinbaseWalletDeeplink(walletLinkUrl) {\n        // redirect to coinbase wallet immediately to avoid Safari/Chrome popup(deeplink) blocking\n        this.redirectToCoinbaseWallet(walletLinkUrl);\n        setTimeout(() => {\n            this.redirectDialog.present({\n                title: 'Redirecting to Coinbase Wallet...',\n                buttonText: 'Open',\n                onButtonClick: () => {\n                    this.redirectToCoinbaseWallet(walletLinkUrl);\n                },\n            });\n        }, 99);\n    }\n    showConnecting(_options) {\n        // it uses the return callback to clear the dialog\n        return () => {\n            this.redirectDialog.clear();\n        };\n    }\n}\n//# sourceMappingURL=WLMobileRelayUI.js.map","// Copyright (c) 2018-2023 Coinbase, Inc. <https://www.coinbase.com/>\nimport { WalletLinkConnection, } from './connection/WalletLinkConnection.js';\nimport { LOCAL_STORAGE_ADDRESSES_KEY } from './constants.js';\nimport { RelayEventManager } from './RelayEventManager.js';\nimport { WalletLinkSession } from './type/WalletLinkSession.js';\nimport { isErrorResponse } from './type/Web3Response.js';\nimport { isMobileWeb } from './ui/components/util.js';\nimport { WalletLinkRelayUI } from './ui/WalletLinkRelayUI.js';\nimport { WLMobileRelayUI } from './ui/WLMobileRelayUI.js';\nimport { standardErrors } from '../../../core/error/errors.js';\nimport { ScopedLocalStorage } from '../../../core/storage/ScopedLocalStorage.js';\nimport { bigIntStringFromBigInt, hexStringFromBuffer, randomBytesHex } from '../../../core/type/util.js';\nexport class WalletLinkRelay {\n    constructor(options) {\n        this.chainCallbackParams = { chainId: '', jsonRpcUrl: '' }; // to implement distinctUntilChanged\n        this.isMobileWeb = isMobileWeb();\n        this.linkedUpdated = (linked) => {\n            this.isLinked = linked;\n            const cachedAddresses = this.storage.getItem(LOCAL_STORAGE_ADDRESSES_KEY);\n            if (linked) {\n                // Only set linked session variable one way\n                this._session.linked = linked;\n            }\n            this.isUnlinkedErrorState = false;\n            if (cachedAddresses) {\n                const addresses = cachedAddresses.split(' ');\n                const wasConnectedViaStandalone = this.storage.getItem('IsStandaloneSigning') === 'true';\n                if (addresses[0] !== '' && !linked && this._session.linked && !wasConnectedViaStandalone) {\n                    this.isUnlinkedErrorState = true;\n                }\n            }\n        };\n        this.metadataUpdated = (key, value) => {\n            this.storage.setItem(key, value);\n        };\n        this.chainUpdated = (chainId, jsonRpcUrl) => {\n            if (this.chainCallbackParams.chainId === chainId &&\n                this.chainCallbackParams.jsonRpcUrl === jsonRpcUrl) {\n                return;\n            }\n            this.chainCallbackParams = {\n                chainId,\n                jsonRpcUrl,\n            };\n            if (this.chainCallback) {\n                this.chainCallback(jsonRpcUrl, Number.parseInt(chainId, 10));\n            }\n        };\n        this.accountUpdated = (selectedAddress) => {\n            if (this.accountsCallback) {\n                this.accountsCallback([selectedAddress]);\n            }\n            if (WalletLinkRelay.accountRequestCallbackIds.size > 0) {\n                // We get the ethereum address from the metadata.  If for whatever\n                // reason we don't get a response via an explicit web3 message\n                // we can still fulfill the eip1102 request.\n                Array.from(WalletLinkRelay.accountRequestCallbackIds.values()).forEach((id) => {\n                    this.invokeCallback(id, {\n                        method: 'requestEthereumAccounts',\n                        result: [selectedAddress],\n                    });\n                });\n                WalletLinkRelay.accountRequestCallbackIds.clear();\n            }\n        };\n        this.resetAndReload = this.resetAndReload.bind(this);\n        this.linkAPIUrl = options.linkAPIUrl;\n        this.storage = options.storage;\n        this.metadata = options.metadata;\n        this.accountsCallback = options.accountsCallback;\n        this.chainCallback = options.chainCallback;\n        const { session, ui, connection } = this.subscribe();\n        this._session = session;\n        this.connection = connection;\n        this.relayEventManager = new RelayEventManager();\n        this.ui = ui;\n        this.ui.attach();\n    }\n    subscribe() {\n        const session = WalletLinkSession.load(this.storage) || WalletLinkSession.create(this.storage);\n        const { linkAPIUrl } = this;\n        const connection = new WalletLinkConnection({\n            session,\n            linkAPIUrl,\n            listener: this,\n        });\n        const ui = this.isMobileWeb ? new WLMobileRelayUI() : new WalletLinkRelayUI();\n        connection.connect();\n        return { session, ui, connection };\n    }\n    resetAndReload() {\n        this.connection\n            .destroy()\n            .then(() => {\n            /**\n             * Only clear storage if the session id we have in memory matches the one on disk\n             * Otherwise, in the case where we have 2 tabs, another tab might have cleared\n             * storage already.  In that case if we clear storage again, the user will be in\n             * a state where the first tab allows the user to connect but the session that\n             * was used isn't persisted.  This leaves the user in a state where they aren't\n             * connected to the mobile app.\n             */\n            const storedSession = WalletLinkSession.load(this.storage);\n            if ((storedSession === null || storedSession === void 0 ? void 0 : storedSession.id) === this._session.id) {\n                ScopedLocalStorage.clearAll();\n            }\n            document.location.reload();\n        })\n            .catch((_) => { });\n    }\n    signEthereumTransaction(params) {\n        return this.sendRequest({\n            method: 'signEthereumTransaction',\n            params: {\n                fromAddress: params.fromAddress,\n                toAddress: params.toAddress,\n                weiValue: bigIntStringFromBigInt(params.weiValue),\n                data: hexStringFromBuffer(params.data, true),\n                nonce: params.nonce,\n                gasPriceInWei: params.gasPriceInWei ? bigIntStringFromBigInt(params.gasPriceInWei) : null,\n                maxFeePerGas: params.gasPriceInWei ? bigIntStringFromBigInt(params.gasPriceInWei) : null,\n                maxPriorityFeePerGas: params.gasPriceInWei\n                    ? bigIntStringFromBigInt(params.gasPriceInWei)\n                    : null,\n                gasLimit: params.gasLimit ? bigIntStringFromBigInt(params.gasLimit) : null,\n                chainId: params.chainId,\n                shouldSubmit: false,\n            },\n        });\n    }\n    signAndSubmitEthereumTransaction(params) {\n        return this.sendRequest({\n            method: 'signEthereumTransaction',\n            params: {\n                fromAddress: params.fromAddress,\n                toAddress: params.toAddress,\n                weiValue: bigIntStringFromBigInt(params.weiValue),\n                data: hexStringFromBuffer(params.data, true),\n                nonce: params.nonce,\n                gasPriceInWei: params.gasPriceInWei ? bigIntStringFromBigInt(params.gasPriceInWei) : null,\n                maxFeePerGas: params.maxFeePerGas ? bigIntStringFromBigInt(params.maxFeePerGas) : null,\n                maxPriorityFeePerGas: params.maxPriorityFeePerGas\n                    ? bigIntStringFromBigInt(params.maxPriorityFeePerGas)\n                    : null,\n                gasLimit: params.gasLimit ? bigIntStringFromBigInt(params.gasLimit) : null,\n                chainId: params.chainId,\n                shouldSubmit: true,\n            },\n        });\n    }\n    submitEthereumTransaction(signedTransaction, chainId) {\n        return this.sendRequest({\n            method: 'submitEthereumTransaction',\n            params: {\n                signedTransaction: hexStringFromBuffer(signedTransaction, true),\n                chainId,\n            },\n        });\n    }\n    getWalletLinkSession() {\n        return this._session;\n    }\n    sendRequest(request) {\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        return new Promise((resolve, reject) => {\n            {\n                hideSnackbarItem = this.ui.showConnecting({\n                    isUnlinkedErrorState: this.isUnlinkedErrorState,\n                    onCancel: cancel,\n                    onResetConnection: this.resetAndReload, // eslint-disable-line @typescript-eslint/unbound-method\n                });\n            }\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    publishWeb3RequestEvent(id, request) {\n        const message = { type: 'WEB3_REQUEST', id, request };\n        this.publishEvent('Web3Request', message, true)\n            .then((_) => { })\n            .catch((err) => {\n            this.handleWeb3ResponseMessage(message.id, {\n                method: request.method,\n                errorMessage: err.message,\n            });\n        });\n        if (this.isMobileWeb) {\n            this.openCoinbaseWalletDeeplink(request.method);\n        }\n    }\n    // copied from MobileRelay\n    openCoinbaseWalletDeeplink(method) {\n        if (!(this.ui instanceof WLMobileRelayUI))\n            return;\n        // For mobile relay requests, open the Coinbase Wallet app\n        switch (method) {\n            case 'requestEthereumAccounts': // requestEthereumAccounts is handled via popup\n            case 'switchEthereumChain': // switchEthereumChain doesn't need to open the app\n                return;\n            default:\n                window.addEventListener('blur', () => {\n                    window.addEventListener('focus', () => {\n                        this.connection.checkUnseenEvents();\n                    }, { once: true });\n                }, { once: true });\n                this.ui.openCoinbaseWalletDeeplink();\n                break;\n        }\n    }\n    publishWeb3RequestCanceledEvent(id) {\n        const message = {\n            type: 'WEB3_REQUEST_CANCELED',\n            id,\n        };\n        this.publishEvent('Web3RequestCanceled', message, false).then();\n    }\n    publishEvent(event, message, callWebhook) {\n        return this.connection.publishEvent(event, message, callWebhook);\n    }\n    handleWeb3ResponseMessage(id, response) {\n        if (response.method === 'requestEthereumAccounts') {\n            WalletLinkRelay.accountRequestCallbackIds.forEach((id) => this.invokeCallback(id, response));\n            WalletLinkRelay.accountRequestCallbackIds.clear();\n            return;\n        }\n        this.invokeCallback(id, response);\n    }\n    handleErrorResponse(id, method, error) {\n        var _a;\n        const errorMessage = (_a = error === null || error === void 0 ? void 0 : error.message) !== null && _a !== void 0 ? _a : 'Unspecified error message.';\n        this.handleWeb3ResponseMessage(id, {\n            method,\n            errorMessage,\n        });\n    }\n    invokeCallback(id, response) {\n        const callback = this.relayEventManager.callbacks.get(id);\n        if (callback) {\n            callback(response);\n            this.relayEventManager.callbacks.delete(id);\n        }\n    }\n    requestEthereumAccounts() {\n        const { appName, appLogoUrl } = this.metadata;\n        const request = {\n            method: 'requestEthereumAccounts',\n            params: {\n                appName,\n                appLogoUrl,\n            },\n        };\n        const hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            WalletLinkRelay.accountRequestCallbackIds.add(id);\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    watchAsset(type, address, symbol, decimals, image, chainId) {\n        const request = {\n            method: 'watchAsset',\n            params: {\n                type,\n                options: {\n                    address,\n                    symbol,\n                    decimals,\n                    image,\n                },\n                chainId,\n            },\n        };\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload, // eslint-disable-line @typescript-eslint/unbound-method\n            });\n        }\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    addEthereumChain(chainId, rpcUrls, iconUrls, blockExplorerUrls, chainName, nativeCurrency) {\n        const request = {\n            method: 'addEthereumChain',\n            params: {\n                chainId,\n                rpcUrls,\n                blockExplorerUrls,\n                chainName,\n                iconUrls,\n                nativeCurrency,\n            },\n        };\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload, // eslint-disable-line @typescript-eslint/unbound-method\n            });\n        }\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n    switchEthereumChain(chainId, address) {\n        const request = {\n            method: 'switchEthereumChain',\n            params: Object.assign({ chainId }, { address }),\n        };\n        let hideSnackbarItem = null;\n        const id = randomBytesHex(8);\n        const cancel = (error) => {\n            this.publishWeb3RequestCanceledEvent(id);\n            this.handleErrorResponse(id, request.method, error);\n            hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n        };\n        {\n            hideSnackbarItem = this.ui.showConnecting({\n                isUnlinkedErrorState: this.isUnlinkedErrorState,\n                onCancel: cancel,\n                onResetConnection: this.resetAndReload, // eslint-disable-line @typescript-eslint/unbound-method\n            });\n        }\n        return new Promise((resolve, reject) => {\n            this.relayEventManager.callbacks.set(id, (response) => {\n                hideSnackbarItem === null || hideSnackbarItem === void 0 ? void 0 : hideSnackbarItem();\n                if (isErrorResponse(response) && response.errorCode) {\n                    return reject(standardErrors.provider.custom({\n                        code: response.errorCode,\n                        message: `Unrecognized chain ID. Try adding the chain using addEthereumChain first.`,\n                    }));\n                }\n                else if (isErrorResponse(response)) {\n                    return reject(new Error(response.errorMessage));\n                }\n                resolve(response);\n            });\n            this.publishWeb3RequestEvent(id, request);\n        });\n    }\n}\nWalletLinkRelay.accountRequestCallbackIds = new Set();\n//# sourceMappingURL=WalletLinkRelay.js.map","// Copyright (c) 2018-2024 Coinbase, Inc. <https://www.coinbase.com/>\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nimport eip712 from '../../vendor-js/eth-eip712-util/index.cjs';\nimport { LOCAL_STORAGE_ADDRESSES_KEY } from './relay/constants.js';\nimport { isErrorResponse } from './relay/type/Web3Response.js';\nimport { WalletLinkRelay } from './relay/WalletLinkRelay.js';\nimport { WALLETLINK_URL } from '../../core/constants.js';\nimport { standardErrors } from '../../core/error/errors.js';\nimport { ScopedLocalStorage } from '../../core/storage/ScopedLocalStorage.js';\nimport { encodeToHexString, ensureAddressString, ensureBigInt, ensureBuffer, ensureIntNumber, ensureParsedJSONObject, hexStringFromBuffer, hexStringFromNumber, } from '../../core/type/util.js';\nimport { fetchRPCRequest } from '../../util/provider.js';\nconst DEFAULT_CHAIN_ID_KEY = 'DefaultChainId';\nconst DEFAULT_JSON_RPC_URL = 'DefaultJsonRpcUrl';\n// original source: https://github.com/coinbase/coinbase-wallet-sdk/blob/v3.7.1/packages/wallet-sdk/src/provider/CoinbaseWalletProvider.ts\nexport class WalletLinkSigner {\n    constructor(options) {\n        this._relay = null;\n        this._addresses = [];\n        this.metadata = options.metadata;\n        this._storage = new ScopedLocalStorage('walletlink', WALLETLINK_URL);\n        this.callback = options.callback || null;\n        const cachedAddresses = this._storage.getItem(LOCAL_STORAGE_ADDRESSES_KEY);\n        if (cachedAddresses) {\n            const addresses = cachedAddresses.split(' ');\n            if (addresses[0] !== '') {\n                this._addresses = addresses.map((address) => ensureAddressString(address));\n            }\n        }\n        this.initializeRelay();\n    }\n    getSession() {\n        const relay = this.initializeRelay();\n        const { id, secret } = relay.getWalletLinkSession();\n        return { id, secret };\n    }\n    async handshake() {\n        await this._eth_requestAccounts();\n    }\n    get selectedAddress() {\n        return this._addresses[0] || undefined;\n    }\n    get jsonRpcUrl() {\n        var _a;\n        return (_a = this._storage.getItem(DEFAULT_JSON_RPC_URL)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    set jsonRpcUrl(value) {\n        this._storage.setItem(DEFAULT_JSON_RPC_URL, value);\n    }\n    updateProviderInfo(jsonRpcUrl, chainId) {\n        var _a;\n        this.jsonRpcUrl = jsonRpcUrl;\n        // emit chainChanged event if necessary\n        const originalChainId = this.getChainId();\n        this._storage.setItem(DEFAULT_CHAIN_ID_KEY, chainId.toString(10));\n        const chainChanged = ensureIntNumber(chainId) !== originalChainId;\n        if (chainChanged) {\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'chainChanged', hexStringFromNumber(chainId));\n        }\n    }\n    async watchAsset(params) {\n        const request = (Array.isArray(params) ? params[0] : params);\n        if (!request.type) {\n            throw standardErrors.rpc.invalidParams('Type is required');\n        }\n        if ((request === null || request === void 0 ? void 0 : request.type) !== 'ERC20') {\n            throw standardErrors.rpc.invalidParams(`Asset of type '${request.type}' is not supported`);\n        }\n        if (!(request === null || request === void 0 ? void 0 : request.options)) {\n            throw standardErrors.rpc.invalidParams('Options are required');\n        }\n        if (!(request === null || request === void 0 ? void 0 : request.options.address)) {\n            throw standardErrors.rpc.invalidParams('Address is required');\n        }\n        const chainId = this.getChainId();\n        const { address, symbol, image, decimals } = request.options;\n        const relay = this.initializeRelay();\n        const result = await relay.watchAsset(request.type, address, symbol, decimals, image, chainId === null || chainId === void 0 ? void 0 : chainId.toString());\n        if (isErrorResponse(result))\n            return false;\n        return !!result.result;\n    }\n    async addEthereumChain(params) {\n        var _a, _b;\n        const request = params[0];\n        if (((_a = request.rpcUrls) === null || _a === void 0 ? void 0 : _a.length) === 0) {\n            throw standardErrors.rpc.invalidParams('please pass in at least 1 rpcUrl');\n        }\n        if (!request.chainName || request.chainName.trim() === '') {\n            throw standardErrors.rpc.invalidParams('chainName is a required field');\n        }\n        if (!request.nativeCurrency) {\n            throw standardErrors.rpc.invalidParams('nativeCurrency is a required field');\n        }\n        const chainIdNumber = Number.parseInt(request.chainId, 16);\n        if (chainIdNumber === this.getChainId()) {\n            return false;\n        }\n        const relay = this.initializeRelay();\n        const { rpcUrls = [], blockExplorerUrls = [], chainName, iconUrls = [], nativeCurrency, } = request;\n        const res = await relay.addEthereumChain(chainIdNumber.toString(), rpcUrls, iconUrls, blockExplorerUrls, chainName, nativeCurrency);\n        if (isErrorResponse(res))\n            return false;\n        if (((_b = res.result) === null || _b === void 0 ? void 0 : _b.isApproved) === true) {\n            this.updateProviderInfo(rpcUrls[0], chainIdNumber);\n            return null;\n        }\n        throw standardErrors.rpc.internal('unable to add ethereum chain');\n    }\n    async switchEthereumChain(params) {\n        const request = params[0];\n        const chainId = Number.parseInt(request.chainId, 16);\n        const relay = this.initializeRelay();\n        const res = await relay.switchEthereumChain(chainId.toString(10), this.selectedAddress || undefined);\n        if (isErrorResponse(res))\n            throw res;\n        const switchResponse = res.result;\n        if (switchResponse.isApproved && switchResponse.rpcUrl.length > 0) {\n            this.updateProviderInfo(switchResponse.rpcUrl, chainId);\n        }\n        return null;\n    }\n    async cleanup() {\n        this.callback = null;\n        if (this._relay) {\n            this._relay.resetAndReload();\n        }\n        this._storage.clear();\n    }\n    _setAddresses(addresses, _) {\n        var _a;\n        if (!Array.isArray(addresses)) {\n            throw new Error('addresses is not an array');\n        }\n        const newAddresses = addresses.map((address) => ensureAddressString(address));\n        if (JSON.stringify(newAddresses) === JSON.stringify(this._addresses)) {\n            return;\n        }\n        this._addresses = newAddresses;\n        (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'accountsChanged', newAddresses);\n        this._storage.setItem(LOCAL_STORAGE_ADDRESSES_KEY, newAddresses.join(' '));\n    }\n    async request(request) {\n        const params = request.params || [];\n        switch (request.method) {\n            case 'eth_accounts':\n                return [...this._addresses];\n            case 'eth_coinbase':\n                return this.selectedAddress || null;\n            case 'net_version':\n                return this.getChainId().toString(10);\n            case 'eth_chainId':\n                return hexStringFromNumber(this.getChainId());\n            case 'eth_requestAccounts':\n                return this._eth_requestAccounts();\n            case 'eth_ecRecover':\n            case 'personal_ecRecover':\n                return this.ecRecover(request);\n            case 'personal_sign':\n                return this.personalSign(request);\n            case 'eth_signTransaction':\n                return this._eth_signTransaction(params);\n            case 'eth_sendRawTransaction':\n                return this._eth_sendRawTransaction(params);\n            case 'eth_sendTransaction':\n                return this._eth_sendTransaction(params);\n            case 'eth_signTypedData_v1':\n            case 'eth_signTypedData_v3':\n            case 'eth_signTypedData_v4':\n            case 'eth_signTypedData':\n                return this.signTypedData(request);\n            case 'wallet_addEthereumChain':\n                return this.addEthereumChain(params);\n            case 'wallet_switchEthereumChain':\n                return this.switchEthereumChain(params);\n            case 'wallet_watchAsset':\n                return this.watchAsset(params);\n            default:\n                if (!this.jsonRpcUrl)\n                    throw standardErrors.rpc.internal('No RPC URL set for chain');\n                return fetchRPCRequest(request, this.jsonRpcUrl);\n        }\n    }\n    _ensureKnownAddress(addressString) {\n        const addressStr = ensureAddressString(addressString);\n        const lowercaseAddresses = this._addresses.map((address) => ensureAddressString(address));\n        if (!lowercaseAddresses.includes(addressStr)) {\n            throw new Error('Unknown Ethereum address');\n        }\n    }\n    _prepareTransactionParams(tx) {\n        const fromAddress = tx.from ? ensureAddressString(tx.from) : this.selectedAddress;\n        if (!fromAddress) {\n            throw new Error('Ethereum address is unavailable');\n        }\n        this._ensureKnownAddress(fromAddress);\n        const toAddress = tx.to ? ensureAddressString(tx.to) : null;\n        const weiValue = tx.value != null ? ensureBigInt(tx.value) : BigInt(0);\n        const data = tx.data ? ensureBuffer(tx.data) : Buffer.alloc(0);\n        const nonce = tx.nonce != null ? ensureIntNumber(tx.nonce) : null;\n        const gasPriceInWei = tx.gasPrice != null ? ensureBigInt(tx.gasPrice) : null;\n        const maxFeePerGas = tx.maxFeePerGas != null ? ensureBigInt(tx.maxFeePerGas) : null;\n        const maxPriorityFeePerGas = tx.maxPriorityFeePerGas != null ? ensureBigInt(tx.maxPriorityFeePerGas) : null;\n        const gasLimit = tx.gas != null ? ensureBigInt(tx.gas) : null;\n        const chainId = tx.chainId ? ensureIntNumber(tx.chainId) : this.getChainId();\n        return {\n            fromAddress,\n            toAddress,\n            weiValue,\n            data,\n            nonce,\n            gasPriceInWei,\n            maxFeePerGas,\n            maxPriorityFeePerGas,\n            gasLimit,\n            chainId,\n        };\n    }\n    async ecRecover(request) {\n        const { method, params } = request;\n        if (!Array.isArray(params))\n            throw standardErrors.rpc.invalidParams();\n        const relay = this.initializeRelay();\n        const res = await relay.sendRequest({\n            method: 'ethereumAddressFromSignedMessage',\n            params: {\n                message: encodeToHexString(params[0]),\n                signature: encodeToHexString(params[1]),\n                addPrefix: method === 'personal_ecRecover',\n            },\n        });\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    getChainId() {\n        var _a;\n        return Number.parseInt((_a = this._storage.getItem(DEFAULT_CHAIN_ID_KEY)) !== null && _a !== void 0 ? _a : '1', 10);\n    }\n    async _eth_requestAccounts() {\n        var _a, _b;\n        if (this._addresses.length > 0) {\n            (_a = this.callback) === null || _a === void 0 ? void 0 : _a.call(this, 'connect', { chainId: hexStringFromNumber(this.getChainId()) });\n            return this._addresses;\n        }\n        const relay = this.initializeRelay();\n        const res = await relay.requestEthereumAccounts();\n        if (isErrorResponse(res))\n            throw res;\n        if (!res.result) {\n            throw new Error('accounts received is empty');\n        }\n        this._setAddresses(res.result);\n        (_b = this.callback) === null || _b === void 0 ? void 0 : _b.call(this, 'connect', { chainId: hexStringFromNumber(this.getChainId()) });\n        return this._addresses;\n    }\n    async personalSign({ params }) {\n        if (!Array.isArray(params))\n            throw standardErrors.rpc.invalidParams();\n        const address = params[1];\n        const rawData = params[0];\n        this._ensureKnownAddress(address);\n        const relay = this.initializeRelay();\n        const res = await relay.sendRequest({\n            method: 'signEthereumMessage',\n            params: {\n                address: ensureAddressString(address),\n                message: encodeToHexString(rawData),\n                addPrefix: true,\n                typedDataJson: null,\n            },\n        });\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async _eth_signTransaction(params) {\n        const tx = this._prepareTransactionParams(params[0] || {});\n        const relay = this.initializeRelay();\n        const res = await relay.signEthereumTransaction(tx);\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async _eth_sendRawTransaction(params) {\n        const signedTransaction = ensureBuffer(params[0]);\n        const relay = this.initializeRelay();\n        const res = await relay.submitEthereumTransaction(signedTransaction, this.getChainId());\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async _eth_sendTransaction(params) {\n        const tx = this._prepareTransactionParams(params[0] || {});\n        const relay = this.initializeRelay();\n        const res = await relay.signAndSubmitEthereumTransaction(tx);\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    async signTypedData(request) {\n        const { method, params } = request;\n        if (!Array.isArray(params))\n            throw standardErrors.rpc.invalidParams();\n        const encode = (input) => {\n            const hashFuncMap = {\n                eth_signTypedData_v1: eip712.hashForSignTypedDataLegacy,\n                eth_signTypedData_v3: eip712.hashForSignTypedData_v3,\n                eth_signTypedData_v4: eip712.hashForSignTypedData_v4,\n                eth_signTypedData: eip712.hashForSignTypedData_v4,\n            };\n            return hexStringFromBuffer(hashFuncMap[method]({\n                data: ensureParsedJSONObject(input),\n            }), true);\n        };\n        const address = params[method === 'eth_signTypedData_v1' ? 1 : 0];\n        const rawData = params[method === 'eth_signTypedData_v1' ? 0 : 1];\n        this._ensureKnownAddress(address);\n        const relay = this.initializeRelay();\n        const res = await relay.sendRequest({\n            method: 'signEthereumMessage',\n            params: {\n                address: ensureAddressString(address),\n                message: encode(rawData),\n                typedDataJson: JSON.stringify(rawData, null, 2),\n                addPrefix: false,\n            },\n        });\n        if (isErrorResponse(res))\n            throw res;\n        return res.result;\n    }\n    initializeRelay() {\n        if (!this._relay) {\n            this._relay = new WalletLinkRelay({\n                linkAPIUrl: WALLETLINK_URL,\n                storage: this._storage,\n                metadata: this.metadata,\n                accountsCallback: this._setAddresses.bind(this),\n                chainCallback: this.updateProviderInfo.bind(this),\n            });\n        }\n        return this._relay;\n    }\n}\n//# sourceMappingURL=WalletLinkSigner.js.map","import { SCWSigner } from './scw/SCWSigner.js';\nimport { WalletLinkSigner } from './walletlink/WalletLinkSigner.js';\nimport { ScopedLocalStorage } from '../core/storage/ScopedLocalStorage.js';\nconst SIGNER_TYPE_KEY = 'SignerType';\nconst storage = new ScopedLocalStorage('CBWSDK', 'SignerConfigurator');\nexport function loadSignerType() {\n    return storage.getItem(SIGNER_TYPE_KEY);\n}\nexport function storeSignerType(signerType) {\n    storage.setItem(SIGNER_TYPE_KEY, signerType);\n}\nexport async function fetchSignerType(params) {\n    const { communicator, metadata, handshakeRequest, callback } = params;\n    listenForWalletLinkSessionRequest(communicator, metadata, callback).catch(() => { });\n    const request = {\n        id: crypto.randomUUID(),\n        event: 'selectSignerType',\n        data: Object.assign(Object.assign({}, params.preference), { handshakeRequest }),\n    };\n    const { data } = await communicator.postRequestAndWaitForResponse(request);\n    return data;\n}\nexport function createSigner(params) {\n    const { signerType, metadata, communicator, callback } = params;\n    switch (signerType) {\n        case 'scw': {\n            return new SCWSigner({\n                metadata,\n                callback,\n                communicator,\n            });\n        }\n        case 'walletlink': {\n            return new WalletLinkSigner({\n                metadata,\n                callback,\n            });\n        }\n    }\n}\nasync function listenForWalletLinkSessionRequest(communicator, metadata, callback) {\n    await communicator.onMessage(({ event }) => event === 'WalletLinkSessionRequest');\n    // temporary walletlink signer instance to handle WalletLinkSessionRequest\n    // will revisit this when refactoring the walletlink signer\n    const walletlink = new WalletLinkSigner({\n        metadata,\n        callback,\n    });\n    // send wallet link session to popup\n    communicator.postMessage({\n        event: 'WalletLinkUpdate',\n        data: { session: walletlink.getSession() },\n    });\n    // wait for handshake to complete\n    await walletlink.handshake();\n    // send connected status to popup\n    communicator.postMessage({\n        event: 'WalletLinkUpdate',\n        data: { connected: true },\n    });\n}\n//# sourceMappingURL=util.js.map","const COOP_ERROR_MESSAGE = `Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`;\n/**\n * Creates a checker for the Cross-Origin-Opener-Policy (COOP).\n *\n * @returns An object with methods to get and check the Cross-Origin-Opener-Policy.\n *\n * @method getCrossOriginOpenerPolicy\n * Retrieves current Cross-Origin-Opener-Policy.\n * @throws Will throw an error if the policy has not been checked yet.\n *\n * @method checkCrossOriginOpenerPolicy\n * Checks the Cross-Origin-Opener-Policy of the current environment.\n * If in a non-browser environment, sets the policy to 'non-browser-env'.\n * If in a browser environment, fetches the policy from the current origin.\n * Logs an error if the policy is 'same-origin'.\n */\nconst createCoopChecker = () => {\n    let crossOriginOpenerPolicy;\n    return {\n        getCrossOriginOpenerPolicy: () => {\n            if (crossOriginOpenerPolicy === undefined) {\n                return 'undefined';\n            }\n            return crossOriginOpenerPolicy;\n        },\n        checkCrossOriginOpenerPolicy: async () => {\n            if (typeof window === 'undefined') {\n                // Non-browser environment\n                crossOriginOpenerPolicy = 'non-browser-env';\n                return;\n            }\n            try {\n                const url = `${window.location.origin}${window.location.pathname}`;\n                const response = await fetch(url, {\n                    method: 'HEAD',\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const result = response.headers.get('Cross-Origin-Opener-Policy');\n                crossOriginOpenerPolicy = result !== null && result !== void 0 ? result : 'null';\n                if (crossOriginOpenerPolicy === 'same-origin') {\n                    console.error(COOP_ERROR_MESSAGE);\n                }\n            }\n            catch (error) {\n                console.error('Error checking Cross-Origin-Opener-Policy:', error.message);\n                crossOriginOpenerPolicy = 'error';\n            }\n        },\n    };\n};\nexport const { checkCrossOriginOpenerPolicy, getCrossOriginOpenerPolicy } = createCoopChecker();\n//# sourceMappingURL=checkCrossOriginOpenerPolicy.js.map","import { NAME, VERSION } from '../sdk-info.js';\nimport { getCrossOriginOpenerPolicy } from './checkCrossOriginOpenerPolicy.js';\nimport { standardErrors } from '../core/error/errors.js';\nimport { Snackbar } from '../sign/walletlink/relay/ui/components/Snackbar/Snackbar.js';\nimport { RETRY_SVG_PATH } from '../sign/walletlink/relay/ui/WalletLinkRelayUI.js';\nconst POPUP_WIDTH = 420;\nconst POPUP_HEIGHT = 540;\nconst RETRY_BUTTON = {\n    isRed: false,\n    info: 'Retry',\n    svgWidth: '10',\n    svgHeight: '11',\n    path: RETRY_SVG_PATH,\n    defaultFillRule: 'evenodd',\n    defaultClipRule: 'evenodd',\n};\nconst POPUP_BLOCKED_MESSAGE = 'Popup was blocked. Try again.';\nlet snackbar = null;\nexport function openPopup(url) {\n    const left = (window.innerWidth - POPUP_WIDTH) / 2 + window.screenX;\n    const top = (window.innerHeight - POPUP_HEIGHT) / 2 + window.screenY;\n    appendAppInfoQueryParams(url);\n    function tryOpenPopup() {\n        const popupId = `wallet_${crypto.randomUUID()}`;\n        const popup = window.open(url, popupId, `width=${POPUP_WIDTH}, height=${POPUP_HEIGHT}, left=${left}, top=${top}`);\n        popup === null || popup === void 0 ? void 0 : popup.focus();\n        if (!popup) {\n            return null;\n        }\n        return popup;\n    }\n    let popup = tryOpenPopup();\n    // If the popup was blocked, show a snackbar with a retry button\n    if (!popup) {\n        const sb = initSnackbar();\n        return new Promise((resolve, reject) => {\n            sb.presentItem({\n                autoExpand: true,\n                message: POPUP_BLOCKED_MESSAGE,\n                menuItems: [\n                    Object.assign(Object.assign({}, RETRY_BUTTON), { onClick: () => {\n                            popup = tryOpenPopup();\n                            if (popup) {\n                                resolve(popup);\n                            }\n                            else {\n                                reject(standardErrors.rpc.internal('Popup window was blocked'));\n                            }\n                            sb.clear();\n                        } }),\n                ],\n            });\n        });\n    }\n    return Promise.resolve(popup);\n}\nexport function closePopup(popup) {\n    if (popup && !popup.closed) {\n        popup.close();\n    }\n}\nfunction appendAppInfoQueryParams(url) {\n    const params = {\n        sdkName: NAME,\n        sdkVersion: VERSION,\n        origin: window.location.origin,\n        coop: getCrossOriginOpenerPolicy(),\n    };\n    for (const [key, value] of Object.entries(params)) {\n        url.searchParams.append(key, value.toString());\n    }\n}\nfunction initSnackbar() {\n    if (!snackbar) {\n        const root = document.createElement('div');\n        root.className = '-cbwsdk-css-reset';\n        document.body.appendChild(root);\n        snackbar = new Snackbar();\n        snackbar.attach(root);\n    }\n    return snackbar;\n}\n//# sourceMappingURL=web.js.map","import { VERSION } from '../../sdk-info.js';\nimport { CB_KEYS_URL } from '../constants.js';\nimport { standardErrors } from '../error/errors.js';\nimport { closePopup, openPopup } from '../../util/web.js';\n/**\n * Communicates with a popup window for Coinbase keys.coinbase.com (or another url)\n * to send and receive messages.\n *\n * This class is responsible for opening a popup window, posting messages to it,\n * and listening for responses.\n *\n * It also handles cleanup of event listeners and the popup window itself when necessary.\n */\nexport class Communicator {\n    constructor({ url = CB_KEYS_URL, metadata, preference }) {\n        this.popup = null;\n        this.listeners = new Map();\n        /**\n         * Posts a message to the popup window\n         */\n        this.postMessage = async (message) => {\n            const popup = await this.waitForPopupLoaded();\n            popup.postMessage(message, this.url.origin);\n        };\n        /**\n         * Posts a request to the popup window and waits for a response\n         */\n        this.postRequestAndWaitForResponse = async (request) => {\n            const responsePromise = this.onMessage(({ requestId }) => requestId === request.id);\n            this.postMessage(request);\n            return await responsePromise;\n        };\n        /**\n         * Listens for messages from the popup window that match a given predicate.\n         */\n        this.onMessage = async (predicate) => {\n            return new Promise((resolve, reject) => {\n                const listener = (event) => {\n                    if (event.origin !== this.url.origin)\n                        return; // origin validation\n                    const message = event.data;\n                    if (predicate(message)) {\n                        resolve(message);\n                        window.removeEventListener('message', listener);\n                        this.listeners.delete(listener);\n                    }\n                };\n                window.addEventListener('message', listener);\n                this.listeners.set(listener, { reject });\n            });\n        };\n        /**\n         * Closes the popup, rejects all requests and clears the listeners\n         */\n        this.disconnect = () => {\n            // Note: keys popup handles closing itself. this is a fallback.\n            closePopup(this.popup);\n            this.popup = null;\n            this.listeners.forEach(({ reject }, listener) => {\n                reject(standardErrors.provider.userRejectedRequest('Request rejected'));\n                window.removeEventListener('message', listener);\n            });\n            this.listeners.clear();\n        };\n        /**\n         * Waits for the popup window to fully load and then sends a version message.\n         */\n        this.waitForPopupLoaded = async () => {\n            if (this.popup && !this.popup.closed) {\n                // In case the user un-focused the popup between requests, focus it again\n                this.popup.focus();\n                return this.popup;\n            }\n            this.popup = await openPopup(this.url);\n            this.onMessage(({ event }) => event === 'PopupUnload')\n                .then(this.disconnect)\n                .catch(() => { });\n            return this.onMessage(({ event }) => event === 'PopupLoaded')\n                .then((message) => {\n                this.postMessage({\n                    requestId: message.id,\n                    data: {\n                        version: VERSION,\n                        metadata: this.metadata,\n                        preference: this.preference,\n                        location: window.location.toString(),\n                    },\n                });\n            })\n                .then(() => {\n                if (!this.popup)\n                    throw standardErrors.rpc.internal();\n                return this.popup;\n            });\n        };\n        this.url = new URL(url);\n        this.metadata = metadata;\n        this.preference = preference;\n    }\n}\n//# sourceMappingURL=Communicator.js.map","// TODO: error should not depend on walletlink. revisit this.\nimport { VERSION } from '../../sdk-info.js';\nimport { isErrorResponse } from '../../sign/walletlink/relay/type/Web3Response.js';\nimport { standardErrorCodes } from './constants.js';\nimport { serialize } from './utils.js';\n/**\n * Serializes an error to a format that is compatible with the Ethereum JSON RPC error format.\n * See https://docs.cloud.coinbase.com/wallet-sdk/docs/errors\n * for more information.\n */\nexport function serializeError(error) {\n    const serialized = serialize(getErrorObject(error), {\n        shouldIncludeStack: true,\n    });\n    const docUrl = new URL('https://docs.cloud.coinbase.com/wallet-sdk/docs/errors');\n    docUrl.searchParams.set('version', VERSION);\n    docUrl.searchParams.set('code', serialized.code.toString());\n    docUrl.searchParams.set('message', serialized.message);\n    return Object.assign(Object.assign({}, serialized), { docUrl: docUrl.href });\n}\n/**\n * Converts an error to a serializable object.\n */\nfunction getErrorObject(error) {\n    var _a;\n    if (typeof error === 'string') {\n        return {\n            message: error,\n            code: standardErrorCodes.rpc.internal,\n        };\n    }\n    else if (isErrorResponse(error)) {\n        const message = error.errorMessage;\n        const code = (_a = error.errorCode) !== null && _a !== void 0 ? _a : (message.match(/(denied|rejected)/i)\n            ? standardErrorCodes.provider.userRejectedRequest\n            : undefined);\n        return Object.assign(Object.assign({}, error), { message,\n            code, data: { method: error.method } });\n    }\n    return error;\n}\n//# sourceMappingURL=serialize.js.map","import { EventEmitter } from 'eventemitter3';\nexport class ProviderEventEmitter extends EventEmitter {\n}\n//# sourceMappingURL=interface.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createSigner, fetchSignerType, loadSignerType, storeSignerType } from './sign/util.js';\nimport { Communicator } from './core/communicator/Communicator.js';\nimport { CB_WALLET_RPC_URL } from './core/constants.js';\nimport { standardErrorCodes } from './core/error/constants.js';\nimport { standardErrors } from './core/error/errors.js';\nimport { serializeError } from './core/error/serialize.js';\nimport { ProviderEventEmitter, } from './core/provider/interface.js';\nimport { ScopedLocalStorage } from './core/storage/ScopedLocalStorage.js';\nimport { hexStringFromNumber } from './core/type/util.js';\nimport { checkErrorForInvalidRequestArgs, fetchRPCRequest } from './util/provider.js';\nexport class CoinbaseWalletProvider extends ProviderEventEmitter {\n    constructor(_a) {\n        var { metadata } = _a, _b = _a.preference, { keysUrl } = _b, preference = __rest(_b, [\"keysUrl\"]);\n        super();\n        this.signer = null;\n        this.isCoinbaseWallet = true;\n        this.metadata = metadata;\n        this.preference = preference;\n        this.communicator = new Communicator({\n            url: keysUrl,\n            metadata,\n            preference,\n        });\n        const signerType = loadSignerType();\n        if (signerType) {\n            this.signer = this.initSigner(signerType);\n        }\n    }\n    async request(args) {\n        try {\n            checkErrorForInvalidRequestArgs(args);\n            if (!this.signer) {\n                switch (args.method) {\n                    case 'eth_requestAccounts': {\n                        const signerType = await this.requestSignerSelection(args);\n                        const signer = this.initSigner(signerType);\n                        await signer.handshake(args);\n                        this.signer = signer;\n                        storeSignerType(signerType);\n                        break;\n                    }\n                    case 'wallet_sendCalls': {\n                        const ephemeralSigner = this.initSigner('scw');\n                        await ephemeralSigner.handshake({ method: 'handshake' }); // exchange session keys\n                        const result = await ephemeralSigner.request(args); // send diffie-hellman encrypted request\n                        await ephemeralSigner.cleanup(); // clean up (rotate) the ephemeral session keys\n                        return result;\n                    }\n                    case 'wallet_getCallsStatus':\n                        return fetchRPCRequest(args, CB_WALLET_RPC_URL);\n                    case 'net_version':\n                        return 1; // default value\n                    case 'eth_chainId':\n                        return hexStringFromNumber(1); // default value\n                    default: {\n                        throw standardErrors.provider.unauthorized(\"Must call 'eth_requestAccounts' before other methods\");\n                    }\n                }\n            }\n            return await this.signer.request(args);\n        }\n        catch (error) {\n            const { code } = error;\n            if (code === standardErrorCodes.provider.unauthorized)\n                this.disconnect();\n            return Promise.reject(serializeError(error));\n        }\n    }\n    /** @deprecated Use `.request({ method: 'eth_requestAccounts' })` instead. */\n    async enable() {\n        console.warn(`.enable() has been deprecated. Please use .request({ method: \"eth_requestAccounts\" }) instead.`);\n        return await this.request({\n            method: 'eth_requestAccounts',\n        });\n    }\n    async disconnect() {\n        var _a;\n        await ((_a = this.signer) === null || _a === void 0 ? void 0 : _a.cleanup());\n        this.signer = null;\n        ScopedLocalStorage.clearAll();\n        this.emit('disconnect', standardErrors.provider.disconnected('User initiated disconnection'));\n    }\n    requestSignerSelection(handshakeRequest) {\n        return fetchSignerType({\n            communicator: this.communicator,\n            preference: this.preference,\n            metadata: this.metadata,\n            handshakeRequest,\n            callback: this.emit.bind(this),\n        });\n    }\n    initSigner(signerType) {\n        return createSigner({\n            signerType,\n            metadata: this.metadata,\n            communicator: this.communicator,\n            callback: this.emit.bind(this),\n        });\n    }\n}\n//# sourceMappingURL=CoinbaseWalletProvider.js.map","/**\n * Validates user supplied preferences. Throws if keys are not valid.\n * @param preference\n */\nexport function validatePreferences(preference) {\n    if (!preference) {\n        return;\n    }\n    if (!['all', 'smartWalletOnly', 'eoaOnly'].includes(preference.options)) {\n        throw new Error(`Invalid options: ${preference.options}`);\n    }\n    if (preference.attribution) {\n        if (preference.attribution.auto !== undefined &&\n            preference.attribution.dataSuffix !== undefined) {\n            throw new Error(`Attribution cannot contain both auto and dataSuffix properties`);\n        }\n    }\n}\n//# sourceMappingURL=validatePreferences.js.map","import { CoinbaseWalletProvider } from './CoinbaseWalletProvider.js';\nimport { getCoinbaseInjectedProvider } from './util/provider.js';\nexport function createCoinbaseWalletProvider(options) {\n    var _a;\n    const params = {\n        metadata: options.metadata,\n        preference: options.preference,\n    };\n    return (_a = getCoinbaseInjectedProvider(params)) !== null && _a !== void 0 ? _a : new CoinbaseWalletProvider(params);\n}\n//# sourceMappingURL=createCoinbaseWalletProvider.js.map","import { createCoinbaseWalletProvider } from './createCoinbaseWalletProvider.js';\nimport { VERSION } from './sdk-info.js';\nimport { ScopedLocalStorage } from './core/storage/ScopedLocalStorage.js';\nimport { checkCrossOriginOpenerPolicy } from './util/checkCrossOriginOpenerPolicy.js';\nimport { validatePreferences } from './util/validatePreferences.js';\nconst DEFAULT_PREFERENCE = {\n    options: 'all',\n};\n/**\n * Create a Coinbase Wallet SDK instance.\n * @param params - Options to create a Coinbase Wallet SDK instance.\n * @returns A Coinbase Wallet SDK object.\n */\nexport function createCoinbaseWalletSDK(params) {\n    var _a;\n    const versionStorage = new ScopedLocalStorage('CBWSDK');\n    versionStorage.setItem('VERSION', VERSION);\n    void checkCrossOriginOpenerPolicy();\n    const options = {\n        metadata: {\n            appName: params.appName || 'Dapp',\n            appLogoUrl: params.appLogoUrl || '',\n            appChainIds: params.appChainIds || [],\n        },\n        preference: Object.assign(DEFAULT_PREFERENCE, (_a = params.preference) !== null && _a !== void 0 ? _a : {}),\n    };\n    /**\n     * Validate user supplied preferences. Throws if key/values are not valid.\n     */\n    validatePreferences(options.preference);\n    let provider = null;\n    return {\n        getProvider: () => {\n            if (!provider) {\n                provider = createCoinbaseWalletProvider(options);\n            }\n            return provider;\n        },\n    };\n}\n//# sourceMappingURL=createCoinbaseWalletSDK.js.map"],"names":["ScopedLocalStorage","scope","module","key","item","value","prefix","keysToRemove","i","standardErrorCodes","errorValues","FALLBACK_MESSAGE","JSON_RPC_SERVER_ERROR_MESSAGE","getMessageFromCode","code","fallbackMessage","codeString","hasKey","isJsonRpcServerError","isValidCode","serialize","error","shouldIncludeStack","serialized","_error","assignOriginalError","hasStringProperty","obj","prop","standardErrors","arg","getEthJsonRpcError","opts","getEthProviderError","message","data","EthereumProviderError","parseOpts","EthereumRpcError","isValidEthProviderCode","OpaqueType","HexString","AddressString","BigIntString","IntNumber","num","INT_STRING_REGEX","HEXADECIMAL_STRING_REGEX","randomBytesHex","length","uint8ArrayToHex","b","hexStringToUint8Array","hexString","byte","hexStringFromBuffer","buf","includePrefix","hex","encodeToHexString","str","ensureBuffer","bigIntStringFromBigInt","bi","hexStringFromNumber","has0xPrefix","strip0x","prepend0x","isHexString","s","ensureHexString","ensureEvenLengthHexString","h","ensureAddressString","ensureIntNumber","ensureBigInt","val","isBigNumber","ensureParsedJSONObject","constructor","generateKeyPair","deriveSharedSecret","ownPrivateKey","peerPublicKey","encrypt","sharedSecret","plainText","iv","cipherText","decrypt","getFormat","keyType","exportKeyToHexString","type","format","exported","importKeyFromHexString","arrayBuffer","encryptContent","content","_","decryptContent","encryptedData","OWN_PRIVATE_KEY","OWN_PUBLIC_KEY","PEER_PUBLIC_KEY","SCWKeyManager","newKeyPair","assertGetCapabilitiesParams","params","isAddress","param","VERSION","NAME","fetchRPCRequest","request","rpcUrl","requestBody","res","result","getCoinbaseInjectedLegacyProvider","getInjectedEthereum","_a","_b","window","getCoinbaseInjectedProvider","metadata","preference","appName","appLogoUrl","appChainIds","extension","ethereum","checkErrorForInvalidRequestArgs","args","method","ACCOUNTS_KEY","ACTIVE_CHAIN_STORAGE_KEY","AVAILABLE_CHAINS_STORAGE_KEY","WALLET_CAPABILITIES_STORAGE_KEY","SCWSigner","_c","_d","handshakeMessage","response","accounts","chainId","popupResult","requestedAccount","filterChainIds","account","isAddressEqual","capabilities","filterChainNumbers","hexToNumber","capabilityKey","capabilityChainNumber","encrypted","publicKey","availableChains","chains","id","walletCapabilities","newAvailableChains","chain","_u64","add","fromBig","split","U32_MASK64","_32n","n","le","lst","len","Ah","Al","l","toBig","shrSH","_l","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","_h","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","u64","crypto","exports","isBytes","anumber","abytes","ahash","aexists","aoutput","u8","u32","clean","createView","rotr","rotl","byteSwap","byteSwap32","bytesToHex","hexToBytes","asyncLoop","utf8ToBytes","bytesToUtf8","toBytes","kdfInputToBytes","concatBytes","checkOpts","createHasher","createOptHasher","createXOFer","randomBytes","crypto_1","require$$0","a","lengths","instance","checkFinished","out","min","arr","arrays","word","shift","u","hasHexBuiltin","hexes","bytes","asciis","asciiToBase16","ch","hl","al","array","ai","hi","n1","n2","char","nextTick","iters","tick","cb","ts","diff","sum","pad","defaults","Hash","hashCons","hashC","msg","tmp","bytesLength","sha3","keccakP","_u64_ts_1","utils_ts_1","require$$1","_0n","_1n","_2n","_7n","_256n","_0x71n","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","round","R","x","y","t","j","IOTAS","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","rounds","B","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","Keccak","blockLen","suffix","outputLen","enableXOF","state","pos","take","bufferOut","to","gen","genShake","keccak_256","zeros","bitLengthFromBigInt","bufferBEFromBigInt","byteArray","twosFromBigInt","width","isNegative","mask","setLength","right","toBuffer","setLengthRight","v","padToEven","stripHexPrefix","bufferToHex","keccak","bits","util","elementaryName","name","parseTypeN","parseTypeNxM","parseTypeArray","parseNumber","encodeSingle","size","ret","isArray","bitLength","twos","isDynamic","rawEncode","types","values","output","headLength","cur","solidityPack","soliditySHA3","abi","TYPED_MESSAGE_SCHEMA","TypedDataUtils","primaryType","useV4","encodedTypes","encodedValues","encodeField","parsedType","typeValuePairs","field","deps","dep","results","sanitizedData","typedData","parts","ethEip712Util","msgParams","typedSignatureHashLegacy","e","schema","WALLET_USER_NAME_KEY","LOCAL_STORAGE_ADDRESSES_KEY","APP_VERSION_KEY","isErrorResponse","WalletLinkCipher","secret","ivBytes","secretKey","enc","encryptedResult","tagLength","authTag","encryptedPlaintext","authTagBytes","encryptedPlaintextBytes","concatted","resolve","reject","concattedBytes","algo","decrypted","decoder","err","WalletLinkHTTP","linkAPIUrl","sessionId","sessionKey","credentials","events","responseEvents","ConnectionState","WalletLinkWebSocket","listener","url","WebSocketClass","webSocket","evt","HEARTBEAT_INTERVAL","REQUEST_TIMEOUT","WalletLinkConnection","session","handler","__destroyed","encryptedEthereumAddress","address","encryptedMetadataValue","decryptedValue","walletUsername","appVersion","encryptedChainId","encryptedJsonRpcUrl","jsonRpcUrl","ws","connected","delay","m","linked","event","oldWs","callback","decryptedData","unencryptedData","callWebhook","options","reqId","timeoutId","RelayEventManager","idStr","STORAGE_KEY_SESSION_ID","STORAGE_KEY_SESSION_SECRET","STORAGE_KEY_SESSION_LINKED","WalletLinkSession","storage","sha256","isInIFrame","getLocation","isMobileWeb","isDarkMode","css$2","injectCssReset","styleEl","css","r","f","clsx","o","c","p","w","d","g","k","S","C","M","$","O","N","I","P","A","L","D","T","F","H","E","V","z","q","G","css$1","cblogo","gearIcon","Snackbar","el","itemProps","render","SnackbarContainer","SnackbarInstance","props","autoExpand","menuItems","hidden","setHidden","useState","expanded","setExpanded","useEffect","timers","toggleExpanded","action","RETRY_SVG_PATH","WalletLinkRelayUI","container","snackbarProps","RedirectDialog","RedirectDialogContent","title","buttonText","darkMode","onButtonClick","onDismiss","theme","CB_KEYS_URL","CB_WALLET_RPC_URL","WALLETLINK_URL","CBW_MOBILE_DEEPLINK_URL","WLMobileRelayUI","walletLinkUrl","anchorTag","_options","WalletLinkRelay","cachedAddresses","addresses","wasConnectedViaStandalone","selectedAddress","ui","connection","storedSession","signedTransaction","hideSnackbarItem","cancel","errorMessage","symbol","decimals","image","rpcUrls","iconUrls","blockExplorerUrls","chainName","nativeCurrency","DEFAULT_CHAIN_ID_KEY","DEFAULT_JSON_RPC_URL","WalletLinkSigner","relay","originalChainId","chainIdNumber","switchResponse","newAddresses","addressString","addressStr","tx","fromAddress","toAddress","weiValue","nonce","gasPriceInWei","maxFeePerGas","maxPriorityFeePerGas","gasLimit","rawData","encode","input","hashFuncMap","eip712","SIGNER_TYPE_KEY","loadSignerType","storeSignerType","signerType","fetchSignerType","communicator","handshakeRequest","listenForWalletLinkSessionRequest","createSigner","walletlink","COOP_ERROR_MESSAGE","createCoopChecker","crossOriginOpenerPolicy","checkCrossOriginOpenerPolicy","getCrossOriginOpenerPolicy","POPUP_WIDTH","POPUP_HEIGHT","RETRY_BUTTON","POPUP_BLOCKED_MESSAGE","snackbar","openPopup","left","top","appendAppInfoQueryParams","tryOpenPopup","popupId","popup","sb","initSnackbar","closePopup","root","Communicator","responsePromise","requestId","predicate","serializeError","getErrorObject","docUrl","ProviderEventEmitter","EventEmitter","__rest","CoinbaseWalletProvider","keysUrl","signer","ephemeralSigner","validatePreferences","createCoinbaseWalletProvider","DEFAULT_PREFERENCE","createCoinbaseWalletSDK","provider"],"mappings":"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"}