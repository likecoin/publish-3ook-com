{"version":3,"file":"DJApvAF_.js","sources":["../../../stores/nft.ts"],"sourcesContent":["import type { ClassMetadata } from '~/utils/iscn.type'\n\nexport const useNftStore = defineStore('nft', () => {\n  const { LIKE_CO_API } = useRuntimeConfig().public\n  const classMetadataByIdMap = ref({} as Record<string, ClassMetadata | null>)\n  const classListingInfoByIdMap = ref({} as Record<string, Record<string, unknown>>)\n\n  const getClassMetadataById = computed(() => (classId: string) => classMetadataByIdMap.value[classId])\n\n  const getClassListingInfoById = computed(() => (classId: string) => classListingInfoByIdMap.value[classId])\n\n  async function fetchClassMetadataById (classId: string) {\n    const { getClassMetadata } = useNFTContractReader()\n    const classData = await getClassMetadata(classId)\n    classMetadataByIdMap.value[classId] = classData\n    return classData\n  }\n\n  function lazyFetchClassMetadataById (classId: string) {\n    if (getClassMetadataById.value(classId)) { return getClassMetadataById.value(classId) }\n    return fetchClassMetadataById(classId)\n  }\n\n  async function fetchClassListingInfoById (classId: string) {\n    const data = await $fetch<Record<string, unknown>>(`${LIKE_CO_API}/likernft/book/store/${classId}`)\n    const listingInfo = data\n    classListingInfoByIdMap.value[classId] = listingInfo\n    return listingInfo\n  }\n\n  function lazyFetchClassListingInfoById (classId: string) {\n    if (classListingInfoByIdMap.value[classId]) { return classListingInfoByIdMap.value[classId] }\n    return fetchClassListingInfoById(classId)\n  }\n\n  return {\n    classMetadataByIdMap,\n    classStoreDataByIdMap: classListingInfoByIdMap,\n    getClassMetadataById,\n    getClassListingInfoById,\n    fetchClassMetadataById,\n    lazyFetchClassMetadataById,\n    fetchClassListingInfoById,\n    lazyFetchClassListingInfoById\n  }\n})\n"],"names":["useNftStore","defineStore","LIKE_CO_API","useRuntimeConfig","classMetadataByIdMap","ref","classListingInfoByIdMap","getClassMetadataById","computed","classId","getClassListingInfoById","fetchClassMetadataById","getClassMetadata","useNFTContractReader","classData","lazyFetchClassMetadataById","fetchClassListingInfoById","listingInfo","lazyFetchClassListingInfoById"],"mappings":"goBAEO,MAAMA,EAAcC,EAAY,MAAO,IAAM,CAClD,KAAM,CAAE,YAAAC,CAAA,EAAgBC,EAAA,EAAmB,OACrCC,EAAuBC,EAAI,EAA0C,EACrEC,EAA0BD,EAAI,EAA6C,EAE3EE,EAAuBC,EAAS,IAAOC,GAAoBL,EAAqB,MAAMK,CAAO,CAAC,EAE9FC,EAA0BF,EAAS,IAAOC,GAAoBH,EAAwB,MAAMG,CAAO,CAAC,EAE1G,eAAeE,EAAwBF,EAAiB,CACtD,KAAM,CAAE,iBAAAG,CAAA,EAAqBC,EAAA,EACvBC,EAAY,MAAMF,EAAiBH,CAAO,EAChD,OAAAL,EAAqB,MAAMK,CAAO,EAAIK,EAC/BA,CACT,CAEA,SAASC,EAA4BN,EAAiB,CACpD,OAAIF,EAAqB,MAAME,CAAO,EAAYF,EAAqB,MAAME,CAAO,EAC7EE,EAAuBF,CAAO,CACvC,CAEA,eAAeO,EAA2BP,EAAiB,CAEzD,MAAMQ,EADO,MAAM,OAAgC,GAAGf,CAAW,wBAAwBO,CAAO,EAAE,EAElG,OAAAH,EAAwB,MAAMG,CAAO,EAAIQ,EAClCA,CACT,CAEA,SAASC,EAA+BT,EAAiB,CACvD,OAAIH,EAAwB,MAAMG,CAAO,EAAYH,EAAwB,MAAMG,CAAO,EACnFO,EAA0BP,CAAO,CAC1C,CAEA,MAAO,CACL,qBAAAL,EACA,sBAAuBE,EACvB,qBAAAC,EACA,wBAAAG,EACA,uBAAAC,EACA,2BAAAI,EACA,0BAAAC,EACA,8BAAAE,CAAA,CAEJ,CAAC"}