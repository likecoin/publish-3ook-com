(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"cd189bad150b481aa5ecb2e95de26ec677010e55"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c1fb6add-0e32-4948-935d-b389ee1a9a78",e._sentryDebugIdIdentifier="sentry-dbid-c1fb6add-0e32-4948-935d-b389ee1a9a78")})()}catch{}var W=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.ConnectionLost="CONNECTION_WAS_LOST",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(W||{}),H=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e.ProductAnnouncement="ANNOUNCEMENT",e))(H||{}),me=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e[e.DpopInvalidated=-10019]="DpopInvalidated",e))(me||{}),P=(e=>(e.PROVIDER="magic_3pw_provider",e.ADDRESS="magic_3pw_address",e.CHAIN_ID="magic_3pw_chainId",e))(P||{}),Et=(e=>(e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e.Web3ModalSelected="web3modal_selected",e))(Et||{}),u=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e.RevealPK="magic_reveal_key",e.EnableMFA="magic_auth_enable_mfa_flow",e.DisableMFA="magic_auth_disable_mfa_flow",e.GetMultichainPublicAddress="magic_get_multichain_public_address",e))(u||{}),ft=["magic_intermediary_event","magic_nft_checkout","mc_login"],V=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e.MAGIC_SEND_PRODUCT_ANNOUNCEMENT="MAGIC_SEND_PRODUCT_ANNOUNCEMENT",e.MAGIC_PONG="MAGIC_PONG",e.MAGIC_POPUP_RESPONSE="MAGIC_POPUP_RESPONSE",e.MAGIC_POPUP_OAUTH_VERIFY_RESPONSE="MAGIC_POPUP_OAUTH_VERIFY_RESPONSE",e))(V||{}),te=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e.MAGIC_PING="MAGIC_PING",e))(te||{}),gt=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(gt||{}),yt=(e=>(e.Retry="retry",e))(yt||{}),It=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(It||{}),$=(e=>(e.VerifyEmailOtp="verify-email-otp",e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.VerifyRecoveryCode="verify-recovery-code",e.Cancel="cancel",e))($||{}),J=(e=>(e.VerifySmsOtp="verify-sms-otp",e.Cancel="cancel",e.Retry="retry",e))(J||{}),vt=(e=>(e.SmsOTPSent="sms-otp-sent",e.InvalidSmsOtp="invalid-sms-otp",e.ExpiredSmsOtp="expired-sms-otp",e))(vt||{}),_t=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.InvalidMfaOtp="invalid-mfa-otp",e.ExpiredEmailOtp="expired-email-otp",e.MfaSentHandle="mfa-sent-handle",e.RecoveryCodeSentHandle="recovery-code-sent-handle",e.InvalidRecoveryCode="invalid-recovery-code",e.RecoveryCodeSuccess="recovery-code-success",e.LoginThrottled="login-throttled",e))(_t||{}),ye=(e=>(e.Retry="device-retry",e))(ye||{}),wt=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(wt||{}),T=(e=>(e.Retry="Recency/auth-factor-retry",e.Cancel="Recency/auth-factor-verification-cancel",e.VerifyEmailOtp="Recency/auth-factor-verify-email-otp",e.VerifyMFACode="Recency/verify-mfa-code",e))(T||{}),Rt=(e=>(e.PrimaryAuthFactorNeedsVerification="Recency/auth-factor-needs-verification",e.PrimaryAuthFactorVerified="Recency/auth-factor-verified",e.InvalidEmailOtp="Recency/auth-factor-invalid-email-otp",e.EmailExpired="Recency/auth-factor-verification-email-expired",e.EmailSent="Recency/auth-factor-verification-email-sent",e.EmailNotDeliverable="Recency/auth-factor-verification-email-not-deliverable",e))(Rt||{}),O=(e=>(e.RetryWithNewEmail="UpdateEmail/retry-with-new-email",e.Cancel="UpdateEmail/new-email-verification-cancel",e.VerifyEmailOtp="UpdateEmail/new-email-verify-otp",e))(O||{}),At=(e=>(e.NewAuthFactorNeedsVerification="UpdateEmail/new-email-needs-verification",e.EmailUpdated="UpdateEmail/email-updated",e.InvalidEmailOtp="UpdateEmail/new-email-invalid-email-otp",e.EmailExpired="UpdateEmail/new-email-verification-email-expired",e.EmailSent="UpdateEmail/new-email-verification-email-sent",e.EmailNotDeliverable="UpdateEmail/new-email-verification-email-not-deliverable",e.InvalidEmail="UpdateEmail/new-email-invalid",e.EmailAlreadyExists="UpdateEmail/new-email-already-exists",e))(At||{}),Ot=(e=>(e.IDTokenCreated="Auth/id-token-created",e))(Ot||{}),Nt=(e=>(e.Cancel="Farcaster/cancel",e))(Nt||{}),$t=(e=>(e.MFASecretGenerated="mfa-secret-generated",e.InvalidMFAOtp="invalid-mfa-otp",e.MFARecoveryCodes="mfa-recovery-codes",e))($t||{}),Q=(e=>(e.VerifyMFACode="verify-mfa-code",e.Cancel="cancel-mfa-setup",e))(Q||{}),Tt=(e=>(e.MFACodeRequested="mfa-code-requested",e.InvalidMFAOtp="invalid-mfa-otp",e.InvalidRecoveryCode="invalid-recovery-code",e))(Tt||{}),x=(e=>(e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.Cancel="cancel-mfa-disable",e))(x||{}),St=(e=>(e.Harmony="HARMONY",e))(St||{}),He=(e=>(e.ClosedByUser="closed-by-user",e))(He||{}),Xe=(e=>(e.ClosedByUser="closed-by-user-on-received",e))(Xe||{}),Lt=(e=>(e.EnterNewPhoneNumber="enter-new-phone-number",e.EnterOtpCode="enter-otp-code",e.RecoveryFactorAlreadyExists="recovery-factor-already-exists",e.MalformedPhoneNumber="malformed-phone-number",e.InvalidOtpCode="invalid-otp-code",e.RecoveryFactorUpdated="recovery-factor-updated",e.RecoveryFactorDeleted="recovery-factor-deleted",e))(Lt||{}),M=(e=>(e.SendNewPhoneNumber="send-new-phone-number",e.SendOtpCode="send-otp-code",e.Cancel="cancel",e.StartEditPhoneNumber="start-edit-phone-number",e))(M||{}),Mt=(e=>(e.PhoneNumber="phone_number",e))(Mt||{}),Ct=(e=>(e.SmsOtpSent="sms-otp-sent",e.LoginThrottled="login-throttled",e.InvalidSmsOtp="invalid-sms-otp",e.SmsVerified="sms-verified",e.AccountRecovered="account-recovered",e.UpdateEmailRequired="update-email-required",e))(Ct||{}),C=(e=>(e.Cancel="cancel",e.VerifyOtp="verify-otp-code",e.ResendSms="resend-sms-otp",e.UpdateEmail="update-email",e))(C||{}),Z=(e=>(e.Success="nft-checkout-success",e.Failure="nft-checkout-failure",e.Initiated="nft-checkout-initiated",e.Disconnect="disconnect",e))(Z||{}),bt=(e=>(e.WalletInfoFetched="Wallet/wallet-info-fetched",e))(bt||{}),Pt=(e=>(e.CloseMagicWindow="close-magic-window",e))(Pt||{}),fe={},kt=Object.create,Re=Object.defineProperty,Dt=Object.getOwnPropertyDescriptor,Ut=Object.getOwnPropertyNames,Gt=Object.getPrototypeOf,Ft=Object.prototype.hasOwnProperty,xt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Vt=(e,t)=>{for(var r in t)Re(e,r,{get:t[r],enumerable:!0})},Wt=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ut(t))!Ft.call(e,n)&&n!==r&&Re(e,n,{get:()=>t[n],enumerable:!(i=Dt(t,n))||i.enumerable});return e},jt=(e,t,r)=>(r=e!=null?kt(Gt(e)):{},Wt(!e||!e.__esModule?Re(r,"default",{value:e,enumerable:!0}):r,e)),qt=xt((e,t)=>{var r=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function a(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function o(l,c,h,f,I){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new a(h,f||l,I),w=i?i+c:c;return l._events[w]?l._events[w].fn?l._events[w]=[l._events[w],v]:l._events[w].push(v):(l._events[w]=v,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)r.call(c,h)&&l.push(i?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},d.prototype.listeners=function(l){var c=i?i+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,I=h.length,v=new Array(I);f<I;f++)v[f]=h[f].fn;return v},d.prototype.listenerCount=function(l){var c=i?i+l:l,h=this._events[c];return h?h.fn?1:h.length:0},d.prototype.emit=function(l,c,h,f,I,v){var w=i?i+l:l;if(!this._events[w])return!1;var p=this._events[w],b=arguments.length,F,y;if(p.fn){switch(p.once&&this.removeListener(l,p.fn,void 0,!0),b){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,h),!0;case 4:return p.fn.call(p.context,c,h,f),!0;case 5:return p.fn.call(p.context,c,h,f,I),!0;case 6:return p.fn.call(p.context,c,h,f,I,v),!0}for(y=1,F=new Array(b-1);y<b;y++)F[y-1]=arguments[y];p.fn.apply(p.context,F)}else{var mt=p.length,B;for(y=0;y<mt;y++)switch(p[y].once&&this.removeListener(l,p[y].fn,void 0,!0),b){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,c);break;case 3:p[y].fn.call(p[y].context,c,h);break;case 4:p[y].fn.call(p[y].context,c,h,f);break;default:if(!F)for(B=1,F=new Array(b-1);B<b;B++)F[B-1]=arguments[B];p[y].fn.apply(p[y].context,F)}}return!0},d.prototype.on=function(l,c,h){return o(this,l,c,h,!1)},d.prototype.once=function(l,c,h){return o(this,l,c,h,!0)},d.prototype.removeListener=function(l,c,h,f){var I=i?i+l:l;if(!this._events[I])return this;if(!c)return s(this,I),this;var v=this._events[I];if(v.fn)v.fn===c&&(!f||v.once)&&(!h||v.context===h)&&s(this,I);else{for(var w=0,p=[],b=v.length;w<b;w++)(v[w].fn!==c||f&&!v[w].once||h&&v[w].context!==h)&&p.push(v[w]);p.length?this._events[I]=p.length===1?p[0]:p:s(this,I)}return this},d.prototype.removeAllListeners=function(l){var c;return l?(c=i?i+l:l,this._events[c]&&s(this,c)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=i,d.EventEmitter=d,typeof t<"u"&&(t.exports=d)});function Ht(e){let t={exports:{}};return e(t,t.exports),t.exports}var Xt=Number.MAX_SAFE_INTEGER||9007199254740991,Ae={MAX_LENGTH:256,MAX_SAFE_INTEGER:Xt,MAX_SAFE_COMPONENT_LENGTH:16},Yt=typeof process=="object"&&fe&&fe.NODE_DEBUG&&/\bsemver\b/i.test(fe.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},E=Yt,re=Ht(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=Ae,i=(t=e.exports={}).re=[],n=t.src=[],a=t.t={},o=0,s=(d,l,c)=>{let h=o++;E(h,l),a[d]=h,n[h]=l,i[h]=new RegExp(l,c?"g":void 0)};s("NUMERICIDENTIFIER","0|[1-9]\\d*"),s("NUMERICIDENTIFIERLOOSE","[0-9]+"),s("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),s("MAINVERSION",`(${n[a.NUMERICIDENTIFIER]})\\.(${n[a.NUMERICIDENTIFIER]})\\.(${n[a.NUMERICIDENTIFIER]})`),s("MAINVERSIONLOOSE",`(${n[a.NUMERICIDENTIFIERLOOSE]})\\.(${n[a.NUMERICIDENTIFIERLOOSE]})\\.(${n[a.NUMERICIDENTIFIERLOOSE]})`),s("PRERELEASEIDENTIFIER",`(?:${n[a.NUMERICIDENTIFIER]}|${n[a.NONNUMERICIDENTIFIER]})`),s("PRERELEASEIDENTIFIERLOOSE",`(?:${n[a.NUMERICIDENTIFIERLOOSE]}|${n[a.NONNUMERICIDENTIFIER]})`),s("PRERELEASE",`(?:-(${n[a.PRERELEASEIDENTIFIER]}(?:\\.${n[a.PRERELEASEIDENTIFIER]})*))`),s("PRERELEASELOOSE",`(?:-?(${n[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[a.PRERELEASEIDENTIFIERLOOSE]})*))`),s("BUILDIDENTIFIER","[0-9A-Za-z-]+"),s("BUILD",`(?:\\+(${n[a.BUILDIDENTIFIER]}(?:\\.${n[a.BUILDIDENTIFIER]})*))`),s("FULLPLAIN",`v?${n[a.MAINVERSION]}${n[a.PRERELEASE]}?${n[a.BUILD]}?`),s("FULL",`^${n[a.FULLPLAIN]}$`),s("LOOSEPLAIN",`[v=\\s]*${n[a.MAINVERSIONLOOSE]}${n[a.PRERELEASELOOSE]}?${n[a.BUILD]}?`),s("LOOSE",`^${n[a.LOOSEPLAIN]}$`),s("GTLT","((?:<|>)?=?)"),s("XRANGEIDENTIFIERLOOSE",`${n[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),s("XRANGEIDENTIFIER",`${n[a.NUMERICIDENTIFIER]}|x|X|\\*`),s("XRANGEPLAIN",`[v=\\s]*(${n[a.XRANGEIDENTIFIER]})(?:\\.(${n[a.XRANGEIDENTIFIER]})(?:\\.(${n[a.XRANGEIDENTIFIER]})(?:${n[a.PRERELEASE]})?${n[a.BUILD]}?)?)?`),s("XRANGEPLAINLOOSE",`[v=\\s]*(${n[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[a.XRANGEIDENTIFIERLOOSE]})(?:${n[a.PRERELEASELOOSE]})?${n[a.BUILD]}?)?)?`),s("XRANGE",`^${n[a.GTLT]}\\s*${n[a.XRANGEPLAIN]}$`),s("XRANGELOOSE",`^${n[a.GTLT]}\\s*${n[a.XRANGEPLAINLOOSE]}$`),s("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),s("COERCERTL",n[a.COERCE],!0),s("LONETILDE","(?:~>?)"),s("TILDETRIM",`(\\s*)${n[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",s("TILDE",`^${n[a.LONETILDE]}${n[a.XRANGEPLAIN]}$`),s("TILDELOOSE",`^${n[a.LONETILDE]}${n[a.XRANGEPLAINLOOSE]}$`),s("LONECARET","(?:\\^)"),s("CARETTRIM",`(\\s*)${n[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",s("CARET",`^${n[a.LONECARET]}${n[a.XRANGEPLAIN]}$`),s("CARETLOOSE",`^${n[a.LONECARET]}${n[a.XRANGEPLAINLOOSE]}$`),s("COMPARATORLOOSE",`^${n[a.GTLT]}\\s*(${n[a.LOOSEPLAIN]})$|^$`),s("COMPARATOR",`^${n[a.GTLT]}\\s*(${n[a.FULLPLAIN]})$|^$`),s("COMPARATORTRIM",`(\\s*)${n[a.GTLT]}\\s*(${n[a.LOOSEPLAIN]}|${n[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",s("HYPHENRANGE",`^\\s*(${n[a.XRANGEPLAIN]})\\s+-\\s+(${n[a.XRANGEPLAIN]})\\s*$`),s("HYPHENRANGELOOSE",`^\\s*(${n[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[a.XRANGEPLAINLOOSE]})\\s*$`),s("STAR","(<|>)?=?\\s*\\*"),s("GTE0","^\\s*>=\\s*0.0.0\\s*$"),s("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Le=/^[0-9]+$/,Bt=(e,t)=>{let r=Le.test(e),i=Le.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},Kt={compareIdentifiers:Bt},{MAX_LENGTH:Me,MAX_SAFE_INTEGER:ne}=Ae,{re:Ce,t:be}=re,{compareIdentifiers:K}=Kt,D=class S{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof S){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Me)throw new TypeError(`version is longer than ${Me} characters`);E("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let i=t.trim().match(r.loose?Ce[be.LOOSE]:Ce[be.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ne||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ne||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ne||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let a=+n;if(a>=0&&a<ne)return a}return n}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(E("SemVer.compare",this.version,this.options,t),!(t instanceof S)){if(typeof t=="string"&&t===this.version)return 0;t=new S(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof S||(t=new S(t,this.options)),K(this.major,t.major)||K(this.minor,t.minor)||K(this.patch,t.patch)}comparePre(t){if(t instanceof S||(t=new S(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let i=this.prerelease[r],n=t.prerelease[r];if(E("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i!==n)return K(i,n)}while(++r)}compareBuild(t){t instanceof S||(t=new S(t,this.options));let r=0;do{let i=this.build[r],n=t.build[r];if(E("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i!==n)return K(i,n)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}},zt=(e,t,r)=>new D(e,r).compare(new D(t,r)),X=zt,Jt=(e,t,r)=>X(e,t,r)===0,Qt=Jt,Zt=(e,t,r)=>X(e,t,r)!==0,er=Zt,tr=(e,t,r)=>X(e,t,r)>0,rr=tr,ir=(e,t,r)=>X(e,t,r)>=0,nr=ir,ar=(e,t,r)=>X(e,t,r)<0,sr=ar,or=(e,t,r)=>X(e,t,r)<=0,lr=or,cr=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Qt(e,r,i);case"!=":return er(e,r,i);case">":return rr(e,r,i);case">=":return nr(e,r,i);case"<":return sr(e,r,i);case"<=":return lr(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}},ge=cr,z=Symbol("SemVer ANY"),Ie=class ve{static get ANY(){return z}constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof ve){if(t.loose===!!r.loose)return t;t=t.value}E("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===z?this.value="":this.value=this.operator+this.semver.version,E("comp",this)}parse(t){let r=this.options.loose?Pe[ke.COMPARATORLOOSE]:Pe[ke.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new D(i[2],this.options.loose):this.semver=z}toString(){return this.value}test(t){if(E("Comparator.test",t,this.options.loose),this.semver===z||t===z)return!0;if(typeof t=="string")try{t=new D(t,this.options)}catch{return!1}return ge(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof ve))throw new TypeError("a Comparator is required");if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""||new _e(t.value,r).test(this.value);if(t.operator==="")return t.value===""||new _e(this.value,r).test(t.semver);let i=!(this.operator!==">="&&this.operator!==">"||t.operator!==">="&&t.operator!==">"),n=!(this.operator!=="<="&&this.operator!=="<"||t.operator!=="<="&&t.operator!=="<"),a=this.semver.version===t.semver.version,o=!(this.operator!==">="&&this.operator!=="<="||t.operator!==">="&&t.operator!=="<="),s=ge(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),d=ge(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return i||n||a&&o||s||d}},{re:Pe,t:ke}=re,_e=class ce{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof ce)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new ce(t.raw,r);if(t instanceof Ie)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(i=>this.parseRange(i.trim())).filter(i=>i.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let i=r?R[_.HYPHENRANGELOOSE]:R[_.HYPHENRANGE];t=t.replace(i,wr(this.options.includePrerelease)),E("hyphen replace",t),t=t.replace(R[_.COMPARATORTRIM],dr),E("comparator trim",t,R[_.COMPARATORTRIM]),t=(t=(t=t.replace(R[_.TILDETRIM],hr)).replace(R[_.CARETTRIM],ur)).split(/\s+/).join(" ");let n=r?R[_.COMPARATORLOOSE]:R[_.COMPARATOR];return t.split(" ").map(a=>pr(a,this.options)).join(" ").split(/\s+/).map(a=>_r(a,this.options)).filter(this.options.loose?a=>!!a.match(n):()=>!0).map(a=>new Ie(a,this.options))}intersects(t,r){if(!(t instanceof ce))throw new TypeError("a Range is required");return this.set.some(i=>De(i,r)&&t.set.some(n=>De(n,r)&&i.every(a=>n.every(o=>a.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new D(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Rr(this.set[r],t,this.options))return!0;return!1}},{re:R,t:_,comparatorTrimReplace:dr,tildeTrimReplace:hr,caretTrimReplace:ur}=re,De=(e,t)=>{let r=!0,i=e.slice(),n=i.pop();for(;r&&i.length;)r=i.every(a=>n.intersects(a,t)),n=i.pop();return r},pr=(e,t)=>(E("comp",e,t),e=fr(e,t),E("caret",e),e=mr(e,t),E("tildes",e),e=yr(e,t),E("xrange",e),e=vr(e,t),E("stars",e),e),A=e=>!e||e.toLowerCase()==="x"||e==="*",mr=(e,t)=>e.trim().split(/\s+/).map(r=>Er(r,t)).join(" "),Er=(e,t)=>{let r=t.loose?R[_.TILDELOOSE]:R[_.TILDE];return e.replace(r,(i,n,a,o,s)=>{let d;return E("tilde",e,i,n,a,o,s),A(n)?d="":A(a)?d=`>=${n}.0.0 <${+n+1}.0.0-0`:A(o)?d=`>=${n}.${a}.0 <${n}.${+a+1}.0-0`:s?(E("replaceTilde pr",s),d=`>=${n}.${a}.${o}-${s} <${n}.${+a+1}.0-0`):d=`>=${n}.${a}.${o} <${n}.${+a+1}.0-0`,E("tilde return",d),d})},fr=(e,t)=>e.trim().split(/\s+/).map(r=>gr(r,t)).join(" "),gr=(e,t)=>{E("caret",e,t);let r=t.loose?R[_.CARETLOOSE]:R[_.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(n,a,o,s,d)=>{let l;return E("caret",e,n,a,o,s,d),A(a)?l="":A(o)?l=`>=${a}.0.0${i} <${+a+1}.0.0-0`:A(s)?l=a==="0"?`>=${a}.${o}.0${i} <${a}.${+o+1}.0-0`:`>=${a}.${o}.0${i} <${+a+1}.0.0-0`:d?(E("replaceCaret pr",d),l=a==="0"?o==="0"?`>=${a}.${o}.${s}-${d} <${a}.${o}.${+s+1}-0`:`>=${a}.${o}.${s}-${d} <${a}.${+o+1}.0-0`:`>=${a}.${o}.${s}-${d} <${+a+1}.0.0-0`):(E("no pr"),l=a==="0"?o==="0"?`>=${a}.${o}.${s}${i} <${a}.${o}.${+s+1}-0`:`>=${a}.${o}.${s}${i} <${a}.${+o+1}.0-0`:`>=${a}.${o}.${s} <${+a+1}.0.0-0`),E("caret return",l),l})},yr=(e,t)=>(E("replaceXRanges",e,t),e.split(/\s+/).map(r=>Ir(r,t)).join(" ")),Ir=(e,t)=>{e=e.trim();let r=t.loose?R[_.XRANGELOOSE]:R[_.XRANGE];return e.replace(r,(i,n,a,o,s,d)=>{E("xRange",e,i,n,a,o,s,d);let l=A(a),c=l||A(o),h=c||A(s),f=h;return n==="="&&f&&(n=""),d=t.includePrerelease?"-0":"",l?i=n===">"||n==="<"?"<0.0.0-0":"*":n&&f?(c&&(o=0),s=0,n===">"?(n=">=",c?(a=+a+1,o=0,s=0):(o=+o+1,s=0)):n==="<="&&(n="<",c?a=+a+1:o=+o+1),n==="<"&&(d="-0"),i=`${n+a}.${o}.${s}${d}`):c?i=`>=${a}.0.0${d} <${+a+1}.0.0-0`:h&&(i=`>=${a}.${o}.0${d} <${a}.${+o+1}.0-0`),E("xRange return",i),i})},vr=(e,t)=>(E("replaceStars",e,t),e.trim().replace(R[_.STAR],"")),_r=(e,t)=>(E("replaceGTE0",e,t),e.trim().replace(R[t.includePrerelease?_.GTE0PRE:_.GTE0],"")),wr=e=>(t,r,i,n,a,o,s,d,l,c,h,f,I)=>`${r=A(i)?"":A(n)?`>=${i}.0.0${e?"-0":""}`:A(a)?`>=${i}.${n}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`} ${d=A(l)?"":A(c)?`<${+l+1}.0.0-0`:A(h)?`<${l}.${+c+1}.0-0`:f?`<=${l}.${c}.${h}-${f}`:e?`<${l}.${c}.${+h+1}-0`:`<=${d}`}`.trim(),Rr=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(E(e[i].semver),e[i].semver!==Ie.ANY&&e[i].semver.prerelease.length>0){let n=e[i].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0},Ar=(e,t,r)=>{try{t=new _e(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:Or}=Ae,{re:Ue,t:Ge}=re,Nr=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof D)return e;if(typeof e!="string"||e.length>Or||!(t.loose?Ue[Ge.LOOSE]:Ue[Ge.FULL]).test(e))return null;try{return new D(e,t)}catch{return null}},$r=Nr,{re:ae,t:se}=re,Tr=(e,t)=>{if(e instanceof D)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let i;for(;(i=ae[se.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),ae[se.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;ae[se.COERCERTL].lastIndex=-1}else r=e.match(ae[se.COERCE]);return r===null?null:$r(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function Sr(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Lr(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function Mr(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,Sr))}function Cr(e){return decodeURIComponent(Array.from(atob(e),Lr).join(""))}function Ye(e){return Mr(JSON.stringify(e))}function br(e){return JSON.parse(Cr(e))}function ee(e){return typeof e>"u"}function Pr(e){return e===null}function Be(e){return Pr(e)||ee(e)}function kr(e){return Be(e)?!1:!ee(e.jsonrpc)&&!ee(e.id)&&(!ee(e.result)||!ee(e.error))}function Dr(e){return Be(e)?!1:typeof e=="number"&&Object.values(me).includes(e)}function he(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var g={};function Fi(e,t){return Object.assign(g,t),e}var Ur={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Y=class Ke extends Error{constructor(t,r){super(`Magic SDK Error: [${t}] ${r}`),this.code=t,this.rawMessage=r,Object.setPrototypeOf(this,Ke.prototype)}__proto__=Error},we=class ze extends Error{__proto__=Error;code;rawMessage;data;constructor(t){super();let r=Number(t?.code);this.rawMessage=t?.message||"Internal error",this.code=Dr(r)?r:me.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=t?.data||void 0,Object.setPrototypeOf(this,ze.prototype)}},ie=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}message;log(){console.warn(this.message)}},Gr=class Je extends Error{constructor(t,r,i,n){super(`Magic Extension Error (${t.name}): [${r}] ${i}`),this.code=r,this.rawMessage=i,this.data=n,Object.setPrototypeOf(this,Je.prototype)}__proto__=Error},Fe=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}message;log(){console.warn(this.message)}};function Fr(){return new Y(W.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function xr(){return new Y(W.ModalNotReady,"Modal is not ready")}function Vr(){return new Y(W.MalformedResponse,"Response from the Magic iframe is malformed.")}function Wr(e){return new Y(W.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function jr(e){let t=`Some extensions are incompatible with \`${g.sdkName}@${g.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let i=r.compat[g.sdkName];typeof i=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${i}\``:i||(t+=`
  - Extension \`${r.name}\` does not support ${g.platform} environments.`)}),new Y(W.IncompatibleExtensions,t)}function qr(e){let t=r=>{let i=r+1,n=i%10,a=i%100;return n===1&&a!==11?`${i}st`:n===2&&a!==12?`${i}nd`:n===3&&a!==13?`${i}rd`:`${i}th`};return new Y(W.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function xi(){return new ie(H.DuplicateIframe,"Duplicate iframes found.")}function Hr(){return new ie(H.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Xr(){return new ie(H.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${g.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function Yr(e){let{method:t,removalVersions:r,useInstead:i}=e,n=r[g.sdkName],a=i?` Use \`${i}\` instead.`:"",o=`\`${t}\` will be removed from \`${g.sdkName}\` in version \`${n}\`.${a}`;return new ie(H.DeprecationNotice,o)}function*Br(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Kr=Br();function Qe(){return Kr.next().value}var Ze={};Vt(Ze,{clear:()=>zr,getItem:()=>N,iterate:()=>et,key:()=>Qr,keys:()=>Zr,length:()=>Jr,removeItem:()=>q,setItem:()=>k});var oe;function U(e){return async(...t)=>(oe||(oe=await g.configureStorage()),await oe.ready(),oe[e](...t))}var N=U("getItem"),k=U("setItem"),q=U("removeItem"),zr=U("clear"),Jr=U("length"),Qr=U("key"),Zr=U("keys"),et=U("iterate");function ei(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var Oe="STORE_KEY_PRIVATE_KEY",ue="STORE_KEY_PUBLIC_JWK",tt="ECDSA",ti="P-256",ri={name:tt,namedCurve:ti};function Ee(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function ii(){q(ue),q(Oe)}async function ni(){let e=await ai();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=await N(Oe);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let i={iat:Math.floor(new Date().getTime()/1e3),jti:ei()},n={protected:xe(JSON.stringify({typ:"dpop+jwt",alg:"ES256",jwk:e})),claims:xe(JSON.stringify(i))},a=oi(`${n.protected}.${n.claims}`),o={name:tt,hash:{name:"SHA-256"}},s=ci(new Uint8Array(await t.sign(o,r,a)));return`${n.protected}.${n.claims}.${s}`}async function ai(){if(!Ee()){console.info("webcrypto is not supported");return}return await N(ue)||await si(),N(ue)}async function si(){let{subtle:e}=window.crypto,t=await e.generateKey(ri,!1,["sign"]),r=await e.exportKey("jwk",t.publicKey);await k(Oe,t.privateKey),await k(ue,r)}function xe(e){return rt(li(e))}function oi(e){return new TextEncoder().encode(e)}function rt(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function li(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function ci(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),rt(t)}var it=Symbol("Payload pre-processed by Magic SDK");function nt(e){return Object.defineProperty(e,it,{value:!0,enumerable:!1}),e}function di(e){return!!e[it]}function pe(e){return di(e)||(e.jsonrpc=e.jsonrpc??"2.0",e.id=Qe(),e.method=e.method??"noop",e.params=e.params??[],nt(e)),e}function m(e,t=[]){return nt({params:t,method:e,jsonrpc:"2.0",id:Qe()})}var at=class st{_jsonrpc;_id;_result;_error;constructor(t){t instanceof st?(this._jsonrpc=t.payload.jsonrpc,this._id=t.payload.id,this._result=t.payload.result,this._error=t.payload.error):kr(t)?(this._jsonrpc=t.jsonrpc,this._id=t.id,this._result=t.result,this._error=t.error):(this._jsonrpc=t.jsonrpc,this._id=t.id,this._result=void 0,this._error=void 0)}applyError(t){return this._error=t,this}applyResult(t){return this._result=t,this}get hasError(){return this._error?.code===me.DpopInvalidated&&ii(),typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},hi=jt(qt()),ui=class extends hi.default{};function ot(){let e=new ui;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...i)=>(e[t].apply(e,i),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var lt=Symbol("isPromiEvent");function pi(e){return!!e[lt]}function L(e){let t=ct(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:i}=ot(),n=Symbol("Promise.then"),a=Symbol("Promise.catch"),o=Symbol("Promise.finally"),s=(c,h)=>(...f)=>{let I=h[c].apply(h,f);return d(I)},d=c=>Object.assign(c,{[lt]:!0,[n]:c[n]||c.then,[a]:c[a]||c.catch,[o]:c[o]||c.finally,then:s(n,c),catch:s(a,c),finally:s(o,c),on:i("on",c),once:i("once",c),addListener:i("addListener",c),off:i("off",c),removeListener:i("removeListener",c),removeAllListeners:i("removeAllListeners",c),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),l=d(t.then(c=>(l.emit("done",c),l.emit("settled"),c),c=>{throw l.emit("error",c),l.emit("settled"),c}));return l.on(Xe.ClosedByUser,()=>{l.emit(He.ClosedByUser)}),l}function ct(e){return new Promise((t,r)=>{let i=e(t,r);Promise.resolve(i).catch(r)})}var G=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){if(this.sdk.thirdPartyWallets.isConnected&&!ft.includes(e.method))return L((n,a)=>{this.sdk.thirdPartyWallets.requestOverride(e).then(n).catch(a)});let t=this.overlay.post(te.MAGIC_HANDLE_REQUEST,pe(e)),r=L((n,a)=>{t.then(o=>{if(i(),o.hasError)a(new we(o.payload.error));else if(o.hasResult)n(o.payload.result);else throw Vr()}).catch(o=>{i(),a(o)})}),i=this.overlay.on(V.MAGIC_HANDLE_EVENT,n=>{let{response:a}=n.data;if(a.id===e.id&&a.result?.event){let{event:o,params:s=[]}=a.result;r.emit(o,...s)}});return r}createIntermediaryEvent(e,t){return r=>{let i=m(u.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(i)}}};function mi(e,t){let[r]=e.split(".").map(Number);return r>=t}var Ei={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},fi=class extends G{loginWithMagicLink(e){let t=g.sdkName==="@magic-sdk/react-native"||g.sdkName==="@magic-sdk/react-native-bare"||g.sdkName==="@magic-sdk/react-native-expo";if(t&&mi(g.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utilize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&Yr({method:"auth.loginWithMagicLink()",removalVersions:Ei,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:r,showUI:i=!0,redirectURI:n,overrides:a,lifespan:o}=e,s=m(this.sdk.testMode?u.LoginWithMagicLinkTestMode:u.LoginWithMagicLink,[{email:r,showUI:i,redirectURI:n,overrides:a,lifespan:o}]);return this.request(s)}loginWithSMS(e){let{phoneNumber:t,showUI:r=!0,lifespan:i}=e,n=m(this.sdk.testMode?u.LoginWithSmsTestMode:u.LoginWithSms,[{phoneNumber:t,showUI:r,lifespan:i}]),a=this.request(n);return!r&&a&&(a.on(J.VerifySmsOtp,o=>{this.createIntermediaryEvent(J.VerifySmsOtp,n.id)(o)}),a.on(J.Cancel,()=>{this.createIntermediaryEvent(J.Cancel,n.id)()})),a}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:i,overrides:n,lifespan:a}=e,o=m(this.sdk.testMode?u.LoginWithEmailOTPTestMode:u.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:i,overrides:n,lifespan:a}]),s=this.request(o);return!i&&s&&s.on(ye.Retry,()=>{this.createIntermediaryEvent(ye.Retry,o.id)()}),!r&&s&&(s.on($.VerifyEmailOtp,d=>{this.createIntermediaryEvent($.VerifyEmailOtp,o.id)(d)}),s.on($.VerifyMFACode,d=>{this.createIntermediaryEvent($.VerifyMFACode,o.id)(d)}),s.on($.LostDevice,()=>{this.createIntermediaryEvent($.LostDevice,o.id)()}),s.on($.VerifyRecoveryCode,d=>{this.createIntermediaryEvent($.VerifyRecoveryCode,o.id)(d)}),s.on($.Cancel,()=>{this.createIntermediaryEvent($.Cancel,o.id)()})),s}loginWithCredential(e){let{credentialOrQueryString:t,lifespan:r}=e||{},i=t??"";if(!t&&g.platform==="web"){i=window.location.search;let a=window.location.origin+window.location.pathname;window.history.replaceState(null,"",a)}let n=m(this.sdk.testMode?u.LoginWithCredentialTestMode:u.LoginWithCredential,[i,r]);return this.request(n)}setAuthorizationToken(e){let t=m(u.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:r=!0}=e,i=m(this.sdk.testMode?u.UpdateEmailTestMode:u.UpdateEmail,[{email:t,showUI:r}]),n=this.request(i);return r||(n.on(T.Retry,()=>{this.createIntermediaryEvent(T.Retry,i.id)()}),n.on(T.Cancel,()=>{this.createIntermediaryEvent(T.Cancel,i.id)()}),n.on(T.VerifyEmailOtp,a=>{this.createIntermediaryEvent(T.VerifyEmailOtp,i.id)(a)}),n.on(T.VerifyMFACode,a=>{this.createIntermediaryEvent(T.VerifyMFACode,i.id)(a)}),n.on(O.RetryWithNewEmail,a=>{this.createIntermediaryEvent(O.RetryWithNewEmail,i.id)(a)}),n.on(O.Cancel,()=>{this.createIntermediaryEvent(O.Cancel,i.id)()}),n.on(O.VerifyEmailOtp,a=>{this.createIntermediaryEvent(O.VerifyEmailOtp,i.id)(a)})),n}},Ne="ds",$e="ek",Te="iv",Se="AES-GCM",gi=256;async function dt(){let e=[];await et((t,r,i)=>{r.startsWith(`${Ne}_`)&&e.push(r)});for(let t of e)await q(t)}function ht(e){let t="",r=new Uint8Array(e),i=r.byteLength;for(let n=0;n<i;n++)t+=String.fromCharCode(r[n]);return window.btoa(t)}function ut(e){let t=window.atob(e),r=t.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer}async function yi(){if(!Ee()){console.info("webcrypto is not supported");return}let{crypto:e}=window;return await N(Te)||e.getRandomValues(new Uint8Array(12))}async function Ii(){if(!Ee()){console.info("webcrypto is not supported");return}let{subtle:e}=window.crypto;return await N($e)||await e.generateKey({name:Se,length:gi},!1,["encrypt","decrypt"])}async function vi(e,t){let r=await yi(),i=await Ii();if(!r||!i||!e)return;let n=ut(e),{subtle:a}=window.crypto,o=await a.encrypt({name:Se,iv:r},i,n),s=ht(o);await k(`${Ne}_${t}`,s),await k($e,i),await k(Te,r)}async function _i(e){let t=await N(`${Ne}_${e}`),r=await N(Te),i=await N($e);if(!r||!t||!i||!Ee())return;let{subtle:n}=window.crypto,a=await n.decrypt({name:Se,iv:r},i,ut(t));return ht(a)}function Ve(e,t){return t?new URL(e,t):new URL(e)}var wi=class extends G{getIdToken(e){let t=m(this.sdk.testMode?u.GetIdTokenTestMode:u.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=m(this.sdk.testMode?u.GenerateIdTokenTestMode:u.GenerateIdToken,[e]);return this.request(t)}getInfo(){let e=m(u.GetInfo,[]);return this.request(e)}isLoggedIn(){return L(async(e,t)=>{try{let r=!1;this.sdk.useStorageCache&&(r=await N(this.localForageIsLoggedInKey)==="true",r&&e(!0));let i=m(this.sdk.testMode?u.IsLoggedInTestMode:u.IsLoggedIn),n=await this.request(i);this.sdk.useStorageCache&&(n?k(this.localForageIsLoggedInKey,!0):q(this.localForageIsLoggedInKey),r&&!n&&this.emitUserLoggedOut(!0)),e(n)}catch(r){t(r)}})}logout(){return q(this.localForageIsLoggedInKey),dt(),L(async(e,t)=>{try{let r=m(this.sdk.testMode?u.LogoutTestMode:u.Logout),i=await this.request(r);this.sdk.useStorageCache&&this.emitUserLoggedOut(i),e(i)}catch(r){t(r)}})}requestInfoWithUI(e){let t=m(u.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let{showUI:t=!0}=e||{},r=m(this.sdk.testMode?u.UserSettingsTestMode:u.UserSettings,[e]),i=this.request(r);return!t&&i&&(i.on(M.SendNewPhoneNumber,n=>{this.createIntermediaryEvent(M.SendNewPhoneNumber,r.id)(n)}),i.on(M.SendOtpCode,n=>{this.createIntermediaryEvent(M.SendOtpCode,r.id)(n)}),i.on(M.StartEditPhoneNumber,()=>{this.createIntermediaryEvent(M.StartEditPhoneNumber,r.id)()}),i.on(M.Cancel,()=>{this.createIntermediaryEvent(M.Cancel,r.id)()}),i.on(T.VerifyEmailOtp,n=>{this.createIntermediaryEvent(T.VerifyEmailOtp,r.id)(n)})),i}recoverAccount(e){let{email:t,showUI:r}=e,i=m(this.sdk.testMode?u.RecoverAccountTestMode:u.RecoverAccount,[{email:t,showUI:r}]),n=this.request(i);return!r&&n&&(n.on(C.Cancel,()=>{this.createIntermediaryEvent(C.Cancel,i.id)()}),n.on(C.ResendSms,()=>{this.createIntermediaryEvent(C.ResendSms,i.id)()}),n.on(C.VerifyOtp,a=>{this.createIntermediaryEvent(C.VerifyOtp,i.id)(a)}),n.on(C.UpdateEmail,a=>{this.createIntermediaryEvent(C.UpdateEmail,i.id)(a)}),n.on(O.Cancel,()=>{this.createIntermediaryEvent(O.Cancel,i.id)()}),n.on(O.RetryWithNewEmail,a=>{this.createIntermediaryEvent(O.RetryWithNewEmail,i.id)(a)}),n.on(O.VerifyEmailOtp,a=>{this.createIntermediaryEvent(O.VerifyEmailOtp,i.id)(a)})),n}revealPrivateKey(){let e=m(u.RevealPK);return this.request(e)}onUserLoggedOut(e){this.userLoggedOutCallbacks.push(e)}enableMFA(e){let{showUI:t=!0}=e,r=m(u.EnableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on(Q.VerifyMFACode,n=>{this.createIntermediaryEvent(Q.VerifyMFACode,r.id)(n)}),i.on(Q.Cancel,()=>{this.createIntermediaryEvent(Q.Cancel,r.id)()})),i}disableMFA(e){let{showUI:t=!0}=e,r=m(u.DisableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on(x.VerifyMFACode,n=>{this.createIntermediaryEvent(x.VerifyMFACode,r.id)(n)}),i.on(x.LostDevice,n=>{this.createIntermediaryEvent(x.LostDevice,r.id)(n)}),i.on(x.Cancel,()=>{this.createIntermediaryEvent(x.Cancel,r.id)()})),i}emitUserLoggedOut(e){this.userLoggedOutCallbacks.forEach(t=>{t(e)})}localForageIsLoggedInKey="magic_auth_is_logged_in";userLoggedOutCallbacks=[]},Ri=class extends G{connectWithUI(e){let t=L(async(r,i)=>{try{let n=m(u.Login,[{enabledWallets:this.sdk.thirdPartyWallets.enabledWallets,...e}]),a=this.request(n);this.sdk.thirdPartyWallets.eventListeners.forEach(({event:s,callback:d})=>{a.on(s,()=>d(n.id))}),a.on("id-token-created",s=>{t.emit("id-token-created",s)});let o=await a;o.error&&i(o),r(o)}catch(n){i(n)}});return t}showUI(e){return this.request(m(u.ShowUI,[e]))}showAddress(){return this.request(m(u.ShowAddress))}showSendTokensUI(){return this.request(m(u.ShowSendTokensUI))}showOnRamp(){return this.request(m(u.ShowOnRamp))}showNFTs(){return this.request(m(u.ShowNFTs))}showBalances(){return this.request(m(u.ShowBalances))}sendGaslessTransaction(e,t){return this.request(m(u.SendGaslessTransaction,[e,t]))}},Ai=class extends G{eventListeners=[];enabledWallets={};isConnected=!1;resetThirdPartyWalletState(){localStorage.removeItem(P.PROVIDER),localStorage.removeItem(P.ADDRESS),localStorage.removeItem(P.CHAIN_ID),this.isConnected=!1}requestOverride(e){if(e.method===u.Login)return this.resetThirdPartyWalletState(),super.request(e);if(e.method===u.GetInfo)return this.getInfo(e);if(e.method===u.IsLoggedIn)return this.isLoggedIn(e);if(e.method===u.Logout)return this.logout(e);switch(localStorage.getItem(P.PROVIDER)){case"web3modal":return this.web3modalRequest(e);default:return this.resetThirdPartyWalletState(),super.request(e)}}isLoggedIn(e){switch(localStorage.getItem(P.PROVIDER)){case"web3modal":return this.web3modalIsLoggedIn();default:return this.resetThirdPartyWalletState(),super.request(e)}}getInfo(e){switch(localStorage.getItem(P.PROVIDER)){case"web3modal":return this.web3modalGetInfo();default:return this.resetThirdPartyWalletState(),super.request(e)}}logout(e){let t=localStorage.getItem(P.PROVIDER);switch(this.resetThirdPartyWalletState(),t){case"web3modal":return this.web3modalLogout();default:return super.request(e)}}web3modalRequest(e){return L((t,r)=>{this.sdk.web3modal.modal.getWalletProvider().request(e).then(t).catch(r)})}web3modalIsLoggedIn(){return L(e=>{let t=this.sdk.web3modal.modal.getStatus();if(t==="connected"&&e(!0),t==="disconnected"&&(this.resetThirdPartyWalletState(),e(!1)),t==="reconnecting"){let r=this.sdk.web3modal.modal.subscribeProvider(({status:i})=>{i==="connected"&&(r(),e(!0)),i==="disconnected"&&(r(),this.resetThirdPartyWalletState(),e(!1))})}})}formatWeb3modalGetInfoResponse(){let e=this.sdk.web3modal.modal.getWalletInfo()?.name,t=this.sdk.web3modal.modal.getAddress();return{publicAddress:t,email:null,issuer:`did:ethr:${t}`,phoneNumber:null,isMfaEnabled:!1,recoveryFactors:[],walletType:e||"web3modal",firstLoginAt:null}}web3modalGetInfo(){return L((e,t)=>{let r=this.sdk.web3modal.modal.getStatus();if(r==="connected"&&e(this.formatWeb3modalGetInfoResponse()),r==="disconnected"&&(this.resetThirdPartyWalletState(),t("Magic RPC Error: [-32603] Internal error: User denied account access.")),r==="reconnecting"){let i=this.sdk.web3modal.modal.subscribeProvider(({status:n})=>{n==="connected"&&(i(),e(this.formatWeb3modalGetInfoResponse())),n==="disconnected"&&(i(),this.resetThirdPartyWalletState(),t("Magic RPC Error: [-32603] Internal error: User denied account access."))})}})}web3modalLogout(){return L(async e=>{try{await this.sdk.web3modal.modal.disconnect()}catch(t){console.error(t)}e(!0)})}},{createBoundEmitterMethod:le,createChainingEmitterMethod:j}=ot(),Oi=class extends G{isMagic=!0;sendAsync(e,t){if(!t)throw qr({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(te.MAGIC_HANDLE_REQUEST,e.map(r=>{let i=pe(r);return this.prefixPayloadMethodForTestMode(i),i})).then(r=>{t(null,r.map(i=>({...i.payload,error:i.hasError?new we(i.payload.error):null})))});else{let r=pe(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(te.MAGIC_HANDLE_REQUEST,r).then(i=>{t(i.hasError?new we(i.payload.error):null,i.payload)})}}send(e,t){if(typeof e=="string"){let i=m(e,Array.isArray(t)?t:[]);return this.request(i)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let r=Hr();return r.log(),new at(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=m(u.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}on=j("on",this);once=j("once",this);addListener=j("addListener",this);off=j("off",this);removeListener=j("removeListener",this);removeAllListeners=j("removeAllListeners",this);emit=le("emit");eventNames=le("eventNames");listeners=le("listeners");listenerCount=le("listenerCount")},Ni=class extends G{purchase(e){let t=m(u.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=this.sdk.thirdPartyWallets.isConnected,r=m(u.NFTCheckout,[{...e,walletProvider:t?"web3modal":"magic"}]),i=this.request(r);return t&&(i.on(Z.Initiated,async n=>{try{let a=await this.request({method:"eth_sendTransaction",params:[n]});this.createIntermediaryEvent(Z.Success,r.id)(a)}catch{this.createIntermediaryEvent(Z.Failure,r.id)()}}),i.on(Z.Disconnect,()=>{this.sdk.thirdPartyWallets.resetThirdPartyWalletState(),i.emit("disconnect")})),i}transfer(e){let t=m(u.NFTTransfer,[e]);return this.request(t)}};function We(e){return e.compat&&e.compat[g.sdkName]!=null?typeof e.compat[g.sdkName]=="string"?Ar(Tr(g.version),e.compat[g.sdkName]):!!e.compat[g.sdkName]:!0}function $i(e,t,r){return!t&&!r?`${e}_eth_mainnet`:r?`${e}_${JSON.stringify(r)}`:t?typeof t=="string"?`${e}_eth_${t}`:`${e}_${t.rpcUrl}_${t.chainId}_${t.chainType}`:`${e}_unknown`}function Ti(e){let t=e?.extensions??[],r={},i=[];if(Array.isArray(t)?t.forEach(n=>{We(n)?(n.init(this),n.name&&(this[n.name]=n),he(n.config)||(r[n.name]=n.config)):i.push(n)}):Object.keys(t).forEach(n=>{if(We(t[n])){t[n].init(this);let a=t[n];this[n]=a,he(a.config)||(r[t[n].name]=a.config)}else i.push(t[n])}),i.length)throw jr(i);return r}var Vi=class de{constructor(t,r){if(this.apiKey=t,!t)throw Fr();g.platform==="react-native"&&r?.endpoint&&Xr().log();let{defaultEndpoint:i,version:n}=g;this.testMode=!!r?.testMode,this.useStorageCache=!!r?.useStorageCache,this.endpoint=Ve(r?.endpoint??i).origin,this.auth=new fi(this),this.user=new wi(this),this.wallet=new Ri(this),this.nft=new Ni(this),this.thirdPartyWallets=new Ai(this),this.rpcProvider=new Oi(this);let a=Ti.call(this,r);this.parameters=Ye({API_KEY:this.apiKey,DOMAIN_ORIGIN:typeof window<"u"&&window?.location?window?.location.origin:"",ETH_NETWORK:r?.network,host:Ve(this.endpoint).host,sdk:Ur[g.sdkName],version:n,ext:he(a)?void 0:a,locale:r?.locale||"en_US",authConfig:r?.authConfig?{...r.authConfig}:void 0,...g.bundleId?{bundleId:g.bundleId}:{},meta:r?.meta}),this.networkHash=$i(this.apiKey,r?.network,he(a)?void 0:a),r?.deferPreload||this.preload()}static __overlays__=new Map;endpoint;parameters;networkHash;testMode;useStorageCache;auth;user;wallet;nft;thirdPartyWallets;rpcProvider;get overlay(){if(!de.__overlays__.has(this.parameters)){let t=new g.ViewController(this.endpoint,this.parameters,this.networkHash);t.init(),de.__overlays__.set(this.parameters,t)}return de.__overlays__.get(this.parameters)}async preload(){await this.overlay.waitForReady()}};function Si(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function Li(e,t){let r=t.data.response?.id,i=Si(e,r);if(r&&i){let n=new at(i).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:r,response:n}}return{}}async function Mi(e,t,r){let i=await N("rt"),n;if(g.platform==="web")try{n=await N("jwt")??await ni()}catch(s){console.error("webcrypto error",s)}let a={msgType:e,payload:t};n&&(a.jwt=n),n&&i&&(a.rt=i);let o=await _i(r);return o&&(a.deviceShare=o),a}async function Ci(e){e.data.rt&&await k("rt",e.data.rt)}function bi(e,t){let r=null;return function(...i){r&&clearTimeout(r),r=setTimeout(()=>{e(...i)},t)}}var Pi=1e3,pt=60*Pi,je=5*pt,ki=60*pt,Wi=class{constructor(e,t,r){this.endpoint=e,this.parameters=t,this.networkHash=r,this.listen()}isReadyForRequest=!1;messageHandlers=new Set;isConnectedToInternet=!0;lastPongTime=null;heartbeatIntervalTimer=null;heartbeatDebounce=bi(()=>{this.endpoint==="https://auth.magic.link/"&&this.heartBeatCheck()},ki);async post(e,t){return ct(async(r,i)=>{if(!this.isConnectedToInternet){let l=xr();i(l)}await this.checkRelayerExistsInDOM()||(this.isReadyForRequest=!1,await this.reloadRelayer()),this.isReadyForRequest||await this.waitForReady();let n=[],a=Array.isArray(t)?t.map(l=>l.id):[],o=await Mi(`${e}-${this.parameters}`,t,this.networkHash);await this._post(o);let s=l=>c=>{let{id:h,response:f}=Li(t,c);if(Ci(c),f?.payload.error?.message==="User denied account access.")dt();else if(c.data.deviceShare){let{deviceShare:I}=c.data;vi(I,this.networkHash)}h&&f&&Array.isArray(t)&&a.includes(h)?(n.push(f),n.length===t.length&&(l(),r(n))):h&&f&&!Array.isArray(t)&&h===t.id&&(l(),r(f))},d=this.on(V.MAGIC_HANDLE_RESPONSE,s(()=>d()))})}on(e,t){let r=t.bind(window),i=n=>{n.data.msgType===`${e}-${this.parameters}`&&r(n)};return this.messageHandlers.add(i),()=>this.messageHandlers.delete(i)}waitForReady(){return new Promise(e=>{let t=this.on(V.MAGIC_OVERLAY_READY,()=>{this.isReadyForRequest=!0,e(),t()})})}listen(){this.on(V.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(V.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()}),this.on(V.MAGIC_SEND_PRODUCT_ANNOUNCEMENT,e=>{e.data.response.result.product_announcement&&new ie(H.ProductAnnouncement,e.data.response.result.product_announcement).log()})}heartBeatCheck(){let e=!0,t=async()=>{let r={msgType:`${te.MAGIC_PING}-${this.parameters}`,payload:[]};await this._post(r)};this.heartbeatIntervalTimer=setInterval(async()=>{if(this.lastPongTime){if(Date.now()-this.lastPongTime>je*2){this.reloadRelayer(),e=!0;return}}else if(!e){this.reloadRelayer(),e=!0;return}await t(),e=!1},je)}stopHeartBeat(){this.heartbeatDebounce(),this.lastPongTime=null,this.heartbeatIntervalTimer&&(clearInterval(this.heartbeatIntervalTimer),this.heartbeatIntervalTimer=null)}},qe=["request","overlay","sdk"];function Di(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==G.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Ui=class extends G{compat;__sdk_access_field_descriptors__=new Map;__is_initialized__=!1;utils={createPromiEvent:L,isPromiEvent:pi,encodeJSON:Ye,decodeJSON:br,createJsonRpcRequestPayload:m,standardizeJsonRpcRequestPayload:pe,storage:Ze};constructor(){super(void 0);let e=[this,...Di(this)];qe.forEach(t=>{let r=e.map(o=>Object.getOwnPropertyDescriptor(o,t)),i=r.findIndex(o=>!!o),n=i>0,a=r[i];a&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:a,isPrototypeField:n}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Wr(t)}}))})}init(e){this.__is_initialized__||(qe.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:i}=this.__sdk_access_field_descriptors__.get(t);i?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:i}=e,n=i?` Use \`${i}\` instead.`:"",a=`\`${t}\` will be removed from this Extension in version \`${r}\`.${n}`;return new Fe(this,"DEPRECATION_NOTICE",a)}createWarning(e,t){return new Fe(this,e,t)}createError(e,t,r){return new Gr(this,e,t,r)}},Gi=class extends Ui{},ji=class{static Internal=Gi};export{Y as $,yt as A,Mt as B,Rt as C,Q as D,V as E,O as F,Ve as G,ji as H,$ as I,Lt as J,ie as L,J as N,ye as O,Ct as P,Z as Q,It as R,wt as S,_t as T,we as U,Wi as V,Xe as W,Fi as X,M as Y,ft as Z,P as _,xi as a,pi as b,x as c,Gr as d,Tt as e,St as f,Nt as g,vt as h,u as i,Vi as j,Ot as k,T as l,xr as m,C as n,W as o,Et as p,At as q,He as r,bt as s,Fe as t,me as u,H as v,$t as w,gt as x,te as y,Pt as z};
