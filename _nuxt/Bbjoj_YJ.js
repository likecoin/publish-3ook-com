(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"cd189bad150b481aa5ecb2e95de26ec677010e55"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b31181c9-ccf3-44fa-bd1f-f642766afff7",e._sentryDebugIdIdentifier="sentry-dbid-b31181c9-ccf3-44fa-bd1f-f642766afff7")})()}catch{}var f={addition:"inserted",attributes:"propertyName",bold:"strong",cite:"keyword",code:"monospace",definitionList:"list",deletion:"deleted",div:"punctuation",em:"emphasis",footnote:"variable",footCite:"qualifier",header:"heading",html:"comment",image:"atom",italic:"emphasis",link:"link",linkDefinition:"link",list1:"list",list2:"list.special",list3:"list",notextile:"string.special",pre:"operator",p:"content",quote:"bracket",span:"quote",specialChar:"character",strong:"strong",sub:"content.special",sup:"content.special",table:"variableName.special",tableHeading:"operator"};function h(e,n){n.mode=r.newLayout,n.tableHeading=!1,n.layoutType==="definitionList"&&n.spanningLayout&&e.match(l("definitionListEnd"),!1)&&(n.spanningLayout=!1)}function b(e,n,i){if(i==="_")return e.eat("_")?a(e,n,"italic",/__/,2):a(e,n,"em",/_/,1);if(i==="*")return e.eat("*")?a(e,n,"bold",/\*\*/,2):a(e,n,"strong",/\*/,1);if(i==="[")return e.match(/\d+\]/)&&(n.footCite=!0),u(n);if(i==="("){var o=e.match(/^(r|tm|c)\)/);if(o)return f.specialChar}if(i==="<"&&e.match(/(\w+)[^>]+>[^<]+<\/\1>/))return f.html;if(i==="?"&&e.eat("?"))return a(e,n,"cite",/\?\?/,2);if(i==="="&&e.eat("="))return a(e,n,"notextile",/==/,2);if(i==="-"&&!e.eat("-"))return a(e,n,"deletion",/-/,1);if(i==="+")return a(e,n,"addition",/\+/,1);if(i==="~")return a(e,n,"sub",/~/,1);if(i==="^")return a(e,n,"sup",/\^/,1);if(i==="%")return a(e,n,"span",/%/,1);if(i==="@")return a(e,n,"code",/@/,1);if(i==="!"){var c=a(e,n,"image",/(?:\([^\)]+\))?!/,1);return e.match(/^:\S+/),c}return u(n)}function a(e,n,i,o,c){var d=e.pos>c?e.string.charAt(e.pos-c-1):null,s=e.peek();if(n[i]){if((!s||/\W/.test(s))&&d&&/\S/.test(d)){var y=u(n);return n[i]=!1,y}}else(!d||/\W/.test(d))&&s&&/\S/.test(s)&&e.match(new RegExp("^.*\\S"+o.source+"(?:\\W|$)"),!1)&&(n[i]=!0,n.mode=r.attributes);return u(n)}function u(e){var n=p(e);if(n)return n;var i=[];return e.layoutType&&i.push(f[e.layoutType]),i=i.concat(g(e,"addition","bold","cite","code","deletion","em","footCite","image","italic","link","span","strong","sub","sup","table","tableHeading")),e.layoutType==="header"&&i.push(f.header+"-"+e.header),i.length?i.join(" "):null}function p(e){var n=e.layoutType;switch(n){case"notextile":case"code":case"pre":return f[n];default:return e.notextile?f.notextile+(n?" "+f[n]:""):null}}function g(e){for(var n=[],i=1;i<arguments.length;++i)e[arguments[i]]&&n.push(f[arguments[i]]);return n}function m(e){var n=e.spanningLayout,i=e.layoutType;for(var o in e)e.hasOwnProperty(o)&&delete e[o];e.mode=r.newLayout,n&&(e.layoutType=i,e.spanningLayout=!0)}var t={cache:{},single:{bc:"bc",bq:"bq",definitionList:/- .*?:=+/,definitionListEnd:/.*=:\s*$/,div:"div",drawTable:/\|.*\|/,foot:/fn\d+/,header:/h[1-6]/,html:/\s*<(?:\/)?(\w+)(?:[^>]+)?>(?:[^<]+<\/\1>)?/,link:/[^"]+":\S/,linkDefinition:/\[[^\s\]]+\]\S+/,list:/(?:#+|\*+)/,notextile:"notextile",para:"p",pre:"pre",table:"table",tableCellAttributes:/[\/\\]\d+/,tableHeading:/\|_\./,tableText:/[^"_\*\[\(\?\+~\^%@|-]+/,text:/[^!"_=\*\[\(<\?\+~\^%@-]+/},attributes:{align:/(?:<>|<|>|=)/,selector:/\([^\(][^\)]+\)/,lang:/\[[^\[\]]+\]/,pad:/(?:\(+|\)+){1,2}/,css:/\{[^\}]+\}/},createRe:function(e){switch(e){case"drawTable":return t.makeRe("^",t.single.drawTable,"$");case"html":return t.makeRe("^",t.single.html,"(?:",t.single.html,")*","$");case"linkDefinition":return t.makeRe("^",t.single.linkDefinition,"$");case"listLayout":return t.makeRe("^",t.single.list,l("allAttributes"),"*\\s+");case"tableCellAttributes":return t.makeRe("^",t.choiceRe(t.single.tableCellAttributes,l("allAttributes")),"+\\.");case"type":return t.makeRe("^",l("allTypes"));case"typeLayout":return t.makeRe("^",l("allTypes"),l("allAttributes"),"*\\.\\.?","(\\s+|$)");case"attributes":return t.makeRe("^",l("allAttributes"),"+");case"allTypes":return t.choiceRe(t.single.div,t.single.foot,t.single.header,t.single.bc,t.single.bq,t.single.notextile,t.single.pre,t.single.table,t.single.para);case"allAttributes":return t.choiceRe(t.attributes.selector,t.attributes.css,t.attributes.lang,t.attributes.align,t.attributes.pad);default:return t.makeRe("^",t.single[e])}},makeRe:function(){for(var e="",n=0;n<arguments.length;++n){var i=arguments[n];e+=typeof i=="string"?i:i.source}return new RegExp(e)},choiceRe:function(){for(var e=[arguments[0]],n=1;n<arguments.length;++n)e[n*2-1]="|",e[n*2]=arguments[n];return e.unshift("(?:"),e.push(")"),t.makeRe.apply(null,e)}};function l(e){return t.cache[e]||(t.cache[e]=t.createRe(e))}var r={newLayout:function(e,n){if(e.match(l("typeLayout"),!1))return n.spanningLayout=!1,(n.mode=r.blockType)(e,n);var i;return p(n)||(e.match(l("listLayout"),!1)?i=r.list:e.match(l("drawTable"),!1)?i=r.table:e.match(l("linkDefinition"),!1)?i=r.linkDefinition:e.match(l("definitionList"))?i=r.definitionList:e.match(l("html"),!1)&&(i=r.html)),(n.mode=i||r.text)(e,n)},blockType:function(e,n){var i,o;if(n.layoutType=null,i=e.match(l("type")))o=i[0];else return(n.mode=r.text)(e,n);return(i=o.match(l("header")))?(n.layoutType="header",n.header=parseInt(i[0][1])):o.match(l("bq"))?n.layoutType="quote":o.match(l("bc"))?n.layoutType="code":o.match(l("foot"))?n.layoutType="footnote":o.match(l("notextile"))?n.layoutType="notextile":o.match(l("pre"))?n.layoutType="pre":o.match(l("div"))?n.layoutType="div":o.match(l("table"))&&(n.layoutType="table"),n.mode=r.attributes,u(n)},text:function(e,n){if(e.match(l("text")))return u(n);var i=e.next();return i==='"'?(n.mode=r.link)(e,n):b(e,n,i)},attributes:function(e,n){return n.mode=r.layoutLength,e.match(l("attributes"))?f.attributes:u(n)},layoutLength:function(e,n){return e.eat(".")&&e.eat(".")&&(n.spanningLayout=!0),n.mode=r.text,u(n)},list:function(e,n){var i=e.match(l("list"));n.listDepth=i[0].length;var o=(n.listDepth-1)%3;return o?o===1?n.layoutType="list2":n.layoutType="list3":n.layoutType="list1",n.mode=r.attributes,u(n)},link:function(e,n){return n.mode=r.text,e.match(l("link"))?(e.match(/\S+/),f.link):u(n)},linkDefinition:function(e){return e.skipToEnd(),f.linkDefinition},definitionList:function(e,n){return e.match(l("definitionList")),n.layoutType="definitionList",e.match(/\s*$/)?n.spanningLayout=!0:n.mode=r.attributes,u(n)},html:function(e){return e.skipToEnd(),f.html},table:function(e,n){return n.layoutType="table",(n.mode=r.tableCell)(e,n)},tableCell:function(e,n){return e.match(l("tableHeading"))?n.tableHeading=!0:e.eat("|"),n.mode=r.tableCellAttributes,u(n)},tableCellAttributes:function(e,n){return n.mode=r.tableText,e.match(l("tableCellAttributes"))?f.attributes:u(n)},tableText:function(e,n){return e.match(l("tableText"))?u(n):e.peek()==="|"?(n.mode=r.tableCell,u(n)):b(e,n,e.next())}};const T={name:"textile",startState:function(){return{mode:r.newLayout}},token:function(e,n){return e.sol()&&h(e,n),n.mode(e,n)},blankLine:m};export{T as textile};
