{"version":3,"mappings":"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","names":["InvalidDecimalNumberError","BaseError","value","parseUnits","decimals","integer","fraction","negative","left","unit","right","rounded","parseEther","ether","etherUnits","sendTransaction","config","parameters","account","chainId","connector","rest","client","getConnectorClient","getAction","viem_sendTransaction","sendTransactionMutationOptions","variables","useSendTransaction","mutation","useConfig","mutationOptions","mutate","mutateAsync","result","useMutation","Provider","publicKey","fileSize","ipfsHash","txHash","token","newPubKey","_domain","_types","message","convertedMsg","apiEndpoints","getApiEndpoints","res","signature","bSig","WebIrys","getProvider","data","getBundler","__vitePreload","p","IS_TESTNET","useRuntimeConfig","bundlr","estimateBundlrFilePrice","uploadSingleFileToBundlr","file","fileType","key","bundler","tags","arweaveId","ARWEAVE_ENDPOINT","arweaveLink","getWebCrypto","webCrypto","concatenateArrayBuffers","buffer1","buffer2","combinedBuffer","bufferToBase64","buf","encryptDataWithAES","params","encryptedDataAESKey","iv","encryptedData","combinedArrayBuffer","rawEncryptedKey","isValidImageUrl","urlString","url","formatISCNTxPayload","payload","tagsString","license","author","authorDescription","contentFingerprintsInput","publisherInput","contentFingerprints","validateISCNForm","maxDescriptionLength","MAX_DESCRIPTION_LENGTH","errors","desc","f","getFileMimeType","useISCN","iscnFormData","iscnChainData","ref","getFileTypeFromMime","formattedPotentialActionList","computed","arweaveLinkEndpoint","urlObj","isEncrypted","existingIscnData","getAttributes","attributes","msgSender","saltData","nonce","fromHex","hash","sha256","stringToHex","msgSenderBytes","salt","toHex"],"ignoreList":[],"sources":["../../../node_modules/viem/_esm/errors/unit.js","../../../node_modules/viem/_esm/utils/unit/parseUnits.js","../../../node_modules/viem/_esm/utils/unit/parseEther.js","../../../node_modules/@wagmi/core/dist/esm/actions/sendTransaction.js","../../../node_modules/@wagmi/core/dist/esm/query/sendTransaction.js","../../../node_modules/@wagmi/vue/dist/esm/composables/useSendTransaction.js","../../../utils/arweave.ts","../../../utils/encryption.ts","../../../utils/iscn.ts","../../../composables/useISCN.ts"],"sourcesContent":["import { BaseError } from './base.js';\nexport class InvalidDecimalNumberError extends BaseError {\n    constructor({ value }) {\n        super(`Number \\`${value}\\` is not a valid decimal number.`, {\n            name: 'InvalidDecimalNumberError',\n        });\n    }\n}\n//# sourceMappingURL=unit.js.map","import { InvalidDecimalNumberError } from '../../errors/unit.js';\n/**\n * Multiplies a string representation of a number by a given exponent of base 10 (10exponent).\n *\n * - Docs: https://viem.sh/docs/utilities/parseUnits\n *\n * @example\n * import { parseUnits } from 'viem'\n *\n * parseUnits('420', 9)\n * // 420000000000n\n */\nexport function parseUnits(value, decimals) {\n    if (!/^(-?)([0-9]*)\\.?([0-9]*)$/.test(value))\n        throw new InvalidDecimalNumberError({ value });\n    let [integer, fraction = '0'] = value.split('.');\n    const negative = integer.startsWith('-');\n    if (negative)\n        integer = integer.slice(1);\n    // trim trailing zeros.\n    fraction = fraction.replace(/(0+)$/, '');\n    // round off if the fraction is larger than the number of decimals.\n    if (decimals === 0) {\n        if (Math.round(Number(`.${fraction}`)) === 1)\n            integer = `${BigInt(integer) + 1n}`;\n        fraction = '';\n    }\n    else if (fraction.length > decimals) {\n        const [left, unit, right] = [\n            fraction.slice(0, decimals - 1),\n            fraction.slice(decimals - 1, decimals),\n            fraction.slice(decimals),\n        ];\n        const rounded = Math.round(Number(`${unit}.${right}`));\n        if (rounded > 9)\n            fraction = `${BigInt(left) + BigInt(1)}0`.padStart(left.length + 1, '0');\n        else\n            fraction = `${left}${rounded}`;\n        if (fraction.length > decimals) {\n            fraction = fraction.slice(1);\n            integer = `${BigInt(integer) + 1n}`;\n        }\n        fraction = fraction.slice(0, decimals);\n    }\n    else {\n        fraction = fraction.padEnd(decimals, '0');\n    }\n    return BigInt(`${negative ? '-' : ''}${integer}${fraction}`);\n}\n//# sourceMappingURL=parseUnits.js.map","import { etherUnits } from '../../constants/unit.js';\nimport { parseUnits } from './parseUnits.js';\n/**\n * Converts a string representation of ether to numerical wei.\n *\n * - Docs: https://viem.sh/docs/utilities/parseEther\n *\n * @example\n * import { parseEther } from 'viem'\n *\n * parseEther('420')\n * // 420000000000000000000n\n */\nexport function parseEther(ether, unit = 'wei') {\n    return parseUnits(ether, etherUnits[unit]);\n}\n//# sourceMappingURL=parseEther.js.map","import { sendTransaction as viem_sendTransaction } from 'viem/actions';\nimport { getAction } from '../utils/getAction.js';\nimport { getConnectorClient, } from './getConnectorClient.js';\n/** https://wagmi.sh/core/api/actions/sendTransaction */\nexport async function sendTransaction(config, parameters) {\n    const { account, chainId, connector, ...rest } = parameters;\n    let client;\n    if (typeof account === 'object' && account?.type === 'local')\n        client = config.getClient({ chainId });\n    else\n        client = await getConnectorClient(config, {\n            account: account ?? undefined,\n            assertChainId: false,\n            chainId,\n            connector,\n        });\n    const action = getAction(client, viem_sendTransaction, 'sendTransaction');\n    const hash = await action({\n        ...rest,\n        ...(account ? { account } : {}),\n        chain: chainId ? { id: chainId } : null,\n        gas: rest.gas ?? undefined,\n    });\n    return hash;\n}\n//# sourceMappingURL=sendTransaction.js.map","import { sendTransaction, } from '../actions/sendTransaction.js';\nexport function sendTransactionMutationOptions(config) {\n    return {\n        mutationFn(variables) {\n            return sendTransaction(config, variables);\n        },\n        mutationKey: ['sendTransaction'],\n    };\n}\n//# sourceMappingURL=sendTransaction.js.map","import { useMutation } from '@tanstack/vue-query';\nimport { sendTransactionMutationOptions, } from '@wagmi/core/query';\nimport { useConfig } from './useConfig.js';\n/** https://wagmi.sh/vue/api/composables/useSendTransaction */\nexport function useSendTransaction(parameters = {}) {\n    const { mutation } = parameters;\n    const config = useConfig(parameters);\n    const mutationOptions = sendTransactionMutationOptions(config);\n    const { mutate, mutateAsync, ...result } = useMutation({\n        ...mutation,\n        ...mutationOptions,\n    });\n    return {\n        ...result,\n        sendTransaction: mutate,\n        sendTransactionAsync: mutateAsync,\n    };\n}\n//# sourceMappingURL=useSendTransaction.js.map","import { getApiEndpoints } from '~/constant/api'\nimport type { ArweaveEstimate } from '~/types'\n\nclass Provider {\n  pubKey: Buffer | null = null\n  fileSize = 0\n  ipfsHash = ''\n  txHash = ''\n  token = ''\n\n  constructor ({\n    publicKey,\n    fileSize,\n    ipfsHash,\n    txHash,\n    token\n  }: {\n    publicKey: string\n    fileSize: number\n    ipfsHash: string\n    txHash: string\n    token: string\n  }) {\n    this.pubKey = Buffer.from(publicKey, 'base64')\n    this.fileSize = fileSize\n    this.ipfsHash = ipfsHash\n    this.txHash = txHash\n    this.token = token\n  }\n\n  setLikeCoinTxInfo ({\n    fileSize,\n    ipfsHash,\n    txHash\n  }: {\n    fileSize: number\n    ipfsHash: string\n    txHash: string\n  }) {\n    this.fileSize = fileSize\n    this.ipfsHash = ipfsHash\n    this.txHash = txHash\n  }\n\n  setPublicKey (newPubKey: string) {\n    this.pubKey = Buffer.from(newPubKey, 'base64')\n  }\n\n  getPublicKey () {\n    return this.pubKey\n  }\n\n  setAuthToken (token: string) {\n    this.token = token\n  }\n\n  getSigner = () => ({\n    getAddress: () => this.pubKey?.toString(),\n    _signTypedData: async (\n      _domain: never,\n      _types: never,\n      message: { address: string; 'Transaction hash': Uint8Array }\n    ) => {\n      const convertedMsg = Buffer.from(message['Transaction hash']).toString(\n        'base64'\n      )\n      const apiEndpoints = getApiEndpoints()\n      const res = await $fetch(apiEndpoints.API_POST_ARWEAVE_V2_SIGN, {\n        method: 'POST',\n        body: {\n          signatureData: convertedMsg,\n          fileSize: this.fileSize,\n          ipfsHash: this.ipfsHash,\n          txToken: 'BASEETH',\n          txHash: this.txHash\n        },\n        headers: { Authorization: this.token ? `Bearer ${this.token}` : '' }\n      })\n      const { signature } = res as { signature: string }\n      const bSig = Buffer.from(signature, 'base64')\n      // pad & convert so it's in the format the signer expects to have to convert from.\n      const pad = Buffer.concat([\n        Buffer.from([0]) as Buffer,\n        bSig\n      ]).toString(\n        'hex'\n      )\n      return pad\n    }\n  })\n\n  _ready () {}\n}\n\nlet WebIrys: typeof import('@irys/sdk').WebIrys | null = null\n\nasync function getProvider ({\n  fileSize,\n  ipfsHash,\n  txHash,\n  token\n}: {\n  fileSize: number\n  ipfsHash: string\n  txHash: string\n  token: string\n}) {\n  const apiEndpoints = getApiEndpoints()\n  const data = await $fetch(apiEndpoints.API_GET_ARWEAVE_V2_PUBLIC_KEY)\n  const { publicKey } = data as { publicKey: string }\n  const provider = new Provider({ publicKey, fileSize, ipfsHash, txHash, token })\n  return provider\n}\n\nasync function getBundler ({\n  fileSize,\n  ipfsHash,\n  txHash,\n  token\n}: {\n  fileSize: number\n  ipfsHash: string\n  txHash: string\n  token: string\n}) {\n  if (!WebIrys) {\n    ({ WebIrys } = (await import('@irys/sdk')))\n  }\n  if (!WebIrys) {\n    throw new Error('Failed to load WebIrys from @irys/sdk')\n  }\n  const p = await getProvider({ fileSize, ipfsHash, txHash, token })\n  const { IS_TESTNET } = useRuntimeConfig().public\n  const bundlr = new WebIrys({\n    url: IS_TESTNET ? 'https://devnet.irys.xyz' : 'https://node1.irys.xyz',\n    token: 'base-eth',\n    wallet: {\n      provider: p\n    }\n  })\n  await bundlr.ready()\n  return bundlr\n}\n\nexport async function estimateBundlrFilePrice ({\n  fileSize,\n  ipfsHash\n}: {\n  fileSize: number\n  ipfsHash?: string\n}): Promise<ArweaveEstimate> {\n  const apiEndpoints = getApiEndpoints()\n  const data = await $fetch<ArweaveEstimate>(apiEndpoints.API_POST_ARWEAVE_V2_ESTIMATE, {\n    method: 'POST',\n    body: {\n      fileSize,\n      ipfsHash\n    }\n  })\n  return data\n}\n\nexport async function uploadSingleFileToBundlr (\n  file: Buffer,\n  {\n    fileType,\n    fileSize,\n    ipfsHash,\n    txHash,\n    token,\n    key\n  }: { fileSize: number; fileType?: string, ipfsHash: string; txHash: string, token: string, key?: string }\n) {\n  const bundler = await getBundler({ fileSize, ipfsHash, txHash, token })\n  const tags = [\n    { name: 'App-Name', value: 'publish.3ook.com' },\n    { name: 'App-Version', value: '2.0' },\n    { name: 'User-Agent', value: 'publish.3ook.com' },\n    { name: 'IPFS-CID', value: ipfsHash }\n  ]\n  if (fileType) { tags.push({ name: 'Content-Type', value: fileType }) }\n  if (key) { tags.push({ name: 'Content-Encoding', value: 'aes256gcm' }) }\n  const response = await bundler.upload(file, { tags })\n  const arweaveId = response.id\n  const { ARWEAVE_ENDPOINT } = useRuntimeConfig().public\n  let arweaveLink = `${ARWEAVE_ENDPOINT}/${arweaveId}`\n  if (arweaveId) {\n    const apiEndpoints = getApiEndpoints()\n    const data = await $fetch(apiEndpoints.API_POST_ARWEAVE_V2_REGISTER, {\n      method: 'POST',\n      body: {\n        fileSize,\n        ipfsHash,\n        txHash,\n        arweaveId,\n        key\n      },\n      headers: { Authorization: token ? `Bearer ${token}` : '' }\n    })\n    const result = data as { link?: string }\n    if (result?.link) {\n      arweaveLink = result.link\n    }\n  }\n  return {\n    arweaveId,\n    arweaveLink,\n    arweaveKey: key\n  }\n}\n","// from https://github.com/labscommunity/arweavekit/blob/main/src/lib/encryption.ts\n\nfunction getWebCrypto () {\n  let webCrypto: Crypto\n  if (typeof window !== 'undefined' && window.crypto) {\n    webCrypto = window.crypto\n  } else {\n    throw new Error('Crypto API is not available.')\n  }\n  return webCrypto\n}\n\nfunction concatenateArrayBuffers (buffer1: ArrayBuffer, buffer2: ArrayBuffer) {\n  const combinedBuffer = new Uint8Array(buffer1.byteLength + buffer2.byteLength)\n  combinedBuffer.set(new Uint8Array(buffer1), 0)\n  combinedBuffer.set(new Uint8Array(buffer2), buffer1.byteLength)\n\n  return combinedBuffer.buffer\n}\n\nfunction bufferToBase64 (buf: ArrayBuffer) {\n  return Buffer.from(buf).toString('base64')\n}\n\nexport async function encryptDataWithAES (\n  params: { data: ArrayBuffer; }\n) {\n  const webCrypto = getWebCrypto()\n\n  const encryptedDataAESKey = await webCrypto.subtle.generateKey(\n    {\n      name: 'AES-GCM',\n      length: 256\n    },\n    true,\n    ['encrypt', 'decrypt']\n  )\n\n  const iv = webCrypto.getRandomValues(new Uint8Array(12))\n\n  const encryptedData = await webCrypto.subtle.encrypt(\n    {\n      name: 'AES-GCM',\n      iv\n    },\n    encryptedDataAESKey,\n    params.data\n  )\n\n  const combinedArrayBuffer = concatenateArrayBuffers(iv.buffer, encryptedData)\n\n  const rawEncryptedKey = await webCrypto.subtle.exportKey(\n    'raw',\n    encryptedDataAESKey\n  )\n\n  const rawEncryptedKeyAsBase64 = bufferToBase64(rawEncryptedKey)\n\n  return { rawEncryptedKeyAsBase64, combinedArrayBuffer }\n}\n","import type { ISCNRegisterPayload, ISCNTxPayload, ISCNValidationData } from './iscn.type'\nimport { MAX_DESCRIPTION_LENGTH } from '~/constant'\n\nfunction isValidImageUrl (urlString: string): boolean {\n  if (!urlString) { return false }\n\n  // Check that non-ASCII characters are percent-encoded\n  // URL should only contain ASCII characters (0-127)\n  if (!/^[\\x20-\\x7E]+$/.test(urlString)) {\n    return false\n  }\n\n  try {\n    const url = new URL(urlString)\n    return ['http:', 'https:', 'ar:', 'ipfs:'].includes(url.protocol)\n  } catch {\n    return false\n  }\n}\n\nexport function formatISCNTxPayload (payload: ISCNRegisterPayload): ISCNTxPayload {\n  const {\n    tagsString = '',\n    license,\n    author,\n    authorDescription,\n    contentFingerprints: contentFingerprintsInput = [],\n    publisher: publisherInput,\n    ...data\n  } = payload\n\n  const contentFingerprints = [...contentFingerprintsInput]\n\n  const authorEntity = (author && authorDescription)\n    ? {\n        name: author,\n        description: authorDescription\n      }\n    : author\n\n  return {\n    ...data,\n    publisher: publisherInput,\n    author: authorEntity,\n    keywords: tagsString.split(','),\n    usageInfo: license,\n    contentFingerprints: [...new Set(contentFingerprints)]\n  }\n}\n\nexport function validateISCNForm (data: ISCNValidationData, maxDescriptionLength = MAX_DESCRIPTION_LENGTH): string[] {\n  const errors: string[] = []\n  const desc = data.description || ''\n\n  if (!data.title) {\n    errors.push('Please fill in the title')\n  }\n\n  if (!desc) {\n    errors.push('Please fill in the description')\n  } else if (desc.length > maxDescriptionLength) {\n    errors.push(`Description cannot exceed ${maxDescriptionLength} characters`)\n  }\n\n  if (!data.author?.name) {\n    errors.push('Please fill in the author name')\n  }\n\n  if (!Array.isArray(data.contentFingerprints) || !data.contentFingerprints.some((f: { url: string }) => !!f.url)) {\n    errors.push('Please provide at least one content URL')\n  }\n\n  if (!data.coverUrl) {\n    errors.push('Please provide a cover image URL')\n  } else if (!isValidImageUrl(data.coverUrl)) {\n    errors.push('Cover image URL must be a valid URL with http://, https://, ar://, or ipfs:// protocol')\n  }\n\n  return errors\n}\n","import { sha256, toHex, fromHex, stringToHex } from 'viem'\nimport { getApiEndpoints } from '~/constant/api'\nimport type { ISCNFormData, ClassMetadata } from '~/utils/iscn.type'\n\nconst getFileMimeType = (fileType: string): string => {\n  switch (fileType) {\n    case 'epub':\n      return 'application/epub+zip'\n    case 'pdf':\n      return 'application/pdf'\n    default:\n      return 'application/octet-stream'\n  }\n}\n\nexport function useISCN ({\n  iscnFormData,\n  iscnChainData = ref({})\n}: {\n  iscnFormData: Ref<ISCNFormData>;\n  iscnChainData?: Ref<ClassMetadata>;\n}) {\n  const getFileTypeFromMime = (fileType: string): string => {\n    switch (fileType) {\n      case 'application/epub+zip':\n        return 'epub'\n      case 'application/pdf':\n        return 'pdf'\n      case 'application/octet-stream':\n      default:\n        return ''\n    }\n  }\n\n  const formattedPotentialActionList = computed(() => {\n    const apiEndpoints = getApiEndpoints()\n    const arweaveLinkEndpoint = apiEndpoints.API_GET_ARWEAVE_V2_LINK\n    if (!iscnFormData.value.downloadableUrls?.length) {\n      return undefined\n    }\n    return {\n      '@type': 'ReadAction',\n      target: iscnFormData.value.downloadableUrls.map((urlObj: { url: string; type: string; fileName: string }) => {\n        const isEncrypted = urlObj.url?.startsWith(arweaveLinkEndpoint) || urlObj.url?.includes('?key=')\n        return {\n          '@type': 'EntryPoint',\n          contentType: getFileMimeType(urlObj.type),\n          url: urlObj.url,\n          name: urlObj.fileName,\n          encodingType: isEncrypted ? 'aes256gcm' : undefined\n        }\n      })\n    }\n  })\n\n  const existingIscnData = computed<ClassMetadata>(() => iscnChainData?.value || {})\n\n  const getAttributes = (data: ISCNFormData) => {\n    const attributes = []\n    if (data.author) {\n      attributes.push({\n        trait_type: 'Author',\n        value: data.author.name || data.author\n      })\n    }\n    if (data.publisher) {\n      attributes.push({\n        trait_type: 'Publisher',\n        value: data.publisher\n      })\n    }\n    if (data.publicationDate) {\n      attributes.push({\n        trait_type: 'Publish Date',\n        display_type: 'date',\n        value: ((new Date(data.publicationDate)).getTime() || 0) / 1000\n      })\n    }\n    return attributes.length ? attributes : undefined\n  }\n\n  const payload = computed(() => ({\n    ...existingIscnData.value,\n    '@type': iscnFormData.value.type,\n    name: iscnFormData.value.title,\n    description: iscnFormData.value.description,\n    descriptionFull: iscnFormData.value.descriptionFull || undefined,\n    alternativeHeadline: iscnFormData.value.alternativeHeadline || undefined,\n    author: iscnFormData.value.author.name,\n    authorDescription: iscnFormData.value.author.description,\n    license:\n      iscnFormData.value.license === 'Other'\n        ? iscnFormData.value.customLicense\n        : iscnFormData.value.license,\n    contentFingerprints: iscnFormData.value.contentFingerprints.map(\n      (f: { url: string }) => f.url\n    ),\n    inLanguage: iscnFormData.value.language,\n    publisher: iscnFormData.value.publisher,\n    isbn: iscnFormData.value.isbn,\n    datePublished: iscnFormData.value.publicationDate\n      ? new Date(iscnFormData.value.publicationDate).toISOString().split('T')[0]\n      : undefined,\n    url: iscnFormData.value.bookInfoUrl,\n    tagsString: iscnFormData.value.tags?.join(', ') || '',\n    thumbnailUrl: iscnFormData.value.coverUrl,\n    genre: iscnFormData.value.genre || undefined,\n    potentialAction: formattedPotentialActionList.value,\n    attributes: getAttributes(iscnFormData.value)\n  }))\n\n  const computeISCNSalt = (msgSender: `0x${string}`) => {\n    const saltData: string = formattedPotentialActionList.value?.target[0]?.url || ''\n    const nonce = fromHex('0x0001', 'bytes') // 1 for book press\n\n    const hash = sha256(stringToHex(saltData))\n    const data = fromHex(hash, 'bytes').slice(0, 10)\n\n    const msgSenderBytes = fromHex(msgSender, 'bytes')\n\n    // Combine: msgSender (20 bytes) + nonce (2 bytes) + data (10 bytes) = 32 bytes\n    const salt = new Uint8Array(32)\n    salt.set(msgSenderBytes, 0)\n    salt.set(nonce, 20)\n    salt.set(data, 22)\n\n    return toHex(salt)\n  }\n\n  return {\n    getFileMimeType,\n    getFileTypeFromMime,\n    payload,\n    computeISCNSalt\n  }\n}\n"],"file":"2HupUEEh.js"}