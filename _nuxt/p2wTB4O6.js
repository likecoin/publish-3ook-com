const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CL7xOAbk.js","./9S2XGRg9.js","./entry.Cz7mG32V.css","./DvvTWQeW.js","./D3om2a5D.js","./D89E3aNf.js"])))=>i.map(i=>d[i]);
import{g as G,Q as Y,a as H,A as K,w as Q,V as J,o as W,e as f,y as X,aD as Z,l as T,m as _,n as v,L as p,p as l,M as q,q as t,ab as ee,a0 as te,a9 as oe,$ as h,a1 as ne,ac as ae,C as y,aa as x,ad as U,c as le}from"./9S2XGRg9.js";import{_ as se}from"./Bu69eulW.js";import{g as re,_ as ie,a as ce,d as de,D as ue,b as fe,c as _e}from"./CL7xOAbk.js";import{_ as pe}from"./CLuOJMie.js";import{p as me}from"./Do9u-xqN.js";import"./DvvTWQeW.js";import"./D3om2a5D.js";import"./D89E3aNf.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};r.SENTRY_RELEASE={id:"cd189bad150b481aa5ecb2e95de26ec677010e55"}}catch{}})();try{(function(){var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new r.Error().stack;n&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[n]="4e995a59-400e-4cf0-a189-fb3065b2381f",r._sentryDebugIdIdentifier="sentry-dbid-4e995a59-400e-4cf0-a189-fb3065b2381f")})()}catch{}const ge={class:"text-lg font-bold font-mono print:hidden"},be={class:"print:hidden flex justify-center"},ve={class:"font-bold font-mono"},he={class:"flex justify-center items-center gap-2 print:hidden"},ye={class:"flex flex-col items-center gap-[2cm] print:gap-0"},Ce={class:"text-xs text-center font-mono"},E="key,url",$=12,Ie=G({__name:"batch-qrcode",setup(r){const{t:n}=Y(),{BOOK3_URL:O}=H().public,B=K(),s=f(""),A=`${E}
example01,https://example01.com
example02,https://example02.com`,m=f(ue),C=f(fe),k=f(_e),g=f(!1),S=f(void 0),i=f([]),L=le(()=>{const o=[];for(let e=0;e<i.value.length;e+=$)o.push(i.value.slice(e,e+$));return o});Q(s,()=>{i.value=[]}),Q(m,()=>{i.value=[]}),J({title:"Batch Create Book QR Codes",ogTitle:"Batch Create Book QR Codes"}),W(()=>{try{const o=sessionStorage.getItem("nft_book_press_batch_qrcode");o&&(s.value=o,sessionStorage.removeItem("nft_book_press_batch_qrcode")),X(()=>{s.value&&I()})}catch(o){console.error(o)}});function D(){return{image:m.value==="none"?void 0:ce(m.value),fillColor:C.value,dotStyle:k.value}}async function I(){try{let e=s.value;e.includes(E)||(e=`${E}
${e}`),i.value=me(e,{columns:!0,skip_empty_lines:!0})}catch(e){console.error(e),B.add({icon:"i-heroicons-exclamation-circle",title:n("batch_qrcode.parse_csv_error"),duration:0,color:"error"})}const{default:o}=await Z(async()=>{const{default:e}=await import("./CL7xOAbk.js").then(c=>c.q);return{default:e}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);i.value.forEach((e,c)=>{const u=new o(re({margin:0,data:e.url,...D()})),d=S.value?.[c];d&&(d.querySelector("svg")?.remove(),u.append(d),d.querySelector("svg")?.setAttribute("viewBox","0 0 300 300"))})}function F(o){const e=o.target?.files;if(!e?.length)return;const c=e[0];if(!c)return;const u=new FileReader;u.onload=d=>{const R=d.target?.result;typeof R=="string"&&(s.value=R)},u.readAsText(c)}function P(){s.value&&window.print()}function V(){de(i.value.map(o=>({filename:o.key,url:o.url})),{qrCodeOptions:{...D(),margin:40,width:1024,height:1024}})}return(o,e)=>{const c=te,u=ee,d=oe,R=se,b=ne,M=ie,z=ae,N=pe;return _(),T(N,{class:"print:space-y-0 print:p-0"},{default:v(()=>[p("h1",ge,q(t(n)("batch_qrcode.page_title")),1),l(u,{label:t(n)("batch_qrcode.upload_csv"),class:"print:hidden"},{default:v(()=>[l(c,{type:"file",accept:"csv",onChange:F})]),_:1},8,["label"]),l(d,{class:"print:hidden",label:t(n)("batch_qrcode.or_divider")},null,8,["label"]),l(u,{class:"print:hidden",label:t(n)("batch_qrcode.input_csv")},{default:v(()=>[l(R,{modelValue:t(s),"onUpdate:modelValue":e[0]||(e[0]=a=>h(s)?s.value=a:null),class:"font-mono",placeholder:A,resize:!0},null,8,["modelValue"])]),_:1},8,["label"]),p("div",be,[l(b,{label:t(n)("batch_qrcode.qr_appearance"),variant:"outline",onClick:e[1]||(e[1]=a=>g.value=!0)},null,8,["label"])]),l(z,{open:t(g),"onUpdate:open":e[7]||(e[7]=a=>h(g)?g.value=a:null)},{content:v(()=>[l(M,{icon:t(m),"onUpdate:icon":e[3]||(e[3]=a=>h(m)?m.value=a:null),color:t(C),"onUpdate:color":e[4]||(e[4]=a=>h(C)?C.value=a:null),"dot-style":t(k),"onUpdate:dotStyle":e[5]||(e[5]=a=>h(k)?k.value=a:null),data:`${t(O)}/store`,width:500,height:500,mode:"config",onSave:e[6]||(e[6]=a=>g.value=!1)},{header:v(()=>[p("h3",ve,q(t(n)("batch_qrcode.qr_config")),1),l(b,{icon:"i-heroicons-x-mark",color:"neutral",variant:"ghost",onClick:e[2]||(e[2]=a=>g.value=!1)})]),_:1},8,["icon","color","dot-style","data"])]),_:1},8,["open"]),p("nav",he,[t(i)?.length?(_(),y(x,{key:1},[l(b,{label:t(n)("batch_qrcode.print"),size:"lg",variant:"outline",onClick:P},null,8,["label"]),l(b,{label:t(n)("batch_qrcode.download"),size:"lg",variant:"outline",onClick:V},null,8,["label"])],64)):(_(),T(b,{key:0,label:t(n)("batch_qrcode.generate"),size:"lg",disabled:!t(s),onClick:I},null,8,["label","disabled"]))]),p("div",ye,[(_(!0),y(x,null,U(t(L),(a,j)=>(_(),y("ul",{key:j,class:"w-[20cm] grid grid-cols-3 items-center gap-[0.25cm] py-[0.5cm] break-before-page"},[(_(!0),y(x,null,U(a,w=>(_(),y("li",{key:w.key||w.url},[p("figure",{ref_for:!0,ref_key:"qrCodeRef",ref:S,class:"qrcode"},[p("figcaption",Ce,q(w.key||w.url),1)],512)]))),128))]))),128))])]),_:1})}}});export{Ie as default};
