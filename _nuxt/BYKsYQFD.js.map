{"version":3,"file":"BYKsYQFD.js","sources":["../../../node_modules/reka-ui/dist/Accordion/AccordionHeader.js","../../../virtual:nuxt:%2Fhome%2Frunner%2Fwork%2Fpublish-3ook-com%2Fpublish-3ook-com%2Fnode_modules%2F.cache%2Fnuxt%2F.nuxt%2Fui%2Faccordion.ts","../../../node_modules/@nuxt/ui/dist/runtime/components/Accordion.vue","../../../pages/purchase-link.vue"],"sourcesContent":["import { useForwardExpose } from \"../shared/useForwardExpose.js\";\nimport { Primitive } from \"../Primitive/Primitive.js\";\nimport { injectAccordionRootContext } from \"./AccordionRoot.js\";\nimport { injectAccordionItemContext } from \"./AccordionItem.js\";\nimport { createBlock, defineComponent, openBlock, renderSlot, unref, withCtx } from \"vue\";\n\n//#region src/Accordion/AccordionHeader.vue?vue&type=script&setup=true&lang.ts\nvar AccordionHeader_vue_vue_type_script_setup_true_lang_default = /* @__PURE__ */ defineComponent({\n\t__name: \"AccordionHeader\",\n\tprops: {\n\t\tasChild: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false\n\t\t},\n\t\tas: {\n\t\t\ttype: null,\n\t\t\trequired: false,\n\t\t\tdefault: \"h3\"\n\t\t}\n\t},\n\tsetup(__props) {\n\t\tconst props = __props;\n\t\tconst rootContext = injectAccordionRootContext();\n\t\tconst itemContext = injectAccordionItemContext();\n\t\tuseForwardExpose();\n\t\treturn (_ctx, _cache) => {\n\t\t\treturn openBlock(), createBlock(unref(Primitive), {\n\t\t\t\tas: props.as,\n\t\t\t\t\"as-child\": props.asChild,\n\t\t\t\t\"data-orientation\": unref(rootContext).orientation,\n\t\t\t\t\"data-state\": unref(itemContext).dataState.value,\n\t\t\t\t\"data-disabled\": unref(itemContext).dataDisabled.value\n\t\t\t}, {\n\t\t\t\tdefault: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n\t\t\t\t_: 3\n\t\t\t}, 8, [\n\t\t\t\t\"as\",\n\t\t\t\t\"as-child\",\n\t\t\t\t\"data-orientation\",\n\t\t\t\t\"data-state\",\n\t\t\t\t\"data-disabled\"\n\t\t\t]);\n\t\t};\n\t}\n});\n\n//#endregion\n//#region src/Accordion/AccordionHeader.vue\nvar AccordionHeader_default = AccordionHeader_vue_vue_type_script_setup_true_lang_default;\n\n//#endregion\nexport { AccordionHeader_default };\n//# sourceMappingURL=AccordionHeader.js.map","export default {\n  \"slots\": {\n    \"root\": \"w-full\",\n    \"item\": \"border-b border-default last:border-b-0\",\n    \"header\": \"flex\",\n    \"trigger\": \"group flex-1 flex items-center gap-1.5 font-medium text-sm py-3.5 focus-visible:outline-primary min-w-0\",\n    \"content\": \"data-[state=open]:animate-[accordion-down_200ms_ease-out] data-[state=closed]:animate-[accordion-up_200ms_ease-out] overflow-hidden focus:outline-none\",\n    \"body\": \"text-sm pb-3.5\",\n    \"leadingIcon\": \"shrink-0 size-5\",\n    \"trailingIcon\": \"shrink-0 size-5 ms-auto group-data-[state=open]:rotate-180 transition-transform duration-200\",\n    \"label\": \"text-start break-words\"\n  },\n  \"variants\": {\n    \"disabled\": {\n      \"true\": {\n        \"trigger\": \"cursor-not-allowed opacity-75\"\n      }\n    }\n  }\n}","<script>\nimport theme from \"#build/ui/accordion\";\n</script>\n\n<script setup>\nimport { computed } from \"vue\";\nimport { AccordionRoot, AccordionItem, AccordionHeader, AccordionTrigger, AccordionContent, useForwardPropsEmits } from \"reka-ui\";\nimport { reactivePick } from \"@vueuse/core\";\nimport { useAppConfig } from \"#imports\";\nimport { get } from \"../utils\";\nimport { tv } from \"../utils/tv\";\nimport UIcon from \"./Icon.vue\";\nconst props = defineProps({\n  as: { type: null, required: false },\n  items: { type: Array, required: false },\n  trailingIcon: { type: String, required: false },\n  labelKey: { type: String, required: false, default: \"label\" },\n  class: { type: null, required: false },\n  ui: { type: null, required: false },\n  collapsible: { type: Boolean, required: false, default: true },\n  defaultValue: { type: null, required: false },\n  modelValue: { type: null, required: false },\n  type: { type: String, required: false, default: \"single\" },\n  disabled: { type: Boolean, required: false },\n  unmountOnHide: { type: Boolean, required: false, default: true }\n});\nconst emits = defineEmits([\"update:modelValue\"]);\nconst slots = defineSlots();\nconst appConfig = useAppConfig();\nconst rootProps = useForwardPropsEmits(reactivePick(props, \"as\", \"collapsible\", \"defaultValue\", \"disabled\", \"modelValue\", \"type\", \"unmountOnHide\"), emits);\nconst ui = computed(() => tv({ extend: tv(theme), ...appConfig.ui?.accordion || {} })({\n  disabled: props.disabled\n}));\n</script>\n\n<template>\n  <AccordionRoot v-bind=\"rootProps\" :class=\"ui.root({ class: [props.ui?.root, props.class] })\">\n    <AccordionItem\n      v-for=\"(item, index) in props.items\"\n      v-slot=\"{ open }\"\n      :key=\"index\"\n      :value=\"item.value || String(index)\"\n      :disabled=\"item.disabled\"\n      :class=\"ui.item({ class: [props.ui?.item, item.ui?.item, item.class] })\"\n    >\n      <AccordionHeader as=\"div\" :class=\"ui.header({ class: [props.ui?.header, item.ui?.header] })\">\n        <AccordionTrigger :class=\"ui.trigger({ class: [props.ui?.trigger, item.ui?.trigger], disabled: item.disabled })\">\n          <slot name=\"leading\" :item=\"item\" :index=\"index\" :open=\"open\">\n            <UIcon v-if=\"item.icon\" :name=\"item.icon\" :class=\"ui.leadingIcon({ class: [props.ui?.leadingIcon, item?.ui?.leadingIcon] })\" />\n          </slot>\n\n          <span v-if=\"get(item, props.labelKey) || !!slots.default\" :class=\"ui.label({ class: [props.ui?.label, item.ui?.label] })\">\n            <slot :item=\"item\" :index=\"index\" :open=\"open\">{{ get(item, props.labelKey) }}</slot>\n          </span>\n\n          <slot name=\"trailing\" :item=\"item\" :index=\"index\" :open=\"open\">\n            <UIcon :name=\"item.trailingIcon || trailingIcon || appConfig.ui.icons.chevronDown\" :class=\"ui.trailingIcon({ class: [props.ui?.trailingIcon, item.ui?.trailingIcon] })\" />\n          </slot>\n        </AccordionTrigger>\n      </AccordionHeader>\n\n      <AccordionContent v-if=\"item.content || !!slots.content || item.slot && !!slots[item.slot] || !!slots.body || item.slot && !!slots[`${item.slot}-body`]\" :class=\"ui.content({ class: [props.ui?.content, item.ui?.content] })\">\n        <slot :name=\"item.slot || 'content'\" :item=\"item\" :index=\"index\" :open=\"open\">\n          <div :class=\"ui.body({ class: [props.ui?.body, item.ui?.body] })\">\n            <slot :name=\"item.slot ? `${item.slot}-body` : 'body'\" :item=\"item\" :index=\"index\" :open=\"open\">\n              {{ item.content }}\n            </slot>\n          </div>\n        </slot>\n      </AccordionContent>\n    </AccordionItem>\n  </AccordionRoot>\n</template>\n","<template>\n  <PageContainer>\n    <PageHeader :title=\"pageTitle\" />\n\n    <PageBody class=\"flex flex-col items-stretch grow space-y-8\">\n      <div\n        v-if=\"(!productDataList && isSharingMode) || isCreatingAffiliationLinks\"\n        class=\"flex flex-col items-center justify-center self-stretch gap-4 py-10\"\n      >\n        <UIcon\n          class=\"w-10 h-10 animate-spin\"\n          name=\"i-heroicons-arrow-path-20-solid\"\n        />\n        <span\n          class=\"text-gray-400 dark:text-gray-700 text-sm\"\n          v-text=\"creatingAffiliationLinkState || $t('purchase_link.failed_create_link')\"\n        />\n      </div>\n\n      <UCard\n        v-else-if=\"!productDataList\"\n        :ui=\"{ body: 'space-y-4', footer: 'flex justify-end' }\"\n      >\n        <UFormField :label=\"$t('purchase_link.destination')\">\n          <USelect v-model=\"destinationSetting\" :items=\"destinationSettings\" option-attribute=\"name\" />\n        </UFormField>\n\n        <UFormField\n          v-if=\"isUsingCustomDestination\"\n          :label=\"$t('purchase_link.custom_page_url')\"\n          :required=\"true\"\n        >\n          <UInput\n            v-model=\"customDestinationURLInput\"\n            class=\"font-mono\"\n            placeholder=\"https://3ook.com/store?tag=blockchain\"\n            name=\"custom_destination_url\"\n          />\n        </UFormField>\n\n        <UFormField\n          v-else\n          :label=\"$t('purchase_link.product_ids')\"\n          :error=\"productIdError\"\n          :required=\"true\"\n        >\n          <UTextarea\n            v-model=\"productIdInputModel\"\n            class=\"font-mono\"\n            placeholder=\"0x53c7243b94b3c4a4827816f00d72394ddfb974c4\\n0x146736dd2ccb1dbdf266130a117609e00ad566b1\"\n            :autoresize=\"true\"\n            name=\"product_id\"\n          />\n        </UFormField>\n\n        <UFormField\n          :label=\"$t('purchase_link.channel_ids')\"\n          :hint=\"$t('purchase_link.optional')\"\n          :error=\"customChannelInputError\"\n          :ui=\"{ help: 'flex items-center gap-2' }\"\n        >\n          <div class=\"flex gap-2\">\n            <UInput\n              v-model=\"customChannelInput\"\n              class=\"grow font-mono\"\n              :placeholder=\"$t('purchase_link.channel_ids_placeholder')\"\n              name=\"channel_ids\"\n            />\n            <UButton\n              v-show=\"!customChannelInput && userLikerInfo\"\n              class=\"relative\"\n              :label=\"$t('purchase_link.prefill_from_account')\"\n              color=\"neutral\"\n              variant=\"outline\"\n              size=\"xs\"\n              @click=\"prefillChannelIdIfPossible\"\n            />\n          </div>\n\n          <template #help>\n            <USwitch v-model=\"isIncludeDefaultChannels\" :disabled=\"!customChannelInput\" />\n            <span v-text=\"$t('purchase_link.include_default_channels')\" />\n          </template>\n        </UFormField>\n\n        <UAccordion\n          color=\"neutral\"\n          variant=\"soft\"\n          size=\"md\"\n          :items=\"[{\n            label: $t('purchase_link.query_string_optional'),\n            defaultOpen: true,\n            slot: 'body'\n          }]\"\n          :ui=\"{ content: 'p-0' }\"\n        >\n          <template #body>\n            <UCard :ui=\"{ body: 'space-y-4' }\">\n              <div class=\"relative flex max-md:flex-col flex-wrap gap-4\">\n                <UFormField class=\"flex-1\" :label=\"$t('purchase_link.utm_campaign')\">\n                  <UInput\n                    v-model=\"utmCampaignInput\"\n                    class=\"font-mono\"\n                    name=\"utm_campaign\"\n                    :placeholder=\"`e.g. ${utmCampaignDefault}`\"\n                  />\n                </UFormField>\n                <UFormField class=\"flex-1\" :label=\"$t('purchase_link.utm_source')\">\n                  <UInput\n                    v-model=\"utmSourceInput\"\n                    class=\"font-mono\"\n                    name=\"utm_source\"\n                    :placeholder=\"`e.g. ${utmSourceDefault}`\"\n                  />\n                </UFormField>\n                <UFormField class=\"flex-1\" :label=\"$t('purchase_link.utm_medium')\">\n                  <UInput\n                    v-model=\"utmMediumInput\"\n                    class=\"font-mono\"\n                    name=\"utm_medium\"\n                    :placeholder=\"`e.g. ${utmMediumDefault}`\"\n                  />\n                </UFormField>\n              </div>\n\n              <UFormField :label=\"$t('purchase_link.additional_query_string')\">\n                <UInput\n                  v-model=\"additionalQueryStringInput\"\n                  class=\"font-mono\"\n                  :placeholder=\"additionalQueryStringInputPlaceholder\"\n                  name=\"query_params\"\n                />\n              </UFormField>\n\n              <div class=\"flex items-center gap-2\">\n                <USwitch v-model=\"shouldPrefixChannelIdForUTMCampaign\" />\n                <span v-text=\"$t('purchase_link.prefix_channel_id')\" />\n              </div>\n            </UCard>\n          </template>\n        </UAccordion>\n\n        <template #footer>\n          <UButton\n            :label=\"$t('purchase_link.generate')\"\n            size=\"lg\"\n            :disabled=\"!canCreateAffiliationLink\"\n            @click=\"createAffiliationLink\"\n          />\n        </template>\n      </UCard>\n\n      <template v-else>\n        <header v-if=\"!isSharingMode\">\n          <UButton\n            icon=\"i-heroicons-arrow-uturn-left\"\n            :label=\"$t('purchase_link.back_to_config')\"\n            variant=\"soft\"\n            @click=\"productDataList = undefined\"\n          />\n        </header>\n\n        <UCard v-if=\"hasMoreThanOneChannel && productTableRows.length\" :ui=\"{ body: 'p-0' }\">\n          <template #header>\n            <h3 class=\"text-lg font-bold\" v-text=\"$t('purchase_link.product_list')\" />\n          </template>\n\n          <UTable\n            :columns=\"[\n              { accessorKey: 'name', header: $t('table.name') },\n              { accessorKey: 'editionSelect', header: $t('table.selected_edition') }\n            ]\"\n            :data=\"productTableRows\"\n          >\n            <template #name-cell=\"{ row }\">\n              <span v-text=\"row.original.name\" />\n            </template>\n            <template #editionSelect-cell=\"{ row }\">\n              <USelect\n                v-if=\"row.original.editionOptions.length\"\n                class=\"min-w-[200px]\"\n                :model-value=\"productEditionSelectModelValue[row.original.id] || 0\"\n                :items=\"row.original.editionOptions\"\n                @update:model-value=\"productEditionSelectModelValue[row.original.id] = $event\"\n              />\n            </template>\n          </UTable>\n        </UCard>\n\n        <UCard\n          v-if=\"!isSharingMode && commonQueryStringTableRows.length\"\n          :ui=\"{ body: 'p-0' }\"\n        >\n          <template #header>\n            <h3 class=\"text-lg font-bold\" v-text=\"$t('purchase_link.common_query_string')\" />\n          </template>\n\n          <UTable\n            :columns=\"[\n              { accessorKey: 'key', header: $t('table.key') },\n              { accessorKey: 'value', header: $t('table.value') }\n            ]\"\n            :data=\"commonQueryStringTableRows\"\n            :ui=\"{ td: 'font-mono' }\"\n          />\n        </UCard>\n\n        <UCard\n          :ui=\"{\n            header: 'flex justify-between items-center gap-4',\n            body: hasMoreThanOneChannel ? 'space-y-8' : 'space-y-8 p-0'\n          }\"\n        >\n          <template v-if=\"hasMoreThanOneChannel\" #header>\n            <h2\n              class=\"text-lg font-bold\"\n              v-text=\"$t('purchase_link.affiliation_links')\"\n            />\n\n            <UDropdownMenu\n              :items=\"[\n                [\n                  {\n                    label: $t('purchase_link.print_all_qr'),\n                    icon: 'i-heroicons-qr-code',\n                    click: printAllQRCodes,\n                  },\n                  {\n                    label: $t('purchase_link.download_qr_codes'),\n                    icon: 'i-heroicons-arrow-down-on-square-stack',\n                    click: downloadAllQRCodes,\n                  },\n                  {\n                    label: $t('purchase_link.download_all_links'),\n                    icon: 'i-heroicons-arrow-down-on-square-stack',\n                    click: downloadAllPurchaseLinks,\n                  },\n                  {\n                    label: $t('purchase_link.shorten_all_links'),\n                    icon: 'i-heroicons-sparkles',\n                    click: shortenAllLinks,\n                  },\n                ]\n              ]\"\n              :popper=\"{ placement: 'top-end' }\"\n            >\n              <UButton\n                icon=\"i-heroicons-ellipsis-horizontal-20-solid\"\n                color=\"neutral\"\n                variant=\"soft\"\n              />\n            </UDropdownMenu>\n          </template>\n\n          <UCard\n            v-for=\"channel in allChannelTableRows\"\n            :key=\"channel.id\"\n            :class=\"['overflow-hidden', hasMoreThanOneChannel ? '' : 'ring-0 shadow-none']\"\n            :ui=\"{\n              header: 'flex justify-between items-center gap-4',\n              body: 'p-0'\n            }\"\n          >\n            <template #header>\n              <h3 class=\"flex items-center gap-2 font-bold\">\n                <span\n                  :class=\"hasMoreThanOneChannel ? 'text-md' : 'text-lg'\"\n                  v-text=\"channel.name\"\n                />\n                <span\n                  :class=\"[\n                    hasMoreThanOneChannel ? 'text-xs' : 'text-sm',\n                    'text-gray-400 dark:text-gray-700',\n                    'font-mono',\n                  ]\"\n                  v-text=\"channel.id\"\n                />\n              </h3>\n\n              <UDropdownMenu\n                :items=\"[\n                  [\n                    {\n                      label: $t('purchase_link.print_qr_codes'),\n                      icon: 'i-heroicons-qr-code',\n                      click: printQRCodesByChannelId(channel.id),\n                    },\n                    {\n                      label: $t('purchase_link.download_qr_codes'),\n                      icon: 'i-heroicons-arrow-down-on-square-stack',\n                      click: downloadQRCodesByChannelId(channel.id),\n                    },\n                    {\n                      label: $t('purchase_link.download_links'),\n                      icon: 'i-heroicons-arrow-down-on-square-stack',\n                      click: downloadPurchaseLinksByChannelId(channel.id),\n                    },\n                    {\n                      label: $t('purchase_link.shorten_links'),\n                      icon: 'i-heroicons-sparkles',\n                      click: shortenLinksByChannelId(channel.id),\n                    },\n                    {\n                      label: $t('purchase_link.share_table'),\n                      icon: 'i-heroicons-document-duplicate',\n                      click: shareTableLinkByChannelId(channel.id),\n                    },\n                  ]\n                ]\"\n                :popper=\"{ placement: 'top-end' }\"\n              >\n                <UButton\n                  icon=\"i-heroicons-ellipsis-horizontal-20-solid\"\n                  color=\"neutral\"\n                  size=\"sm\"\n                  variant=\"soft\"\n                />\n              </UDropdownMenu>\n            </template>\n\n            <UTable\n              :columns=\"linkTableColumns\"\n              :data=\"linkTableRowsMapByChannel.get(channel.id)\"\n            >\n              <template #productId-cell=\"{ row }\">\n                <div v-text=\"row.original.productName\" />\n              </template>\n              <template v-if=\"!hasMoreThanOneChannel\" #selectedEditionLabel-cell=\"{ row }\">\n                <USelect\n                  v-if=\"productEditionOptionsMap?.[row.original.productId]?.length\"\n                  class=\"min-w-[200px]\"\n                  :model-value=\"productEditionSelectModelValue[row.original.productId] || 0\"\n                  :items=\"productEditionOptionsMap?.[row.original.productId] || []\"\n                  @update:model-value=\"productEditionSelectModelValue[row.original.productId] = $event\"\n                />\n              </template>\n              <template #utmCampaign-cell=\"{ row }\">\n                <UKbd class=\"font-mono\" :value=\"row.original.utmCampaign\" />\n              </template>\n              <template #link-cell=\"{ row }\">\n                <div class=\"flex items-center gap-2\">\n                  <UButton\n                    icon=\"i-heroicons-qr-code\"\n                    variant=\"outline\"\n                    size=\"xs\"\n                    @click=\"selectedPurchaseLink = row.original\"\n                  />\n                  <UButton\n                    icon=\"i-heroicons-document-duplicate\"\n                    variant=\"outline\"\n                    size=\"xs\"\n                    @click=\"copyLink(row.original.url || '')\"\n                  />\n                  <UButton\n                    class=\"font-mono break-all\"\n                    :label=\"row.original.url\"\n                    :to=\"row.original.url\"\n                    color=\"neutral\"\n                    variant=\"outline\"\n                    size=\"xs\"\n                    target=\"_blank\"\n                  />\n                </div>\n              </template>\n            </UTable>\n          </UCard>\n        </UCard>\n\n        <UModal v-model:open=\"isOpenQRCodeModal\">\n          <template #content>\n            <QRCodeGenerator\n              v-if=\"selectedPurchaseLink\"\n              :data=\"selectedPurchaseLink.qrCodeUrl\"\n              :file-name=\"getQRCodeFilename(selectedPurchaseLink)\"\n              :width=\"500\"\n              :height=\"500\"\n            >\n              <template #header>\n                <h3 class=\"font-bold font-mono\">\n                  {{ $t('purchase_link.download_qr_modal') }}\n                </h3>\n                <UButton\n                  icon=\"i-heroicons-x-mark\"\n                  color=\"neutral\"\n                  variant=\"ghost\"\n                  @click=\"isOpenQRCodeModal = false\"\n                />\n              </template>\n            </QRCodeGenerator>\n          </template>\n        </UModal>\n      </template>\n    </PageBody>\n  </PageContainer>\n</template>\n\n<script setup lang=\"ts\">\nimport { AFFILIATION_CHANNEL_DEFAULT, AFFILIATION_CHANNELS } from '~/constant'\nimport type { ProductData } from '~/types'\n\nconst { LIKE_CO_API, SITE_URL } = useRuntimeConfig().public\nconst likerStore = useLikerStore()\nconst stripeStore = useStripeStore()\nconst userStore = useUserStore()\nconst { userLikerInfo } = storeToRefs(userStore)\nconst route = useRoute()\nconst localeRoute = useLocaleRoute()\nconst toast = useToast()\nconst { t: $t } = useI18n()\n\nconst isSharingMode = computed({\n  get: () => route.query.share === '1',\n  set: (value) => {\n    navigateTo(localeRoute({\n      query: {\n        ...route.query,\n        share: value ? '1' : undefined\n      }\n    }), { replace: true })\n  }\n})\n\nconst pageTitle = computed(() => {\n  return isSharingMode.value ? $t('purchase_link.sharing_mode_title') : $t('purchase_link.generator_mode_title')\n})\n\nuseSeoMeta({\n  title: () => pageTitle.value,\n  ogTitle: () => pageTitle.value\n})\n\nconst productIdInputModelValue = ref('')\nconst productIdInputModel = computed<string>({\n  get: () => {\n    if (productIdInputModelValue.value) {\n      return productIdInputModelValue.value\n    }\n    const productIdQs = route.query.product_id\n    if (productIdQs) {\n      if (Array.isArray(productIdQs)) {\n        return productIdQs.join('\\n')\n      }\n      return productIdQs\n    }\n    return ''\n  },\n  set: (value: string) => {\n    productIdInputModelValue.value = value\n  }\n})\n\nconst productIdInputs = computed(() => {\n  return productIdInputModel.value.split('\\n')\n    .map(input => input.trim())\n    .filter(Boolean)\n})\nconst productIdInput = computed(() => {\n  return productIdInputs.value[0] || ''\n})\n\nconst productIds = computed(() => {\n  return productIdInputs.value.map((productIdInput: string) => {\n    let input: string | undefined = productIdInput.trim()\n\n    if (input.startsWith('http')) {\n      const url = new URL(input)\n      input = url.pathname.split('/').pop()\n    }\n\n    if (input?.startsWith('0x')) {\n      return input\n    }\n\n    return ''\n  }).filter(Boolean)\n})\nconst productId = computed(() => {\n  return productIds.value[0] || ''\n})\n\nfunction constructUTMQueryString (input: {\n  utmCampaign?: string,\n  utmSource?: string,\n  utmMedium?: string\n} = {}) {\n  const searchParams = new URLSearchParams()\n  if (input.utmCampaign) {\n    searchParams.set('utm_campaign', input.utmCampaign)\n  }\n  if (input.utmSource) {\n    searchParams.set('utm_source', input.utmSource)\n  }\n  if (input.utmMedium) {\n    searchParams.set('utm_medium', input.utmMedium)\n  }\n  return searchParams.toString().replace('?', '')\n}\n\nconst utmCampaignInput = ref('')\nconst utmCampaignDefault = 'bookpress'\nconst shouldPrefixChannelIdForUTMCampaign = ref(true)\n\nconst utmMediumInput = ref('')\nconst utmMediumDefault = 'affiliate'\n\nconst utmSourceInput = ref('')\nconst utmSourceDefault = computed(() => {\n  const isUseLikerLandLink = destinationSetting.value === 'liker_land'\n  if (isUsingCustomDestination.value) {\n    return 'custom-link'\n  }\n  return isUseLikerLandLink ? 'likerland' : 'stripe'\n})\n\nconst linkQueryInputModel = ref('')\nconst additionalQueryStringInput = computed({\n  get: () => {\n    if (linkQueryInputModel.value) {\n      return linkQueryInputModel.value\n    }\n    return constructUTMQueryString({\n      utmCampaign: utmCampaignInput.value,\n      utmSource: utmSourceInput.value,\n      utmMedium: utmMediumInput.value\n    })\n  },\n  set: (value) => {\n    linkQueryInputModel.value = value\n  }\n})\n\nconst additionalQueryStringInputPlaceholder = computed(() => {\n  return constructUTMQueryString({\n    utmCampaign: utmCampaignDefault,\n    utmSource: utmSourceDefault.value,\n    utmMedium: utmMediumDefault\n  })\n})\n\nconst linkQueryDefault = computed(() => {\n  return {\n    utm_medium: utmMediumDefault,\n    utm_source: utmSourceDefault.value,\n    utm_campaign: utmCampaignDefault\n  }\n})\nconst mergedQueryStringObject = computed<Record<string, string>>(() => {\n  const mergedObject = { ...linkQueryDefault.value }\n\n  const input = productIdInput.value?.trim() || ''\n  if (input.startsWith('http')) {\n    const { searchParams } = new URL(input)\n    searchParams.delete('from')\n    Object.assign(mergedObject, Object.fromEntries(searchParams))\n  }\n\n  if (additionalQueryStringInput.value) {\n    Object.assign(mergedObject, Object.fromEntries(new URLSearchParams(additionalQueryStringInput.value)))\n  }\n\n  return mergedObject\n})\nconst commonQueryStringTableRows = computed(() => {\n  return Object.entries(mergedQueryStringObject.value)\n    .filter(([key]) => !(key === 'utm_campaign' && shouldPrefixChannelIdForUTMCampaign.value))\n    .map(([key, value]) => ({\n      key,\n      value\n    }))\n})\n\nconst destinationSettings = computed(() => [\n  {\n    name: $t('purchase_link.liker_land_product'),\n    value: 'liker_land'\n  },\n  {\n    name: $t('purchase_link.stripe_checkout'),\n    value: 'direct'\n  },\n  {\n    name: $t('purchase_link.custom_page'),\n    value: 'custom'\n  }\n])\nconst destinationSetting = ref(destinationSettings.value[0]?.value || 'liker_land')\nconst isUsingCustomDestination = computed(() => destinationSetting.value === 'custom')\nconst customDestinationURLInput = ref(route.query.custom_link as string || '')\n\nconst customChannelInputValue = ref('')\nconst customChannelInput = computed<string>({\n  get: () => {\n    if (customChannelInputValue.value) {\n      return customChannelInputValue.value\n    }\n    const channelIdQs = route.query.from\n    if (channelIdQs) {\n      if (Array.isArray(channelIdQs)) {\n        return channelIdQs.join(',')\n      }\n      return channelIdQs\n    }\n    return ''\n  },\n  set: (value: string) => {\n    customChannelInputValue.value = value\n  }\n})\nconst customChannels = computed(\n  () => customChannelInput.value\n    .split(',')\n    .map(channelId => channelId.trim())\n    .filter(Boolean)\n    .map((channelId) => {\n      const channelInfo = likerStore.getChannelInfoById(channelId)\n      return {\n        id: channelId,\n        name: channelInfo?.displayName || channelId\n      }\n    })\n)\nconst shouldIncludeDefaultChannels = ref(false)\nconst isIncludeDefaultChannels = computed({\n  get: () => !customChannels.value.length || shouldIncludeDefaultChannels.value,\n  set: (value) => {\n    shouldIncludeDefaultChannels.value = value\n  }\n})\nconst allChannelTableRows = computed(() => {\n  return customChannels.value.concat(isIncludeDefaultChannels.value ? AFFILIATION_CHANNELS : [])\n})\nconst hasMoreThanOneChannel = computed(() => allChannelTableRows.value.length > 1)\n\nconst productIdError = ref('')\nwatch(productId, () => {\n  productIdError.value = ''\n})\nconst customChannelInputError = ref('')\nwatch(customChannelInput, () => {\n  customChannelInputError.value = ''\n})\n\nconst creatingAffiliationLinkState = ref('')\nconst isCreatingAffiliationLinks = computed(() => !!creatingAffiliationLinkState.value)\nconst canCreateAffiliationLink = computed(() => {\n  if (isUsingCustomDestination.value) {\n    return !!customDestinationURLInput.value\n  }\n  return !!productId.value && !isCreatingAffiliationLinks.value\n})\n\nconst productDataList = ref<{ id: string, data: ProductData }[] | undefined>(undefined)\n\nconst productEditionOptionsMap = computed(() => {\n  const optionsMap: Record<string, { label: string, value: number }[]> = {}\n  if (productDataList.value) {\n    for (const { id, data } of productDataList.value) {\n      if (data.prices) {\n        optionsMap[id] = data.prices.map((price) => {\n          let name = ''\n          if (typeof price.name === 'object') {\n            name = price.name?.zh || price.name?.en || ''\n          } else {\n            name = price.name || ''\n          }\n          return {\n            label: [name, `$${price.price}`].filter(Boolean).join(' - '),\n            value: price.index || 0\n          }\n        })\n      } else {\n        optionsMap[id] = []\n      }\n    }\n  }\n  return optionsMap\n})\nconst productEditionSelectModelValue = ref<Record<string, number>>({})\n\nconst productTableRows = computed(() => {\n  return productDataList.value?.map(({ id, data }) => ({\n    id,\n    name: typeof data.name === 'object' ? (data.name?.zh || data.name?.en) : data.name,\n    editionOptions: productEditionOptionsMap.value[id] || []\n  })) || []\n})\n\nconst linkTableColumns = computed(() => {\n  const cols: { accessorKey: string, header: string }[] = []\n  if (!isUsingCustomDestination.value) {\n    cols.push({\n      accessorKey: 'productId',\n      header: $t('common.title')\n    },\n    {\n      accessorKey: 'selectedEditionLabel',\n      header: $t('table.selected_edition')\n    })\n  }\n\n  if (!isSharingMode.value) {\n    cols.push({\n      accessorKey: 'utmCampaign',\n      header: $t('purchase_link.utm_campaign')\n    })\n  }\n  cols.push({\n    accessorKey: 'link',\n    header: $t('common.link')\n  })\n  return cols\n})\n\ninterface AffiliationLink {\n  productId: string,\n  productName: string,\n  selectedEditionLabel: string,\n  selectedEditionIndex: number,\n  channelId: string,\n  channelName: string,\n  utmCampaign: string,\n  utmMedium: string,\n  utmSource: string,\n  url: string,\n  qrCodeUrl: string,\n}\n\nconst linkTableRowsMapByChannel = computed(() => {\n  const map = new Map<string, AffiliationLink[]>()\n\n  const channels = [...new Map(allChannelTableRows.value.map(c => [c.id, c])).values()]\n\n  const items = isUsingCustomDestination.value\n    ? [{ id: 'custom', data: { name: 'Custom' } }]\n    : productDataList.value || []\n\n  items.forEach(({ id, data }) => {\n    channels.forEach((channel) => {\n      if (!map.has(channel.id)) {\n        map.set(channel.id, [])\n      }\n      const utmCampaignInput = mergedQueryStringObject.value.utm_campaign\n      let utmCampaign = utmCampaignInput || linkQueryDefault.value.utm_campaign || ''\n      if (shouldPrefixChannelIdForUTMCampaign.value && channel.id !== AFFILIATION_CHANNEL_DEFAULT) {\n        utmCampaign = `${convertChannelIdToLikerId(channel.id)}_${utmCampaign}`\n      }\n\n      const priceIndex = productEditionSelectModelValue.value[id] || 0\n      const urlConfig: {\n        classId: string\n        channel: string\n        priceIndex: number\n        customLink?: string\n        isUseLikerLandLink: boolean\n        query: Record<string, string>\n        isForQRCode?: boolean\n      } = {\n        classId: id || '',\n        channel: channel.id,\n        priceIndex,\n        customLink: isUsingCustomDestination.value ? customDestinationURLInput.value : undefined,\n        isUseLikerLandLink: destinationSetting.value === 'liker_land',\n        query: {\n          utm_campaign: utmCampaign,\n          ...mergedQueryStringObject.value\n        }\n      }\n\n      map.get(channel.id)?.push({\n        productId: id,\n        productName: (typeof data.name === 'object' ? (data.name?.zh || data.name?.en) : data.name) || '',\n        selectedEditionIndex: priceIndex,\n        selectedEditionLabel: productEditionOptionsMap.value?.[id]?.[priceIndex]?.label || '',\n        channelId: channel.id,\n        channelName: channel.name,\n        utmCampaign,\n        utmMedium: mergedQueryStringObject.value.utm_medium || '',\n        utmSource: mergedQueryStringObject.value.utm_source || '',\n        url: getPurchaseLink(urlConfig),\n        qrCodeUrl: getPurchaseLink({\n          ...urlConfig,\n          isForQRCode: mergedQueryStringObject.value.utm_source === linkQueryDefault.value.utm_source\n        })\n      })\n    })\n  })\n\n  return map\n})\n\nconst linkTableRows = computed(() =>\n  allChannelTableRows.value.flatMap(channel => linkTableRowsMapByChannel.value.get(channel.id) || [])\n)\n\nconst getLinkTableRowsMapByChannel = (channelId: string) => linkTableRowsMapByChannel.value.get(channelId) || []\n\nconst selectedPurchaseLink = ref<AffiliationLink | undefined>(undefined)\nconst isOpenQRCodeModal = computed({\n  get: () => !!selectedPurchaseLink.value,\n  set: (value) => {\n    if (!value) {\n      selectedPurchaseLink.value = undefined\n    }\n  }\n})\n\nasync function fetchProductData (id: string) {\n  const classData = await $fetch<ProductData>(`${LIKE_CO_API}/likernft/book/store/${id}`)\n  return {\n    id,\n    data: classData\n  }\n}\n\nasync function createAffiliationLink () {\n  productIdError.value = ''\n  productDataList.value = undefined\n  productEditionSelectModelValue.value = {}\n  customChannelInputError.value = ''\n  creatingAffiliationLinkState.value = ''\n\n  if (!canCreateAffiliationLink.value) {\n    return\n  }\n\n  try {\n    // Validate custom channels\n    if (customChannels.value.length) {\n      creatingAffiliationLinkState.value = $t('purchase_link.validating_channels')\n      const invalidChannel = customChannels.value.find(channel => !validateChannelId(channel.id))\n      if (invalidChannel) {\n        customChannelInputError.value = $t('purchase_link.invalid_channel') + ` \"${invalidChannel.id}\", please enter a valid channel ID starting with \"@\"`\n        return\n      }\n\n      try {\n        await Promise.all(customChannels.value.map(async (channel) => {\n          const channelInfo = await likerStore.lazyFetchChannelInfoById(channel.id)\n          if (!channelInfo) {\n            throw new Error($t('purchase_link.channel_no_liker_id'))\n          }\n\n          const stripeConnectStatus = await stripeStore.fetchStripeConnectStatusByWallet(channelInfo.evmWallet)\n          if (!stripeConnectStatus?.hasAccount) {\n            throw new Error($t('purchase_link.channel_no_stripe'))\n          }\n          if (!stripeConnectStatus?.isReady) {\n            throw new Error($t('purchase_link.channel_stripe_incomplete'))\n          }\n        }))\n      } catch (error) {\n        customChannelInputError.value = (error as Error).message\n        isSharingMode.value = false\n        return\n      }\n    }\n\n    creatingAffiliationLinkState.value = $t('purchase_link.fetching_product_data')\n    try {\n      const dataList = await Promise.all(productIds.value.map(id => fetchProductData(id)))\n      productDataList.value = dataList\n    } catch (error) {\n      productIdError.value = (error as Error).message\n      isSharingMode.value = false\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error)\n    toast.add({\n      icon: 'i-heroicons-exclamation-circle',\n      title: $t('purchase_link.failed_create_link'),\n      duration: 0,\n      color: 'error'\n    })\n    isSharingMode.value = false\n  } finally {\n    creatingAffiliationLinkState.value = ''\n  }\n}\n\nfunction getQRCodeFilename (link: AffiliationLink) {\n  const filenameParts: string[] = []\n  if (isUsingCustomDestination.value) {\n    const url = new URL(customDestinationURLInput.value)\n    filenameParts.push(url.hostname)\n  } else {\n    filenameParts.push(`${link.productName || link.productId}`)\n  }\n  if (link.channelId) {\n    filenameParts.push(`channel-${link.channelId}`)\n  }\n  return filenameParts.join('_')\n}\n\nasync function copyLink (text = '') {\n  await navigator.clipboard.writeText(text)\n  toast.add({\n    icon: 'i-heroicons-check-circle',\n    title: $t('purchase_link.copied_to_clipboard'),\n    duration: 2000,\n    color: 'success'\n  })\n}\n\nfunction downloadPurchaseLinksByTableRows (rows: AffiliationLink[] = [], channelId?: string) {\n  downloadFile({\n    data: rows.map(({\n\n      selectedEditionIndex,\n      selectedEditionLabel, ...link\n    }) => ({\n      edition: `${selectedEditionIndex + 1}. ${selectedEditionLabel}`,\n      ...link\n    })),\n    fileName: ['affiliation_links', channelId, Date.now()].filter(Boolean).join('_').concat('.csv'),\n    fileType: 'csv'\n  })\n}\n\nfunction downloadAllPurchaseLinks () {\n  downloadPurchaseLinksByTableRows(linkTableRows.value)\n}\n\nfunction downloadPurchaseLinksByChannelId (channelId: string) {\n  return () => downloadPurchaseLinksByTableRows(getLinkTableRowsMapByChannel(channelId))\n}\n\nfunction printQRCodesByTableRows (rows: AffiliationLink[] = []) {\n  try {\n    sessionStorage.setItem(\n      'nft_book_press_batch_qrcode',\n      convertArrayOfObjectsToCSV(rows.map(({ channelId, qrCodeUrl, ...link }) => ({ key: channelId, ...link, url: qrCodeUrl })))\n    )\n    window.open('/batch-qrcode?print=1', 'batch_qrcode', 'popup,menubar=no,location=no,status=no')\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error)\n    toast.add({\n      icon: 'i-heroicons-exclamation-circle',\n      title: $t('purchase_link.failed_print_qr'),\n      duration: 0,\n      color: 'error'\n    })\n  }\n}\n\nfunction printAllQRCodes () {\n  printQRCodesByTableRows(linkTableRows.value)\n}\n\nfunction printQRCodesByChannelId (channelId: string) {\n  return () => printQRCodesByTableRows(getLinkTableRowsMapByChannel(channelId))\n}\n\nfunction shortenLinksByTableRows (rows: AffiliationLink[] = []) {\n  try {\n    sessionStorage.setItem(\n      'nft_book_press_batch_shorten_url',\n      convertArrayOfObjectsToCSV(rows.map(({ channelId, ...link }) => ({ key: channelId, ...link })))\n    )\n    navigateTo(localeRoute({ name: 'batch-short-links', query: { print: 1 } }))\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error)\n    toast.add({\n      icon: 'i-heroicons-exclamation-circle',\n      title: $t('purchase_link.failed_shorten_links'),\n      duration: 0,\n      color: 'error'\n    })\n  }\n}\n\nfunction shortenAllLinks () {\n  shortenLinksByTableRows(linkTableRows.value)\n}\n\nfunction shortenLinksByChannelId (channelId: string) {\n  return () => shortenLinksByTableRows(getLinkTableRowsMapByChannel(channelId))\n}\n\nfunction shareTableLinkByChannelId (channelId: string) {\n  return () => {\n    const url = new URL(`${SITE_URL}/affiliation-link`)\n    url.searchParams.set('from', channelId)\n    url.searchParams.set('share', '1')\n    url.searchParams.set('nav', '0')\n    const tableRows = getLinkTableRowsMapByChannel(channelId)\n    tableRows.forEach((row) => {\n      url.searchParams.append('product_id', row.productId)\n    })\n    copyLink(url.toString())\n  }\n}\n\nasync function downloadQRCodesByTableRows (rows: AffiliationLink[] = [], channelId?: string) {\n  const items = rows.map(link => ({\n    url: link.qrCodeUrl,\n    filename: getQRCodeFilename(link)\n  }))\n  await downloadQRCodes(items, {\n    zipFilename: ['affiliation_links_qrcodes', channelId, Date.now()].filter(Boolean).join('_')\n  })\n}\n\nasync function downloadAllQRCodes () {\n  await downloadQRCodesByTableRows(linkTableRows.value)\n}\n\nfunction downloadQRCodesByChannelId (channelId: string) {\n  return () => downloadQRCodesByTableRows(getLinkTableRowsMapByChannel(channelId), channelId)\n}\n\nfunction prefillChannelIdIfPossible () {\n  if (!customChannelInput.value && userLikerInfo.value) {\n    customChannelInput.value = convertLikerIdToChannelId(userLikerInfo.value.user)\n  }\n}\n\nonMounted(() => {\n  if (isSharingMode.value) {\n    nextTick(() => {\n      createAffiliationLink()\n    })\n  }\n\n  prefillChannelIdIfPossible()\n})\n\nwatch(isSharingMode, (value) => {\n  if (value) {\n    createAffiliationLink()\n  } else {\n    productDataList.value = undefined\n  }\n})\n\nwatch(userLikerInfo, () => {\n  if (userLikerInfo.value) {\n    prefillChannelIdIfPossible()\n  }\n})\n</script>\n"],"names":["AccordionHeader_vue_vue_type_script_setup_true_lang_default","defineComponent","__props","props","rootContext","injectAccordionRootContext","itemContext","injectAccordionItemContext","useForwardExpose","_ctx","_cache","openBlock","createBlock","unref","Primitive","withCtx","renderSlot","AccordionHeader_default","theme","emits","__emit","slots","_useSlots","appConfig","useAppConfig","rootProps","useForwardPropsEmits","reactivePick","ui","computed","tv","_createBlock","_unref","AccordionRoot","_mergeProps","_openBlock","_createElementBlock","_Fragment","item","index","AccordionItem","_withCtx","open","_createVNode","AccordionHeader","_normalizeClass","AccordionTrigger","_renderSlot","UIcon","get","_createTextVNode","_toDisplayString","AccordionContent","_createElementVNode","utmCampaignDefault","utmMediumDefault","LIKE_CO_API","SITE_URL","useRuntimeConfig","likerStore","useLikerStore","stripeStore","useStripeStore","userStore","useUserStore","userLikerInfo","storeToRefs","route","useRoute","localeRoute","useLocaleRoute","toast","useToast","$t","useI18n","isSharingMode","value","navigateTo","pageTitle","useSeoMeta","productIdInputModelValue","ref","productIdInputModel","productIdQs","productIdInputs","input","productIdInput","productIds","productId","constructUTMQueryString","searchParams","utmCampaignInput","shouldPrefixChannelIdForUTMCampaign","utmMediumInput","utmSourceInput","utmSourceDefault","isUseLikerLandLink","destinationSetting","isUsingCustomDestination","linkQueryInputModel","additionalQueryStringInput","additionalQueryStringInputPlaceholder","linkQueryDefault","mergedQueryStringObject","mergedObject","commonQueryStringTableRows","key","destinationSettings","customDestinationURLInput","customChannelInputValue","customChannelInput","channelIdQs","customChannels","channelId","channelInfo","shouldIncludeDefaultChannels","isIncludeDefaultChannels","allChannelTableRows","AFFILIATION_CHANNELS","hasMoreThanOneChannel","productIdError","watch","customChannelInputError","creatingAffiliationLinkState","isCreatingAffiliationLinks","canCreateAffiliationLink","productDataList","productEditionOptionsMap","optionsMap","id","data","price","name","productEditionSelectModelValue","productTableRows","linkTableColumns","cols","linkTableRowsMapByChannel","map","channels","c","channel","utmCampaign","AFFILIATION_CHANNEL_DEFAULT","convertChannelIdToLikerId","priceIndex","urlConfig","getPurchaseLink","linkTableRows","getLinkTableRowsMapByChannel","selectedPurchaseLink","isOpenQRCodeModal","fetchProductData","classData","createAffiliationLink","invalidChannel","validateChannelId","stripeConnectStatus","error","dataList","getQRCodeFilename","link","filenameParts","url","copyLink","text","downloadPurchaseLinksByTableRows","rows","downloadFile","selectedEditionIndex","selectedEditionLabel","downloadAllPurchaseLinks","downloadPurchaseLinksByChannelId","printQRCodesByTableRows","convertArrayOfObjectsToCSV","qrCodeUrl","printAllQRCodes","printQRCodesByChannelId","shortenLinksByTableRows","shortenAllLinks","shortenLinksByChannelId","shareTableLinkByChannelId","row","downloadQRCodesByTableRows","items","downloadQRCodes","downloadAllQRCodes","downloadQRCodesByChannelId","prefillChannelIdIfPossible","convertLikerIdToChannelId","onMounted","nextTick","_component_PageContainer","_component_PageHeader","_component_PageBody","_hoisted_1","_component_UIcon","_hoisted_8","_component_UButton","$event","_component_UCard","_component_UTable","_component_USelect","_renderList","_hoisted_13","_component_UDropdownMenu","_component_UKbd","_hoisted_17","_component_UModal","_component_QRCodeGenerator","_hoisted_18","_component_UFormField","_component_UInput","_component_UTextarea","_component_USwitch","_hoisted_3","_vShow","_component_UAccordion","_hoisted_5","_hoisted_6"],"mappings":"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","x_google_ignoreList":[1]}